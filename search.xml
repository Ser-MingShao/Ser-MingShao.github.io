<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Gitçš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="/posts/372934289/"/>
      <url>/posts/372934289/</url>
      
        <content type="html"><![CDATA[<div class="tip home"><p>å‰è¨€:å†™çš„ä¸æ˜¯å¾ˆå®Œæ•´,ä½†åŸºæœ¬æ“ä½œå°±è¿™äº›,å¥å¥é‡ç‚¹,å…¨ç¨‹æ— åºŸè¯~</p></div><h2 id="gitæ‹‰å–ä»“åº“"><a class="markdownIt-Anchor" href="#gitæ‹‰å–ä»“åº“"></a> gitæ‹‰å–ä»“åº“</h2><blockquote><ol><li><p>å¤åˆ¶è¿œç¨‹ä»“åº“é“¾æ¥(<span class='p green'>æ³¨æ„æ˜¯HTTPçš„</span>)</p><p><img src="https://unpkg.com/serms-assets/imgs/image-20220719184655736.png" alt="" /></p></li><li><p>éšä¾¿æ‰¾ä¸ªåœ°æ–¹å³é”®Git Bash</p><p><img src="https://unpkg.com/serms-assets/imgs/image-20220719184747747.png" alt="" /></p></li><li><p>è¾“å…¥ git clone (<span class='p green'>è¿™é‡Œå¡«åˆšåˆšå¤åˆ¶çš„HTTPé“¾æ¥</span>),ç„¶ååç­‰å°±å·²ç»æ‹‰å–ä¸‹æ¥äº†</p><p><img src="https://unpkg.com/serms-assets/imgs/image-20220719184843215.png" alt="" /></p><p><img src="https://unpkg.com/serms-assets/imgs/image-20220719184903555.png" alt="" /></p></li></ol></blockquote><h2 id="gitæ¨é€è‡³ä»“åº“"><a class="markdownIt-Anchor" href="#gitæ¨é€è‡³ä»“åº“"></a> gitæ¨é€è‡³ä»“åº“</h2><blockquote><p>åœ¨ä»“åº“ä¸­è¾“å…¥ä¸‹é¢è¿™è¡Œä»£ç å³å¯,å¦‚æœä¸è¡Œ,å°±åˆ†å¼€æ‰§è¡Œ,æœ‰æŠ¥é”™è¯·åœ¨ä¸‹æ–¹ç•™è¨€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add . &amp;&amp; git commit -m &#x27;update&#x27; &amp;&amp; git push origin master</span><br></pre></td></tr></table></figure><p><img src="https://unpkg.com/serms-assets/imgs/image-20220719215427076.png" alt="image-20220719215427076" /></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜¿é‡Œäº‘éƒ¨ç½²é¡¹ç›®</title>
      <link href="/posts/32277b7/"/>
      <url>/posts/32277b7/</url>
      
        <content type="html"><![CDATA[<div class="tip home"><p>å‰è¨€:<br />å­¦æ ¡è¿‘æœŸå®è®­å‘¨åšé¡¹ç›®,æˆ‘æƒ³ç€èƒ½ä¸èƒ½æŠŠé¡¹ç›®ç›´æ¥éƒ¨ç½²åœ¨äº‘ä¸Š,åˆšå¥½é˜¿é‡Œäº‘æœ‰ECSæœåŠ¡å™¨å…è´¹è¯•ç”¨æ´»åŠ¨,ä¸å«–ç™½è¡¥ç¥¨,å› æ­¤è®°å½•æœ¬é¡¹ç›®çš„æ‰€æœ‰éƒ¨ç½²æµç¨‹,ä»ç”³è¯·æœåŠ¡å™¨åˆ°éƒ¨ç½²é¡¹ç›®,å®Œæ•´çš„æµç¨‹<br />æœ¬æ¬¡é‡‡ç”¨çš„æ˜¯ä¸¤å°é˜¿é‡Œäº‘ECSçš„æœåŠ¡å™¨,å› ä¸ºæˆ‘é¡¹ç›®é‡‡ç”¨æ•°æ®åº“æ˜¯ä¸»ä»å¤åˆ¶çš„æ¶æ„,æ‰€ä»¥éœ€è¦ä¸¤å°æœåŠ¡å™¨,åˆšå¥½æˆ‘ä¹Ÿæƒ³æŠŠå‰å°éƒ¨ç½²åˆ°ç¬¬äºŒå°æœåŠ¡å™¨ä¸Šå»,ç¬¬ä¸€å°æœåŠ¡å™¨éƒ¨ç½²ä¸»è¦åå°ä»£ç </p></div><hr /><table><thead><tr><th style="text-align:center">ä¸»åº“æœåŠ¡å™¨</th><th style="text-align:center">ä»åº“æœåŠ¡å™¨</th></tr></thead><tbody><tr><td style="text-align:center">åå°ä»£ç </td><td style="text-align:center">å‰å°ä»£ç </td></tr><tr><td style="text-align:center">mysql5.0ä¸»åº“éƒ¨ç½²</td><td style="text-align:center">mysql5.0ä»åº“éƒ¨ç½²</td></tr><tr><td style="text-align:center">rediséƒ¨ç½²</td><td style="text-align:center">Nginxé…ç½®</td></tr><tr><td style="text-align:center">JDKç¯å¢ƒé…ç½®</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">tomcaté…ç½®</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">Mavenç¯å¢ƒé…ç½®</td><td style="text-align:center"></td></tr></tbody></table><hr /><h2 id="é˜¿é‡Œäº‘æœåŠ¡å™¨ç”³è¯·"><a class="markdownIt-Anchor" href="#é˜¿é‡Œäº‘æœåŠ¡å™¨ç”³è¯·"></a> é˜¿é‡Œäº‘æœåŠ¡å™¨ç”³è¯·</h2><p>é¦–å…ˆå»é˜¿é‡Œäº‘ç”³è¯·ä¸¤å°æœåŠ¡å™¨,å¯å…è´¹ä½¿ç”¨1ä¸ªæœˆ<p class='p red'>å¦‚æœä¸ç”¨äº†è®°å¾—æå‰é€€è®¢</p></p><div class="tabs" id="ecsç”³è¯·"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#ecsç”³è¯·-1">ä¸»åº“SerMsMaster</button></li><li class="tab"><button type="button" data-href="#ecsç”³è¯·-2">ä»åº“SerMsSlave</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="ecsç”³è¯·-1"><p><img src="https://unpkg.com/serms-assets@1.0.29/imgs/image-20220616160142652.png" alt="" /></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="ecsç”³è¯·-2"><p><img src="https://unpkg.com/serms-assets@1.0.29/imgs/image-20220616222532022.png" alt="" /></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><hr /><h2 id="ä¸»åº“é…ç½®"><a class="markdownIt-Anchor" href="#ä¸»åº“é…ç½®"></a> ä¸»åº“é…ç½®</h2><blockquote><p>é€šè¿‡æœ¬åœ°è¿æ¥é˜¿é‡Œäº‘ECSä¸»åº“</p></blockquote><h2 id="ç½‘å¡è®¾ç½®"><a class="markdownIt-Anchor" href="#ç½‘å¡è®¾ç½®"></a> ç½‘å¡è®¾ç½®</h2><blockquote><p>è¿™é‡Œä¸åšä»‹ç»,è‡ªè¡Œç™¾åº¦Linuxé…ç½®ç½‘å¡</p></blockquote><h2 id="å®‰è£…è½¯ä»¶"><a class="markdownIt-Anchor" href="#å®‰è£…è½¯ä»¶"></a> å®‰è£…è½¯ä»¶</h2><h3 id="vimæ–‡æœ¬å·¥å…·"><a class="markdownIt-Anchor" href="#vimæ–‡æœ¬å·¥å…·"></a> vimæ–‡æœ¬å·¥å…·</h3><blockquote><p>yum install vim</p></blockquote><h3 id="å®‰è£…jdk"><a class="markdownIt-Anchor" href="#å®‰è£…jdk"></a> å®‰è£…JDK</h3><blockquote><ol><li><p>å»[oracle][<a href="https://www.oracle.com/java/technologies/downloads/archive/">https://www.oracle.com/java/technologies/downloads/archive/</a>]å®˜ç½‘ä¸‹è½½å¯¹åº”æ“ä½œç³»ç»Ÿçš„JDK</p></li><li><p>æŠŠä¸‹è½½å¥½çš„JDKä¼ å…¥Linux</p></li><li><p>æ‰§è¡Œè§£å‹å‘½ä»¤: tar -zxvf æ”¹æˆä½ è‡ªå·±ä¸Šä¼ çš„åŒ…å -C /usr/local</p><p><img src="https://unpkg.com/serms-assets@1.0.29/imgs/image-20220616164103639.png" alt="" /></p></li><li><p>ä¿®æ”¹ç³»ç»Ÿç¯å¢ƒå˜é‡:</p><ol><li><p>vim /etc/profile</p></li><li><p>æ’å…¥ä»¥ä¸‹ä»£ç ,æ³¨æ„è·¯å¾„ä¿®æ”¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/local/jdk1.8.0_331  (æ³¨æ„è·¯å¾„)</span><br><span class="line">export JRE_HOME=/usr/local/jdk1.8.0_331/jre ((æ³¨æ„è·¯å¾„))</span><br><span class="line">export CLASSPATH=.:$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATH</span><br><span class="line">export PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH</span><br></pre></td></tr></table></figure><p><img src="C:%5CUsers%5C18399%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220616164702404.png" alt="image-20220616164702404" /></p></li><li><p>ä¿®æ”¹å®Œå:wqé€€å‡º</p></li><li><p>æ‰§è¡Œ source /etc/profile åˆ·æ–°ç¯å¢ƒå˜é‡</p></li><li><p>æ‰§è¡Œ java -version æˆ– javac æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</p><p><img src="https://unpkg.com/serms-assets@1.0.29/imgs/image-20220616165121907.png" alt="" /></p><p>çœ‹åˆ°æ˜¾ç¤ºç‰ˆæœ¬å·å³å®‰è£…æˆåŠŸ</p></li></ol></li></ol></blockquote><h3 id="å®‰è£…tomcat"><a class="markdownIt-Anchor" href="#å®‰è£…tomcat"></a> å®‰è£…Tomcat</h3><blockquote><ol><li><p><a href="https://tomcat.apache.org/download-90.cgi">å®˜ç½‘ä¸‹è½½</a>å¯¹åº”ç³»ç»Ÿç‰ˆæœ¬çš„tomcatå®‰è£…åŒ…</p></li><li><p>å¹¶ä¸Šä¼ è‡³Linuxå†…</p></li><li><p>æ‰§è¡Œè§£å‹å‘½ä»¤</p></li><li><p>tar -zxvf apache-tomcat-9.0.62.tar.gz -C /usr/local</p></li><li><p>è¿›å…¥åˆ°tomcatçš„binç›®å½•ä¸‹æ‰§è¡Œ sh <a href="http://startup.sh">startup.sh</a></p></li></ol><p><img src="https://unpkg.com/serms-assets@1.0.29/imgs/image-20220616170832755.png" alt="" /></p><ol start="5"><li>è¿™ä¸ªæ—¶å€™æˆ‘è¿˜éœ€è¦å»é˜¿é‡Œäº‘ECSæ§åˆ¶å°è®¾ç½®ä¸€ä¸‹å®‰å…¨ç»„è§„åˆ™,æŠŠ8080ç«¯å£å¼€æ‰“</li></ol><p><img src="https://unpkg.com/serms-assets@1.0.29/imgs/image-20220616171251694.png" alt="" /></p><ol start="6"><li>å†å»æµè§ˆå™¨è®¿é—® æœåŠ¡å™¨ip+ç«¯å£å·8080 æ¯”å¦‚æˆ‘çš„æ˜¯<code>http://47.99.194.162:8080/</code> (æœ¬äººæ˜¯æŠŠé˜²ç«å¢™ç›´æ¥å…³é—­äº†,æ‰€ä»¥èƒ½è®¿é—®)</li></ol><p><img src="https://unpkg.com/serms-assets@1.0.29/imgs/image-20220616171342487.png" alt="" /></p><ol start="7"><li><p>å¦‚æœè¿˜è®¿é—®ä¸åˆ°,é‚£å°±å¾—æ”¹ä¸€ä¸‹é˜²ç«å¢™çš„è®¾ç½®,è®¾ç½®é˜²ç«å¢™å¼€æ”¾8080ç«¯å£</p></li><li><p>è®¾ç½®é˜²ç«å¢™å¼€æœºå¯åŠ¨:<code>chkconfig firewalld on</code></p></li><li><p>å¼€å¯é˜²ç«å¢™: <code>systemctl start firewalld</code>(æ‰§è¡Œå®Œä¹‹å,å†å»è®¿é—®å°±è®¿é—®ä¸åˆ°äº†,æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¼€å‘8080ç«¯å£)</p></li><li><p>æŸ¥è¯¢8080ç«¯å£æ˜¯å¦å¼€å¯: <code>firewall-cmd --query-port=8080/tcp</code></p><p><img src="https://unpkg.com/serms-assets@1.0.29/imgs/image-20220616172135805.png" alt="" /></p></li><li><p>å¼€å¯8080ç«¯å£</p><ol><li><code>firewall-cmd --zone=public --add-port=80/tcp --permanent</code>ï¼ˆâ€“permanentæ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆï¼‰</li></ol></li><li><p>é‡å¯é˜²ç«å¢™</p><ol><li>firewall-cmd --reload</li></ol></li><li><p>æŸ¥çœ‹8080ç«¯å£æ˜¯å¦å¼€å¯æˆåŠŸ</p><ol><li>firewall-cmd --zone=public --query-port=8080/tcp</li></ol></li><li><p>å½“ç„¶è¿˜å¯ä»¥åˆ é™¤æŒ‡å®šç«¯å£</p><ol><li>firewall-cmd --zone=public --remove-port=ç«¯å£å·/tcp --permanent</li></ol></li><li><p>å†å»åˆ·æ–°ä¸€ä¸‹é¡µé¢,å°±åˆå¯ä»¥è®¿é—®äº†</p><p><img src="https://unpkg.com/serms-assets@1.0.29/imgs/image-20220616172712137.png" alt="" /></p></li><li><p>æŸ¥çœ‹å·²å¼€æ”¾çš„æ‰€æœ‰ç«¯å£</p><ol><li>firewall-cmd --zone=public --list-ports</li></ol></li><li><p>ç´¢æ€§åœ¨è¿™é‡Œä¸€å¹¶å¼€æ”¾3306 / 6379 / 8888 ç«¯å£ åæœŸä¹Ÿä¼šç”¨åˆ°</p><p><img src="https://unpkg.com/serms-assets@1.0.29/imgs/image-20220616174156782.png" alt="" /></p></li><li><p>å…¶ä½™æ“ä½œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åœæ­¢TomcatæœåŠ¡</span><br><span class="line">sh shutdown.sh</span><br></pre></td></tr></table></figure></li></ol><p>å®‰å…¨æé†’:é˜²ç«å¢™ä¸å»ºè®®å…³é—­,å·²ç»é˜¿é‡Œäº‘æœåŠ¡å™¨å®‰å…¨ç»„ä¹Ÿä¸å»ºè®®è®¾ç½®å…¨éƒ¨ç«¯å£æ‰“å¼€,ä¼šæœ‰ä¸€äº›é»‘å®¢æˆ–è€…ä¸æ­£å½“çš„äººå…¥ä¾µæœåŠ¡å™¨,æ‹¿ä½ æœåŠ¡å™¨å¹²åäº‹,æœ¬äººå°±æ˜¯å› ä¸ºæ­¤ä»¶äº‹æå¾—æˆ‘æœåŠ¡å™¨,éœ€è¦é‡æ–°é…ç½®,ç´¢æ€§ä¹Ÿå°±å†™äº†è¿™ç¯‡æ–‡ç« ,çœŸçš„ä¸è¦éšæ„æ‰“å¼€ä»»ä½•ä¸€ä¸ªç«¯å£!!!</p></blockquote><h3 id="å®‰è£…mysql"><a class="markdownIt-Anchor" href="#å®‰è£…mysql"></a> å®‰è£…MySQL</h3><blockquote><ol><li><p>ä¸€æ ·çš„å»å®˜ç½‘ä¸‹è½½å¯¹åº”ç³»ç»Ÿç‰ˆæœ¬çš„å®‰è£…åŒ…,å¹¶ä¸Šä¼ åˆ°Linux</p></li><li><p>è§£å‹MySqlå®‰è£…åŒ…ä¹‹åä¼šå¾—åˆ°ä»¥ä¸‹å‡ ä¸ªæ–‡ä»¶</p></li></ol><p><img src="https://unpkg.com/serms-assets@1.0.29/imgs/image-20220616202538594.png" alt="" /></p><ol start="3"><li><p>æ¥ä¸‹æ¥éœ€è¦æŒ‰ç…§ä»¥ä¸‹é¡ºåºä¸€ä¸€å®‰è£…,æŒ‰ç…§é¡ºåºå¿…é¡»è·Ÿæˆ‘ä¸€æ ·</p></li><li><p>å®‰è£…é¡ºåºå¦‚ä¸‹</p></li></ol>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh mysql-community-common-5.7.25-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-libs-5.7.25-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-devel-5.7.25-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-libs-5.7.25-1.el7.x86_64.rpm</span><br><span class="line">rpm -ivh mysql-community-client-5.7.25-1.el7.x86_64.rpm</span><br><span class="line">å®‰è£…åˆ°è¿™çš„æ—¶å€™éœ€è¦å®‰è£…ä¸€ä¸ªä¾èµ–: net-tools,åœ¨æ‰§è¡Œæœ€åä¸€ä¸ªå®‰è£…åŒ…,ç›´æ¥æ‰§è¡Œåˆ™ä¼šæŠ¥ç¼ºå°‘net-toolsä¾èµ–</span><br><span class="line">rpm -ivh mysql-community-server-5.7.25-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure><ol start="2"><li><p>å®‰è£…å®Œåæ‰§è¡Œå†…æ ¸æ›´æ–°:</p><ol><li>yum update</li></ol></li><li><p>å¯åŠ¨mysql</p></li><li><p>systemctl status mysqld   æŸ¥çœ‹mysqlæœåŠ¡çŠ¶æ€</p></li><li><p>systemctl start mysqld        å¯åŠ¨mysqlæœåŠ¡</p></li><li><p>è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨</p></li><li><p>systemctl enable mysqld</p></li><li><p>netstat -tunlp     æŸ¥çœ‹å·²å¯åŠ¨çš„æœåŠ¡</p></li><li><p>ps - ef|grep mysql    æŸ¥çœ‹mysqlè¿›ç¨‹</p></li><li><p>ç™»å½•mysql</p></li><li><p>æŸ¥é˜…ä¸´æ—¶å¯†ç :  cat /var/log/mysqld.log  | grep password</p><p><img src="https://unpkg.com/serms-assets@1.0.29/imgs/image-20220616204308979.png" alt="" /></p></li><li><p>ç™»å½•mysql,å¹¶ä¿®æ”¹å¯†ç ,å¼€æ”¾è®¿é—®æƒé™</p><ol><li><p>mysql -uroot -p   (è¾“å…¥æŸ¥å‡ºæ¥çš„ä¸´æ—¶å¯†ç )</p></li><li><p>ä¿®æ”¹å¯†ç ä»¥åŠè®¿é—®æƒé™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">set global validate_password_length=4;è®¾ç½®å¯†ç é•¿åº¦æœ€ä½ä½æ•°</span><br><span class="line">set global validate_password_policy=LOW;è®¾ç½®å¯†ç å®‰å…¨ç­‰çº§ä½,ä¾¿äºå¯†ç å¯ä»¥ä¿®æ”¹æˆroot</span><br><span class="line">set password = password(&#x27;root&#x27;);è®¾ç½®å¯†ç ä¸ºroot</span><br><span class="line">grant all on *.* to &#x27;root&#x27;@&#x27;%&#x27; identified by &#x27;root&#x27;;å¼€å¯è®¿é—®æƒé™</span><br><span class="line">flush privileges;åˆ·æ–°æƒé™</span><br></pre></td></tr></table></figure><p><img src="https://unpkg.com/serms-assets@1.0.29/imgs/image-20220616204910291.png" alt="" /></p></li></ol></li><li><p>åˆ°æ­¤å°±å¯ä»¥ç”¨Navicatè¿›è¡Œå¤–éƒ¨è¿æ¥äº†</p></li></ol></blockquote><h3 id="å®‰è£…redis"><a class="markdownIt-Anchor" href="#å®‰è£…redis"></a> å®‰è£…Redis</h3><blockquote><ol><li><p>å®˜ç½‘ä¸‹è½½å¯¹åº”ç³»ç»Ÿç‰ˆæœ¬çš„å®‰è£…åŒ…,å¹¶ä¸Šä¼ è‡³Linuxç³»ç»Ÿå’Œè§£å‹å®‰è£…,åœ¨æ­¤ä¸åšé˜è¿°</p></li><li><p>å®‰è£…Redisçš„ä¾èµ–ç¯å¢ƒgcc, æ‰§è¡Œ:   yum install gcc-c++</p></li><li><p>è¿›å…¥å®‰è£…redisè½¯ä»¶ç›®å½•,è¿›è¡Œç¼–è¯‘,æ‰§è¡Œ:  make</p></li><li><p>åœ¨è¿›å…¥redisè½¯ä»¶ç›®å½•ä¸‹çš„srcæ‰§è¡Œ: make install</p></li><li><p>rediså¯åŠ¨ä¸åœæ­¢</p></li><li><p>åœ¨redis/srcä¸‹æ‰§è¡Œ: ./redis-server</p></li></ol><p><img src="C:%5CUsers%5C18399%5CDesktop%5Cimage-20220616210708814.png" alt="image-20220616210708814" /></p><ol start="6"><li><p>è¿›å…¥redisæ ¹ç›®å½•,ä¿®æ”¹é…ç½®æ–‡ä»¶</p></li><li><p>vim redis.conf</p></li><li><p>æ‰¾åˆ°daemonize,ä¿®æ”¹ä¸º yes  å…è®¸åå°å¯åŠ¨</p><p><img src="https://unpkg.com/serms-assets@1.0.29/imgs/image-20220616211256462.png" alt="" /></p></li><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶,å°† bind æ³¨é‡Š å³å¯å®ç°å¤–éƒ¨è®¿é—®</p></li></ol><p><img src="https://unpkg.com/serms-assets@1.0.29/imgs/image-20220616211638029.png" alt="" /></p><ol start="4"><li><p>å°†protected-mode æ”¹ä¸º no</p></li><li><p>å¯åŠ¨Redis</p></li><li><p>src/redis-server ./redis.conf</p></li><li><p>å¤–éƒ¨è¿›è¡Œè¿æ¥</p><p><img src="https://unpkg.com/serms-assets@1.0.29/imgs/image-20220616212406655.png" alt="" /></p></li><li><p>è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨</p></li><li><p>ç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹è¿™é‡Œå°±ä¸å¤šé˜è¿°äº† <a href="https://blog.csdn.net/qq_28041113/article/details/122291622">ç‚¹æˆ‘æŸ¥çœ‹æ•™ç¨‹</a></p></li><li><p>å¿«æ·æ“ä½œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">æ‰“å¼€rediså‘½ä»¤:service redis start</span><br><span class="line">                         </span><br><span class="line">å…³é—­rediså‘½ä»¤:service redis stop</span><br><span class="line">                         </span><br><span class="line">è®¾ä¸ºå¼€æœºå¯åŠ¨:chkconfig redis on</span><br><span class="line">                         </span><br><span class="line">è®¾ä¸ºå¼€æœºå…³é—­:chkconfig redis off</span><br></pre></td></tr></table></figure></li></ol></blockquote><h3 id="å®‰è£…git"><a class="markdownIt-Anchor" href="#å®‰è£…git"></a> å®‰è£…Git</h3><blockquote><p>æ‰§è¡Œ: yum install git</p><p>æŸ¥çœ‹gitç‰ˆæœ¬: git --version</p></blockquote><p>å®‰è£…Mavne</p><blockquote><p>è‡ªè¡Œç™¾åº¦</p></blockquote><h2 id="åç«¯éƒ¨ç½²"><a class="markdownIt-Anchor" href="#åç«¯éƒ¨ç½²"></a> åç«¯éƒ¨ç½²</h2><blockquote><ol><li><p>æ‹‰å–gité¡¹ç›®åˆ°æœ¬åœ° git clone xxxxx</p></li><li><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ç¼–å†™å¯åŠ¨è„šæœ¬</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">echo</span> =================================</span><br><span class="line"><span class="built_in">echo</span>  è‡ªåŠ¨åŒ–éƒ¨ã€Šæ¹˜çº¦æ¥¼ã€‹ç½²è„šæœ¬å¯åŠ¨ </span><br><span class="line"><span class="built_in">echo</span> =================================</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> åœæ­¢åŸæ¥è¿è¡Œä¸­çš„å·¥ç¨‹</span><br><span class="line">APP_NAME=xyl_take_out</span><br><span class="line"></span><br><span class="line">tpid=`ps -ef|grep <span class="variable">$APP_NAME</span>|grep -v grep|grep -v <span class="built_in">kill</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$&#123;tpid&#125;</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;Stop Process...&#x27;</span></span><br><span class="line">    <span class="built_in">kill</span> -15 <span class="variable">$tpid</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">sleep</span> 2</span><br><span class="line">tpid=`ps -ef|grep <span class="variable">$APP_NAME</span>|grep -v grep|grep -v <span class="built_in">kill</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$&#123;tpid&#125;</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;Kill Process!&#x27;</span></span><br><span class="line">    <span class="built_in">kill</span> -9 <span class="variable">$tpid</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;Stop Success!&#x27;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> å‡†å¤‡ä»Gitä»“åº“æ‹‰å–æœ€æ–°ä»£ç </span><br><span class="line"><span class="built_in">cd</span> /usr/local/javaapp/xyl_ms_km</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> å¼€å§‹ä»Gitä»“åº“æ‹‰å–æœ€æ–°ä»£ç </span><br><span class="line">git pull</span><br><span class="line"><span class="built_in">echo</span> ä»£ç æ‹‰å–å®Œæˆ</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> å¼€å§‹æ‰“åŒ…</span><br><span class="line">output=`mvn clean package -Dmaven.test.skip=<span class="literal">true</span>`</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> target</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> å¯åŠ¨é¡¹ç›®</span><br><span class="line"><span class="built_in">nohup</span> java -jar xyl_take_out-1.0-SNAPSHOT.jar &amp;&gt; xyl_take_out.log &amp;</span><br><span class="line"><span class="built_in">echo</span> é¡¹ç›®å¯åŠ¨å®Œæˆ</span><br></pre></td></tr></table></figure></li><li><p>èµ‹äºˆè„šæœ¬æœ€é«˜æƒé™,ç„¶åæ‰§è¡Œ, sh <a href="http://xyl.sh">xyl.sh</a></p><p><img src="https://unpkg.com/serms-assets@1.0.29/imgs/image-20220616221445525.png" alt="" /></p><p>ç¨ç­‰ç‰‡åˆ»,å°†ä¼šæ‰“åŒ…å®Œæˆ</p><p>è¿™é‡Œå‘¢å¯åŠ¨ä¹‹åè‚¯å®šæ˜¯è®¿é—®ä¸åˆ°çš„,å› ä¸ºä»åº“çš„sqlè¿˜æ²¡é…ç½®,æ‰€ä»¥å…ˆé…ç½®ä»åº“çš„æ•°æ®åº“å’Œå‰ç«¯é¡µé¢åœ¨æ¥å¯åŠ¨</p></li></ol></blockquote><h2 id="ä»åº“é…ç½®"><a class="markdownIt-Anchor" href="#ä»åº“é…ç½®"></a> ä»åº“é…ç½®</h2><h3 id="å®‰è£…vim"><a class="markdownIt-Anchor" href="#å®‰è£…vim"></a> å®‰è£…vim</h3><blockquote><p>ä¸Šé¢æœ‰æ•™ç¨‹,è¿™è¾¹ä¸åšé˜è¿°</p></blockquote><h3 id="å®‰è£…nginx"><a class="markdownIt-Anchor" href="#å®‰è£…nginx"></a> å®‰è£…Nginx</h3><ol><li>å‰æœŸå‡†å¤‡</li></ol><blockquote><p>å®‰è£…ä¾èµ–åŒ…<br />yum -y install gcc pcre-devel zlib-devel openssl openssl-devel<br />ä¸‹è½½Nginxå®‰è£…åŒ…<br />wget  <a href="http://nginx.org/download/nginx-1.22.0.tar.gz">http://nginx.org/download/nginx-1.22.0.tar.gz</a><br />è§£å‹ tar -zxvf nginx-1.22.0.tar.gz<br />åˆ›å»ºæ–‡ä»¶å¤¹ mkdir -p /usr/local/nginx<br />æ‰§è¡Œå®‰è£…å‘½ä»¤: ./configure --prefix=/usr/local/nginx<br />æ‰§è¡Œç¼–è¯‘: make &amp;&amp; make install<br />å¯¼å…¥é™æ€é¡µé¢åˆ°htmlç›®å½•</p><p>é…ç½®åå‘ä»£ç†<br />ä¿®æ”¹nginx.confæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">    root   html/dist;</span><br><span class="line">    index  index.html;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#åå‘ä»£ç†é…ç½®</span><br><span class="line">location ^~ /api/ &#123;</span><br><span class="line">    rewrite ^/api/(.*)$ /$1 break;</span><br><span class="line">    proxy_pass http://47.99.194.162:8888/</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></blockquote><ol start="2"><li><p>é…ç½®Nginxç¯å¢ƒ</p><ol><li>ç¼–è¾‘ vim /etc/profile</li><li>export PATH=/usr/local/nginx/sbin:$PATH</li><li>æ‰§è¡Œ source /etc/profile åˆ·æ–°ç¯å¢ƒå˜é‡</li></ol></li><li><p>é…ç½®å¼€æœºå¯åŠ¨</p><blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"> &gt;<span class="comment">#!/bin/sh</span></span><br><span class="line"> &gt;<span class="comment">#</span></span><br><span class="line"> &gt;<span class="comment"># nginx - this script starts and stops the nginx daemon</span></span><br><span class="line"> &gt;<span class="comment">#</span></span><br><span class="line"> &gt;<span class="comment"># chkconfig:   - 85 15</span></span><br><span class="line"> &gt;<span class="comment"># description:  NGINX is an HTTP(S) server, HTTP(S) reverse \</span></span><br><span class="line"> &gt;<span class="comment">#               proxy and IMAP/POP3 proxy server</span></span><br><span class="line"> &gt;<span class="comment"># processname: nginx</span></span><br><span class="line"> &gt;<span class="comment"># config:      /etc/nginx/nginx.conf</span></span><br><span class="line"> &gt;<span class="comment"># config:      /etc/sysconfig/nginx</span></span><br><span class="line"> &gt;<span class="comment"># pidfile:     /var/run/nginx.pid</span></span><br><span class="line"></span><br><span class="line"> &gt;<span class="comment"># Source function library.</span></span><br><span class="line"> &gt;. /etc/rc.d/init.d/functions</span><br><span class="line"></span><br><span class="line"> &gt;<span class="comment"># Source networking configuration.</span></span><br><span class="line"> &gt;. /etc/sysconfig/network</span><br><span class="line"></span><br><span class="line"> &gt;<span class="comment"># Check that networking is up.</span></span><br><span class="line"> &gt;[ <span class="string">&quot;<span class="variable">$NETWORKING</span>&quot;</span> = <span class="string">&quot;no&quot;</span> ] &amp;&amp; <span class="built_in">exit</span> 0</span><br><span class="line"></span><br><span class="line"> &gt;nginx=<span class="string">&quot;/usr/local/nginx/sbin/nginx&quot;</span></span><br><span class="line"> &gt;prog=$(<span class="built_in">basename</span> <span class="variable">$nginx</span>)</span><br><span class="line"></span><br><span class="line"> &gt;NGINX_CONF_FILE=<span class="string">&quot;/usr/local/nginx/conf/nginx.conf&quot;</span></span><br><span class="line"></span><br><span class="line"> &gt;[ -f /etc/sysconfig/nginx ] &amp;&amp; . /etc/sysconfig/nginx</span><br><span class="line"></span><br><span class="line"> &gt;lockfile=/var/lock/subsys/nginx</span><br><span class="line"></span><br><span class="line"> &gt;<span class="function"><span class="title">make_dirs</span></span>() &#123;</span><br><span class="line"> <span class="comment"># make required directories</span></span><br><span class="line"> user=`<span class="variable">$nginx</span> -V 2&gt;&amp;1 | grep <span class="string">&quot;configure arguments:.*--user=&quot;</span> | sed <span class="string">&#x27;s/[^*]*--user=\([^ ]*\).*/\1/g&#x27;</span> -`</span><br><span class="line"> <span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$user</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">&quot;`grep <span class="variable">$user</span> /etc/passwd`&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">       useradd -M -s /bin/nologin <span class="variable">$user</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    options=`<span class="variable">$nginx</span> -V 2&gt;&amp;1 | grep <span class="string">&#x27;configure arguments:&#x27;</span>`</span><br><span class="line">    <span class="keyword">for</span> opt <span class="keyword">in</span> <span class="variable">$options</span>; <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> [ `<span class="built_in">echo</span> <span class="variable">$opt</span> | grep <span class="string">&#x27;.*-temp-path&#x27;</span>` ]; <span class="keyword">then</span></span><br><span class="line">            value=`<span class="built_in">echo</span> <span class="variable">$opt</span> | <span class="built_in">cut</span> -d <span class="string">&quot;=&quot;</span> -f 2`</span><br><span class="line">            <span class="keyword">if</span> [ ! -d <span class="string">&quot;<span class="variable">$value</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">                <span class="comment"># echo &quot;creating&quot; $value</span></span><br><span class="line">                <span class="built_in">mkdir</span> -p <span class="variable">$value</span> &amp;&amp; <span class="built_in">chown</span> -R <span class="variable">$user</span> <span class="variable">$value</span></span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">     <span class="keyword">done</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"> &gt;&#125;</span><br><span class="line"></span><br><span class="line"> &gt;<span class="function"><span class="title">start</span></span>() &#123;</span><br><span class="line">  [ -x <span class="variable">$nginx</span> ] || <span class="built_in">exit</span> 5</span><br><span class="line">  [ -f <span class="variable">$NGINX_CONF_FILE</span> ] || <span class="built_in">exit</span> 6</span><br><span class="line">  make_dirs</span><br><span class="line">  <span class="built_in">echo</span> -n $<span class="string">&quot;Starting <span class="variable">$prog</span>: &quot;</span></span><br><span class="line">  daemon <span class="variable">$nginx</span> -c <span class="variable">$NGINX_CONF_FILE</span></span><br><span class="line">  retval=$?</span><br><span class="line">  <span class="built_in">echo</span></span><br><span class="line">  [ <span class="variable">$retval</span> -eq 0 ] &amp;&amp; <span class="built_in">touch</span> <span class="variable">$lockfile</span></span><br><span class="line">  <span class="built_in">return</span> <span class="variable">$retval</span></span><br><span class="line"> &gt;&#125;</span><br><span class="line"></span><br><span class="line"> &gt;<span class="function"><span class="title">stop</span></span>() &#123;</span><br><span class="line">  <span class="built_in">echo</span> -n $<span class="string">&quot;Stopping <span class="variable">$prog</span>: &quot;</span></span><br><span class="line">  killproc <span class="variable">$prog</span> -QUIT</span><br><span class="line">  retval=$?</span><br><span class="line">  <span class="built_in">echo</span></span><br><span class="line">  [ <span class="variable">$retval</span> -eq 0 ] &amp;&amp; <span class="built_in">rm</span> -f <span class="variable">$lockfile</span></span><br><span class="line">  <span class="built_in">return</span> <span class="variable">$retval</span></span><br><span class="line"> &gt;&#125;</span><br><span class="line"></span><br><span class="line"> &gt;<span class="function"><span class="title">restart</span></span>() &#123;</span><br><span class="line">  configtest || <span class="built_in">return</span> $?</span><br><span class="line">  stop</span><br><span class="line">  <span class="built_in">sleep</span> 1</span><br><span class="line">  start</span><br><span class="line"> &gt;&#125;</span><br><span class="line"></span><br><span class="line"> &gt;<span class="function"><span class="title">reload</span></span>() &#123;</span><br><span class="line">  configtest || <span class="built_in">return</span> $?</span><br><span class="line">  <span class="built_in">echo</span> -n $<span class="string">&quot;Reloading <span class="variable">$prog</span>: &quot;</span></span><br><span class="line">  killproc <span class="variable">$prog</span> -HUP</span><br><span class="line">  retval=$?</span><br><span class="line">  <span class="built_in">echo</span></span><br><span class="line"> &gt;&#125;</span><br><span class="line"></span><br><span class="line"> &gt;<span class="function"><span class="title">force_reload</span></span>() &#123;</span><br><span class="line">  restart</span><br><span class="line"> &gt;&#125;</span><br><span class="line"></span><br><span class="line"> &gt;<span class="function"><span class="title">configtest</span></span>() &#123;</span><br><span class="line"><span class="variable">$nginx</span> -t -c <span class="variable">$NGINX_CONF_FILE</span></span><br><span class="line"> &gt;&#125;</span><br><span class="line"></span><br><span class="line"> &gt;<span class="function"><span class="title">rh_status</span></span>() &#123;</span><br><span class="line">  status <span class="variable">$prog</span></span><br><span class="line"> &gt;&#125;</span><br><span class="line"></span><br><span class="line"> &gt;<span class="function"><span class="title">rh_status_q</span></span>() &#123;</span><br><span class="line">  rh_status &gt;/dev/null 2&gt;&amp;1</span><br><span class="line"> &gt;&#125;</span><br><span class="line"></span><br><span class="line"> &gt;<span class="keyword">case</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">  start)</span><br><span class="line">      rh_status_q &amp;&amp; <span class="built_in">exit</span> 0</span><br><span class="line">      <span class="variable">$1</span></span><br><span class="line">      ;;</span><br><span class="line">  stop)</span><br><span class="line">      rh_status_q || <span class="built_in">exit</span> 0</span><br><span class="line">      <span class="variable">$1</span></span><br><span class="line">      ;;</span><br><span class="line">  restart|configtest)</span><br><span class="line">      <span class="variable">$1</span></span><br><span class="line">      ;;</span><br><span class="line">  reload)</span><br><span class="line">      rh_status_q || <span class="built_in">exit</span> 7</span><br><span class="line">      <span class="variable">$1</span></span><br><span class="line">      ;;</span><br><span class="line">  force-reload)</span><br><span class="line">      force_reload</span><br><span class="line">      ;;</span><br><span class="line">  status)</span><br><span class="line">      rh_status</span><br><span class="line">      ;;</span><br><span class="line">  condrestart|try-restart)</span><br><span class="line">      rh_status_q || <span class="built_in">exit</span> 0</span><br><span class="line">          ;;</span><br><span class="line">  *)</span><br><span class="line">      <span class="built_in">echo</span> $<span class="string">&quot;Usage: <span class="variable">$0</span> &#123;start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest&#125;&quot;</span></span><br><span class="line">      <span class="built_in">exit</span> 2</span><br><span class="line"> &gt;<span class="keyword">esac</span></span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ˜¯å®˜æ–¹æä¾›çš„,å¹¶ä¸æ˜¯æˆ‘è‡ªå·±å†™çš„,é‡Œé¢æœ‰ä¸¤è¡ŒNginxçš„è·¯å¾„éœ€è¦æ”¹æˆä½ è‡ªå·±çš„å®‰è£…è·¯å¾„</p></blockquote></li><li><p>ç¼–å†™å®Œæ¯•ä¹‹ååœ¨/etc/init.dä¸‹åˆ›å»ºnginxæ–‡ä»¶,æŠŠä¸Šé¢çš„ä»£ç å¤åˆ¶è¿›å»,å¹¶ç»™äºˆæœ€é«˜æ‰§è¡Œæƒé™</p></li><li><p>ä½¿ç”¨chkconfigç®¡ç†</p><ol><li><p><strong>å°†nginxæœåŠ¡åŠ å…¥chkconfigç®¡ç†åˆ—è¡¨</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># chkconfig --add /etc/init.d/nginx</span></span><br></pre></td></tr></table></figure></li><li><p><strong>ä½¿ç”¨serviceç®¡ç†æœåŠ¡</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># service nginx start    å¯åŠ¨æœåŠ¡   </span></span><br><span class="line"><span class="comment"># service nginx stop     åœæ­¢æœåŠ¡</span></span><br><span class="line"><span class="comment"># service nginx restart  é‡å¯æœåŠ¡</span></span><br><span class="line"><span class="comment"># service nginx status   æŸ¥è¯¢æœåŠ¡çš„çŠ¶æ€</span></span><br><span class="line"><span class="comment"># service nginx relaod   åˆ·æ–°é…ç½®æ–‡</span></span><br></pre></td></tr></table></figure></li><li><p><strong>è®¾ç½®ç»ˆç«¯æ¨¡å¼å¼€æœºå¯åŠ¨</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># chkconfig nginx on</span></span><br></pre></td></tr></table></figure></li></ol></li></ol><h3 id="å®‰è£…mysql-2"><a class="markdownIt-Anchor" href="#å®‰è£…mysql-2"></a> å®‰è£…MySql</h3><blockquote><p>ä¸Šè¿°å·²ç»è®²åˆ°,è¿™é‡Œä¸åšé˜è¿°</p></blockquote><h2 id="é…ç½®ä¸»ä»å¤åˆ¶"><a class="markdownIt-Anchor" href="#é…ç½®ä¸»ä»å¤åˆ¶"></a> é…ç½®ä¸»ä»å¤åˆ¶</h2><h3 id="é…ç½®ä¸»åº“"><a class="markdownIt-Anchor" href="#é…ç½®ä¸»åº“"></a> é…ç½®ä¸»åº“</h3><blockquote><p>ä¿®æ”¹ vim /etc/my.nf<br />[mysql]<br />log-bin = mysql-bin#[å¿…é¡»]å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿—<br />server-id=100æœåŠ¡å™¨å”¯ä¸€ID</p><p>é‡å¯mysqlæœåŠ¡<br />systemctl restart mysqld</p><p>ç™»å½•åˆ°ä¸»åº“ä¸­æ‰§è¡Œä»£ç <br />GRANT REPLICATION SLAVE ON <em>.</em> to â€˜sermsâ€™@â€™%â€™ identified by â€˜Root@123456â€™;<br />ä¸Šé¢SQLçš„ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªç”¨æˆ·serms,å¯†ç ä¸ºRoot@123456,å¹¶ä¸”ç»™sermsç”¨æˆ·æˆäºˆ REPLICATION SLAVEæƒé™,å¸¸ç”¨äºå»ºç«‹å¤åˆ¶æ—¶æ‰€éœ€è¦ç”¨åˆ°çš„ç”¨æˆ·æƒé™,ä¹Ÿå°±æ˜¯è¯´slaveå¿…é¡»è¢«masteræˆæƒå…·æœ‰æƒé™çš„ç”¨æˆ·,æ‰èƒ½æä¾›è¯¥ç”¨æˆ·å¤åˆ¶</p><p>æ‰§è¡ŒSQL,æŸ¥çœ‹FIleå’ŒPositionçš„å€¼<br />show master status;</p><p><img src="https://unpkg.com/serms-assets@1.0.29/imgs/image-20220616235947262.png" alt="" /></p><p>è‡³æ­¤ä¸éœ€è¦åœ¨åŠ¨ä¸»åº“çš„mysqläº†</p></blockquote><h3 id="é…ç½®ä»åº“"><a class="markdownIt-Anchor" href="#é…ç½®ä»åº“"></a> é…ç½®ä»åº“</h3><blockquote><p>ä¿®æ”¹mysqlæ•°æ®åº“é…ç½®æ–‡ä»¶<br />server-id=100<br />åˆ·æ–°æ•°æ®åº“</p><p>æ‰§è¡ŒSQL</p><p>change master to master_host=â€˜47.99.194.162â€™,master_user=â€˜sermsâ€™,master_password=â€˜Root@123456â€™,master_log_file=â€˜mysql-bin.000001â€™,master_log_pos=438;</p><p>start slave;</p><p>æŸ¥çœ‹æ•°æ®åº“çŠ¶æ€</p><p>show slave status;</p></blockquote><p>åˆ°æ­¤å‘¢ä¸»åº“å’Œä»åº“çš„é…ç½®å°±å·²ç»ç»“æŸå•¦~</p><p>æœ‰äº›åœ°æ–¹å†™çš„ä¸æ˜¯å¾ˆå¥½, æœ‰ä¸æ˜ç™½çš„åœ°æ–¹è¯·åœ¨ä¸‹æ–¹ç•™è¨€</p><h2 id="ï¸sponsor"><a class="markdownIt-Anchor" href="#ï¸sponsor"></a> â¤ï¸Sponsor</h2><p>æ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°</p><table><thead><tr><th style="text-align:center">æ”¯ä»˜å®</th><th>å¾®ä¿¡</th></tr></thead><tbody><tr><td style="text-align:center"><img src="https://unpkg.com/serms-assets@1.0.25/serms/img/alipay.png" alt="" /></td><td><img src="https://unpkg.com/serms-assets@1.0.25/serms/img/wechat.png" alt="" /></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> é˜¿é‡Œäº‘ </category>
          
          <category> é¡¹ç›®éƒ¨ç½² </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é˜¿é‡Œäº‘ECS </tag>
            
            <tag> é¡¹ç›®éƒ¨ç½² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>éƒ½22ä¸–çºªäº†ä½ è¿˜ä¸ä¼šç§‘å­¦ä¸Šç½‘??</title>
      <link href="/posts/13e760ef/"/>
      <url>/posts/13e760ef/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h2><div class="tip home"><p>ç°åœ¨ç§‘å­¦ä¸Šç½‘å¯èƒ½æ˜¯æ¯ä¸ªé’å¹´çš„å¿…å¤‡æŠ€å·§äº†,å°±æ¯”å¦‚æˆ‘æƒ³å»çœ‹çœ‹å›½å¤–çš„â€¦å•Šå‘¸,æˆ‘æ€ä¹ˆä¼šè¿™æ ·æƒ³å‘¢â€¦<img no-lazy class="inline" src="https://inews.gtimg.com/newsapp_match/0/14380690994/0" style="height:40px;"/>, æ¯”å¦‚åœ¨ä½ æ•²ä»£ç çš„æ—¶å€™æƒ³è®¿é—®ä¸€ä¸‹<a href="https://spring.io/">Spring</a>æˆ–è€…æ˜¯<a href="http://github.com/">Github</a>æœ‰æ—¶å€™ç”šè‡³éƒ½éœ€è¦å€ŸåŠ©ç§‘å­¦ä¸Šç½‘â€¦</p><p>å¤šçš„ä¸è¯´è¿›å…¥æ­£é¢˜</p></div><p>ç§‘å­¦ä¸Šç½‘çš„æ–¹å¼æœ‰å¾ˆå¤šç§,æ¯”å¦‚åä»£,å¼€VPNâ€¦</p><p>å¯èƒ½ä½ è¯´è¿™ä¸éƒ½è¦é’±å—???</p><p>ç¡®å®,ä½†æ˜¯æˆ‘æ€ä¹ˆå¯èƒ½è®©ä½ ä»¬èŠ±é’±å‘¢??èƒ½ç™½å«–ç»ä¸æ°ªé‡‘ğŸ˜ğŸ˜ğŸ˜</p><p><img src="https://unpkg.com/serms-assets@1.0.28/imgs/image-20220523092300757.png" alt="æ²¹ç®¡è½»è½»æ¾æ¾ä¸Š" /></p><p>æˆ‘å·²ç»å¸®å¤§å®¶æ•´ç†å¥½äº†,å¤§å®¶ç›´æ¥ä¸‹è½½å°±è¡Œ</p><div class="tag link"><a class="link-card" title="" href="https://pan.baidu.com/s/1Z-0ZEMBnWHrb-m6VfmJuxg&pwd:ms88"><div class="left"><img src="https://pan.baidu.com/box-static/disk-theme/theme/white/img/logo@2x.png"/></div><div class="right"><p class="text"></p><p class="url">https://pan.baidu.com/s/1Z-0ZEMBnWHrb-m6VfmJuxg&pwd:ms88</p></div></a></div>]]></content>
      
      
      <categories>
          
          <category> å¥‡æ€ªçš„çŸ¥è¯† </category>
          
          <category> æ€æ ·ç§‘å­¦ä¸Šç½‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€æ ·ç§‘å­¦ä¸Šç½‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NavigationDuplicatedå¼‚å¸¸è­¦å‘Š!!!</title>
      <link href="/posts/86aff880/"/>
      <url>/posts/86aff880/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜"><a class="markdownIt-Anchor" href="#é—®é¢˜"></a> é—®é¢˜</h2><p>Vueè·¯ç”±å½“ä½ é‡å¤ä¼ ç›¸åŒå‚æ•°æ—¶,æ§åˆ¶å°å°±ä¼šæŠ¥:<span class='p red'>NavigationDuplicated</span></p><p><img src="https://unpkg.com/serms-assets@1.0.25/imgs/image-20220522204757177.png" alt="" /></p><hr /><h2 id="åŸå› "><a class="markdownIt-Anchor" href="#åŸå› "></a> åŸå› :</h2><p>æœ€æ–°çš„vue-routerå¼•å…¥äº†promise</p><hr /><h2 id="è§£å†³æ–¹æ³•"><a class="markdownIt-Anchor" href="#è§£å†³æ–¹æ³•"></a> è§£å†³æ–¹æ³•</h2><blockquote><p>é€šè¿‡ç»™pushæ–¹æ³•ä¼ é€’ç›¸åº”çš„æˆåŠŸ,å¤±è´¥çš„å›è°ƒ,å¯ä»¥æ•è·å½“å‰é”™è¯¯,å¯ä»¥è§£å†³é—®é¢˜</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">this.$router.push(&#123;</span><br><span class="line">name: &#x27;search&#x27;,</span><br><span class="line">query: &#123;</span><br><span class="line">k: this.keyword.toUpperCase(),</span><br><span class="line">&#125;,</span><br><span class="line">params: &#123;</span><br><span class="line">keyword: this.keyword,</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line">() =&gt; &#123; &#125;,//å‡½æ•°ä¼ å…¥æˆåŠŸ</span><br><span class="line">() =&gt; &#123; &#125;//å‡½æ•°ä¼ å…¥å¤±è´¥</span><br><span class="line">);</span><br></pre></td></tr></table></figure><div class="tip success"><p><span class='p red'>ä½†æ˜¯è¿™ç§æ–¹æ³•æ²»æ ‡ä¸æ²»æœ¬!!!</span></p></div><hr /><blockquote><p>é‡å†™RouteråŸå‹å¯¹è±¡ä¸Šçš„pushæ–¹æ³•å’Œreplaceæ–¹æ³•</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é…ç½®è·¯ç”±çš„ä¸»æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Router</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨æ’ä»¶</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Router</span>);</span><br><span class="line"><span class="comment">//æ‰“å°è·¯ç”±åŸå‹</span></span><br><span class="line"><span class="comment">// console.log(Router.prototype);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤‡ä»½RouteråŸå‹å¯¹è±¡çš„pushæ–¹æ³•</span></span><br><span class="line"><span class="keyword">let</span> originPush = <span class="title class_">Router</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span>;</span><br><span class="line"><span class="comment">// console.log(originPush);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤‡ä»½RouteråŸå‹å¯¹è±¡çš„replaceæ–¹æ³•</span></span><br><span class="line"><span class="keyword">let</span> originReplace = <span class="title class_">Router</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">replace</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡å†™pushå’Œreplaceæ–¹æ³•</span></span><br><span class="line"><span class="comment">//ç¬¬ä¸€ä¸ªå‚æ•°:è·¯ç”±è·¯å¾„ä»¥åŠä¼ é€’çš„å‚æ•°</span></span><br><span class="line"><span class="comment">//ç¬¬äºŒä¸ªå‚æ•°:æˆåŠŸçš„å›è°ƒ</span></span><br><span class="line"><span class="comment">//ç¬¬ä¸‰ä¸ªå‚æ•°:å¤±è´¥çš„å›è°ƒ</span></span><br><span class="line"><span class="comment">//this:å½“å‰çš„è·¯ç”±å¯¹è±¡(å½“å‰ç»„ä»¶å®ä¾‹å¯¹è±¡)</span></span><br><span class="line"><span class="comment">//callå’Œapplyçš„åŒºåˆ«:éƒ½æ˜¯æ”¹å˜thisæŒ‡å‘,ä½†æ˜¯callå’Œapplyçš„åŒºåˆ«æ˜¯:callæ˜¯æŠŠå‚æ•°ä¼ é€’ç»™å‡½æ•°,applyæ˜¯æŠŠå‚æ•°ä¼ é€’ç»™å‡½æ•°çš„æ•°ç»„</span></span><br><span class="line"><span class="title class_">Router</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span> = <span class="keyword">function</span> (<span class="params">location, resolve, reject</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (resolve &amp;&amp; reject) &#123;</span><br><span class="line">        <span class="keyword">return</span> originPush.<span class="title function_">call</span>(<span class="variable language_">this</span>, location, resolve, reject);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> originPush.<span class="title function_">call</span>(<span class="variable language_">this</span>, location, <span class="function">() =&gt;</span> &#123; &#125;, <span class="function">() =&gt;</span> &#123; &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Router</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">replace</span> = <span class="keyword">function</span> (<span class="params">location, resolve, reject</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (resolve &amp;&amp; reject) &#123;</span><br><span class="line">        <span class="keyword">return</span> originReplace.<span class="title function_">call</span>(<span class="variable language_">this</span>, location, resolve, reject);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> originReplace.<span class="title function_">call</span>(<span class="variable language_">this</span>, location, <span class="function">() =&gt;</span> &#123; &#125;, <span class="function">() =&gt;</span> &#123; &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//é…ç½®è·¯ç”±</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Router</span>(&#123;</span><br><span class="line">    <span class="comment">//é…ç½®è·¯ç”±</span></span><br><span class="line">    <span class="attr">routes</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">Home</span>,</span><br><span class="line">            <span class="attr">meta</span>: &#123; <span class="attr">show</span>: <span class="literal">true</span> &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è‡³æ­¤pushå’Œreplaceé‡å¤æäº¤é—®é¢˜ä»¥å…¨éƒ¨è§£å†³</p><hr /><h2 id="ï¸sponsor"><a class="markdownIt-Anchor" href="#ï¸sponsor"></a> â¤ï¸Sponsor</h2><p>æ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°</p><table><thead><tr><th style="text-align:center">æ”¯ä»˜å®</th><th>å¾®ä¿¡</th></tr></thead><tbody><tr><td style="text-align:center"><img src="https://unpkg.com/serms-assets@1.0.25/serms/img/alipay.png" alt="" /></td><td><img src="https://unpkg.com/serms-assets@1.0.25/serms/img/wechat.png" alt="" /></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
          <category> Vue-NavigationDuplicatedå¼‚å¸¸ </category>
          
          <category> ç¼–ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> NavigationDuplicatedå¼‚å¸¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueè·¯ç”±ä¼ å‚çš„ä¸‰ç§æ–¹å¼</title>
      <link href="/posts/da904ab5/"/>
      <url>/posts/da904ab5/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h2><div class="tip home"><p><strong>vue</strong> è·¯ç”±ä¼ å‚çš„ä½¿ç”¨åœºæ™¯ä¸€èˆ¬éƒ½æ˜¯åº”ç”¨åœ¨çˆ¶è·¯ç”±è·³è½¬åˆ°å­è·¯ç”±æ—¶ï¼Œæºå¸¦å‚æ•°è·³è½¬ã€‚ä¼ å‚æ–¹å¼å¯åˆ’åˆ†ä¸º <code>params</code> ä¼ å‚å’Œ <code>query</code> ä¼ å‚ï¼Œè€Œ <code>params</code> ä¼ å‚åˆå¯åˆ†ä¸ºåœ¨ <strong>url</strong> ä¸­æ˜¾ç¤ºå‚æ•°å’Œä¸æ˜¾ç¤ºå‚æ•°ä¸¤ç§æ–¹å¼ï¼Œè¿™å°±æ˜¯vueè·¯ç”±ä¼ å‚çš„ä¸‰ç§æ–¹å¼ã€‚</p></div><h2 id="æ–¹å¼ä¸€params-ä¼ å‚æ˜¾ç¤ºå‚æ•°"><a class="markdownIt-Anchor" href="#æ–¹å¼ä¸€params-ä¼ å‚æ˜¾ç¤ºå‚æ•°"></a> æ–¹å¼ä¸€ï¼š<code>params</code> ä¼ å‚ï¼ˆæ˜¾ç¤ºå‚æ•°ï¼‰</h2><span class='p red'>params</span> ä¼ å‚ï¼ˆæ˜¾ç¤ºå‚æ•°ï¼‰åˆå¯åˆ†ä¸º å£°æ˜å¼ å’Œ ç¼–ç¨‹å¼ ä¸¤ç§æ–¹å¼<blockquote><p>1ã€å£°æ˜å¼ <code>router-link</code></p></blockquote><p>è¯¥æ–¹å¼æ˜¯é€šè¿‡ <code>router-link</code> ç»„ä»¶çš„ <code>to</code> å±æ€§å®ç°ï¼Œè¯¥æ–¹æ³•çš„å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²è·¯å¾„ï¼Œæˆ–è€…ä¸€ä¸ªæè¿°åœ°å€çš„å¯¹è±¡ã€‚ä½¿ç”¨è¯¥æ–¹å¼ä¼ å€¼çš„æ—¶å€™ï¼Œéœ€è¦å­è·¯ç”±æå‰é…ç½®å¥½å‚æ•°ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//å­è·¯ç”±é…ç½®</span><br><span class="line">&#123;</span><br><span class="line">path: &#x27;/child/:id&#x27;,</span><br><span class="line">component: Child</span><br><span class="line">&#125;</span><br><span class="line">//çˆ¶è·¯ç”±ç»„ä»¶</span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;/child/123&quot;</span>&gt;</span>è¿›å…¥Childè·¯ç”±<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>2ã€ç¼–ç¨‹å¼ <code>this.$router.push</code></p></blockquote><p>ä½¿ç”¨è¯¥æ–¹å¼ä¼ å€¼çš„æ—¶å€™ï¼ŒåŒæ ·éœ€è¦å­è·¯ç”±æå‰é…ç½®å¥½å‚æ•°ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//å­è·¯ç”±é…ç½®</span><br><span class="line">&#123;</span><br><span class="line">path: &#x27;/child/:id&#x27;,</span><br><span class="line">component: Child</span><br><span class="line">&#125;</span><br><span class="line">//çˆ¶è·¯ç”±ç¼–ç¨‹å¼ä¼ å‚(ä¸€èˆ¬é€šè¿‡äº‹ä»¶è§¦å‘)</span><br><span class="line">this.$router.push(&#123;</span><br><span class="line">path:&#x27;/child/$&#123;id&#125;&#x27;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>åœ¨å­è·¯ç”±ä¸­å¯ä»¥é€šè¿‡ä¸‹é¢ä»£ç æ¥è·å–ä¼ é€’çš„å‚æ•°å€¼</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$route.params.id</span><br></pre></td></tr></table></figure><h2 id="æ–¹å¼äºŒparams-ä¼ å‚ä¸æ˜¾ç¤ºå‚æ•°"><a class="markdownIt-Anchor" href="#æ–¹å¼äºŒparams-ä¼ å‚ä¸æ˜¾ç¤ºå‚æ•°"></a> æ–¹å¼äºŒï¼š<code>params</code> ä¼ å‚ï¼ˆä¸æ˜¾ç¤ºå‚æ•°ï¼‰</h2><p><code>params</code> ä¼ å‚ï¼ˆä¸æ˜¾ç¤ºå‚æ•°ï¼‰ä¹Ÿå¯åˆ†ä¸º å£°æ˜å¼ å’Œ ç¼–ç¨‹å¼ ä¸¤ç§æ–¹å¼ï¼Œä¸æ–¹å¼ä¸€ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œæ˜¯é€šè¿‡è·¯ç”±çš„åˆ«å <code>name</code> è¿›è¡Œä¼ å€¼çš„</p><p>1ã€å£°æ˜å¼ <code>router-link</code></p><p>è¯¥æ–¹å¼ä¹Ÿæ˜¯é€šè¿‡ <code>router-link</code> ç»„ä»¶çš„ <code>to</code> å±æ€§å®ç°ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link :to=&quot;&#123;name:&#x27;Child&#x27;,params:&#123;id:123&#125;&#125;&quot;&gt;è¿›å…¥Childè·¯ç”±&lt;/router-link&gt;</span><br></pre></td></tr></table></figure><p>2ã€ç¼–ç¨‹å¼ <code>this.$router.push</code></p><p>ä½¿ç”¨è¯¥æ–¹å¼ä¼ å€¼çš„æ—¶å€™ï¼ŒåŒæ ·éœ€è¦å­è·¯ç”±æå‰é…ç½®å¥½å‚æ•°ï¼Œä¸è¿‡ä¸èƒ½å†ä½¿ç”¨ <code>:/id</code> æ¥ä¼ é€’å‚æ•°äº†ï¼Œå› ä¸ºçˆ¶è·¯ç”±ä¸­ï¼Œå·²ç»ä½¿ç”¨ <code>params</code> æ¥æºå¸¦å‚æ•°äº†ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//å­è·¯ç”±é…ç½®</span><br><span class="line">&#123;</span><br><span class="line">  path: &#x27;/child,</span><br><span class="line">  name: &#x27;Child&#x27;,</span><br><span class="line">  component: Child</span><br><span class="line">&#125;</span><br><span class="line">//çˆ¶è·¯ç”±ç¼–ç¨‹å¼ä¼ å‚(ä¸€èˆ¬é€šè¿‡äº‹ä»¶è§¦å‘)</span><br><span class="line">this.$router.push(&#123;</span><br><span class="line">    name:&#x27;Child&#x27;,</span><br><span class="line">    params:&#123;</span><br><span class="line">    id:123</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>åœ¨å­è·¯ç”±ä¸­å¯ä»¥é€šè¿‡ä¸‹é¢ä»£ç æ¥è·å–ä¼ é€’çš„å‚æ•°å€¼</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$route.params.id</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šä¸Šè¿°è¿™ç§åˆ©ç”¨ <code>params</code> ä¸æ˜¾ç¤º <code>url</code> ä¼ å‚çš„æ–¹å¼ä¼šå¯¼è‡´åœ¨åˆ·æ–°é¡µé¢çš„æ—¶å€™ï¼Œä¼ é€’çš„å€¼ä¼šä¸¢å¤±</strong></p><h2 id="æ–¹å¼ä¸‰query-ä¼ å‚æ˜¾ç¤ºå‚æ•°"><a class="markdownIt-Anchor" href="#æ–¹å¼ä¸‰query-ä¼ å‚æ˜¾ç¤ºå‚æ•°"></a> æ–¹å¼ä¸‰ï¼š<code>query</code> ä¼ å‚ï¼ˆæ˜¾ç¤ºå‚æ•°ï¼‰</h2><p><code>query</code> ä¼ å‚ï¼ˆæ˜¾ç¤ºå‚æ•°ï¼‰ä¹Ÿå¯åˆ†ä¸º å£°æ˜å¼ å’Œ ç¼–ç¨‹å¼ ä¸¤ç§æ–¹å¼</p><blockquote><p>1ã€å£°æ˜å¼ <code>router-link</code></p></blockquote><p>è¯¥æ–¹å¼ä¹Ÿæ˜¯é€šè¿‡ <code>router-link</code> ç»„ä»¶çš„ <code>to</code> å±æ€§å®ç°ï¼Œä¸è¿‡ä½¿ç”¨è¯¥æ–¹å¼ä¼ å€¼çš„æ—¶å€™ï¼Œéœ€è¦å­è·¯ç”±æå‰é…ç½®å¥½è·¯ç”±åˆ«åï¼ˆ<code>name</code> å±æ€§ï¼‰ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//å­è·¯ç”±é…ç½®</span><br><span class="line">&#123;</span><br><span class="line">  path: &#x27;/child,</span><br><span class="line">  name: &#x27;Child&#x27;,</span><br><span class="line">  component: Child</span><br><span class="line">&#125;</span><br><span class="line">//çˆ¶è·¯ç”±ç»„ä»¶</span><br><span class="line">&lt;router-link :to=&quot;&#123;name:&#x27;Child&#x27;,query:&#123;id:123&#125;&#125;&quot;&gt;è¿›å…¥Childè·¯ç”±&lt;/router-link&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>2ã€ç¼–ç¨‹å¼ <code>this.$router.push</code></p></blockquote><p>ä½¿ç”¨è¯¥æ–¹å¼ä¼ å€¼çš„æ—¶å€™ï¼ŒåŒæ ·éœ€è¦å­è·¯ç”±æå‰é…ç½®å¥½è·¯ç”±åˆ«åï¼ˆ<code>name</code> å±æ€§ï¼‰ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//å­è·¯ç”±é…ç½®</span><br><span class="line">&#123;</span><br><span class="line">  path: &#x27;/child,</span><br><span class="line">  name: &#x27;Child&#x27;,</span><br><span class="line">  component: Child</span><br><span class="line">&#125;</span><br><span class="line">//çˆ¶è·¯ç”±ç¼–ç¨‹å¼ä¼ å‚(ä¸€èˆ¬é€šè¿‡äº‹ä»¶è§¦å‘)</span><br><span class="line">this.$router.push(&#123;</span><br><span class="line">    name:&#x27;Child&#x27;,</span><br><span class="line">    query:&#123;</span><br><span class="line">    id:123</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>åœ¨å­è·¯ç”±ä¸­å¯ä»¥é€šè¿‡ä¸‹é¢ä»£ç æ¥è·å–ä¼ é€’çš„å‚æ•°å€¼</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$route.query.id</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
          <category> Vueè·¯ç”±ä¸‰ç§ä¼ å‚æ–¹å¼ </category>
          
          <category> ç¼–ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> Vueè·¯ç”±ä¼ å‚çš„ä¸‰ç§æ–¹å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue(å°šç¡…è°·å¤©ç¦¹è€å¸ˆ)</title>
      <link href="/posts/75ce1e02/"/>
      <url>/posts/75ce1e02/</url>
      
        <content type="html"><![CDATA[<div class="tip home"><p>ğŸ“å­¦ä¹ èµ„æ–™ï¼š<a href="https://www.bilibili.com/video/BV1Zy4y1K7SH">å°šç¡…è°·å¤©ç¦¹Vue</a><br />ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡5å¤©æ›´æ–°å®Œ<br />ğŸ¯å¼€å§‹æ—¶é—´ï¼š05-21<br />ğŸ‰ç»“æŸæ—¶é—´ï¼š05-xx</p></div><h2 id="vue-ç®€ä»‹"><a class="markdownIt-Anchor" href="#vue-ç®€ä»‹"></a> Vue ç®€ä»‹</h2><h3 id="å®˜ç½‘"><a class="markdownIt-Anchor" href="#å®˜ç½‘"></a> å®˜ç½‘</h3><ol><li><a href="https://vuejs.org/">è‹±æ–‡å®˜ç½‘</a></li><li><a href="https://cn.vuejs.org/">ä¸­æ–‡å®˜ç½‘</a></li></ol><h3 id="ä»‹ç»ä¸æè¿°"><a class="markdownIt-Anchor" href="#ä»‹ç»ä¸æè¿°"></a> ä»‹ç»ä¸æè¿°</h3><ol><li>åŠ¨æ€æ„å»ºç”¨æˆ·ç•Œé¢çš„ æ¸è¿›å¼ JavaScriptæ¡†æ¶</li><li>ä½œè€…:å°¤é›¨æºª</li></ol><h3 id="vue-çš„ç‰¹ç‚¹"><a class="markdownIt-Anchor" href="#vue-çš„ç‰¹ç‚¹"></a> Vue çš„ç‰¹ç‚¹</h3><ol><li>éµå¾ª MVVM æ¨¡å¼</li><li>ç¼–ç ç®€æ´,ä½“ç§¯å°,è¿è¡Œæ•ˆç‡é«˜,é€‚åˆç§»åŠ¨/PC ç«¯å¼€å‘</li><li>å®ƒæœ¬èº«åªå…³æ³¨ UI,ä¹Ÿå¯ä»¥å¼•å…¥å…¶å®ƒç¬¬ä¸‰æ–¹åº“å¼€å‘é¡¹ç›®</li></ol><h3 id="ä¸å…¶å®ƒ-js-æ¡†æ¶çš„å…³è”"><a class="markdownIt-Anchor" href="#ä¸å…¶å®ƒ-js-æ¡†æ¶çš„å…³è”"></a> ä¸å…¶å®ƒ JS æ¡†æ¶çš„å…³è”</h3><ol><li>å€Ÿé‰´Angularçš„ æ¨¡æ¿ å’Œ æ•°æ®ç»‘å®š æŠ€æœ¯</li><li>å€Ÿé‰´Reactçš„ ç»„ä»¶åŒ– å’Œ è™šæ‹ŸDOM æŠ€æœ¯</li></ol><h3 id="vue-å‘¨è¾¹åº“"><a class="markdownIt-Anchor" href="#vue-å‘¨è¾¹åº“"></a> Vue å‘¨è¾¹åº“</h3><ol><li>vue-cli:vueè„šæ‰‹æ¶</li><li>vue-resource</li><li>axios</li><li>vue-router:è·¯ç”±</li><li>vuex:çŠ¶æ€ç®¡ç†</li><li>element-ui:åŸºäºvueçš„UIç»„ä»¶åº“(PCç«¯)</li></ol><h2 id="åˆè¯†-vue"><a class="markdownIt-Anchor" href="#åˆè¯†-vue"></a> åˆè¯† Vue</h2><h3 id="æ¨¡æ¿"><a class="markdownIt-Anchor" href="#æ¨¡æ¿"></a> æ¨¡æ¿</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>åˆè¯†vue<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¼•å…¥Vue --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Helloï¼&#123;&#123;name&#125;&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span> <span class="comment">// é˜»æ­¢vueåœ¨å¯åŠ¨æ—¶ç”Ÿæˆç”Ÿäº§æç¤º</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>, <span class="comment">//elç”¨äºæŒ‡å®šå½“å‰Vueå®ä¾‹ä¸ºå“ªä¸ªå®¹å™¨æœåŠ¡ï¼Œå€¼é€šå¸¸ä¸ºcssé€‰æ‹©å™¨å­—ç¬¦ä¸²</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>:&#123; <span class="comment">//dataç”¨äºå­˜å‚¨æ•°æ®ï¼Œæ•°æ®å…±elæ‰€æŒ‡å®šçš„å®¹å™¨å»ä½¿ç”¨</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>:<span class="string">&#x27;JOJO&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ•ˆæœ"><a class="markdownIt-Anchor" href="#æ•ˆæœ"></a> æ•ˆæœ</h3><p><img src="https://img-blog.csdnimg.cn/img_convert/9ab2f21a5134c5d3c8bbf86495d3d031.png" alt="img" /></p><blockquote><p>æ³¨æ„:</p><ol><li>æƒ³è®©Vueå·¥ä½œï¼Œå°±å¿…é¡»åˆ›å»ºä¸€ä¸ªVueå®ä¾‹ï¼Œä¸”è¦ä¼ å…¥ä¸€ä¸ªé…ç½®å¯¹è±¡</li><li>rootå®¹å™¨é‡Œçš„ä»£ç ä¾ç„¶ç¬¦åˆhtmlè§„èŒƒï¼Œåªä¸è¿‡æ··å…¥äº†ä¸€äº›ç‰¹æ®Šçš„Vueè¯­æ³•</li><li>rootå®¹å™¨é‡Œçš„ä»£ç è¢«ç§°ä¸ºVueæ¨¡æ¿</li><li>Vueå®ä¾‹ä¸å®¹å™¨æ˜¯ä¸€ä¸€å¯¹åº”çš„</li><li>çœŸå®å¼€å‘ä¸­åªæœ‰ä¸€ä¸ªVueå®ä¾‹ï¼Œå¹¶ä¸”ä¼šé…åˆç€ç»„ä»¶ä¸€èµ·ä½¿ç”¨</li><li>ä¸­çš„xxxè¦å†™jsè¡¨è¾¾å¼ï¼Œä¸”xxxå¯ä»¥è‡ªåŠ¨è¯»å–åˆ°dataä¸­çš„æ‰€æœ‰å±æ€§</li><li>ä¸€æ—¦dataä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆæ¨¡æ¿ä¸­ç”¨åˆ°è¯¥æ•°æ®çš„åœ°æ–¹ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°</li></ol></blockquote><h3 id="æ¨¡æ¿è¯­æ³•"><a class="markdownIt-Anchor" href="#æ¨¡æ¿è¯­æ³•"></a> æ¨¡æ¿è¯­æ³•</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>vueæ¨¡æ¿è¯­æ³•<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ’å€¼è¯­æ³•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>ä½ å¥½ï¼Œ&#123;&#123;name&#125;&#125;!<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æŒ‡ä»¤è¯­æ³•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>å¿«å»çœ‹æ–°ç•ªï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>å¿«å»çœ‹æ–°ç•ªï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span> </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>, </span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>:&#123; </span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>:<span class="string">&#x27;JOJO&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">url</span>:<span class="string">&#x27;https://www.bilibili.com/&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ•ˆæœ:</p><p><img src="https://img-blog.csdnimg.cn/img_convert/5064db5c00a8878b26bcd486fa51a853.png" alt="img" /></p><p>html ä¸­åŒ…å«äº†ä¸€äº› JS è¯­æ³•ä»£ç ï¼Œè¯­æ³•åˆ†ä¸ºä¸¤ç§ï¼Œåˆ†åˆ«ä¸ºï¼š</p><ol><li>æ’å€¼è¯­æ³•ï¼ˆåŒå¤§æ‹¬å·è¡¨è¾¾å¼ï¼‰</li><li>æŒ‡ä»¤ï¼ˆä»¥ v-å¼€å¤´ï¼‰</li></ol><h4 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“:</h4><h5 id="æ’å€¼è¯­æ³•"><a class="markdownIt-Anchor" href="#æ’å€¼è¯­æ³•"></a> æ’å€¼è¯­æ³•</h5><ol><li><p>åŠŸèƒ½:ç”¨äºè§£ææ ‡ç­¾ä½“å†…å®¹</p></li><li><p>è¯­æ³•:ï¼Œxxxxä¼šä½œä¸ºjsè¡¨è¾¾å¼è§£æ</p></li></ol><h5 id="æŒ‡ä»¤è¯­æ³•"><a class="markdownIt-Anchor" href="#æŒ‡ä»¤è¯­æ³•"></a> æŒ‡ä»¤è¯­æ³•</h5><ol><li><p>åŠŸèƒ½:è§£ææ ‡ç­¾å±æ€§ã€è§£ææ ‡ç­¾ä½“å†…å®¹ã€ç»‘å®šäº‹ä»¶</p></li><li><p>ä¸¾ä¾‹ï¼šv-bind:href=â€˜xxxxâ€™ï¼Œxxxxä¼šä½œä¸ºjsè¡¨è¾¾å¼è¢«è§£æ</p></li><li><p>è¯´æ˜ï¼šVueä¸­æœ‰æœ‰å¾ˆå¤šçš„æŒ‡ä»¤ï¼Œæ­¤å¤„åªæ˜¯ç”¨v-bindä¸¾ä¸ªä¾‹å­</p></li></ol><h3 id="æ•°æ®ç»‘å®š"><a class="markdownIt-Anchor" href="#æ•°æ®ç»‘å®š"></a> æ•°æ®ç»‘å®š</h3><h4 id="æ¨¡æ¿-2"><a class="markdownIt-Anchor" href="#æ¨¡æ¿-2"></a> æ¨¡æ¿</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ•°æ®ç»‘å®š<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">            å•å‘æ•°æ®ç»‘å®šï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-bind:value</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            åŒå‘æ•°æ®ç»‘å®šï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model:value</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span> </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>, </span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>:<span class="string">&#x27;JOJO&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ•ˆæœ-2"><a class="markdownIt-Anchor" href="#æ•ˆæœ-2"></a> æ•ˆæœ</h4><p><img src="https://img-blog.csdnimg.cn/img_convert/094b060391528a0185e12f1287645cbe.png" alt="" /></p><h4 id="æ€»ç»“-2"><a class="markdownIt-Anchor" href="#æ€»ç»“-2"></a> <strong>æ€»ç»“ï¼š</strong></h4><ul><li>Vueä¸­æœ‰2ç§æ•°æ®ç»‘å®šçš„æ–¹å¼ï¼š<ul><li>å•å‘ç»‘å®šï¼ˆ<code>v-bind</code>ï¼‰ï¼šæ•°æ®åªèƒ½ä»dataæµå‘é¡µé¢</li><li>åŒå‘ç»‘å®šï¼ˆ<code>v-model</code>ï¼‰ï¼šæ•°æ®ä¸ä»…èƒ½ä»dataæµå‘é¡µé¢ï¼Œè¿˜å¯ä»¥ä»é¡µé¢æµå‘data</li></ul></li></ul><h3 id="elä¸dataçš„ä¸¤ç§å†™æ³•"><a class="markdownIt-Anchor" href="#elä¸dataçš„ä¸¤ç§å†™æ³•"></a> elä¸dataçš„ä¸¤ç§å†™æ³•</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>elä¸dataçš„ä¸¤ç§å†™æ³•<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello,&#123;&#123;name&#125;&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span> </span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//elçš„ä¸¤ç§å†™æ³•ï¼š</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// const vm = new Vue(&#123;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//     // el:&#x27;#root&#x27;, //ç¬¬ä¸€ç§å†™æ³•</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//     data:&#123;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//         name:&#x27;JOJO&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//     &#125;</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// &#125;)</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// vm.$mount(&#x27;#root&#x27;)//ç¬¬äºŒç§å†™æ³•</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//dataçš„ä¸¤ç§å†™æ³•ï¼š</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>, </span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//dataçš„ç¬¬ä¸€ç§å†™æ³•ï¼šå¯¹è±¡å¼</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// data:&#123;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//     name:&#x27;JOJO&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//dataçš„ç¬¬äºŒç§å†™æ³•ï¼šå‡½æ•°å¼</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="attr">name</span>:<span class="string">&#x27;JOJO&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ€»ç»“-3"><a class="markdownIt-Anchor" href="#æ€»ç»“-3"></a> æ€»ç»“ï¼š</h4><p>elæœ‰2ç§å†™æ³•ï¼š</p><ol><li>åˆ›å»ºVueå®ä¾‹å¯¹è±¡çš„æ—¶å€™é…ç½®elå±æ€§</li><li>å…ˆåˆ›å»ºVueå®ä¾‹ï¼Œéšåå†é€šè¿‡<code>vm.$mount('#root')</code>æŒ‡å®šelçš„å€¼</li></ol><p>dataæœ‰2ç§å†™æ³•ï¼š</p><ol><li>å¯¹è±¡å¼</li><li>å‡½æ•°å¼</li></ol><ul><li>å¦‚ä½•é€‰æ‹©ï¼šç›®å‰å“ªç§å†™æ³•éƒ½å¯ä»¥ï¼Œä»¥åå­¦åˆ°ç»„ä»¶æ—¶ï¼Œdataå¿…é¡»ä½¿ç”¨å‡½æ•°ï¼Œå¦åˆ™ä¼šæŠ¥é”™</li></ul><blockquote><p>ç”±Vueç®¡ç†çš„å‡½æ•°ï¼Œä¸€å®šä¸è¦å†™ç®­å¤´å‡½æ•°ï¼Œå¦åˆ™thiså°±ä¸å†æ˜¯Vueå®ä¾‹äº†</p></blockquote><h3 id="mvvm-æ¨¡å‹"><a class="markdownIt-Anchor" href="#mvvm-æ¨¡å‹"></a> MVVM æ¨¡å‹</h3><p><img src="https://img-blog.csdnimg.cn/img_convert/ac43527b06defd324a702aea4f7940a0.png" alt="img" /></p><ul><li>MVVMæ¨¡å‹:<ul><li>Mï¼šæ¨¡å‹(Model)ï¼šå¯¹åº”dataä¸­çš„æ•°æ®</li><li>Vï¼šè§†å›¾(View)ï¼šæ¨¡æ¿</li><li>VMï¼šè§†å›¾æ¨¡å‹(ViewModel)ï¼šVueå®ä¾‹å¯¹è±¡</li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>mvvm<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>åç§°ï¼š&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>æˆ˜é˜Ÿï¼š&#123;&#123;rank&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>æµ‹è¯•ï¼š&#123;&#123;$options&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>:&#123; </span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>:<span class="string">&#x27;uzi&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">rank</span>:<span class="string">&#x27;RNG&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æ•ˆæœï¼š</strong></p><p><img src="https://img-blog.csdnimg.cn/img_convert/94ba0684daa6f21dbb14873a29d9c67a.png" alt="img" /></p><p><strong>æ€»ç»“ï¼š</strong></p><ul><li>dataä¸­æ‰€æœ‰çš„å±æ€§ï¼Œæœ€åéƒ½å‡ºç°åœ¨äº†vmèº«ä¸Š</li><li>vmèº«ä¸Šæ‰€æœ‰çš„å±æ€§ åŠ VueåŸå‹èº«ä¸Šæ‰€æœ‰çš„å±æ€§ï¼Œåœ¨Vueæ¨¡æ¿ä¸­éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨</li></ul><h3 id="vueä¸­çš„æ•°æ®ä»£ç†"><a class="markdownIt-Anchor" href="#vueä¸­çš„æ•°æ®ä»£ç†"></a> Vueä¸­çš„æ•°æ®ä»£ç†</h3><p><img src="https://img-blog.csdnimg.cn/img_convert/1fbebd52e39fa5a97210ee65d0a58069.png" alt="img" /></p><p><strong>æ€»ç»“ï¼š</strong></p><ol><li>Vueä¸­çš„æ•°æ®ä»£ç†é€šè¿‡vmå¯¹è±¡æ¥ä»£ç†dataå¯¹è±¡ä¸­å±æ€§çš„æ“ä½œï¼ˆè¯»/å†™ï¼‰</li><li>Vueä¸­æ•°æ®ä»£ç†çš„å¥½å¤„ï¼šæ›´åŠ æ–¹ä¾¿çš„æ“ä½œdataä¸­çš„æ•°æ®</li><li>åŸºæœ¬åŸç†ï¼š<ul><li>é€šè¿‡<code>object.defineProperty()</code>æŠŠdataå¯¹è±¡ä¸­æ‰€æœ‰å±æ€§æ·»åŠ åˆ°vmä¸Šã€‚</li><li>ä¸ºæ¯ä¸€ä¸ªæ·»åŠ åˆ°vmä¸Šçš„å±æ€§ï¼Œéƒ½æŒ‡å®šä¸€ä¸ªgetter/setterã€‚</li><li>åœ¨getter/setterå†…éƒ¨å»æ“ä½œï¼ˆè¯»/å†™ï¼‰dataä¸­å¯¹åº”çš„å±æ€§ã€‚</li></ul></li></ol><h3 id="äº‹ä»¶å¤„ç†"><a class="markdownIt-Anchor" href="#äº‹ä»¶å¤„ç†"></a> äº‹ä»¶å¤„ç†</h3><h4 id="äº‹ä»¶çš„åŸºæœ¬ç”¨æ³•"><a class="markdownIt-Anchor" href="#äº‹ä»¶çš„åŸºæœ¬ç”¨æ³•"></a> äº‹ä»¶çš„åŸºæœ¬ç”¨æ³•</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>äº‹ä»¶çš„åŸºæœ¬ç”¨æ³•<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>hello,&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;showInfo1&quot;</span>&gt;</span>ç‚¹æˆ‘æç¤ºä¿¡æ¯1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showInfo2($event,66)&quot;</span>&gt;</span>ç‚¹æˆ‘æç¤ºä¿¡æ¯2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span> </span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>, </span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">name</span>:<span class="string">&#x27;JOJO&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showInfo1</span>(<span class="params">event</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(event)</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">showInfo2</span>(<span class="params">evnet,num</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(event,num)</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ•ˆæœ-3"><a class="markdownIt-Anchor" href="#æ•ˆæœ-3"></a> æ•ˆæœ</h4><p><img src="https://img-blog.csdnimg.cn/img_convert/a3463fb07e6ae6d6acc288aaf19b0f8b.png" alt="img" /></p><p><strong>æ€»ç»“ï¼š</strong></p><ol><li>ä½¿ç”¨<code>v-on:xxx</code>æˆ–<code>@xxx</code>ç»‘å®šäº‹ä»¶ï¼Œå…¶ä¸­xxxæ˜¯äº‹ä»¶å</li><li>äº‹ä»¶çš„å›è°ƒéœ€è¦é…ç½®åœ¨methodså¯¹è±¡ä¸­ï¼Œæœ€ç»ˆä¼šåœ¨vmä¸Š</li><li>methodsä¸­é…ç½®çš„å‡½æ•°ï¼Œ==ä¸è¦ç”¨ç®­å¤´å‡½æ•°ï¼==å¦åˆ™thiså°±ä¸æ˜¯vmäº†</li><li>methodsä¸­é…ç½®çš„å‡½æ•°ï¼Œéƒ½æ˜¯è¢«Vueæ‰€ç®¡ç†çš„å‡½æ•°ï¼Œthisçš„æŒ‡å‘æ˜¯vmæˆ–ç»„ä»¶å®ä¾‹å¯¹è±¡</li><li><code>@click=&quot;demo</code>å’Œ<code>@click=&quot;demo($event)&quot;</code>æ•ˆæœä¸€è‡´ï¼Œä½†åè€…å¯ä»¥ä¼ å‚</li></ol><h4 id="1-6-3-äº‹ä»¶ä¿®é¥°ç¬¦"><a class="markdownIt-Anchor" href="#1-6-3-äº‹ä»¶ä¿®é¥°ç¬¦"></a> 1. 6. 3 .äº‹ä»¶ä¿®é¥°ç¬¦</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 ..prevent:é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºevent.preventDefault()</span><br><span class="line">2 ..stop:åœæ­¢äº‹ä»¶å†’æ³¡event.stopPropagation()</span><br></pre></td></tr></table></figure><h4 id="1-6-4-æŒ‰é”®ä¿®é¥°ç¬¦"><a class="markdownIt-Anchor" href="#1-6-4-æŒ‰é”®ä¿®é¥°ç¬¦"></a> 1. 6. 4 .æŒ‰é”®ä¿®é¥°ç¬¦</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 .keycode:æ“ä½œçš„æ˜¯æŸä¸ªkeycodeå€¼çš„é”®</span><br><span class="line">2 ..keyName:æ“ä½œçš„æŸä¸ªæŒ‰é”®åçš„é”®(å°‘éƒ¨åˆ†)</span><br></pre></td></tr></table></figure><h3 id="1-7-è®¡ç®—å±æ€§ä¸ç›‘è§†"><a class="markdownIt-Anchor" href="#1-7-è®¡ç®—å±æ€§ä¸ç›‘è§†"></a> 1. 7 .è®¡ç®—å±æ€§ä¸ç›‘è§†</h3><h4 id="1-7-1-æ•ˆæœ"><a class="markdownIt-Anchor" href="#1-7-1-æ•ˆæœ"></a> 1. 7. 1 .æ•ˆæœ</h4><h4 id="1-7-2-è®¡ç®—å±æ€§-computed"><a class="markdownIt-Anchor" href="#1-7-2-è®¡ç®—å±æ€§-computed"></a> 1. 7. 2 .è®¡ç®—å±æ€§-computed</h4><h6 id="1-è¦æ˜¾ç¤ºçš„æ•°æ®ä¸å­˜åœ¨è¦é€šè¿‡è®¡ç®—å¾—æ¥"><a class="markdownIt-Anchor" href="#1-è¦æ˜¾ç¤ºçš„æ•°æ®ä¸å­˜åœ¨è¦é€šè¿‡è®¡ç®—å¾—æ¥"></a> 1. è¦æ˜¾ç¤ºçš„æ•°æ®ä¸å­˜åœ¨ï¼Œè¦é€šè¿‡è®¡ç®—å¾—æ¥ã€‚</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2. åœ¨computedå¯¹è±¡ä¸­å®šä¹‰è®¡ç®—å±æ€§ã€‚</span><br><span class="line">3. åœ¨é¡µé¢ä¸­ä½¿ç”¨&#123;&#123;æ–¹æ³•å&#125;&#125;æ¥æ˜¾ç¤ºè®¡ç®—çš„ç»“æœã€‚</span><br></pre></td></tr></table></figure><h4 id="1-7-3-ç›‘è§†å±æ€§-watch"><a class="markdownIt-Anchor" href="#1-7-3-ç›‘è§†å±æ€§-watch"></a> 1. 7. 3 .ç›‘è§†å±æ€§-watch</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. é€šè¿‡é€šè¿‡vmå¯¹è±¡çš„$watch()æˆ–watché…ç½®æ¥ç›‘è§†æŒ‡å®šçš„å±æ€§</span><br><span class="line">2. å½“å±æ€§å˜åŒ–æ—¶,å›è°ƒå‡½æ•°è‡ªåŠ¨è°ƒç”¨,åœ¨å‡½æ•°å†…éƒ¨è¿›è¡Œè®¡ç®—</span><br></pre></td></tr></table></figure><h3 id="1-8-class-ä¸-style-ç»‘å®š"><a class="markdownIt-Anchor" href="#1-8-class-ä¸-style-ç»‘å®š"></a> 1. 8 .class ä¸ style ç»‘å®š</h3><h4 id="1-8-1-ç†è§£"><a class="markdownIt-Anchor" href="#1-8-1-ç†è§£"></a> 1. 8. 1 .ç†è§£</h4><h6 id="1-åœ¨åº”ç”¨ç•Œé¢ä¸­æŸä¸ªäº›å…ƒç´ çš„æ ·å¼æ˜¯å˜åŒ–çš„"><a class="markdownIt-Anchor" href="#1-åœ¨åº”ç”¨ç•Œé¢ä¸­æŸä¸ªäº›å…ƒç´ çš„æ ·å¼æ˜¯å˜åŒ–çš„"></a> 1. åœ¨åº”ç”¨ç•Œé¢ä¸­,æŸä¸ª(äº›)å…ƒç´ çš„æ ·å¼æ˜¯å˜åŒ–çš„</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2. class/styleç»‘å®šå°±æ˜¯ä¸“é—¨ç”¨æ¥å®ç°åŠ¨æ€æ ·å¼æ•ˆæœçš„æŠ€æœ¯</span><br></pre></td></tr></table></figure><h4 id="1-8-2-class-ç»‘å®š"><a class="markdownIt-Anchor" href="#1-8-2-class-ç»‘å®š"></a> 1. 8. 2 .class ç»‘å®š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. :class=&#x27;xxx&#x27;</span><br><span class="line">2. è¡¨è¾¾å¼æ˜¯å­—ç¬¦ä¸²:&#x27;classA&#x27;</span><br><span class="line">3. è¡¨è¾¾å¼æ˜¯å¯¹è±¡:&#123;classA:isA,classB:isB&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4. è¡¨è¾¾å¼æ˜¯æ•°ç»„:[&#x27;classA&#x27;,&#x27;classB&#x27;]</span><br></pre></td></tr></table></figure><h4 id="1-8-3-style-ç»‘å®š"><a class="markdownIt-Anchor" href="#1-8-3-style-ç»‘å®š"></a> 1. 8. 3 .style ç»‘å®š</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. :style=&quot;&#123;color:activeColor,fontSize:fontSize+&#x27;px&#x27;&#125;&quot;</span><br><span class="line">2. å…¶ä¸­activeColor/fontSizeæ˜¯dataå±æ€§</span><br></pre></td></tr></table></figure><h3 id="1-9-æ¡ä»¶æ¸²æŸ“"><a class="markdownIt-Anchor" href="#1-9-æ¡ä»¶æ¸²æŸ“"></a> 1. 9 .æ¡ä»¶æ¸²æŸ“</h3><h4 id="1-9-1-æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤"><a class="markdownIt-Anchor" href="#1-9-1-æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤"></a> 1. 9. 1 .æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. v-ifä¸v-else</span><br><span class="line">2. v-show</span><br></pre></td></tr></table></figure><h4 id="1-9-2-æ¯”è¾ƒ-v-if-ä¸-v-show"><a class="markdownIt-Anchor" href="#1-9-2-æ¯”è¾ƒ-v-if-ä¸-v-show"></a> 1. 9. 2 .æ¯”è¾ƒ v-if ä¸ v-show</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. å¦‚æœéœ€è¦é¢‘ç¹åˆ‡æ¢v-showè¾ƒå¥½</span><br><span class="line">2. å½“æ¡ä»¶ä¸æˆç«‹æ—¶,v-ifçš„æ‰€æœ‰å­èŠ‚ç‚¹ä¸ä¼šè§£æ(é¡¹ç›®ä¸­ä½¿ç”¨)</span><br></pre></td></tr></table></figure><h3 id="1-10-åˆ—è¡¨æ¸²æŸ“"><a class="markdownIt-Anchor" href="#1-10-åˆ—è¡¨æ¸²æŸ“"></a> 1. 10 .åˆ—è¡¨æ¸²æŸ“</h3><h4 id="1-10-1-æ•ˆæœ"><a class="markdownIt-Anchor" href="#1-10-1-æ•ˆæœ"></a> 1. 10. 1 .æ•ˆæœ</h4><h4 id="1-10-2-åˆ—è¡¨æ˜¾ç¤ºæŒ‡ä»¤"><a class="markdownIt-Anchor" href="#1-10-2-åˆ—è¡¨æ˜¾ç¤ºæŒ‡ä»¤"></a> 1. 10. 2 .åˆ—è¡¨æ˜¾ç¤ºæŒ‡ä»¤</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">éå†æ•°ç»„:v-for/index</span><br><span class="line">éå†å¯¹è±¡:v-for/key</span><br></pre></td></tr></table></figure><h3 id="1-11-æ”¶é›†è¡¨å•æ•°æ®"><a class="markdownIt-Anchor" href="#1-11-æ”¶é›†è¡¨å•æ•°æ®"></a> 1. 11 .æ”¶é›†è¡¨å•æ•°æ®</h3><h3 id="1-12-è¿‡æ»¤å™¨"><a class="markdownIt-Anchor" href="#1-12-è¿‡æ»¤å™¨"></a> 1. 12 .è¿‡æ»¤å™¨</h3><h4 id="1-12-1-æ•ˆæœ"><a class="markdownIt-Anchor" href="#1-12-1-æ•ˆæœ"></a> 1. 12. 1 .æ•ˆæœ</h4><h4 id="1-12-2-ç†è§£è¿‡æ»¤å™¨"><a class="markdownIt-Anchor" href="#1-12-2-ç†è§£è¿‡æ»¤å™¨"></a> 1. 12. 2 .ç†è§£è¿‡æ»¤å™¨</h4><h6 id="1-åŠŸèƒ½å¯¹è¦æ˜¾ç¤ºçš„æ•°æ®è¿›è¡Œç‰¹å®šæ ¼å¼åŒ–åå†æ˜¾ç¤º"><a class="markdownIt-Anchor" href="#1-åŠŸèƒ½å¯¹è¦æ˜¾ç¤ºçš„æ•°æ®è¿›è¡Œç‰¹å®šæ ¼å¼åŒ–åå†æ˜¾ç¤º"></a> 1. åŠŸèƒ½:å¯¹è¦æ˜¾ç¤ºçš„æ•°æ®è¿›è¡Œç‰¹å®šæ ¼å¼åŒ–åå†æ˜¾ç¤º</h6><h6 id="2-æ³¨æ„å¹¶æ²¡æœ‰æ”¹å˜åŸæœ¬çš„æ•°æ®æ˜¯äº§ç”Ÿæ–°çš„å¯¹åº”çš„æ•°æ®"><a class="markdownIt-Anchor" href="#2-æ³¨æ„å¹¶æ²¡æœ‰æ”¹å˜åŸæœ¬çš„æ•°æ®æ˜¯äº§ç”Ÿæ–°çš„å¯¹åº”çš„æ•°æ®"></a> 2. æ³¨æ„:å¹¶æ²¡æœ‰æ”¹å˜åŸæœ¬çš„æ•°æ®,æ˜¯äº§ç”Ÿæ–°çš„å¯¹åº”çš„æ•°æ®</h6><h3 id="1-13-å†…ç½®æŒ‡ä»¤ä¸è‡ªå®šä¹‰æŒ‡ä»¤"><a class="markdownIt-Anchor" href="#1-13-å†…ç½®æŒ‡ä»¤ä¸è‡ªå®šä¹‰æŒ‡ä»¤"></a> 1. 13 .å†…ç½®æŒ‡ä»¤ä¸è‡ªå®šä¹‰æŒ‡ä»¤</h3><h4 id="1-13-1-å¸¸ç”¨å†…ç½®æŒ‡ä»¤"><a class="markdownIt-Anchor" href="#1-13-1-å¸¸ç”¨å†…ç½®æŒ‡ä»¤"></a> 1. 13. 1 .å¸¸ç”¨å†…ç½®æŒ‡ä»¤</h4><p>1 .v-text:æ›´æ–°å…ƒç´ çš„ textContent<br />2 .v-html:æ›´æ–°å…ƒç´ çš„ innerHTML<br />3 .v-if:å¦‚æœä¸º true,å½“å‰æ ‡ç­¾æ‰ä¼šè¾“å‡ºåˆ°é¡µé¢<br />4 .v-else:å¦‚æœä¸º false,å½“å‰æ ‡ç­¾æ‰ä¼šè¾“å‡ºåˆ°é¡µé¢<br />5 .v-show:é€šè¿‡æ§åˆ¶ display æ ·å¼æ¥æ§åˆ¶æ˜¾ç¤º/éšè—<br />6 .v-for:éå†æ•°ç»„/å¯¹è±¡<br />7 .v-on:ç»‘å®šäº‹ä»¶ç›‘å¬,ä¸€èˆ¬ç®€å†™ä¸º@<br />8 .v-bind:ç»‘å®šè§£æè¡¨è¾¾å¼,å¯ä»¥çœç•¥ v-bind<br />9 .v-model:åŒå‘æ•°æ®ç»‘å®š<br />10 .v-cloak:é˜²æ­¢é—ªç°,ä¸ css é…åˆ:[v-cloak]{display:none}</p><h4 id="1-13-2-è‡ªå®šä¹‰æŒ‡ä»¤"><a class="markdownIt-Anchor" href="#1-13-2-è‡ªå®šä¹‰æŒ‡ä»¤"></a> 1. 13. 2 .è‡ªå®šä¹‰æŒ‡ä»¤</h4><h6 id="1-æ³¨å†Œå…¨å±€æŒ‡ä»¤"><a class="markdownIt-Anchor" href="#1-æ³¨å†Œå…¨å±€æŒ‡ä»¤"></a> 1. æ³¨å†Œå…¨å±€æŒ‡ä»¤</h6><p>Vue.directive(â€˜my-directiveâ€™,function(el,binding){<br />el.innerHTML=binding.value.toupperCase()<br />})<br /><strong>2. æ³¨å†Œå±€éƒ¨æŒ‡ä»¤</strong><br />directives:{<br />â€˜my-directiveâ€™:{<br />bind(el,binding){<br />el.innerHTML=binding.value.toupperCase()<br />}<br />}<br />}<br />1 ) ä½¿ç”¨æŒ‡ä»¤<br />v-my-directive=â€˜xxxâ€™</p><h3 id="1-14-vue-å®ä¾‹ç”Ÿå‘½å‘¨æœŸ"><a class="markdownIt-Anchor" href="#1-14-vue-å®ä¾‹ç”Ÿå‘½å‘¨æœŸ"></a> 1. 14 .Vue å®ä¾‹ç”Ÿå‘½å‘¨æœŸ</h3><h4 id="1-14-1-æ•ˆæœ"><a class="markdownIt-Anchor" href="#1-14-1-æ•ˆæœ"></a> 1. 14. 1 .æ•ˆæœ</h4><h4 id="1-14-2-ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾"><a class="markdownIt-Anchor" href="#1-14-2-ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾"></a> 1. 14. 2 .ç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾</h4><h4 id="1-14-3-vue-ç”Ÿå‘½å‘¨æœŸåˆ†æ"><a class="markdownIt-Anchor" href="#1-14-3-vue-ç”Ÿå‘½å‘¨æœŸåˆ†æ"></a> 1. 14. 3 .vue ç”Ÿå‘½å‘¨æœŸåˆ†æ</h4><h6 id="1-åˆå§‹åŒ–æ˜¾ç¤º"><a class="markdownIt-Anchor" href="#1-åˆå§‹åŒ–æ˜¾ç¤º"></a> 1 ) åˆå§‹åŒ–æ˜¾ç¤º</h6><h5 id="beforecreate"><a class="markdownIt-Anchor" href="#beforecreate"></a> *beforeCreate()</h5><h5 id="created"><a class="markdownIt-Anchor" href="#created"></a> *created()</h5><h5 id="beforemount"><a class="markdownIt-Anchor" href="#beforemount"></a> *beforeMount()</h5><h5 id="mounted"><a class="markdownIt-Anchor" href="#mounted"></a> *mounted()</h5><p>2 ) æ›´æ–°çŠ¶æ€:this.xxx=value</p><h5 id="beforeupdate"><a class="markdownIt-Anchor" href="#beforeupdate"></a> *beforeUpdate()</h5><h5 id="updated"><a class="markdownIt-Anchor" href="#updated"></a> *updated()</h5><p>3 ) é”€æ¯ vue å®ä¾‹:vm.$destory()</p><h5 id="beforedestory"><a class="markdownIt-Anchor" href="#beforedestory"></a> *beforeDestory()</h5><h5 id="destoryed"><a class="markdownIt-Anchor" href="#destoryed"></a> *destoryed()</h5><h4 id="1-14-4-å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•"><a class="markdownIt-Anchor" href="#1-14-4-å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•"></a> 1. 14. 4 .å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. mounted():å‘é€ajaxè¯·æ±‚,å¯åŠ¨å®šæ—¶å™¨ç­‰å¼‚æ­¥ä»»åŠ¡</span><br><span class="line">2. beforeDestory():åšæ”¶å°¾å·¥ä½œ,å¦‚:æ¸…é™¤å®šæ—¶å™¨</span><br></pre></td></tr></table></figure><h2 id="ç¬¬-2-ç« vue-ç»„ä»¶åŒ–ç¼–ç¨‹"><a class="markdownIt-Anchor" href="#ç¬¬-2-ç« vue-ç»„ä»¶åŒ–ç¼–ç¨‹"></a> ç¬¬ 2 ç« ï¼šVue ç»„ä»¶åŒ–ç¼–ç¨‹</h2><h3 id="2-1-æ¨¡å—ä¸ç»„ä»¶-æ¨¡å—åŒ–ä¸ç»„ä»¶åŒ–"><a class="markdownIt-Anchor" href="#2-1-æ¨¡å—ä¸ç»„ä»¶-æ¨¡å—åŒ–ä¸ç»„ä»¶åŒ–"></a> 2. 1 æ¨¡å—ä¸ç»„ä»¶ã€æ¨¡å—åŒ–ä¸ç»„ä»¶åŒ–</h3><h4 id="2-1-1-æ¨¡å—"><a class="markdownIt-Anchor" href="#2-1-1-æ¨¡å—"></a> 2. 1. 1 .æ¨¡å—</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. ç†è§£:å‘å¤–æä¾›ç‰¹å®šåŠŸèƒ½çš„jsç¨‹åº,ä¸€èˆ¬å°±æ˜¯ä¸€ä¸ªjsæ–‡ä»¶</span><br><span class="line">2. ä¸ºä»€ä¹ˆ: jsæ–‡ä»¶å¾ˆå¤šå¾ˆå¤æ‚</span><br><span class="line">3. ä½œç”¨:å¤ç”¨js,ç®€åŒ–jsçš„ç¼–å†™,æé«˜jsè¿è¡Œæ•ˆç‡</span><br></pre></td></tr></table></figure><h4 id="2-1-2-ç»„ä»¶"><a class="markdownIt-Anchor" href="#2-1-2-ç»„ä»¶"></a> 2. 1. 2 .ç»„ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. ç†è§£:ç”¨æ¥å®ç°å±€éƒ¨(ç‰¹å®š)åŠŸèƒ½æ•ˆæœçš„ä»£ç é›†åˆ(html/css/js/image.....)</span><br><span class="line">2. ä¸ºä»€ä¹ˆ:ä¸€ä¸ªç•Œé¢çš„åŠŸèƒ½å¾ˆå¤æ‚</span><br></pre></td></tr></table></figure><h6 id="3-ä½œç”¨å¤ç”¨ç¼–ç ç®€åŒ–é¡¹ç›®ç¼–ç æé«˜è¿è¡Œæ•ˆç‡"><a class="markdownIt-Anchor" href="#3-ä½œç”¨å¤ç”¨ç¼–ç ç®€åŒ–é¡¹ç›®ç¼–ç æé«˜è¿è¡Œæ•ˆç‡"></a> 3. ä½œç”¨:å¤ç”¨ç¼–ç ,ç®€åŒ–é¡¹ç›®ç¼–ç ,æé«˜è¿è¡Œæ•ˆç‡</h6><h4 id="2-1-3-æ¨¡å—åŒ–"><a class="markdownIt-Anchor" href="#2-1-3-æ¨¡å—åŒ–"></a> 2. 1. 3 .æ¨¡å—åŒ–</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å½“åº”ç”¨ä¸­çš„jséƒ½ä»¥æ¨¡å—æ¥ç¼–å†™çš„,é‚£è¿™ä¸ªåº”ç”¨å°±æ˜¯ä¸€ä¸ªæ¨¡å—åŒ–çš„åº”ç”¨ã€‚</span><br></pre></td></tr></table></figure><h4 id="2-1-4-ç»„ä»¶åŒ–"><a class="markdownIt-Anchor" href="#2-1-4-ç»„ä»¶åŒ–"></a> 2. 1. 4 .ç»„ä»¶åŒ–</h4><h6 id="å½“åº”ç”¨ä¸­çš„åŠŸèƒ½éƒ½æ˜¯å¤šç»„ä»¶çš„æ–¹å¼æ¥ç¼–å†™çš„é‚£è¿™ä¸ªåº”ç”¨å°±æ˜¯ä¸€ä¸ªç»„ä»¶åŒ–çš„åº”ç”¨"><a class="markdownIt-Anchor" href="#å½“åº”ç”¨ä¸­çš„åŠŸèƒ½éƒ½æ˜¯å¤šç»„ä»¶çš„æ–¹å¼æ¥ç¼–å†™çš„é‚£è¿™ä¸ªåº”ç”¨å°±æ˜¯ä¸€ä¸ªç»„ä»¶åŒ–çš„åº”ç”¨"></a> å½“åº”ç”¨ä¸­çš„åŠŸèƒ½éƒ½æ˜¯å¤šç»„ä»¶çš„æ–¹å¼æ¥ç¼–å†™çš„,é‚£è¿™ä¸ªåº”ç”¨å°±æ˜¯ä¸€ä¸ªç»„ä»¶åŒ–çš„åº”ç”¨,ã€‚</h6><h3 id="2-2-éå•æ–‡ä»¶ç»„ä»¶"><a class="markdownIt-Anchor" href="#2-2-éå•æ–‡ä»¶ç»„ä»¶"></a> 2. 2 .éå•æ–‡ä»¶ç»„ä»¶</h3><h6 id="1-æ¨¡æ¿ç¼–å†™æ²¡æœ‰æç¤º"><a class="markdownIt-Anchor" href="#1-æ¨¡æ¿ç¼–å†™æ²¡æœ‰æç¤º"></a> 1. æ¨¡æ¿ç¼–å†™æ²¡æœ‰æç¤º</h6><h6 id="2-æ²¡æœ‰æ„å»ºè¿‡ç¨‹æ— æ³•å°†-es-6-è½¬æ¢æˆ-es-5"><a class="markdownIt-Anchor" href="#2-æ²¡æœ‰æ„å»ºè¿‡ç¨‹æ— æ³•å°†-es-6-è½¬æ¢æˆ-es-5"></a> 2. æ²¡æœ‰æ„å»ºè¿‡ç¨‹,æ— æ³•å°† ES 6 è½¬æ¢æˆ ES 5</h6><h6 id="3-ä¸æ”¯æŒç»„ä»¶çš„-css"><a class="markdownIt-Anchor" href="#3-ä¸æ”¯æŒç»„ä»¶çš„-css"></a> 3. ä¸æ”¯æŒç»„ä»¶çš„ CSS</h6><h6 id="4-çœŸæ­£å¼€å‘ä¸­å‡ ä¹ä¸ç”¨"><a class="markdownIt-Anchor" href="#4-çœŸæ­£å¼€å‘ä¸­å‡ ä¹ä¸ç”¨"></a> 4. çœŸæ­£å¼€å‘ä¸­å‡ ä¹ä¸ç”¨</h6><h3 id="2-3-å•æ–‡ä»¶ç»„ä»¶"><a class="markdownIt-Anchor" href="#2-3-å•æ–‡ä»¶ç»„ä»¶"></a> 2. 3 .å•æ–‡ä»¶ç»„ä»¶</h3><h4 id="2-3-1-ä¸€ä¸ªvue-æ–‡ä»¶çš„ç»„æˆ-3-ä¸ªéƒ¨åˆ†"><a class="markdownIt-Anchor" href="#2-3-1-ä¸€ä¸ªvue-æ–‡ä»¶çš„ç»„æˆ-3-ä¸ªéƒ¨åˆ†"></a> 2. 3. 1 .ä¸€ä¸ª.vue æ–‡ä»¶çš„ç»„æˆ( 3 ä¸ªéƒ¨åˆ†)</h4><h6 id="1-æ¨¡æ¿é¡µé¢"><a class="markdownIt-Anchor" href="#1-æ¨¡æ¿é¡µé¢"></a> 1. æ¨¡æ¿é¡µé¢</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">é¡µé¢æ¨¡æ¿</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h6 id="2-js-æ¨¡å—å¯¹è±¡"><a class="markdownIt-Anchor" href="#2-js-æ¨¡å—å¯¹è±¡"></a> 2. JS æ¨¡å—å¯¹è±¡</h6><script>exportdefault{data(){return{}},methods:{},computed:{},components:{}}</script><p><strong>3. æ ·å¼</strong></p><style>æ ·å¼å®šä¹‰</style><h4 id="2-3-2-åŸºæœ¬ä½¿ç”¨"><a class="markdownIt-Anchor" href="#2-3-2-åŸºæœ¬ä½¿ç”¨"></a> 2. 3. 2 .åŸºæœ¬ä½¿ç”¨</h4><h6 id="1-å¼•å…¥ç»„ä»¶"><a class="markdownIt-Anchor" href="#1-å¼•å…¥ç»„ä»¶"></a> 1. å¼•å…¥ç»„ä»¶</h6><h6 id="2-æ˜ å°„æˆæ ‡ç­¾"><a class="markdownIt-Anchor" href="#2-æ˜ å°„æˆæ ‡ç­¾"></a> 2. æ˜ å°„æˆæ ‡ç­¾</h6><h6 id="3-ä½¿ç”¨ç»„ä»¶æ ‡ç­¾"><a class="markdownIt-Anchor" href="#3-ä½¿ç”¨ç»„ä»¶æ ‡ç­¾"></a> 3. ä½¿ç”¨ç»„ä»¶æ ‡ç­¾</h6><h2 id="ç¬¬-3-ç« ä½¿ç”¨-vue-è„šæ‰‹æ¶"><a class="markdownIt-Anchor" href="#ç¬¬-3-ç« ä½¿ç”¨-vue-è„šæ‰‹æ¶"></a> ç¬¬ 3 ç« ï¼šä½¿ç”¨ Vue è„šæ‰‹æ¶</h2><h3 id="3-1-åˆå§‹åŒ–è„šæ‰‹æ¶"><a class="markdownIt-Anchor" href="#3-1-åˆå§‹åŒ–è„šæ‰‹æ¶"></a> 3. 1 åˆå§‹åŒ–è„šæ‰‹æ¶</h3><h4 id="3-1-1-è¯´æ˜"><a class="markdownIt-Anchor" href="#3-1-1-è¯´æ˜"></a> 3. 1. 1 è¯´æ˜</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. Vueè„šæ‰‹æ¶æ˜¯Vueå®˜æ–¹æä¾›çš„æ ‡å‡†åŒ–å¼€å‘å·¥å…·ï¼ˆå¼€å‘å¹³å°ï¼‰ã€‚</span><br><span class="line">2. æœ€æ–°çš„ç‰ˆæœ¬æ˜¯ 4 .xã€‚</span><br><span class="line">3. æ–‡æ¡£:https://cli.vuejs.org/zh/ã€‚</span><br></pre></td></tr></table></figure><h3 id="3-1-2-å…·ä½“æ­¥éª¤"><a class="markdownIt-Anchor" href="#3-1-2-å…·ä½“æ­¥éª¤"></a> 3. 1. 2 å…·ä½“æ­¥éª¤</h3><p>ç¬¬ä¸€æ­¥ï¼ˆä»…ç¬¬ä¸€æ¬¡æ‰§è¡Œï¼‰ï¼šå…¨å±€å®‰è£…@vue/cliã€‚<br />npminstall-g@vue/cli<br />ç¬¬äºŒæ­¥ï¼š <strong>åˆ‡æ¢åˆ°ä½ è¦åˆ›å»ºé¡¹ç›®çš„ç›®å½•</strong> ï¼Œç„¶åä½¿ç”¨å‘½ä»¤åˆ›å»ºé¡¹ç›®<br />vuecreatexxxx<br />ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨é¡¹ç›®<br />npmrunserve<br />å¤‡æ³¨ï¼š</p><ol><li><p>å¦‚ ht å‡º tp ç° s:/ä¸‹/re è½½ g ç¼“ ist æ…¢ ry è¯·.n é… pm ç½®.tanopbmao æ·˜.o å® rg é•œåƒï¼šnpmconfigsetregistry</p></li><li><p>Vue è„šæ‰‹æ¶éšè—äº†æ‰€æœ‰ webpack ç›¸å…³çš„é…ç½®ï¼Œè‹¥æƒ³æŸ¥çœ‹å…·ä½“çš„ webpakc é…ç½®ï¼Œ<br />è¯·æ‰§è¡Œï¼švueinspect&gt;output.js</p></li></ol><h4 id="3-1-3-æ¨¡æ¿é¡¹ç›®çš„ç»“æ„"><a class="markdownIt-Anchor" href="#3-1-3-æ¨¡æ¿é¡¹ç›®çš„ç»“æ„"></a> 3. 1. 3 æ¨¡æ¿é¡¹ç›®çš„ç»“æ„</h4><h5 id="node_modules"><a class="markdownIt-Anchor" href="#node_modules"></a> â”œâ”€â”€node_modules</h5><h5 id="public"><a class="markdownIt-Anchor" href="#public"></a> â”œâ”€â”€public</h5><h5 id="faviconicoé¡µç­¾å›¾æ ‡"><a class="markdownIt-Anchor" href="#faviconicoé¡µç­¾å›¾æ ‡"></a> â”‚ â”œâ”€â”€favicon.ico:é¡µç­¾å›¾æ ‡</h5><h5 id="indexhtmlä¸»é¡µé¢"><a class="markdownIt-Anchor" href="#indexhtmlä¸»é¡µé¢"></a> â”‚ â””â”€â”€index.html:ä¸»é¡µé¢</h5><h5 id="src"><a class="markdownIt-Anchor" href="#src"></a> â”œâ”€â”€src</h5><h5 id="assetså­˜æ”¾é™æ€èµ„æº"><a class="markdownIt-Anchor" href="#assetså­˜æ”¾é™æ€èµ„æº"></a> â”‚ â”œâ”€â”€assets:å­˜æ”¾é™æ€èµ„æº</h5><h5 id="logopng"><a class="markdownIt-Anchor" href="#logopng"></a> â”‚ â”‚ â””â”€â”€logo.png</h5><h5 id="componentå­˜æ”¾ç»„ä»¶"><a class="markdownIt-Anchor" href="#componentå­˜æ”¾ç»„ä»¶"></a> â”‚ â”‚â”€â”€component:å­˜æ”¾ç»„ä»¶</h5><h5 id="helloworldvue"><a class="markdownIt-Anchor" href="#helloworldvue"></a> â”‚ â”‚ â””â”€â”€HelloWorld.vue</h5><h5 id="appvueæ±‡æ€»æ‰€æœ‰ç»„ä»¶"><a class="markdownIt-Anchor" href="#appvueæ±‡æ€»æ‰€æœ‰ç»„ä»¶"></a> â”‚ â”‚â”€â”€App.vue:æ±‡æ€»æ‰€æœ‰ç»„ä»¶</h5><h5 id="mainjså…¥å£æ–‡ä»¶"><a class="markdownIt-Anchor" href="#mainjså…¥å£æ–‡ä»¶"></a> â”‚ â”‚â”€â”€main.js:å…¥å£æ–‡ä»¶</h5><h5 id="gitignoregit-ç‰ˆæœ¬ç®¡åˆ¶å¿½ç•¥çš„é…ç½®"><a class="markdownIt-Anchor" href="#gitignoregit-ç‰ˆæœ¬ç®¡åˆ¶å¿½ç•¥çš„é…ç½®"></a> â”œâ”€â”€.gitignore:git ç‰ˆæœ¬ç®¡åˆ¶å¿½ç•¥çš„é…ç½®</h5><h5 id="babelconfigjsbabel-çš„é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#babelconfigjsbabel-çš„é…ç½®æ–‡ä»¶"></a> â”œâ”€â”€babel.config.js:babel çš„é…ç½®æ–‡ä»¶</h5><h5 id="packagejsonåº”ç”¨åŒ…é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#packagejsonåº”ç”¨åŒ…é…ç½®æ–‡ä»¶"></a> â”œâ”€â”€package.json:åº”ç”¨åŒ…é…ç½®æ–‡ä»¶</h5><h5 id="readmemd"><a class="markdownIt-Anchor" href="#readmemd"></a> <a href="http://xn--README-2n7ca4w.md">â”œâ”€â”€README.md</a>:åº”ç”¨æè¿°æ–‡ä»¶</h5><h5 id="package-lockjsonåŒ…ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶"><a class="markdownIt-Anchor" href="#package-lockjsonåŒ…ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶"></a> â”œâ”€â”€package-lock.jsonï¼šåŒ…ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶</h5><h3 id="3-2-ref-ä¸-props"><a class="markdownIt-Anchor" href="#3-2-ref-ä¸-props"></a> 3. 2 ref ä¸ props</h3><h3 id="ref"><a class="markdownIt-Anchor" href="#ref"></a> ref</h3><h6 id="1-ä½œç”¨-ç”¨äºç»™èŠ‚ç‚¹æ‰“æ ‡è¯†"><a class="markdownIt-Anchor" href="#1-ä½œç”¨-ç”¨äºç»™èŠ‚ç‚¹æ‰“æ ‡è¯†"></a> 1 .ä½œç”¨ï¼š ç”¨äºç»™èŠ‚ç‚¹æ‰“æ ‡è¯†</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 .è¯»å–æ–¹å¼ï¼š this.$refs.xxxxxx</span><br></pre></td></tr></table></figure><h3 id="props"><a class="markdownIt-Anchor" href="#props"></a> props</h3><h6 id="1-ä½œç”¨-ç”¨äºçˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’æ•°æ®"><a class="markdownIt-Anchor" href="#1-ä½œç”¨-ç”¨äºçˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’æ•°æ®"></a> 1. ä½œç”¨ï¼š ç”¨äºçˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’æ•°æ®</h6><h6 id="2-è¯»å–æ–¹å¼ä¸€åªæŒ‡å®šåç§°"><a class="markdownIt-Anchor" href="#2-è¯»å–æ–¹å¼ä¸€åªæŒ‡å®šåç§°"></a> 2. è¯»å–æ–¹å¼ä¸€:åªæŒ‡å®šåç§°</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">props:[&#x27;name&#x27;,&#x27;age&#x27;,&#x27;setName&#x27;]</span><br><span class="line">3. è¯»å–æ–¹å¼äºŒ:æŒ‡å®šåç§°å’Œç±»å‹</span><br><span class="line">props:&#123;</span><br><span class="line">name:String,</span><br><span class="line">age:Number,</span><br><span class="line">setNmae:Function</span><br><span class="line">&#125;</span><br><span class="line">4. è¯»å–æ–¹å¼ä¸‰:æŒ‡å®šåç§°/ç±»å‹/å¿…è¦æ€§/é»˜è®¤å€¼</span><br><span class="line">props:&#123;</span><br><span class="line">name:&#123;type:String,required:true,default:xxx&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-3-æ··å…¥"><a class="markdownIt-Anchor" href="#3-3-æ··å…¥"></a> 3. 3 æ··å…¥</h3><ol><li><p>Vue æ’ä»¶æ˜¯ä¸€ä¸ªåŒ…å« install æ–¹æ³•çš„å¯¹è±¡</p></li><li><p>é€šè¿‡ install æ–¹æ³•ç»™ Vue æˆ– Vue å®ä¾‹æ·»åŠ æ–¹æ³•,å®šä¹‰å…¨å±€æŒ‡ä»¤ç­‰</p></li></ol><h3 id="3-4-æ’ä»¶"><a class="markdownIt-Anchor" href="#3-4-æ’ä»¶"></a> 3. 4 æ’ä»¶</h3><ol><li>Vue æ’ä»¶æ˜¯ä¸€ä¸ªåŒ…å« install æ–¹æ³•çš„å¯¹è±¡</li><li>é€šè¿‡ install æ–¹æ³•ç»™ Vue æˆ– Vue å®ä¾‹æ·»åŠ æ–¹æ³•,å®šä¹‰å…¨å±€æŒ‡ä»¤ç­‰</li></ol><h3 id="3-5-todo-list-æ¡ˆä¾‹"><a class="markdownIt-Anchor" href="#3-5-todo-list-æ¡ˆä¾‹"></a> 3. 5 Todo-list æ¡ˆä¾‹</h3><h4 id="ç»„ä»¶åŒ–ç¼–ç æµç¨‹é€šç”¨"><a class="markdownIt-Anchor" href="#ç»„ä»¶åŒ–ç¼–ç æµç¨‹é€šç”¨"></a> ç»„ä»¶åŒ–ç¼–ç æµç¨‹ï¼ˆé€šç”¨ï¼‰</h4><h6 id="1-å®ç°é™æ€ç»„ä»¶æŠ½å–ç»„ä»¶ä½¿ç”¨ç»„ä»¶å®ç°é™æ€é¡µé¢æ•ˆæœ"><a class="markdownIt-Anchor" href="#1-å®ç°é™æ€ç»„ä»¶æŠ½å–ç»„ä»¶ä½¿ç”¨ç»„ä»¶å®ç°é™æ€é¡µé¢æ•ˆæœ"></a> 1 .å®ç°é™æ€ç»„ä»¶ï¼šæŠ½å–ç»„ä»¶ï¼Œä½¿ç”¨ç»„ä»¶å®ç°é™æ€é¡µé¢æ•ˆæœ</h6><h6 id="2-å±•ç¤ºåŠ¨æ€æ•°æ®"><a class="markdownIt-Anchor" href="#2-å±•ç¤ºåŠ¨æ€æ•°æ®"></a> 2 .å±•ç¤ºåŠ¨æ€æ•°æ®ï¼š</h6><h6 id="2-1-æ•°æ®çš„ç±»å‹-åç§°æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#2-1-æ•°æ®çš„ç±»å‹-åç§°æ˜¯ä»€ä¹ˆ"></a> 2. 1 .æ•°æ®çš„ç±»å‹ã€åç§°æ˜¯ä»€ä¹ˆï¼Ÿ</h6><h6 id="2-2-æ•°æ®ä¿å­˜åœ¨å“ªä¸ªç»„ä»¶"><a class="markdownIt-Anchor" href="#2-2-æ•°æ®ä¿å­˜åœ¨å“ªä¸ªç»„ä»¶"></a> 2. 2 .æ•°æ®ä¿å­˜åœ¨å“ªä¸ªç»„ä»¶ï¼Ÿ</h6><h6 id="3-äº¤äº’ä»ç»‘å®šäº‹ä»¶ç›‘å¬å¼€å§‹"><a class="markdownIt-Anchor" href="#3-äº¤äº’ä»ç»‘å®šäº‹ä»¶ç›‘å¬å¼€å§‹"></a> 3 .äº¤äº’â€”â€”ä»ç»‘å®šäº‹ä»¶ç›‘å¬å¼€å§‹</h6><h3 id="3-6-vue-ä¸­çš„è‡ªå®šä¹‰äº‹ä»¶"><a class="markdownIt-Anchor" href="#3-6-vue-ä¸­çš„è‡ªå®šä¹‰äº‹ä»¶"></a> 3. 6 Vue ä¸­çš„è‡ªå®šä¹‰äº‹ä»¶</h3><h4 id="ç»‘å®šäº‹ä»¶ç›‘å¬"><a class="markdownIt-Anchor" href="#ç»‘å®šäº‹ä»¶ç›‘å¬"></a> ç»‘å®šäº‹ä»¶ç›‘å¬</h4><p>&lt; <strong>Header@addTodo=&quot;</strong> addTodo <strong>&quot;</strong> /&gt;<br />æˆ–è€…<br />&lt; <strong>tHheiasd</strong>. <strong>e$rrerfesf</strong>. <strong>=</strong> h <strong>&quot;</strong> e <strong>h</strong> a <strong>e</strong> d <strong>a</strong> e <strong>d</strong> r <strong>e</strong>. <strong>r</strong> $ <strong>&quot;</strong> o/n&gt;( <strong>â€˜addTodoâ€™</strong> , <strong>this</strong> .addTodo)</p><h4 id="è§¦å‘äº‹ä»¶"><a class="markdownIt-Anchor" href="#è§¦å‘äº‹ä»¶"></a> è§¦å‘äº‹ä»¶</h4><p><strong>this</strong> .$emit( <strong>â€˜addTodoâ€™</strong> , todo)</p><h3 id="3-7-å…¨å±€äº‹ä»¶æ€»çº¿"><a class="markdownIt-Anchor" href="#3-7-å…¨å±€äº‹ä»¶æ€»çº¿"></a> 3. 7 å…¨å±€äº‹ä»¶æ€»çº¿</h3><h4 id="3-7-1-ç†è§£"><a class="markdownIt-Anchor" href="#3-7-1-ç†è§£"></a> 3. 7. 1 ç†è§£</h4><ol><li>Vue åŸå‹å¯¹è±¡ä¸ŠåŒ…å«äº‹ä»¶å¤„ç†çš„æ–¹æ³•<br />1 ) $on(eventName,listener):ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ç›‘å¬<br />2 ) $emit(eventName,data):åˆ†å‘è‡ªå®šä¹‰äº‹ä»¶<br />3 ) $off(eventName):è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶ç›‘å¬<br />4 ) $once(eventName,listener):ç»‘å®šäº‹ä»¶ç›‘å¬,ä½†åªèƒ½å¤„ç†ä¸€æ¬¡</li><li>æ‰€æœ‰ç»„ä»¶å®ä¾‹å¯¹è±¡çš„åŸå‹å¯¹è±¡çš„åŸå‹å¯¹è±¡å°±æ˜¯ Vue çš„åŸå‹å¯¹è±¡</li></ol><p>1 ) æ‰€æœ‰ç»„ä»¶å¯¹è±¡éƒ½èƒ½çœ‹åˆ° Vue åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§å’Œæ–¹æ³•<br />2 ) Vue.prototype.<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mi>u</mi><mi>s</mi><mo>=</mo><mi>n</mi><mi>e</mi><mi>w</mi><mi>V</mi><mi>u</mi><mi>e</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo><mo separator="true">,</mo><mi mathvariant="normal">æ‰€</mi><mi mathvariant="normal">æœ‰</mi><mi mathvariant="normal">çš„</mi><mi mathvariant="normal">ç»„</mi><mi mathvariant="normal">ä»¶</mi><mi mathvariant="normal">å¯¹</mi><mi mathvariant="normal">è±¡</mi><mi mathvariant="normal">éƒ½</mi><mi mathvariant="normal">èƒ½</mi><mi mathvariant="normal">çœ‹</mi><mi mathvariant="normal">åˆ°</mi></mrow><annotation encoding="application/x-tex">bus=newVue(),æ‰€æœ‰çš„ç»„ä»¶å¯¹è±¡éƒ½èƒ½çœ‹åˆ°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">u</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mord mathdefault">u</span><span class="mord mathdefault">e</span><span class="mopen">(</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">æ‰€</span><span class="mord cjk_fallback">æœ‰</span><span class="mord cjk_fallback">çš„</span><span class="mord cjk_fallback">ç»„</span><span class="mord cjk_fallback">ä»¶</span><span class="mord cjk_fallback">å¯¹</span><span class="mord cjk_fallback">è±¡</span><span class="mord cjk_fallback">éƒ½</span><span class="mord cjk_fallback">èƒ½</span><span class="mord cjk_fallback">çœ‹</span><span class="mord cjk_fallback">åˆ°</span></span></span></span>bus è¿™ä¸ªå±æ€§<br />å¯¹è±¡ 3. å…¨å±€äº‹ä»¶æ€»çº¿<br />1 ) åŒ…å«äº‹ä»¶å¤„ç†ç›¸å…³æ–¹æ³•çš„å¯¹è±¡(åªæœ‰ä¸€ä¸ª)<br />2 ) æ‰€æœ‰çš„ç»„ä»¶éƒ½å¯ä»¥å¾—åˆ°</p><h4 id="3-7-2-æŒ‡å®šäº‹ä»¶æ€»çº¿å¯¹è±¡"><a class="markdownIt-Anchor" href="#3-7-2-æŒ‡å®šäº‹ä»¶æ€»çº¿å¯¹è±¡"></a> 3. 7. 2 æŒ‡å®šäº‹ä»¶æ€»çº¿å¯¹è±¡</h4><p><strong>new</strong> beVfuoer(e{Create () { <em>//</em> å°½é‡æ—©çš„æ‰§è¡ŒæŒ‚è½½å…¨å±€äº‹ä»¶æ€»çº¿å¯¹è±¡çš„æ“ä½œ</p><p>},Vue. <strong>prototype</strong>. **<span class='katex-error' title='ParseError: KaTeX parse error: Expected &#039;EOF&#039;, got &#039;}&#039; at position 29: â€¦s** = **this**}Ì²).'>globalEventBus** = **this**}).</span>mount( <strong>â€˜#rootâ€™</strong> )</p><h4 id="3-7-3-ç»‘å®šäº‹ä»¶"><a class="markdownIt-Anchor" href="#3-7-3-ç»‘å®šäº‹ä»¶"></a> 3. 7. 3 ç»‘å®šäº‹ä»¶</h4><p><strong>this</strong>. **<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>g</mi><mi>l</mi><mi>o</mi><mi>b</mi><mi>a</mi><mi>l</mi><mi>E</mi><mi>v</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>B</mi><mi>u</mi><mi>s</mi><mo>âˆ—</mo><mo>âˆ—</mo><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">globalEventBus** .</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">b</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault">u</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord">âˆ—</span><span class="mord">.</span></span></span></span>on( <strong>â€˜deleteTodoâ€™</strong> , <strong>this</strong> .deleteTodo)</p><h4 id="3-7-4-åˆ†å‘äº‹ä»¶"><a class="markdownIt-Anchor" href="#3-7-4-åˆ†å‘äº‹ä»¶"></a> 3. 7. 4 åˆ†å‘äº‹ä»¶</h4><p><strong>this</strong>. **<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>g</mi><mi>l</mi><mi>o</mi><mi>b</mi><mi>a</mi><mi>l</mi><mi>E</mi><mi>v</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>B</mi><mi>u</mi><mi>s</mi><mo>âˆ—</mo><mo>âˆ—</mo><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">globalEventBus** .</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">b</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault">u</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord">âˆ—</span><span class="mord">.</span></span></span></span>emit( <strong>â€˜deleteTodoâ€™</strong> , <strong>this</strong>. <strong>index</strong> )</p><h4 id="3-7-5-è§£ç»‘äº‹ä»¶"><a class="markdownIt-Anchor" href="#3-7-5-è§£ç»‘äº‹ä»¶"></a> 3. 7. 5 è§£ç»‘äº‹ä»¶</h4><p><strong>this</strong>. **<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>g</mi><mi>l</mi><mi>o</mi><mi>b</mi><mi>a</mi><mi>l</mi><mi>E</mi><mi>v</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>B</mi><mi>u</mi><mi>s</mi><mo>âˆ—</mo><mo>âˆ—</mo><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">globalEventBus** .</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">b</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault">u</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord">âˆ—</span><span class="mord">.</span></span></span></span>off( <strong>â€˜deleteTodoâ€™</strong> )</p><h3 id="3-8-æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ"><a class="markdownIt-Anchor" href="#3-8-æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ"></a> 3. 8 æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ</h3><h4 id="3-8-1-ç†è§£"><a class="markdownIt-Anchor" href="#3-8-1-ç†è§£"></a> 3. 8. 1 ç†è§£</h4><h6 id="1-è¿™ç§æ–¹å¼çš„æ€æƒ³ä¸å…¨å±€äº‹ä»¶æ€»çº¿å¾ˆç›¸ä¼¼"><a class="markdownIt-Anchor" href="#1-è¿™ç§æ–¹å¼çš„æ€æƒ³ä¸å…¨å±€äº‹ä»¶æ€»çº¿å¾ˆç›¸ä¼¼"></a> 1 .è¿™ç§æ–¹å¼çš„æ€æƒ³ä¸å…¨å±€äº‹ä»¶æ€»çº¿å¾ˆç›¸ä¼¼</h6><h6 id="2-å®ƒåŒ…å«ä»¥ä¸‹æ“ä½œ"><a class="markdownIt-Anchor" href="#2-å®ƒåŒ…å«ä»¥ä¸‹æ“ä½œ"></a> 2 .å®ƒåŒ…å«ä»¥ä¸‹æ“ä½œ:</h6><h6 id="1-è®¢é˜…æ¶ˆæ¯å¯¹åº”ç»‘å®šäº‹ä»¶ç›‘å¬"><a class="markdownIt-Anchor" href="#1-è®¢é˜…æ¶ˆæ¯å¯¹åº”ç»‘å®šäº‹ä»¶ç›‘å¬"></a> ( 1 ) è®¢é˜…æ¶ˆæ¯â€“å¯¹åº”ç»‘å®šäº‹ä»¶ç›‘å¬</h6><h6 id="2-å‘å¸ƒæ¶ˆæ¯åˆ†å‘äº‹ä»¶"><a class="markdownIt-Anchor" href="#2-å‘å¸ƒæ¶ˆæ¯åˆ†å‘äº‹ä»¶"></a> ( 2 ) å‘å¸ƒæ¶ˆæ¯â€“åˆ†å‘äº‹ä»¶</h6><h6 id="3-å–æ¶ˆæ¶ˆæ¯è®¢é˜…è§£ç»‘äº‹ä»¶ç›‘å¬"><a class="markdownIt-Anchor" href="#3-å–æ¶ˆæ¶ˆæ¯è®¢é˜…è§£ç»‘äº‹ä»¶ç›‘å¬"></a> ( 3 ) å–æ¶ˆæ¶ˆæ¯è®¢é˜…â€“è§£ç»‘äº‹ä»¶ç›‘å¬</h6><p>3 .éœ€è¦å¼•å…¥ä¸€ä¸ªæ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒçš„ç¬¬ä¸‰æ–¹å®ç°åº“: <strong>PubSubJS</strong></p><h4 id="3-8-2-ä½¿ç”¨-pubsubjs"><a class="markdownIt-Anchor" href="#3-8-2-ä½¿ç”¨-pubsubjs"></a> 3. 8. 2 ä½¿ç”¨ PubSubJS</h4><h5 id="1-åœ¨çº¿æ–‡æ¡£httpsgithubcommroderickpubsubjs"><a class="markdownIt-Anchor" href="#1-åœ¨çº¿æ–‡æ¡£httpsgithubcommroderickpubsubjs"></a> 1 .åœ¨çº¿æ–‡æ¡£:<a href="https://github.com/mroderick/PubSubJS">https://github.com/mroderick/PubSubJS</a></h5><p>2 .ä¸‹è½½:npminstall-Spubsub-js<br />3 .ç›¸å…³è¯­æ³•<br />( 1 ) importPubSubfromâ€™pubsub-jsâ€™ //å¼•å…¥<br />( 2 ) PubSub.subscribe(â€˜msgNameâ€™,functon(msgName,data){})<br />( 3 ) PubSub.publish(â€˜msgNameâ€™,data):å‘å¸ƒæ¶ˆæ¯,è§¦å‘è®¢é˜…çš„å›è°ƒå‡½æ•°è°ƒç”¨<br />( 4 ) PubSub.unsubscribe(token):å–æ¶ˆæ¶ˆæ¯çš„è®¢é˜…</p><h3 id="3-9-è¿‡åº¦ä¸åŠ¨ç”»"><a class="markdownIt-Anchor" href="#3-9-è¿‡åº¦ä¸åŠ¨ç”»"></a> 3. 9 è¿‡åº¦ä¸åŠ¨ç”»</h3><h4 id="3-9-1-æ•ˆæœ"><a class="markdownIt-Anchor" href="#3-9-1-æ•ˆæœ"></a> 3. 9. 1 æ•ˆæœ</h4><h4 id="3-9-2-vue-åŠ¨ç”»çš„ç†è§£"><a class="markdownIt-Anchor" href="#3-9-2-vue-åŠ¨ç”»çš„ç†è§£"></a> 3. 9. 2 vue åŠ¨ç”»çš„ç†è§£</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1 .æ“ä½œcssçš„trasitionæˆ–animation</span><br><span class="line">2 .vueä¼šç»™ç›®æ ‡å…ƒç´ æ·»åŠ /ç§»é™¤ç‰¹å®šçš„class</span><br><span class="line">3 .è¿‡æ¸¡çš„ç›¸å…³ç±»åï¼š</span><br><span class="line">1 .xxx-enter-active:æŒ‡å®šæ˜¾ç¤ºçš„transition</span><br><span class="line">2 .xxx-leave-active:æŒ‡å®šéšè—çš„transition</span><br><span class="line">3 .xxx-enter/xxx-leave-to:æŒ‡å®šéšè—æ—¶çš„æ ·å¼</span><br></pre></td></tr></table></figure><h4 id="3-9-3-åŸºæœ¬è¿‡æ¸¡åŠ¨ç”»çš„ç¼–ç "><a class="markdownIt-Anchor" href="#3-9-3-åŸºæœ¬è¿‡æ¸¡åŠ¨ç”»çš„ç¼–ç "></a> 3. 9. 3 åŸºæœ¬è¿‡æ¸¡åŠ¨ç”»çš„ç¼–ç </h4><ol><li>åœ¨ç›®æ ‡å…ƒç´ å¤–åŒ…è£¹&lt;transitionname=â€œxxxâ€&gt;</li><li>å®šä¹‰ class æ ·å¼<br />a) æŒ‡å®šè¿‡æ¸¡æ ·å¼:transition<br />b) æŒ‡å®šéšè—æ—¶çš„æ ·å¼:opacity/å…¶å®ƒ</li></ol><h2 id="ç¬¬-4-ç« vue-ä¸­çš„-ajax"><a class="markdownIt-Anchor" href="#ç¬¬-4-ç« vue-ä¸­çš„-ajax"></a> ç¬¬ 4 ç« ï¼šVue ä¸­çš„ ajax</h2><h3 id="4-1-è§£å†³å¼€å‘ç¯å¢ƒ-ajax-è·¨åŸŸé—®é¢˜"><a class="markdownIt-Anchor" href="#4-1-è§£å†³å¼€å‘ç¯å¢ƒ-ajax-è·¨åŸŸé—®é¢˜"></a> 4. 1 è§£å†³å¼€å‘ç¯å¢ƒ Ajax è·¨åŸŸé—®é¢˜</h3><h6 id="ä½¿ç”¨ä»£ç†æœåŠ¡å™¨"><a class="markdownIt-Anchor" href="#ä½¿ç”¨ä»£ç†æœåŠ¡å™¨"></a> ä½¿ç”¨ä»£ç†æœåŠ¡å™¨</h6><h3 id="4-2-github-ç”¨æˆ·æœç´¢æ¡ˆä¾‹"><a class="markdownIt-Anchor" href="#4-2-github-ç”¨æˆ·æœç´¢æ¡ˆä¾‹"></a> 4. 2 github ç”¨æˆ·æœç´¢æ¡ˆä¾‹</h3><h3 id="4-2-1-æ•ˆæœ"><a class="markdownIt-Anchor" href="#4-2-1-æ•ˆæœ"></a> 4. 2. 1 æ•ˆæœ</h3><h3 id="4-2-2-æ¥å£åœ°å€"><a class="markdownIt-Anchor" href="#4-2-2-æ¥å£åœ°å€"></a> 4. 2. 2 æ¥å£åœ°å€</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://api.github.com/search/users?q=xxx</span><br></pre></td></tr></table></figure><h3 id="4-3-vue-é¡¹ç›®ä¸­å¸¸ç”¨çš„-2-ä¸ª-ajax-åº“"><a class="markdownIt-Anchor" href="#4-3-vue-é¡¹ç›®ä¸­å¸¸ç”¨çš„-2-ä¸ª-ajax-åº“"></a> 4. 3 vue é¡¹ç›®ä¸­å¸¸ç”¨çš„ 2 ä¸ª Ajax åº“</h3><h4 id="4-3-1-axios"><a class="markdownIt-Anchor" href="#4-3-1-axios"></a> 4. 3. 1 axios</h4><p>é€šç”¨çš„ Ajax è¯·æ±‚åº“,å®˜æ–¹æ¨èï¼Œä½¿ç”¨å¹¿æ³›</p><h4 id="4-3-2-vue-resource"><a class="markdownIt-Anchor" href="#4-3-2-vue-resource"></a> 4. 3. 2 vue-resource</h4><p>vue æ’ä»¶åº“,vue 1 .x ä½¿ç”¨å¹¿æ³›ï¼Œ <strong>å®˜æ–¹å·²ä¸ç»´æŠ¤ã€‚</strong></p><h3 id="4-4-slot-æ’æ§½"><a class="markdownIt-Anchor" href="#4-4-slot-æ’æ§½"></a> 4. 4 slot æ’æ§½</h3><h4 id="4-4-1-æ•ˆæœ"><a class="markdownIt-Anchor" href="#4-4-1-æ•ˆæœ"></a> 4. 4. 1 æ•ˆæœ</h4><h6 id="æ•ˆæœä¸€ä¸ä½¿ç”¨æ’æ§½"><a class="markdownIt-Anchor" href="#æ•ˆæœä¸€ä¸ä½¿ç”¨æ’æ§½"></a> æ•ˆæœä¸€ï¼ˆä¸ä½¿ç”¨æ’æ§½ï¼‰ï¼š</h6><h6 id="æ•ˆæœäºŒé»˜è®¤æ’æ§½"><a class="markdownIt-Anchor" href="#æ•ˆæœäºŒé»˜è®¤æ’æ§½"></a> æ•ˆæœäºŒï¼ˆé»˜è®¤æ’æ§½ï¼‰ï¼š</h6><h6 id="æ•ˆæœä¸‰å…·åæ’æ§½"><a class="markdownIt-Anchor" href="#æ•ˆæœä¸‰å…·åæ’æ§½"></a> æ•ˆæœä¸‰ï¼ˆå…·åæ’æ§½ï¼‰ï¼š</h6><h6 id="æ•ˆæœä¸‰ä½œç”¨åŸŸæ’æ§½"><a class="markdownIt-Anchor" href="#æ•ˆæœä¸‰ä½œç”¨åŸŸæ’æ§½"></a> æ•ˆæœä¸‰ï¼ˆä½œç”¨åŸŸæ’æ§½ï¼‰ï¼š</h6><h4 id="4-4-1-ç†è§£"><a class="markdownIt-Anchor" href="#4-4-1-ç†è§£"></a> 4. 4. 1 ç†è§£</h4><h6 id="çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’å¸¦æ•°æ®çš„æ ‡ç­¾å½“ä¸€ä¸ªç»„ä»¶æœ‰ä¸ç¡®å®šçš„ç»“æ„æ—¶å°±éœ€è¦ä½¿ç”¨"><a class="markdownIt-Anchor" href="#çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’å¸¦æ•°æ®çš„æ ‡ç­¾å½“ä¸€ä¸ªç»„ä»¶æœ‰ä¸ç¡®å®šçš„ç»“æ„æ—¶å°±éœ€è¦ä½¿ç”¨"></a> çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’å¸¦æ•°æ®çš„æ ‡ç­¾ï¼Œå½“ä¸€ä¸ªç»„ä»¶æœ‰ä¸ç¡®å®šçš„ç»“æ„æ—¶,å°±éœ€è¦ä½¿ç”¨</h6><p>slot æŠ€æœ¯ï¼Œæ³¨æ„ï¼šæ’æ§½å†…å®¹æ˜¯åœ¨çˆ¶ç»„ä»¶ä¸­ç¼–è¯‘å,å†ä¼ é€’ç»™å­ç»„ä»¶çš„ã€‚</p><h4 id="4-4-2-åˆ†ç±»"><a class="markdownIt-Anchor" href="#4-4-2-åˆ†ç±»"></a> 4. 4. 2 åˆ†ç±»</h4><h6 id="1-é»˜è®¤æ’æ§½"><a class="markdownIt-Anchor" href="#1-é»˜è®¤æ’æ§½"></a> 1 .é»˜è®¤æ’æ§½</h6><h6 id="2-å‘½åæ’æ§½"><a class="markdownIt-Anchor" href="#2-å‘½åæ’æ§½"></a> 2 .å‘½åæ’æ§½</h6><h6 id="3-ä½œç”¨åŸŸæ’æ§½"><a class="markdownIt-Anchor" href="#3-ä½œç”¨åŸŸæ’æ§½"></a> 3 .ä½œç”¨åŸŸæ’æ§½</h6><h2 id="ç¬¬-5-ç« vuex"><a class="markdownIt-Anchor" href="#ç¬¬-5-ç« vuex"></a> ç¬¬ 5 ç« ï¼švuex</h2><h3 id="5-1-ç†è§£-vuex"><a class="markdownIt-Anchor" href="#5-1-ç†è§£-vuex"></a> 5. 1 ç†è§£ vuex</h3><h4 id="5-1-1-vuex-æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#5-1-1-vuex-æ˜¯ä»€ä¹ˆ"></a> 5. 1. 1 vuex æ˜¯ä»€ä¹ˆ</h4><ol><li>æ¦‚å¿µï¼šä¸“é—¨åœ¨ Vue ä¸­å®ç°é›†ä¸­å¼çŠ¶æ€ï¼ˆæ•°æ®ï¼‰ç®¡ç†çš„ä¸€ä¸ª Vue æ’ä»¶ï¼Œå¯¹ vue åº”<br />ç”¨ä¸­å¤šä¸ªç»„ä»¶çš„å…±äº«çŠ¶æ€è¿›è¡Œé›†ä¸­å¼çš„ç®¡ç†ï¼ˆè¯»/å†™ï¼‰ï¼Œä¹Ÿæ˜¯ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹<br />å¼ï¼Œä¸”é€‚ç”¨äºä»»æ„ç»„ä»¶é—´é€šä¿¡ã€‚</li><li>Github åœ°å€:<a href="https://github.com/vuejs/vuex">https://github.com/vuejs/vuex</a></li></ol><h4 id="5-1-2-ä»€ä¹ˆæ—¶å€™ä½¿ç”¨-vuex"><a class="markdownIt-Anchor" href="#5-1-2-ä»€ä¹ˆæ—¶å€™ä½¿ç”¨-vuex"></a> 5. 1. 2 ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ Vuex</h4><h6 id="1-å¤šä¸ªç»„ä»¶ä¾èµ–äºåŒä¸€çŠ¶æ€"><a class="markdownIt-Anchor" href="#1-å¤šä¸ªç»„ä»¶ä¾èµ–äºåŒä¸€çŠ¶æ€"></a> 1 .å¤šä¸ªç»„ä»¶ä¾èµ–äºåŒä¸€çŠ¶æ€</h6><h6 id="2-æ¥è‡ªä¸åŒç»„ä»¶çš„è¡Œä¸ºéœ€è¦å˜æ›´åŒä¸€çŠ¶æ€"><a class="markdownIt-Anchor" href="#2-æ¥è‡ªä¸åŒç»„ä»¶çš„è¡Œä¸ºéœ€è¦å˜æ›´åŒä¸€çŠ¶æ€"></a> 2 .æ¥è‡ªä¸åŒç»„ä»¶çš„è¡Œä¸ºéœ€è¦å˜æ›´åŒä¸€çŠ¶æ€</h6><h4 id="5-1-3-æ¡ˆä¾‹"><a class="markdownIt-Anchor" href="#5-1-3-æ¡ˆä¾‹"></a> 5. 1. 3 æ¡ˆä¾‹</h4><h4 id="5-1-4-vuex-å·¥ä½œåŸç†å›¾"><a class="markdownIt-Anchor" href="#5-1-4-vuex-å·¥ä½œåŸç†å›¾"></a> 5. 1. 4 Vuex å·¥ä½œåŸç†å›¾</h4><h3 id="5-2-vuex-æ ¸å¿ƒæ¦‚å¿µå’Œ-api"><a class="markdownIt-Anchor" href="#5-2-vuex-æ ¸å¿ƒæ¦‚å¿µå’Œ-api"></a> 5. 2 vuex æ ¸å¿ƒæ¦‚å¿µå’Œ API</h3><h3 id="5-2-1-state"><a class="markdownIt-Anchor" href="#5-2-1-state"></a> 5. 2. 1 state</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 .vuexç®¡ç†çš„çŠ¶æ€å¯¹è±¡</span><br><span class="line">2 .å®ƒåº”è¯¥æ˜¯å”¯ä¸€çš„</span><br><span class="line">3 .ç¤ºä¾‹ä»£ç ï¼š</span><br></pre></td></tr></table></figure><h3 id="5-2-2-actions"><a class="markdownIt-Anchor" href="#5-2-2-actions"></a> 5. 2. 2 actions</h3><h6 id="1-å€¼ä¸ºä¸€ä¸ªå¯¹è±¡åŒ…å«å¤šä¸ªå“åº”ç”¨æˆ·åŠ¨ä½œçš„å›è°ƒå‡½æ•°"><a class="markdownIt-Anchor" href="#1-å€¼ä¸ºä¸€ä¸ªå¯¹è±¡åŒ…å«å¤šä¸ªå“åº”ç”¨æˆ·åŠ¨ä½œçš„å›è°ƒå‡½æ•°"></a> 1 .å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«å¤šä¸ªå“åº”ç”¨æˆ·åŠ¨ä½œçš„å›è°ƒå‡½æ•°</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 .é€šè¿‡commit()æ¥è§¦å‘mutationä¸­å‡½æ•°çš„è°ƒç”¨,é—´æ¥æ›´æ–°state</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3 .å¦‚ä½•è§¦å‘actionsä¸­çš„å›è°ƒï¼Ÿ</span><br><span class="line">åœ¨ç»„ä»¶ä¸­ä½¿ç”¨: $store.dispatch(&#x27;å¯¹åº”çš„actionå›è°ƒå&#x27;) è§¦å‘</span><br><span class="line">4 .å¯ä»¥åŒ…å«å¼‚æ­¥ä»£ç ï¼ˆå®šæ—¶å™¨,ajaxç­‰ç­‰ï¼‰</span><br><span class="line">5 .ç¤ºä¾‹ä»£ç ï¼š</span><br></pre></td></tr></table></figure><h3 id="5-2-3-mutations"><a class="markdownIt-Anchor" href="#5-2-3-mutations"></a> 5. 2. 3 mutations</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1 .å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«å¤šä¸ªç›´æ¥æ›´æ–°stateçš„æ–¹æ³•</span><br><span class="line">2 .è°èƒ½è°ƒç”¨mutationsä¸­çš„æ–¹æ³•ï¼Ÿå¦‚ä½•è°ƒç”¨ï¼Ÿ</span><br><span class="line">åœ¨actionä¸­ä½¿ç”¨ï¼š commit(&#x27;å¯¹åº”çš„mutationsæ–¹æ³•å&#x27;) è§¦å‘</span><br><span class="line">3 .mutationsä¸­æ–¹æ³•çš„ç‰¹ç‚¹ï¼šä¸èƒ½å†™å¼‚æ­¥ä»£ç ã€åªèƒ½å•çº¯çš„æ“ä½œstate</span><br><span class="line">4 .ç¤ºä¾‹ä»£ç ï¼š</span><br></pre></td></tr></table></figure><h3 id="5-2-4-getters"><a class="markdownIt-Anchor" href="#5-2-4-getters"></a> 5. 2. 4 getters</h3><h6 id="1-å€¼ä¸ºä¸€ä¸ªå¯¹è±¡åŒ…å«å¤šä¸ªç”¨äºè¿”å›æ•°æ®çš„å‡½æ•°"><a class="markdownIt-Anchor" href="#1-å€¼ä¸ºä¸€ä¸ªå¯¹è±¡åŒ…å«å¤šä¸ªç”¨äºè¿”å›æ•°æ®çš„å‡½æ•°"></a> 1 .å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«å¤šä¸ªç”¨äºè¿”å›æ•°æ®çš„å‡½æ•°</h6><h5 id="2-å¦‚ä½•ä½¿ç”¨-storegettersxxx"><a class="markdownIt-Anchor" href="#2-å¦‚ä½•ä½¿ç”¨-storegettersxxx"></a> 2 .å¦‚ä½•ä½¿ç”¨ï¼Ÿâ€”â€” $<a href="http://store.getters.xxx">store.getters.xxx</a></h5><h6 id="3-ç¤ºä¾‹ä»£ç "><a class="markdownIt-Anchor" href="#3-ç¤ºä¾‹ä»£ç "></a> 3 .ç¤ºä¾‹ä»£ç ï¼š</h6><h3 id="5-2-5-modules"><a class="markdownIt-Anchor" href="#5-2-5-modules"></a> 5. 2. 5 modules</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 .åŒ…å«å¤šä¸ªmodule</span><br><span class="line">2 .ä¸€ä¸ªmoduleæ˜¯ä¸€ä¸ªstoreçš„é…ç½®å¯¹è±¡</span><br><span class="line">3 .ä¸ä¸€ä¸ªç»„ä»¶ï¼ˆåŒ…å«æœ‰å…±äº«æ•°æ®ï¼‰å¯¹åº”</span><br></pre></td></tr></table></figure><h2 id="ç¬¬-6-ç« vue-router"><a class="markdownIt-Anchor" href="#ç¬¬-6-ç« vue-router"></a> ç¬¬ 6 ç« ï¼švue-router</h2><h3 id="6-1-ç›¸å…³ç†è§£"><a class="markdownIt-Anchor" href="#6-1-ç›¸å…³ç†è§£"></a> 6. 1 ç›¸å…³ç†è§£</h3><h4 id="6-1-1-vue-router-çš„ç†è§£"><a class="markdownIt-Anchor" href="#6-1-1-vue-router-çš„ç†è§£"></a> 6. 1. 1 vue-router çš„ç†è§£</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vueçš„ä¸€ä¸ªæ’ä»¶åº“ï¼Œä¸“é—¨ç”¨æ¥å®ç°SPAåº”ç”¨</span><br></pre></td></tr></table></figure><h4 id="6-1-2-å¯¹-spa-åº”ç”¨çš„ç†è§£"><a class="markdownIt-Anchor" href="#6-1-2-å¯¹-spa-åº”ç”¨çš„ç†è§£"></a> 6. 1. 2 å¯¹ SPA åº”ç”¨çš„ç†è§£</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. å•é¡µWebåº”ç”¨ï¼ˆsinglepagewebapplicationï¼ŒSPAï¼‰ã€‚</span><br><span class="line">2. æ•´ä¸ªåº”ç”¨åªæœ‰ ä¸€ä¸ªå®Œæ•´çš„é¡µé¢ ã€‚</span><br><span class="line">3. ç‚¹å‡»é¡µé¢ä¸­çš„å¯¼èˆªé“¾æ¥ ä¸ä¼šåˆ·æ–° é¡µé¢ï¼Œåªä¼šåšé¡µé¢çš„ å±€éƒ¨æ›´æ–°ã€‚</span><br><span class="line">4. æ•°æ®éœ€è¦é€šè¿‡ajaxè¯·æ±‚è·å–ã€‚</span><br></pre></td></tr></table></figure><h4 id="6-1-3-è·¯ç”±çš„ç†è§£"><a class="markdownIt-Anchor" href="#6-1-3-è·¯ç”±çš„ç†è§£"></a> 6. 1. 3 è·¯ç”±çš„ç†è§£</h4><h6 id="1-ä»€ä¹ˆæ˜¯è·¯ç”±"><a class="markdownIt-Anchor" href="#1-ä»€ä¹ˆæ˜¯è·¯ç”±"></a> 1. ä»€ä¹ˆæ˜¯è·¯ç”±?</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1. ä¸€ä¸ªè·¯ç”±å°±æ˜¯ä¸€ç»„æ˜ å°„å…³ç³»ï¼ˆkey-valueï¼‰</span><br><span class="line">2. keyä¸ºè·¯å¾„,valueå¯èƒ½æ˜¯functionæˆ–component</span><br><span class="line">2. è·¯ç”±åˆ†ç±»</span><br><span class="line">1. åç«¯è·¯ç”±ï¼š</span><br><span class="line">1 ) ç†è§£ï¼švalueæ˜¯function,ç”¨äºå¤„ç†å®¢æˆ·ç«¯æäº¤çš„è¯·æ±‚ã€‚</span><br><span class="line">2 ) å·¥ä½œè¿‡ç¨‹ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚æ—¶,æ ¹æ® è¯·æ±‚è·¯å¾„ æ‰¾åˆ°åŒ¹é…çš„ å‡½æ•°</span><br><span class="line">æ¥å¤„ç†è¯·æ±‚,è¿”å›å“åº”æ•°æ®ã€‚</span><br><span class="line">2. å‰ç«¯è·¯ç”±ï¼š</span><br><span class="line">1 ) ç†è§£ï¼švalueæ˜¯componentï¼Œç”¨äºå±•ç¤ºé¡µé¢å†…å®¹ã€‚</span><br><span class="line">2 ) å·¥ä½œè¿‡ç¨‹ï¼šå½“æµè§ˆå™¨çš„è·¯å¾„æ”¹å˜æ—¶,å¯¹åº”çš„ç»„ä»¶å°±ä¼šæ˜¾ç¤ºã€‚</span><br></pre></td></tr></table></figure><h3 id="6-2-åŸºæœ¬è·¯ç”±"><a class="markdownIt-Anchor" href="#6-2-åŸºæœ¬è·¯ç”±"></a> 6. 2 åŸºæœ¬è·¯ç”±</h3><h4 id="6-2-1-æ•ˆæœ"><a class="markdownIt-Anchor" href="#6-2-1-æ•ˆæœ"></a> 6. 2. 1 æ•ˆæœ</h4><h4 id="6-2-2-æ€»ç»“ç¼–å†™ä½¿ç”¨è·¯ç”±çš„-3-æ­¥"><a class="markdownIt-Anchor" href="#6-2-2-æ€»ç»“ç¼–å†™ä½¿ç”¨è·¯ç”±çš„-3-æ­¥"></a> 6. 2. 2 æ€»ç»“:ç¼–å†™ä½¿ç”¨è·¯ç”±çš„ 3 æ­¥</h4><h6 id="1-å®šä¹‰è·¯ç”±ç»„ä»¶"><a class="markdownIt-Anchor" href="#1-å®šä¹‰è·¯ç”±ç»„ä»¶"></a> 1. å®šä¹‰è·¯ç”±ç»„ä»¶</h6><h6 id="2-æ³¨å†Œè·¯ç”±"><a class="markdownIt-Anchor" href="#2-æ³¨å†Œè·¯ç”±"></a> 2. æ³¨å†Œè·¯ç”±</h6><h6 id="3-ä½¿ç”¨è·¯ç”±"><a class="markdownIt-Anchor" href="#3-ä½¿ç”¨è·¯ç”±"></a> 3. ä½¿ç”¨è·¯ç”±</h6><h3 id="6-3-åµŒå¥—å¤šçº§è·¯ç”±"><a class="markdownIt-Anchor" href="#6-3-åµŒå¥—å¤šçº§è·¯ç”±"></a> 6. 3 åµŒå¥—ï¼ˆå¤šçº§ï¼‰è·¯ç”±</h3><h3 id="6-4-è·¯ç”±ä¼ å‚"><a class="markdownIt-Anchor" href="#6-4-è·¯ç”±ä¼ å‚"></a> 6. 4 è·¯ç”±ä¼ å‚</h3><h3 id="6-5-ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª"><a class="markdownIt-Anchor" href="#6-5-ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª"></a> 6. 5 ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª</h3><h5 id="ç›¸å…³-api"><a class="markdownIt-Anchor" href="#ç›¸å…³-api"></a> ç›¸å…³ APIï¼š</h5><ol><li>this.$router.push(path):ç›¸å½“äºç‚¹å‡»è·¯ç”±é“¾æ¥(å¯ä»¥è¿”å›åˆ°å½“å‰è·¯ç”±ç•Œé¢)</li><li>this.$router.replace(path):ç”¨æ–°è·¯ç”±æ›¿æ¢å½“å‰è·¯ç”±(ä¸å¯ä»¥è¿”å›åˆ°å½“å‰è·¯ç”±ç•Œé¢)</li><li>this.$router.back():è¯·æ±‚(è¿”å›)ä¸Šä¸€ä¸ªè®°å½•è·¯ç”±</li><li>this.$router.go(- 1 ):è¯·æ±‚(è¿”å›)ä¸Šä¸€ä¸ªè®°å½•è·¯ç”±</li><li>this.$router.go( 1 ):è¯·æ±‚ä¸‹ä¸€ä¸ªè®°å½•è·¯ç”±</li></ol><h2 id="ç¬¬-7-ç« vue-ui-ç»„ä»¶åº“"><a class="markdownIt-Anchor" href="#ç¬¬-7-ç« vue-ui-ç»„ä»¶åº“"></a> ç¬¬ 7 ç« ï¼šVue UI ç»„ä»¶åº“</h2><h4 id="7-1-ç§»åŠ¨ç«¯å¸¸ç”¨-ui-ç»„ä»¶åº“"><a class="markdownIt-Anchor" href="#7-1-ç§»åŠ¨ç«¯å¸¸ç”¨-ui-ç»„ä»¶åº“"></a> 7. 1 ç§»åŠ¨ç«¯å¸¸ç”¨ UI ç»„ä»¶åº“</h4><ol><li>Vant <a href="https://youzan.github.io/vant">https://youzan.github.io/vant</a></li><li>CubeUI <a href="https://didi.github.io/cube-ui">https://didi.github.io/cube-ui</a></li><li>MintUI <a href="http://mint-ui.github.io">http://mint-ui.github.io</a></li></ol><h4 id="7-2-pc-ç«¯å¸¸ç”¨-ui-ç»„ä»¶åº“"><a class="markdownIt-Anchor" href="#7-2-pc-ç«¯å¸¸ç”¨-ui-ç»„ä»¶åº“"></a> 7. 2 PC ç«¯å¸¸ç”¨ UI ç»„ä»¶åº“</h4><ol><li>ElementUI <a href="https://element.eleme.cn">https://element.eleme.cn</a></li><li>IViewUI <a href="https://www.iviewui.com">https://www.iviewui.com</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
          <category> ç¼–ç¨‹ç¬”è®° </category>
          
          <category> Vueå¤©ç¦¹è€å¸ˆç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> ç¼–ç¨‹ç¬”è®° </tag>
            
            <tag> Vueå­¦ä¹ ç¬”è®°(å°šç¡…è°·å¤©ç¦¹è€å¸ˆ) </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springå¸¸è§é¢è¯•é¢˜</title>
      <link href="/posts/5dd00982/"/>
      <url>/posts/5dd00982/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€èˆ¬é—®é¢˜"><a class="markdownIt-Anchor" href="#ä¸€èˆ¬é—®é¢˜"></a> ä¸€èˆ¬é—®é¢˜</h2><h3 id="ä¸åŒç‰ˆæœ¬çš„-spring-framework-æœ‰å“ªäº›ä¸»è¦åŠŸèƒ½"><a class="markdownIt-Anchor" href="#ä¸åŒç‰ˆæœ¬çš„-spring-framework-æœ‰å“ªäº›ä¸»è¦åŠŸèƒ½"></a> ä¸åŒç‰ˆæœ¬çš„ Spring Framework æœ‰å“ªäº›ä¸»è¦åŠŸèƒ½ï¼Ÿ</h3><table><thead><tr><th>Version</th><th>Feature</th></tr></thead><tbody><tr><td>Spring 2.5</td><td>å‘å¸ƒäº 2007 å¹´ã€‚è¿™æ˜¯ç¬¬ä¸€ä¸ªæ”¯æŒæ³¨è§£çš„ç‰ˆæœ¬ã€‚</td></tr><tr><td>Spring 3.0</td><td>å‘å¸ƒäº 2009 å¹´ã€‚å®ƒå®Œå…¨åˆ©ç”¨äº† Java5 ä¸­çš„æ”¹è¿›ï¼Œå¹¶ä¸º JEE6 æä¾›äº†æ”¯æŒã€‚</td></tr><tr><td>Spring 4.0</td><td>å‘å¸ƒäº 2013 å¹´ã€‚è¿™æ˜¯ç¬¬ä¸€ä¸ªå®Œå…¨æ”¯æŒ JAVA8 çš„ç‰ˆæœ¬ã€‚</td></tr></tbody></table><h3 id="ä»€ä¹ˆæ˜¯-spring-framework"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯-spring-framework"></a> ä»€ä¹ˆæ˜¯ Spring Frameworkï¼Ÿ</h3><ul><li>Spring æ˜¯ä¸€ä¸ªå¼€æºåº”ç”¨æ¡†æ¶ï¼Œæ—¨åœ¨é™ä½åº”ç”¨ç¨‹åºå¼€å‘çš„å¤æ‚åº¦ã€‚</li><li>å®ƒæ˜¯è½»é‡çº§ã€æ¾æ•£è€¦åˆçš„ã€‚</li><li>å®ƒå…·æœ‰åˆ†å±‚ä½“ç³»ç»“æ„ï¼Œå…è®¸ç”¨æˆ·é€‰æ‹©ç»„ä»¶ï¼ŒåŒæ—¶è¿˜ä¸º J2EE åº”ç”¨ç¨‹åºå¼€å‘æä¾›äº†ä¸€ä¸ªæœ‰å‡èšåŠ›çš„æ¡†æ¶ã€‚</li><li>å®ƒå¯ä»¥é›†æˆå…¶ä»–æ¡†æ¶ï¼Œå¦‚ Structsã€Hibernateã€EJB ç­‰ï¼Œæ‰€ä»¥åˆç§°ä¸ºæ¡†æ¶çš„æ¡†æ¶ã€‚</li></ul><h3 id="åˆ—ä¸¾-spring-framework-çš„ä¼˜ç‚¹"><a class="markdownIt-Anchor" href="#åˆ—ä¸¾-spring-framework-çš„ä¼˜ç‚¹"></a> åˆ—ä¸¾ Spring Framework çš„ä¼˜ç‚¹ã€‚</h3><ul><li>ç”±äº Spring Frameworks çš„åˆ†å±‚æ¶æ„ï¼Œç”¨æˆ·å¯ä»¥è‡ªç”±é€‰æ‹©è‡ªå·±éœ€è¦çš„ç»„ä»¶ã€‚</li><li>Spring Framework æ”¯æŒ POJO(Plain Old Java Object) ç¼–ç¨‹ï¼Œä»è€Œå…·å¤‡æŒç»­é›†æˆå’Œå¯æµ‹è¯•æ€§ã€‚</li><li>ç”±äºä¾èµ–æ³¨å…¥å’Œæ§åˆ¶åè½¬ï¼ŒJDBC å¾—ä»¥ç®€åŒ–ã€‚</li><li>å®ƒæ˜¯å¼€æºå…è´¹çš„ã€‚</li></ul><h3 id="spring-framework-æœ‰å“ªäº›ä¸åŒçš„åŠŸèƒ½"><a class="markdownIt-Anchor" href="#spring-framework-æœ‰å“ªäº›ä¸åŒçš„åŠŸèƒ½"></a> Spring Framework æœ‰å“ªäº›ä¸åŒçš„åŠŸèƒ½ï¼Ÿ</h3><ul><li><strong>è½»é‡çº§</strong> - Spring åœ¨ä»£ç é‡å’Œé€æ˜åº¦æ–¹é¢éƒ½å¾ˆè½»ä¾¿ã€‚</li><li><strong>IOC</strong> - æ§åˆ¶åè½¬</li><li><strong>AOP</strong> - é¢å‘åˆ‡é¢ç¼–ç¨‹å¯ä»¥å°†åº”ç”¨ä¸šåŠ¡é€»è¾‘å’Œç³»ç»ŸæœåŠ¡åˆ†ç¦»ï¼Œä»¥å®ç°é«˜å†…èšã€‚</li><li><strong>å®¹å™¨</strong> - Spring è´Ÿè´£åˆ›å»ºå’Œç®¡ç†å¯¹è±¡ï¼ˆBeanï¼‰çš„ç”Ÿå‘½å‘¨æœŸå’Œé…ç½®ã€‚</li><li><strong>MVC</strong> - å¯¹ web åº”ç”¨æä¾›äº†é«˜åº¦å¯é…ç½®æ€§ï¼Œå…¶ä»–æ¡†æ¶çš„é›†æˆä¹Ÿååˆ†æ–¹ä¾¿ã€‚</li><li><strong>äº‹åŠ¡ç®¡ç†</strong> - æä¾›äº†ç”¨äºäº‹åŠ¡ç®¡ç†çš„é€šç”¨æŠ½è±¡å±‚ã€‚Spring çš„äº‹åŠ¡æ”¯æŒä¹Ÿå¯ç”¨äºå®¹å™¨è¾ƒå°‘çš„ç¯å¢ƒã€‚</li><li><strong>JDBC å¼‚å¸¸</strong> - Spring çš„ JDBC æŠ½è±¡å±‚æä¾›äº†ä¸€ä¸ªå¼‚å¸¸å±‚æ¬¡ç»“æ„ï¼Œç®€åŒ–äº†é”™è¯¯å¤„ç†ç­–ç•¥ã€‚</li></ul><h3 id="spring-framework-ä¸­æœ‰å¤šå°‘ä¸ªæ¨¡å—å®ƒä»¬åˆ†åˆ«æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#spring-framework-ä¸­æœ‰å¤šå°‘ä¸ªæ¨¡å—å®ƒä»¬åˆ†åˆ«æ˜¯ä»€ä¹ˆ"></a> Spring Framework ä¸­æœ‰å¤šå°‘ä¸ªæ¨¡å—ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li><p>Spring æ ¸å¿ƒå®¹å™¨</p><p>â€“ è¯¥å±‚åŸºæœ¬ä¸Šæ˜¯ Spring Framework çš„æ ¸å¿ƒã€‚å®ƒåŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š</p><ul><li>Spring Core</li><li>Spring Bean</li><li>SpEL (Spring Expression Language)</li><li>Spring Context</li></ul></li><li><p>æ•°æ®è®¿é—®/é›†æˆ</p><p>â€“ è¯¥å±‚æä¾›ä¸æ•°æ®åº“äº¤äº’çš„æ”¯æŒã€‚å®ƒåŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š</p><ul><li>JDBC (Java DataBase Connectivity)</li><li>ORM (Object Relational Mapping)</li><li>OXM (Object XML Mappers)</li><li>JMS (Java Messaging Service)</li><li>Transaction</li></ul></li><li><p>Web</p><p>â€“ è¯¥å±‚æä¾›äº†åˆ›å»º Web åº”ç”¨ç¨‹åºçš„æ”¯æŒã€‚å®ƒåŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š</p><ul><li>Web</li><li>Web â€“ Servlet</li><li>Web â€“ Socket</li><li>Web â€“ Portlet</li></ul></li><li><p><strong>AOP</strong> â€“ è¯¥å±‚æ”¯æŒé¢å‘åˆ‡é¢ç¼–ç¨‹</p></li><li><p><strong>Instrumentation</strong> â€“ è¯¥å±‚ä¸ºç±»æ£€æµ‹å’Œç±»åŠ è½½å™¨å®ç°æä¾›æ”¯æŒã€‚</p></li><li><p><strong>Test</strong> â€“ è¯¥å±‚ä¸ºä½¿ç”¨ JUnit å’Œ TestNG è¿›è¡Œæµ‹è¯•æä¾›æ”¯æŒã€‚</p></li><li><p>å‡ ä¸ªæ‚é¡¹æ¨¡å—:</p><ul><li>Messaging â€“ è¯¥æ¨¡å—ä¸º STOMP æä¾›æ”¯æŒã€‚å®ƒè¿˜æ”¯æŒæ³¨è§£ç¼–ç¨‹æ¨¡å‹ï¼Œè¯¥æ¨¡å‹ç”¨äºä» WebSocket å®¢æˆ·ç«¯è·¯ç”±å’Œå¤„ç† STOMP æ¶ˆæ¯ã€‚</li><li>Aspects â€“ è¯¥æ¨¡å—ä¸ºä¸ AspectJ çš„é›†æˆæä¾›æ”¯æŒã€‚</li></ul></li></ul><h3 id="ä»€ä¹ˆæ˜¯-spring-é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯-spring-é…ç½®æ–‡ä»¶"></a> ä»€ä¹ˆæ˜¯ Spring é…ç½®æ–‡ä»¶ï¼Ÿ</h3><p>Spring é…ç½®æ–‡ä»¶æ˜¯ XML æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶ä¸»è¦åŒ…å«ç±»ä¿¡æ¯ã€‚å®ƒæè¿°äº†è¿™äº›ç±»æ˜¯å¦‚ä½•é…ç½®ä»¥åŠç›¸äº’å¼•å…¥çš„ã€‚ä½†æ˜¯ï¼ŒXML é…ç½®æ–‡ä»¶å†—é•¿ä¸”æ›´åŠ å¹²å‡€ã€‚å¦‚æœæ²¡æœ‰æ­£ç¡®è§„åˆ’å’Œç¼–å†™ï¼Œé‚£ä¹ˆåœ¨å¤§é¡¹ç›®ä¸­ç®¡ç†å˜å¾—éå¸¸å›°éš¾ã€‚</p><h3 id="spring-åº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¸åŒç»„ä»¶"><a class="markdownIt-Anchor" href="#spring-åº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¸åŒç»„ä»¶"></a> Spring åº”ç”¨ç¨‹åºæœ‰å“ªäº›ä¸åŒç»„ä»¶ï¼Ÿ</h3><p>Spring åº”ç”¨ä¸€èˆ¬æœ‰ä»¥ä¸‹ç»„ä»¶ï¼š</p><ul><li><strong>æ¥å£</strong> - å®šä¹‰åŠŸèƒ½ã€‚</li><li><strong>Bean ç±»</strong> - å®ƒåŒ…å«å±æ€§ï¼Œsetter å’Œ getter æ–¹æ³•ï¼Œå‡½æ•°ç­‰ã€‚</li><li><strong>Spring é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰</strong> - æä¾›é¢å‘åˆ‡é¢ç¼–ç¨‹çš„åŠŸèƒ½ã€‚</li><li><strong>Bean é…ç½®æ–‡ä»¶</strong> - åŒ…å«ç±»çš„ä¿¡æ¯ä»¥åŠå¦‚ä½•é…ç½®å®ƒä»¬ã€‚</li><li><strong>ç”¨æˆ·ç¨‹åº</strong> - å®ƒä½¿ç”¨æ¥å£ã€‚</li></ul><h3 id="ä½¿ç”¨-spring-æœ‰å“ªäº›æ–¹å¼"><a class="markdownIt-Anchor" href="#ä½¿ç”¨-spring-æœ‰å“ªäº›æ–¹å¼"></a> ä½¿ç”¨ Spring æœ‰å“ªäº›æ–¹å¼ï¼Ÿ</h3><p>ä½¿ç”¨ Spring æœ‰ä»¥ä¸‹æ–¹å¼ï¼š</p><ul><li>ä½œä¸ºä¸€ä¸ªæˆç†Ÿçš„ Spring Web åº”ç”¨ç¨‹åºã€‚</li><li>ä½œä¸ºç¬¬ä¸‰æ–¹ Web æ¡†æ¶ï¼Œä½¿ç”¨ Spring Frameworks ä¸­é—´å±‚ã€‚</li><li>ç”¨äºè¿œç¨‹ä½¿ç”¨ã€‚</li><li>ä½œä¸ºä¼ä¸šçº§ Java Beanï¼Œå®ƒå¯ä»¥åŒ…è£…ç°æœ‰çš„ POJOï¼ˆPlain Old Java Objectsï¼‰ã€‚</li></ul><h2 id="ä¾èµ–æ³¨å…¥ioc"><a class="markdownIt-Anchor" href="#ä¾èµ–æ³¨å…¥ioc"></a> ä¾èµ–æ³¨å…¥ï¼ˆIocï¼‰</h2><h3 id="ä»€ä¹ˆæ˜¯-spring-ioc-å®¹å™¨"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯-spring-ioc-å®¹å™¨"></a> ä»€ä¹ˆæ˜¯ Spring IOC å®¹å™¨ï¼Ÿ</h3><p>Spring æ¡†æ¶çš„æ ¸å¿ƒæ˜¯ Spring å®¹å™¨ã€‚å®¹å™¨åˆ›å»ºå¯¹è±¡ï¼Œå°†å®ƒä»¬è£…é…åœ¨ä¸€èµ·ï¼Œé…ç½®å®ƒä»¬å¹¶ç®¡ç†å®ƒä»¬çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸã€‚Spring å®¹å™¨ä½¿ç”¨ä¾èµ–æ³¨å…¥æ¥ç®¡ç†ç»„æˆåº”ç”¨ç¨‹åºçš„ç»„ä»¶ã€‚å®¹å™¨é€šè¿‡è¯»å–æä¾›çš„é…ç½®å…ƒæ•°æ®æ¥æ¥æ”¶å¯¹è±¡è¿›è¡Œå®ä¾‹åŒ–ï¼Œé…ç½®å’Œç»„è£…çš„æŒ‡ä»¤ã€‚è¯¥å…ƒæ•°æ®å¯ä»¥é€šè¿‡ XMLï¼ŒJava æ³¨è§£æˆ– Java ä»£ç æä¾›ã€‚</p><p><img src="https://upload-images.jianshu.io/upload_images/3101171-33099411d16ca051.png" alt="img" /></p><h3 id="ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥"></a> ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ</h3><p>åœ¨ä¾èµ–æ³¨å…¥ä¸­ï¼Œæ‚¨ä¸å¿…åˆ›å»ºå¯¹è±¡ï¼Œä½†å¿…é¡»æè¿°å¦‚ä½•åˆ›å»ºå®ƒä»¬ã€‚æ‚¨ä¸æ˜¯ç›´æ¥åœ¨ä»£ç ä¸­å°†ç»„ä»¶å’ŒæœåŠ¡è¿æ¥åœ¨ä¸€èµ·ï¼Œè€Œæ˜¯æè¿°é…ç½®æ–‡ä»¶ä¸­å“ªäº›ç»„ä»¶éœ€è¦å“ªäº›æœåŠ¡ã€‚ç”± IoC å®¹å™¨å°†å®ƒä»¬è£…é…åœ¨ä¸€èµ·ã€‚</p><h3 id="å¯ä»¥é€šè¿‡å¤šå°‘ç§æ–¹å¼å®Œæˆä¾èµ–æ³¨å…¥"><a class="markdownIt-Anchor" href="#å¯ä»¥é€šè¿‡å¤šå°‘ç§æ–¹å¼å®Œæˆä¾èµ–æ³¨å…¥"></a> å¯ä»¥é€šè¿‡å¤šå°‘ç§æ–¹å¼å®Œæˆä¾èµ–æ³¨å…¥ï¼Ÿ</h3><p>é€šå¸¸ï¼Œä¾èµ–æ³¨å…¥å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼å®Œæˆï¼Œå³ï¼š</p><ul><li>æ„é€ å‡½æ•°æ³¨å…¥</li><li>setter æ³¨å…¥</li><li>æ¥å£æ³¨å…¥</li></ul><p>åœ¨ Spring Framework ä¸­ï¼Œä»…ä½¿ç”¨æ„é€ å‡½æ•°å’Œ setter æ³¨å…¥ã€‚</p><h3 id="åŒºåˆ†æ„é€ å‡½æ•°æ³¨å…¥å’Œ-setter-æ³¨å…¥"><a class="markdownIt-Anchor" href="#åŒºåˆ†æ„é€ å‡½æ•°æ³¨å…¥å’Œ-setter-æ³¨å…¥"></a> åŒºåˆ†æ„é€ å‡½æ•°æ³¨å…¥å’Œ setter æ³¨å…¥ã€‚</h3><table><thead><tr><th>æ„é€ å‡½æ•°æ³¨å…¥</th><th>setter æ³¨å…¥</th></tr></thead><tbody><tr><td>æ²¡æœ‰éƒ¨åˆ†æ³¨å…¥</td><td>æœ‰éƒ¨åˆ†æ³¨å…¥</td></tr><tr><td>ä¸ä¼šè¦†ç›– setter å±æ€§</td><td>ä¼šè¦†ç›– setter å±æ€§</td></tr><tr><td>ä»»æ„ä¿®æ”¹éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹</td><td>ä»»æ„ä¿®æ”¹ä¸ä¼šåˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹</td></tr><tr><td>é€‚ç”¨äºè®¾ç½®å¾ˆå¤šå±æ€§</td><td>é€‚ç”¨äºè®¾ç½®å°‘é‡å±æ€§</td></tr></tbody></table><h3 id="spring-ä¸­æœ‰å¤šå°‘ç§-ioc-å®¹å™¨"><a class="markdownIt-Anchor" href="#spring-ä¸­æœ‰å¤šå°‘ç§-ioc-å®¹å™¨"></a> spring ä¸­æœ‰å¤šå°‘ç§ IOC å®¹å™¨ï¼Ÿ</h3><ul><li>BeanFactory - BeanFactory å°±åƒä¸€ä¸ªåŒ…å« bean é›†åˆçš„å·¥å‚ç±»ã€‚å®ƒä¼šåœ¨å®¢æˆ·ç«¯è¦æ±‚æ—¶å®ä¾‹åŒ– beanã€‚</li><li>ApplicationContext - ApplicationContext æ¥å£æ‰©å±•äº† BeanFactory æ¥å£ã€‚å®ƒåœ¨ BeanFactory åŸºç¡€ä¸Šæä¾›äº†ä¸€äº›é¢å¤–çš„åŠŸèƒ½ã€‚</li></ul><h3 id="åŒºåˆ†-beanfactory-å’Œ-applicationcontext"><a class="markdownIt-Anchor" href="#åŒºåˆ†-beanfactory-å’Œ-applicationcontext"></a> åŒºåˆ† BeanFactory å’Œ ApplicationContextã€‚</h3><table><thead><tr><th>BeanFactory</th><th>ApplicationContext</th></tr></thead><tbody><tr><td>å®ƒä½¿ç”¨æ‡’åŠ è½½</td><td>å®ƒä½¿ç”¨å³æ—¶åŠ è½½</td></tr><tr><td>å®ƒä½¿ç”¨è¯­æ³•æ˜¾å¼æä¾›èµ„æºå¯¹è±¡</td><td>å®ƒè‡ªå·±åˆ›å»ºå’Œç®¡ç†èµ„æºå¯¹è±¡</td></tr><tr><td>ä¸æ”¯æŒå›½é™…åŒ–</td><td>æ”¯æŒå›½é™…åŒ–</td></tr><tr><td>ä¸æ”¯æŒåŸºäºä¾èµ–çš„æ³¨è§£</td><td>æ”¯æŒåŸºäºä¾èµ–çš„æ³¨è§£</td></tr></tbody></table><h3 id="åˆ—ä¸¾-ioc-çš„ä¸€äº›å¥½å¤„"><a class="markdownIt-Anchor" href="#åˆ—ä¸¾-ioc-çš„ä¸€äº›å¥½å¤„"></a> åˆ—ä¸¾ IoC çš„ä¸€äº›å¥½å¤„ã€‚</h3><p>IoC çš„ä¸€äº›å¥½å¤„æ˜¯ï¼š</p><ul><li>å®ƒå°†æœ€å°åŒ–åº”ç”¨ç¨‹åºä¸­çš„ä»£ç é‡ã€‚</li><li>å®ƒå°†ä½¿æ‚¨çš„åº”ç”¨ç¨‹åºæ˜“äºæµ‹è¯•ï¼Œå› ä¸ºå®ƒä¸éœ€è¦å•å…ƒæµ‹è¯•ç”¨ä¾‹ä¸­çš„ä»»ä½•å•ä¾‹æˆ– JNDI æŸ¥æ‰¾æœºåˆ¶ã€‚</li><li>å®ƒä»¥æœ€å°çš„å½±å“å’Œæœ€å°‘çš„ä¾µå…¥æœºåˆ¶ä¿ƒè¿›æ¾è€¦åˆã€‚</li><li>å®ƒæ”¯æŒå³æ—¶çš„å®ä¾‹åŒ–å’Œå»¶è¿ŸåŠ è½½æœåŠ¡ã€‚</li></ul><h3 id="spring-ioc-çš„å®ç°æœºåˆ¶"><a class="markdownIt-Anchor" href="#spring-ioc-çš„å®ç°æœºåˆ¶"></a> Spring IoC çš„å®ç°æœºåˆ¶ã€‚</h3><p>Spring ä¸­çš„ IoC çš„å®ç°åŸç†å°±æ˜¯å·¥å‚æ¨¡å¼åŠ åå°„æœºåˆ¶ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Fruit</span> &#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Apple</span> <span class="keyword">implements</span> <span class="title class_">Fruit</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Apple&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Orange</span> <span class="keyword">implements</span> <span class="title class_">Fruit</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Orange&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Factory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Fruit <span class="title function_">getInstance</span><span class="params">(String ClassName)</span> &#123;</span><br><span class="line">        Fruit f=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            f=(Fruit)Class.forName(ClassName).newInstance();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] a)</span> &#123;</span><br><span class="line">        Fruit f=Factory.getInstance(<span class="string">&quot;io.github.dunwu.spring.Apple&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(f!=<span class="literal">null</span>)&#123;</span><br><span class="line">            f.eat();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="beans"><a class="markdownIt-Anchor" href="#beans"></a> Beans</h2><h3 id="ä»€ä¹ˆæ˜¯-spring-bean"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯-spring-bean"></a> ä»€ä¹ˆæ˜¯ spring beanï¼Ÿ</h3><ul><li>å®ƒä»¬æ˜¯æ„æˆç”¨æˆ·åº”ç”¨ç¨‹åºä¸»å¹²çš„å¯¹è±¡ã€‚</li><li>Bean ç”± Spring IoC å®¹å™¨ç®¡ç†ã€‚</li><li>å®ƒä»¬ç”± Spring IoC å®¹å™¨å®ä¾‹åŒ–ï¼Œé…ç½®ï¼Œè£…é…å’Œç®¡ç†ã€‚</li><li>Bean æ˜¯åŸºäºç”¨æˆ·æä¾›ç»™å®¹å™¨çš„é…ç½®å…ƒæ•°æ®åˆ›å»ºã€‚</li></ul><h3 id="spring-æä¾›äº†å“ªäº›é…ç½®æ–¹å¼"><a class="markdownIt-Anchor" href="#spring-æä¾›äº†å“ªäº›é…ç½®æ–¹å¼"></a> spring æä¾›äº†å“ªäº›é…ç½®æ–¹å¼ï¼Ÿ</h3><ul><li>åŸºäº xml é…ç½®</li></ul><p>bean æ‰€éœ€çš„ä¾èµ–é¡¹å’ŒæœåŠ¡åœ¨ XML æ ¼å¼çš„é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šã€‚è¿™äº›é…ç½®æ–‡ä»¶é€šå¸¸åŒ…å«è®¸å¤š bean å®šä¹‰å’Œç‰¹å®šäºåº”ç”¨ç¨‹åºçš„é…ç½®é€‰é¡¹ã€‚å®ƒä»¬é€šå¸¸ä»¥ bean æ ‡ç­¾å¼€å¤´ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studentbean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.edureka.firstSpring.StudentBean&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Edureka&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>åŸºäºæ³¨è§£é…ç½®</li></ul><p>æ‚¨å¯ä»¥é€šè¿‡åœ¨ç›¸å…³çš„ç±»ï¼Œæ–¹æ³•æˆ–å­—æ®µå£°æ˜ä¸Šä½¿ç”¨æ³¨è§£ï¼Œå°† bean é…ç½®ä¸ºç»„ä»¶ç±»æœ¬èº«ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ XML æ¥æè¿° bean è£…é…ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring å®¹å™¨ä¸­æœªæ‰“å¼€æ³¨è§£è£…é…ã€‚å› æ­¤ï¼Œæ‚¨éœ€è¦åœ¨ä½¿ç”¨å®ƒä¹‹å‰åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­å¯ç”¨å®ƒã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- bean definitions go here --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>åŸºäº Java API é…ç½®</li></ul><p>Spring çš„ Java é…ç½®æ˜¯é€šè¿‡ä½¿ç”¨ @Bean å’Œ @Configuration æ¥å®ç°ã€‚</p><ol><li>@Bean æ³¨è§£æ‰®æ¼”ä¸ <code>&lt;bean /&gt;</code> å…ƒç´ ç›¸åŒçš„è§’è‰²ã€‚</li><li>@Configuration ç±»å…è®¸é€šè¿‡ç®€å•åœ°è°ƒç”¨åŒä¸€ä¸ªç±»ä¸­çš„å…¶ä»– @Bean æ–¹æ³•æ¥å®šä¹‰ bean é—´ä¾èµ–å…³ç³»ã€‚</li></ol><p>ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> StudentBean <span class="title function_">myStudent</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">StudentBean</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="spring-æ”¯æŒé›†ä¸­-bean-scope"><a class="markdownIt-Anchor" href="#spring-æ”¯æŒé›†ä¸­-bean-scope"></a> spring æ”¯æŒé›†ä¸­ bean scopeï¼Ÿ</h3><p>Spring bean æ”¯æŒ 5 ç§ scopeï¼š</p><ul><li><strong>Singleton</strong> - æ¯ä¸ª Spring IoC å®¹å™¨ä»…æœ‰ä¸€ä¸ªå•å®ä¾‹ã€‚</li><li><strong>Prototype</strong> - æ¯æ¬¡è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚</li><li><strong>Request</strong> - æ¯ä¸€æ¬¡ HTTP è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œå¹¶ä¸”è¯¥ bean ä»…åœ¨å½“å‰ HTTP è¯·æ±‚å†…æœ‰æ•ˆã€‚</li><li><strong>Session</strong> - æ¯ä¸€æ¬¡ HTTP è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ beanï¼ŒåŒæ—¶è¯¥ bean ä»…åœ¨å½“å‰ HTTP session å†…æœ‰æ•ˆã€‚</li><li><strong>Global-session</strong> - ç±»ä¼¼äºæ ‡å‡†çš„ HTTP Session ä½œç”¨åŸŸï¼Œä¸è¿‡å®ƒä»…ä»…åœ¨åŸºäº portlet çš„ web åº”ç”¨ä¸­æ‰æœ‰æ„ä¹‰ã€‚Portlet è§„èŒƒå®šä¹‰äº†å…¨å±€ Session çš„æ¦‚å¿µï¼Œå®ƒè¢«æ‰€æœ‰æ„æˆæŸä¸ª portlet web åº”ç”¨çš„å„ç§ä¸åŒçš„ portlet æ‰€å…±äº«ã€‚åœ¨ global session ä½œç”¨åŸŸä¸­å®šä¹‰çš„ bean è¢«é™å®šäºå…¨å±€ portlet Session çš„ç”Ÿå‘½å‘¨æœŸèŒƒå›´å†…ã€‚å¦‚æœä½ åœ¨ web ä¸­ä½¿ç”¨ global session ä½œç”¨åŸŸæ¥æ ‡è¯† beanï¼Œé‚£ä¹ˆ web ä¼šè‡ªåŠ¨å½“æˆ session ç±»å‹æ¥ä½¿ç”¨ã€‚</li></ul><p>ä»…å½“ç”¨æˆ·ä½¿ç”¨æ”¯æŒ Web çš„ ApplicationContext æ—¶ï¼Œæœ€åä¸‰ä¸ªæ‰å¯ç”¨ã€‚</p><h3 id="spring-bean-å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆæ ·çš„"><a class="markdownIt-Anchor" href="#spring-bean-å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆæ ·çš„"></a> spring bean å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</h3><p>spring bean å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸæµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>Spring å®¹å™¨æ ¹æ®é…ç½®ä¸­çš„ bean å®šä¹‰ä¸­å®ä¾‹åŒ– beanã€‚</li><li>Spring ä½¿ç”¨ä¾èµ–æ³¨å…¥å¡«å……æ‰€æœ‰å±æ€§ï¼Œå¦‚ bean ä¸­æ‰€å®šä¹‰çš„é…ç½®ã€‚</li><li>å¦‚æœ bean å®ç° BeanNameAware æ¥å£ï¼Œåˆ™å·¥å‚é€šè¿‡ä¼ é€’ bean çš„ ID æ¥è°ƒç”¨ setBeanName()ã€‚</li><li>å¦‚æœ bean å®ç° BeanFactoryAware æ¥å£ï¼Œå·¥å‚é€šè¿‡ä¼ é€’è‡ªèº«çš„å®ä¾‹æ¥è°ƒç”¨ setBeanFactory()ã€‚</li><li>å¦‚æœå­˜åœ¨ä¸ bean å…³è”çš„ä»»ä½• BeanPostProcessorsï¼Œåˆ™è°ƒç”¨ preProcessBeforeInitialization() æ–¹æ³•ã€‚</li><li>å¦‚æœä¸º bean æŒ‡å®šäº† init æ–¹æ³•ï¼ˆ<code>&lt;bean&gt;</code> çš„ init-method å±æ€§ï¼‰ï¼Œé‚£ä¹ˆå°†è°ƒç”¨å®ƒã€‚</li><li>æœ€åï¼Œå¦‚æœå­˜åœ¨ä¸ bean å…³è”çš„ä»»ä½• BeanPostProcessorsï¼Œåˆ™å°†è°ƒç”¨ postProcessAfterInitialization() æ–¹æ³•ã€‚</li><li>å¦‚æœ bean å®ç° DisposableBean æ¥å£ï¼Œå½“ spring å®¹å™¨å…³é—­æ—¶ï¼Œä¼šè°ƒç”¨ destory()ã€‚</li><li>å¦‚æœä¸º bean æŒ‡å®šäº† destroy æ–¹æ³•ï¼ˆ<code>&lt;bean&gt;</code> çš„ destroy-method å±æ€§ï¼‰ï¼Œé‚£ä¹ˆå°†è°ƒç”¨å®ƒã€‚</li></ol><h3 id="ä»€ä¹ˆæ˜¯-spring-çš„å†…éƒ¨-bean"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯-spring-çš„å†…éƒ¨-bean"></a> ä»€ä¹ˆæ˜¯ spring çš„å†…éƒ¨ beanï¼Ÿ</h3><p>åªæœ‰å°† bean ç”¨ä½œå¦ä¸€ä¸ª bean çš„å±æ€§æ—¶ï¼Œæ‰èƒ½å°† bean å£°æ˜ä¸ºå†…éƒ¨ beanã€‚ä¸ºäº†å®šä¹‰ beanï¼ŒSpring çš„åŸºäº XML çš„é…ç½®å…ƒæ•°æ®åœ¨ <code>&lt;property&gt;</code> æˆ– <code>&lt;constructor-arg&gt;</code> ä¸­æä¾›äº† <code>&lt;bean&gt;</code> å…ƒç´ çš„ä½¿ç”¨ã€‚å†…éƒ¨ bean æ€»æ˜¯åŒ¿åçš„ï¼Œå®ƒä»¬æ€»æ˜¯ä½œä¸ºåŸå‹ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª Student ç±»ï¼Œå…¶ä¸­å¼•ç”¨äº† Person ç±»ã€‚è¿™é‡Œæˆ‘ä»¬å°†åªåˆ›å»ºä¸€ä¸ª Person ç±»å®ä¾‹å¹¶åœ¨ Student ä¸­ä½¿ç”¨å®ƒã€‚</p><p>Student.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Person person;</span><br><span class="line">    <span class="comment">//Setters and Getters</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="comment">//Setters and Getters</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>bean.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">â€œStudentBean</span>&quot; <span class="attr">class</span>=<span class="string">&quot;com.edureka.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--This is inner bean --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.edureka.Person&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">â€œScott</span>&quot;&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">value</span>=<span class="string">â€œBangalore</span>&quot;&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ä»€ä¹ˆæ˜¯-spring-è£…é…"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯-spring-è£…é…"></a> ä»€ä¹ˆæ˜¯ spring è£…é…</h3><p>å½“ bean åœ¨ Spring å®¹å™¨ä¸­ç»„åˆåœ¨ä¸€èµ·æ—¶ï¼Œå®ƒè¢«ç§°ä¸ºè£…é…æˆ– bean è£…é…ã€‚ Spring å®¹å™¨éœ€è¦çŸ¥é“éœ€è¦ä»€ä¹ˆ bean ä»¥åŠå®¹å™¨åº”è¯¥å¦‚ä½•ä½¿ç”¨ä¾èµ–æ³¨å…¥æ¥å°† bean ç»‘å®šåœ¨ä¸€èµ·ï¼ŒåŒæ—¶è£…é… beanã€‚</p><h3 id="è‡ªåŠ¨è£…é…æœ‰å“ªäº›æ–¹å¼"><a class="markdownIt-Anchor" href="#è‡ªåŠ¨è£…é…æœ‰å“ªäº›æ–¹å¼"></a> è‡ªåŠ¨è£…é…æœ‰å“ªäº›æ–¹å¼ï¼Ÿ</h3><p>Spring å®¹å™¨èƒ½å¤Ÿè‡ªåŠ¨è£…é… beanã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥é€šè¿‡æ£€æŸ¥ BeanFactory çš„å†…å®¹è®© Spring è‡ªåŠ¨è§£æ bean çš„åä½œè€…ã€‚</p><p>è‡ªåŠ¨è£…é…çš„ä¸åŒæ¨¡å¼ï¼š</p><ul><li><strong>no</strong> - è¿™æ˜¯é»˜è®¤è®¾ç½®ï¼Œè¡¨ç¤ºæ²¡æœ‰è‡ªåŠ¨è£…é…ã€‚åº”ä½¿ç”¨æ˜¾å¼ bean å¼•ç”¨è¿›è¡Œè£…é…ã€‚</li><li><strong>byName</strong> - å®ƒæ ¹æ® bean çš„åç§°æ³¨å…¥å¯¹è±¡ä¾èµ–é¡¹ã€‚å®ƒåŒ¹é…å¹¶è£…é…å…¶å±æ€§ä¸ XML æ–‡ä»¶ä¸­ç”±ç›¸åŒåç§°å®šä¹‰çš„ beanã€‚</li><li><strong>byType</strong> - å®ƒæ ¹æ®ç±»å‹æ³¨å…¥å¯¹è±¡ä¾èµ–é¡¹ã€‚å¦‚æœå±æ€§çš„ç±»å‹ä¸ XML æ–‡ä»¶ä¸­çš„ä¸€ä¸ª bean åç§°åŒ¹é…ï¼Œåˆ™åŒ¹é…å¹¶è£…é…å±æ€§ã€‚</li><li><strong>æ„é€ å‡½æ•°</strong> - å®ƒé€šè¿‡è°ƒç”¨ç±»çš„æ„é€ å‡½æ•°æ¥æ³¨å…¥ä¾èµ–é¡¹ã€‚å®ƒæœ‰å¤§é‡çš„å‚æ•°ã€‚</li><li><strong>autodetect</strong> - é¦–å…ˆå®¹å™¨å°è¯•é€šè¿‡æ„é€ å‡½æ•°ä½¿ç”¨ autowire è£…é…ï¼Œå¦‚æœä¸èƒ½ï¼Œåˆ™å°è¯•é€šè¿‡ byType è‡ªåŠ¨è£…é…ã€‚</li></ul><h3 id="è‡ªåŠ¨è£…é…æœ‰ä»€ä¹ˆå±€é™"><a class="markdownIt-Anchor" href="#è‡ªåŠ¨è£…é…æœ‰ä»€ä¹ˆå±€é™"></a> è‡ªåŠ¨è£…é…æœ‰ä»€ä¹ˆå±€é™ï¼Ÿ</h3><ul><li>è¦†ç›–çš„å¯èƒ½æ€§ - æ‚¨å§‹ç»ˆå¯ä»¥ä½¿ç”¨ <code>&lt;constructor-arg&gt;</code> å’Œ <code>&lt;property&gt;</code> è®¾ç½®æŒ‡å®šä¾èµ–é¡¹ï¼Œè¿™å°†è¦†ç›–è‡ªåŠ¨è£…é…ã€‚</li><li>åŸºæœ¬å…ƒæ•°æ®ç±»å‹ - ç®€å•å±æ€§ï¼ˆå¦‚åŸæ•°æ®ç±»å‹ï¼Œå­—ç¬¦ä¸²å’Œç±»ï¼‰æ— æ³•è‡ªåŠ¨è£…é…ã€‚</li><li>ä»¤äººå›°æƒ‘çš„æ€§è´¨ - æ€»æ˜¯å–œæ¬¢ä½¿ç”¨æ˜ç¡®çš„è£…é…ï¼Œå› ä¸ºè‡ªåŠ¨è£…é…ä¸å¤ªç²¾ç¡®ã€‚</li></ul><h2 id="æ³¨è§£"><a class="markdownIt-Anchor" href="#æ³¨è§£"></a> æ³¨è§£</h2><h3 id="ä½ ç”¨è¿‡å“ªäº›é‡è¦çš„-spring-æ³¨è§£"><a class="markdownIt-Anchor" href="#ä½ ç”¨è¿‡å“ªäº›é‡è¦çš„-spring-æ³¨è§£"></a> ä½ ç”¨è¿‡å“ªäº›é‡è¦çš„ Spring æ³¨è§£ï¼Ÿ</h3><ul><li><strong>@Controller</strong> - ç”¨äº Spring MVC é¡¹ç›®ä¸­çš„æ§åˆ¶å™¨ç±»ã€‚</li><li><strong>@Service</strong> - ç”¨äºæœåŠ¡ç±»ã€‚</li><li><strong>@RequestMapping</strong> - ç”¨äºåœ¨æ§åˆ¶å™¨å¤„ç†ç¨‹åºæ–¹æ³•ä¸­é…ç½® URI æ˜ å°„ã€‚</li><li><strong>@ResponseBody</strong> - ç”¨äºå‘é€ Object ä½œä¸ºå“åº”ï¼Œé€šå¸¸ç”¨äºå‘é€ XML æˆ– JSON æ•°æ®ä½œä¸ºå“åº”ã€‚</li><li><strong>@PathVariable</strong> - ç”¨äºå°†åŠ¨æ€å€¼ä» URI æ˜ å°„åˆ°å¤„ç†ç¨‹åºæ–¹æ³•å‚æ•°ã€‚</li><li><strong>@Autowired</strong> - ç”¨äºåœ¨ spring bean ä¸­è‡ªåŠ¨è£…é…ä¾èµ–é¡¹ã€‚</li><li><strong>@Qualifier</strong> - ä½¿ç”¨ @Autowired æ³¨è§£ï¼Œä»¥é¿å…åœ¨å­˜åœ¨å¤šä¸ª bean ç±»å‹å®ä¾‹æ—¶å‡ºç°æ··æ·†ã€‚</li><li><strong>@Scope</strong> - ç”¨äºé…ç½® spring bean çš„èŒƒå›´ã€‚</li><li><strong>@Configuration</strong>ï¼Œ<strong>@ComponentScan</strong> å’Œ <strong>@Bean</strong> - ç”¨äºåŸºäº java çš„é…ç½®ã€‚</li><li><strong>@Aspect</strong>ï¼Œ<strong>@Before</strong>ï¼Œ<strong>@After</strong>ï¼Œ<strong>@Around</strong>ï¼Œ<strong>@Pointcut</strong> - ç”¨äºåˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰ã€‚</li></ul><h3 id="å¦‚ä½•åœ¨-spring-ä¸­å¯åŠ¨æ³¨è§£è£…é…"><a class="markdownIt-Anchor" href="#å¦‚ä½•åœ¨-spring-ä¸­å¯åŠ¨æ³¨è§£è£…é…"></a> å¦‚ä½•åœ¨ spring ä¸­å¯åŠ¨æ³¨è§£è£…é…ï¼Ÿ</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring å®¹å™¨ä¸­æœªæ‰“å¼€æ³¨è§£è£…é…ã€‚å› æ­¤ï¼Œè¦ä½¿ç”¨åŸºäºæ³¨è§£è£…é…ï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡é…ç½®<code>&lt;contextï¼šannotation-config /&gt;</code> å…ƒç´ åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­å¯ç”¨å®ƒã€‚</p><h3 id="component-controller-repository-service-æœ‰ä½•åŒºåˆ«"><a class="markdownIt-Anchor" href="#component-controller-repository-service-æœ‰ä½•åŒºåˆ«"></a> @Component, @Controller, @Repository, @Service æœ‰ä½•åŒºåˆ«ï¼Ÿ</h3><ul><li>@Componentï¼šè¿™å°† java ç±»æ ‡è®°ä¸º beanã€‚å®ƒæ˜¯ä»»ä½• Spring ç®¡ç†ç»„ä»¶çš„é€šç”¨æ„é€ å‹ã€‚spring çš„ç»„ä»¶æ‰«ææœºåˆ¶ç°åœ¨å¯ä»¥å°†å…¶æ‹¾å–å¹¶å°†å…¶æ‹‰å…¥åº”ç”¨ç¨‹åºç¯å¢ƒä¸­ã€‚</li><li>@Controllerï¼šè¿™å°†ä¸€ä¸ªç±»æ ‡è®°ä¸º Spring Web MVC æ§åˆ¶å™¨ã€‚æ ‡æœ‰å®ƒçš„ Bean ä¼šè‡ªåŠ¨å¯¼å…¥åˆ° IoC å®¹å™¨ä¸­ã€‚</li><li>@Serviceï¼šæ­¤æ³¨è§£æ˜¯ç»„ä»¶æ³¨è§£çš„ç‰¹åŒ–ã€‚å®ƒä¸ä¼šå¯¹ @Component æ³¨è§£æä¾›ä»»ä½•å…¶ä»–è¡Œä¸ºã€‚æ‚¨å¯ä»¥åœ¨æœåŠ¡å±‚ç±»ä¸­ä½¿ç”¨ @Service è€Œä¸æ˜¯ @Componentï¼Œå› ä¸ºå®ƒä»¥æ›´å¥½çš„æ–¹å¼æŒ‡å®šäº†æ„å›¾ã€‚</li><li>@Repositoryï¼šè¿™ä¸ªæ³¨è§£æ˜¯å…·æœ‰ç±»ä¼¼ç”¨é€”å’ŒåŠŸèƒ½çš„ @Component æ³¨è§£çš„ç‰¹åŒ–ã€‚å®ƒä¸º DAO æä¾›äº†é¢å¤–çš„å¥½å¤„ã€‚å®ƒå°† DAO å¯¼å…¥ IoC å®¹å™¨ï¼Œå¹¶ä½¿æœªç»æ£€æŸ¥çš„å¼‚å¸¸æœ‰èµ„æ ¼è½¬æ¢ä¸º Spring DataAccessExceptionã€‚</li></ul><h3 id="required-æ³¨è§£æœ‰ä»€ä¹ˆç”¨"><a class="markdownIt-Anchor" href="#required-æ³¨è§£æœ‰ä»€ä¹ˆç”¨"></a> @Required æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>@Required åº”ç”¨äº bean å±æ€§ setter æ–¹æ³•ã€‚æ­¤æ³¨è§£ä»…æŒ‡ç¤ºå¿…é¡»åœ¨é…ç½®æ—¶ä½¿ç”¨ bean å®šä¹‰ä¸­çš„æ˜¾å¼å±æ€§å€¼æˆ–ä½¿ç”¨è‡ªåŠ¨è£…é…å¡«å……å—å½±å“çš„ bean å±æ€§ã€‚å¦‚æœå°šæœªå¡«å……å—å½±å“çš„ bean å±æ€§ï¼Œåˆ™å®¹å™¨å°†æŠ›å‡º BeanInitializationExceptionã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Required</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> string <span class="title function_">getName</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="autowired-æ³¨è§£æœ‰ä»€ä¹ˆç”¨"><a class="markdownIt-Anchor" href="#autowired-æ³¨è§£æœ‰ä»€ä¹ˆç”¨"></a> @Autowired æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>@Autowired å¯ä»¥æ›´å‡†ç¡®åœ°æ§åˆ¶åº”è¯¥åœ¨ä½•å¤„ä»¥åŠå¦‚ä½•è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚æ­¤æ³¨è§£ç”¨äºåœ¨ setter æ–¹æ³•ï¼Œæ„é€ å‡½æ•°ï¼Œå…·æœ‰ä»»æ„åç§°æˆ–å¤šä¸ªå‚æ•°çš„å±æ€§æˆ–æ–¹æ³•ä¸Šè‡ªåŠ¨è£…é… beanã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ç±»å‹é©±åŠ¨çš„æ³¨å…¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> string <span class="title function_">getName</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="qualifier-æ³¨è§£æœ‰ä»€ä¹ˆç”¨"><a class="markdownIt-Anchor" href="#qualifier-æ³¨è§£æœ‰ä»€ä¹ˆç”¨"></a> @Qualifier æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>å½“æ‚¨åˆ›å»ºå¤šä¸ªç›¸åŒç±»å‹çš„ bean å¹¶å¸Œæœ›ä»…ä½¿ç”¨å±æ€§è£…é…å…¶ä¸­ä¸€ä¸ª bean æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨@Qualifier æ³¨è§£å’Œ @Autowired é€šè¿‡æŒ‡å®šåº”è¯¥è£…é…å“ªä¸ªç¡®åˆ‡çš„ bean æ¥æ¶ˆé™¤æ­§ä¹‰ã€‚</p><p>ä¾‹å¦‚ï¼Œè¿™é‡Œæˆ‘ä»¬åˆ†åˆ«æœ‰ä¸¤ä¸ªç±»ï¼ŒEmployee å’Œ EmpAccountã€‚åœ¨ EmpAccount ä¸­ï¼Œä½¿ç”¨@Qualifier æŒ‡å®šäº†å¿…é¡»è£…é… id ä¸º emp1 çš„ beanã€‚</p><p>Employee.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> string <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>EmpAccount.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpAccount</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Employee emp;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(emp1)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showName</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(â€œEmployee name : â€+emp.getName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="requestmapping-æ³¨è§£æœ‰ä»€ä¹ˆç”¨"><a class="markdownIt-Anchor" href="#requestmapping-æ³¨è§£æœ‰ä»€ä¹ˆç”¨"></a> @RequestMapping æ³¨è§£æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>@RequestMapping æ³¨è§£ç”¨äºå°†ç‰¹å®š HTTP è¯·æ±‚æ–¹æ³•æ˜ å°„åˆ°å°†å¤„ç†ç›¸åº”è¯·æ±‚çš„æ§åˆ¶å™¨ä¸­çš„ç‰¹å®šç±»/æ–¹æ³•ã€‚æ­¤æ³¨è§£å¯åº”ç”¨äºä¸¤ä¸ªçº§åˆ«ï¼š</p><ul><li>ç±»çº§åˆ«ï¼šæ˜ å°„è¯·æ±‚çš„ URL</li><li>æ–¹æ³•çº§åˆ«ï¼šæ˜ å°„ URL ä»¥åŠ HTTP è¯·æ±‚æ–¹æ³•</li></ul><h2 id="æ•°æ®è®¿é—®"><a class="markdownIt-Anchor" href="#æ•°æ®è®¿é—®"></a> æ•°æ®è®¿é—®</h2><h3 id="spring-dao-æœ‰ä»€ä¹ˆç”¨"><a class="markdownIt-Anchor" href="#spring-dao-æœ‰ä»€ä¹ˆç”¨"></a> spring DAO æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>Spring DAO ä½¿å¾— JDBCï¼ŒHibernate æˆ– JDO è¿™æ ·çš„æ•°æ®è®¿é—®æŠ€æœ¯æ›´å®¹æ˜“ä»¥ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼å·¥ä½œã€‚è¿™ä½¿å¾—ç”¨æˆ·å®¹æ˜“åœ¨æŒä¹…æ€§æŠ€æœ¯ä¹‹é—´åˆ‡æ¢ã€‚å®ƒè¿˜å…è®¸æ‚¨åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œæ— éœ€è€ƒè™‘æ•è·æ¯ç§æŠ€æœ¯ä¸åŒçš„å¼‚å¸¸ã€‚</p><h3 id="åˆ—ä¸¾-spring-dao-æŠ›å‡ºçš„å¼‚å¸¸"><a class="markdownIt-Anchor" href="#åˆ—ä¸¾-spring-dao-æŠ›å‡ºçš„å¼‚å¸¸"></a> åˆ—ä¸¾ Spring DAO æŠ›å‡ºçš„å¼‚å¸¸ã€‚</h3><h3 id="spring-jdbc-api-ä¸­å­˜åœ¨å“ªäº›ç±»"><a class="markdownIt-Anchor" href="#spring-jdbc-api-ä¸­å­˜åœ¨å“ªäº›ç±»"></a> spring JDBC API ä¸­å­˜åœ¨å“ªäº›ç±»ï¼Ÿ</h3><ul><li>JdbcTemplate</li><li>SimpleJdbcTemplate</li><li>NamedParameterJdbcTemplate</li><li>SimpleJdbcInsert</li><li>SimpleJdbcCall</li></ul><h3 id="ä½¿ç”¨-spring-è®¿é—®-hibernate-çš„æ–¹æ³•æœ‰å“ªäº›"><a class="markdownIt-Anchor" href="#ä½¿ç”¨-spring-è®¿é—®-hibernate-çš„æ–¹æ³•æœ‰å“ªäº›"></a> ä½¿ç”¨ Spring è®¿é—® Hibernate çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼ä½¿ç”¨ Spring è®¿é—® Hibernateï¼š</p><ol><li>ä½¿ç”¨ Hibernate æ¨¡æ¿å’Œå›è°ƒè¿›è¡Œæ§åˆ¶åè½¬</li><li>æ‰©å±• HibernateDAOSupport å¹¶åº”ç”¨ AOP æ‹¦æˆªå™¨èŠ‚ç‚¹</li></ol><h3 id="åˆ—ä¸¾-spring-æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹"><a class="markdownIt-Anchor" href="#åˆ—ä¸¾-spring-æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹"></a> åˆ—ä¸¾ spring æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹</h3><p>Spring æ”¯æŒä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†ï¼š</p><ol><li>ç¨‹åºåŒ–äº‹åŠ¡ç®¡ç†ï¼šåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œåœ¨ç¼–ç¨‹çš„å¸®åŠ©ä¸‹ç®¡ç†äº‹åŠ¡ã€‚å®ƒä¸ºæ‚¨æä¾›æå¤§çš„çµæ´»æ€§ï¼Œä½†ç»´æŠ¤èµ·æ¥éå¸¸å›°éš¾ã€‚</li><li>å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼šåœ¨æ­¤ï¼Œäº‹åŠ¡ç®¡ç†ä¸ä¸šåŠ¡ä»£ç åˆ†ç¦»ã€‚ä»…ä½¿ç”¨æ³¨è§£æˆ–åŸºäº XML çš„é…ç½®æ¥ç®¡ç†äº‹åŠ¡ã€‚</li></ol><h3 id="spring-æ”¯æŒå“ªäº›-orm-æ¡†æ¶"><a class="markdownIt-Anchor" href="#spring-æ”¯æŒå“ªäº›-orm-æ¡†æ¶"></a> spring æ”¯æŒå“ªäº› ORM æ¡†æ¶</h3><ul><li>Hibernate</li><li>iBatis</li><li>JPA</li><li>JDO</li><li>OJB</li></ul><h2 id="aop"><a class="markdownIt-Anchor" href="#aop"></a> AOP</h2><h3 id="ä»€ä¹ˆæ˜¯-aop"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯-aop"></a> ä»€ä¹ˆæ˜¯ AOPï¼Ÿ</h3><p>AOP(Aspect-Oriented Programming), å³ <strong>é¢å‘åˆ‡é¢ç¼–ç¨‹</strong>, å®ƒä¸ OOP( Object-Oriented Programming, é¢å‘å¯¹è±¡ç¼–ç¨‹) ç›¸è¾…ç›¸æˆ, æä¾›äº†ä¸ OOP ä¸åŒçš„æŠ½è±¡è½¯ä»¶ç»“æ„çš„è§†è§’. åœ¨ OOP ä¸­, æˆ‘ä»¬ä»¥ç±»(class)ä½œä¸ºæˆ‘ä»¬çš„åŸºæœ¬å•å…ƒ, è€Œ AOP ä¸­çš„åŸºæœ¬å•å…ƒæ˜¯ <strong>Aspect(åˆ‡é¢)</strong></p><h3 id="aop-ä¸­çš„-aspect-advice-pointcut-jointpoint-å’Œ-advice-å‚æ•°åˆ†åˆ«æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#aop-ä¸­çš„-aspect-advice-pointcut-jointpoint-å’Œ-advice-å‚æ•°åˆ†åˆ«æ˜¯ä»€ä¹ˆ"></a> AOP ä¸­çš„ Aspectã€Adviceã€Pointcutã€JointPoint å’Œ Advice å‚æ•°åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li><strong>Aspect</strong> - Aspect æ˜¯ä¸€ä¸ªå®ç°äº¤å‰é—®é¢˜çš„ç±»ï¼Œä¾‹å¦‚äº‹åŠ¡ç®¡ç†ã€‚æ–¹é¢å¯ä»¥æ˜¯é…ç½®çš„æ™®é€šç±»ï¼Œç„¶ååœ¨ Spring Bean é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼Œæˆ–è€…æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Spring AspectJ æ”¯æŒä½¿ç”¨ @Aspect æ³¨è§£å°†ç±»å£°æ˜ä¸º Aspectã€‚</li><li><strong>Advice</strong> - Advice æ˜¯é’ˆå¯¹ç‰¹å®š JoinPoint é‡‡å–çš„æ“ä½œã€‚åœ¨ç¼–ç¨‹æ–¹é¢ï¼Œå®ƒä»¬æ˜¯åœ¨åº”ç”¨ç¨‹åºä¸­è¾¾åˆ°å…·æœ‰åŒ¹é…åˆ‡å…¥ç‚¹çš„ç‰¹å®š JoinPoint æ—¶æ‰§è¡Œçš„æ–¹æ³•ã€‚æ‚¨å¯ä»¥å°† Advice è§†ä¸º Spring æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰æˆ– Servlet è¿‡æ»¤å™¨ï¼ˆfilterï¼‰ã€‚</li><li><strong>Advice Arguments</strong> - æˆ‘ä»¬å¯ä»¥åœ¨ advice æ–¹æ³•ä¸­ä¼ é€’å‚æ•°ã€‚æˆ‘ä»¬å¯ä»¥åœ¨åˆ‡å…¥ç‚¹ä¸­ä½¿ç”¨ args() è¡¨è¾¾å¼æ¥åº”ç”¨äºä¸å‚æ•°æ¨¡å¼åŒ¹é…çš„ä»»ä½•æ–¹æ³•ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨å®ƒï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨ç¡®å®šå‚æ•°ç±»å‹çš„ advice æ–¹æ³•ä¸­ä½¿ç”¨ç›¸åŒçš„åç§°ã€‚</li><li><strong>Pointcut</strong> - Pointcut æ˜¯ä¸ JoinPoint åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨äºç¡®å®šæ˜¯å¦éœ€è¦æ‰§è¡Œ Adviceã€‚ Pointcut ä½¿ç”¨ä¸ JoinPoint åŒ¹é…çš„ä¸åŒç±»å‹çš„è¡¨è¾¾å¼ã€‚Spring æ¡†æ¶ä½¿ç”¨ AspectJ Pointcut è¡¨è¾¾å¼è¯­è¨€æ¥ç¡®å®šå°†åº”ç”¨é€šçŸ¥æ–¹æ³•çš„ JoinPointã€‚</li><li><strong>JoinPoint</strong> - JoinPoint æ˜¯åº”ç”¨ç¨‹åºä¸­çš„ç‰¹å®šç‚¹ï¼Œä¾‹å¦‚æ–¹æ³•æ‰§è¡Œï¼Œå¼‚å¸¸å¤„ç†ï¼Œæ›´æ”¹å¯¹è±¡å˜é‡å€¼ç­‰ã€‚åœ¨ Spring AOP ä¸­ï¼ŒJoinPoint å§‹ç»ˆæ˜¯æ–¹æ³•çš„æ‰§è¡Œå™¨ã€‚</li></ul><h3 id="ä»€ä¹ˆæ˜¯é€šçŸ¥advice"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯é€šçŸ¥advice"></a> ä»€ä¹ˆæ˜¯é€šçŸ¥ï¼ˆAdviceï¼‰ï¼Ÿ</h3><p>ç‰¹å®š JoinPoint å¤„çš„ Aspect æ‰€é‡‡å–çš„åŠ¨ä½œç§°ä¸º Adviceã€‚Spring AOP ä½¿ç”¨ä¸€ä¸ª Advice ä½œä¸ºæ‹¦æˆªå™¨ï¼Œåœ¨ JoinPoint â€œå‘¨å›´â€ç»´æŠ¤ä¸€ç³»åˆ—çš„æ‹¦æˆªå™¨ã€‚</p><h3 id="æœ‰å“ªäº›ç±»å‹çš„é€šçŸ¥advice"><a class="markdownIt-Anchor" href="#æœ‰å“ªäº›ç±»å‹çš„é€šçŸ¥advice"></a> æœ‰å“ªäº›ç±»å‹çš„é€šçŸ¥ï¼ˆAdviceï¼‰ï¼Ÿ</h3><ul><li><strong>Before</strong> - è¿™äº›ç±»å‹çš„ Advice åœ¨ joinpoint æ–¹æ³•ä¹‹å‰æ‰§è¡Œï¼Œå¹¶ä½¿ç”¨ @Before æ³¨è§£æ ‡è®°è¿›è¡Œé…ç½®ã€‚</li><li><strong>After Returning</strong> - è¿™äº›ç±»å‹çš„ Advice åœ¨è¿æ¥ç‚¹æ–¹æ³•æ­£å¸¸æ‰§è¡Œåæ‰§è¡Œï¼Œå¹¶ä½¿ç”¨@AfterReturning æ³¨è§£æ ‡è®°è¿›è¡Œé…ç½®ã€‚</li><li><strong>After Throwing</strong> - è¿™äº›ç±»å‹çš„ Advice ä»…åœ¨ joinpoint æ–¹æ³•é€šè¿‡æŠ›å‡ºå¼‚å¸¸é€€å‡ºå¹¶ä½¿ç”¨ @AfterThrowing æ³¨è§£æ ‡è®°é…ç½®æ—¶æ‰§è¡Œã€‚</li><li><strong>After (finally)</strong> - è¿™äº›ç±»å‹çš„ Advice åœ¨è¿æ¥ç‚¹æ–¹æ³•ä¹‹åæ‰§è¡Œï¼Œæ— è®ºæ–¹æ³•é€€å‡ºæ˜¯æ­£å¸¸è¿˜æ˜¯å¼‚å¸¸è¿”å›ï¼Œå¹¶ä½¿ç”¨ @After æ³¨è§£æ ‡è®°è¿›è¡Œé…ç½®ã€‚</li><li><strong>Around</strong> - è¿™äº›ç±»å‹çš„ Advice åœ¨è¿æ¥ç‚¹ä¹‹å‰å’Œä¹‹åæ‰§è¡Œï¼Œå¹¶ä½¿ç”¨ @Around æ³¨è§£æ ‡è®°è¿›è¡Œé…ç½®ã€‚</li></ul><h3 id="æŒ‡å‡ºåœ¨-spring-aop-ä¸­-concern-å’Œ-cross-cutting-concern-çš„ä¸åŒä¹‹å¤„"><a class="markdownIt-Anchor" href="#æŒ‡å‡ºåœ¨-spring-aop-ä¸­-concern-å’Œ-cross-cutting-concern-çš„ä¸åŒä¹‹å¤„"></a> æŒ‡å‡ºåœ¨ spring aop ä¸­ concern å’Œ cross-cutting concern çš„ä¸åŒä¹‹å¤„ã€‚</h3><p>concern æ˜¯æˆ‘ä»¬æƒ³è¦åœ¨åº”ç”¨ç¨‹åºçš„ç‰¹å®šæ¨¡å—ä¸­å®šä¹‰çš„è¡Œä¸ºã€‚å®ƒå¯ä»¥å®šä¹‰ä¸ºæˆ‘ä»¬æƒ³è¦å®ç°çš„åŠŸèƒ½ã€‚</p><p>cross-cutting concern æ˜¯ä¸€ä¸ªé€‚ç”¨äºæ•´ä¸ªåº”ç”¨çš„è¡Œä¸ºï¼Œè¿™ä¼šå½±å“æ•´ä¸ªåº”ç”¨ç¨‹åºã€‚ä¾‹å¦‚ï¼Œæ—¥å¿—è®°å½•ï¼Œå®‰å…¨æ€§å’Œæ•°æ®ä¼ è¾“æ˜¯åº”ç”¨ç¨‹åºå‡ ä¹æ¯ä¸ªæ¨¡å—éƒ½éœ€è¦å…³æ³¨çš„é—®é¢˜ï¼Œå› æ­¤å®ƒä»¬æ˜¯è·¨é¢†åŸŸçš„é—®é¢˜ã€‚</p><h3 id="aop-æœ‰å“ªäº›å®ç°æ–¹å¼"><a class="markdownIt-Anchor" href="#aop-æœ‰å“ªäº›å®ç°æ–¹å¼"></a> AOP æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ</h3><p>å®ç° AOP çš„æŠ€æœ¯ï¼Œä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p><ul><li>é™æ€ä»£ç† - æŒ‡ä½¿ç”¨ AOP æ¡†æ¶æä¾›çš„å‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼Œä»è€Œåœ¨ç¼–è¯‘é˜¶æ®µå°±å¯ç”Ÿæˆ AOP ä»£ç†ç±»ï¼Œå› æ­¤ä¹Ÿç§°ä¸ºç¼–è¯‘æ—¶å¢å¼ºï¼›<ul><li>ç¼–è¯‘æ—¶ç¼–ç»‡ï¼ˆç‰¹æ®Šç¼–è¯‘å™¨å®ç°ï¼‰</li><li>ç±»åŠ è½½æ—¶ç¼–ç»‡ï¼ˆç‰¹æ®Šçš„ç±»åŠ è½½å™¨å®ç°ï¼‰ã€‚</li></ul></li><li>åŠ¨æ€ä»£ç† - åœ¨è¿è¡Œæ—¶åœ¨å†…å­˜ä¸­â€œä¸´æ—¶â€ç”Ÿæˆ AOP åŠ¨æ€ä»£ç†ç±»ï¼Œå› æ­¤ä¹Ÿè¢«ç§°ä¸ºè¿è¡Œæ—¶å¢å¼ºã€‚<ul><li>JDK åŠ¨æ€ä»£ç†</li><li>CGLIB</li></ul></li></ul><h3 id="spring-aop-and-aspectj-aop-æœ‰ä»€ä¹ˆåŒºåˆ«"><a class="markdownIt-Anchor" href="#spring-aop-and-aspectj-aop-æœ‰ä»€ä¹ˆåŒºåˆ«"></a> Spring AOP and AspectJ AOP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>Spring AOP åŸºäºåŠ¨æ€ä»£ç†æ–¹å¼å®ç°ï¼›AspectJ åŸºäºé™æ€ä»£ç†æ–¹å¼å®ç°ã€‚ Spring AOP ä»…æ”¯æŒæ–¹æ³•çº§åˆ«çš„ PointCutï¼›æä¾›äº†å®Œå…¨çš„ AOP æ”¯æŒï¼Œå®ƒè¿˜æ”¯æŒå±æ€§çº§åˆ«çš„ PointCutã€‚</p><h3 id="å¦‚ä½•ç†è§£-spring-ä¸­çš„ä»£ç†"><a class="markdownIt-Anchor" href="#å¦‚ä½•ç†è§£-spring-ä¸­çš„ä»£ç†"></a> å¦‚ä½•ç†è§£ Spring ä¸­çš„ä»£ç†ï¼Ÿ</h3><p>å°† Advice åº”ç”¨äºç›®æ ‡å¯¹è±¡ååˆ›å»ºçš„å¯¹è±¡ç§°ä¸ºä»£ç†ã€‚åœ¨å®¢æˆ·ç«¯å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡æ˜¯ç›¸åŒçš„ã€‚</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Advice + Target Object = Proxy</span><br></pre></td></tr></table></figure><h3 id="ä»€ä¹ˆæ˜¯ç¼–ç»‡weaving"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯ç¼–ç»‡weaving"></a> ä»€ä¹ˆæ˜¯ç¼–ç»‡ï¼ˆWeavingï¼‰ï¼Ÿ</h3><p>ä¸ºäº†åˆ›å»ºä¸€ä¸ª advice å¯¹è±¡è€Œé“¾æ¥ä¸€ä¸ª aspect å’Œå…¶å®ƒåº”ç”¨ç±»å‹æˆ–å¯¹è±¡ï¼Œç§°ä¸ºç¼–ç»‡ï¼ˆWeavingï¼‰ã€‚åœ¨ Spring AOP ä¸­ï¼Œç¼–ç»‡åœ¨è¿è¡Œæ—¶æ‰§è¡Œã€‚è¯·å‚è€ƒä¸‹å›¾ï¼š</p><p><img src="https://upload-images.jianshu.io/upload_images/3101171-cfaa92f0e4115b4a.png" alt="img" /></p><h2 id="mvc"><a class="markdownIt-Anchor" href="#mvc"></a> MVC</h2><h3 id="spring-mvc-æ¡†æ¶æœ‰ä»€ä¹ˆç”¨"><a class="markdownIt-Anchor" href="#spring-mvc-æ¡†æ¶æœ‰ä»€ä¹ˆç”¨"></a> Spring MVC æ¡†æ¶æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>Spring Web MVC æ¡†æ¶æä¾› <strong>æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨</strong> æ¶æ„å’Œéšæ—¶å¯ç”¨çš„ç»„ä»¶ï¼Œç”¨äºå¼€å‘çµæ´»ä¸”æ¾æ•£è€¦åˆçš„ Web åº”ç”¨ç¨‹åºã€‚ MVC æ¨¡å¼æœ‰åŠ©äºåˆ†ç¦»åº”ç”¨ç¨‹åºçš„ä¸åŒæ–¹é¢ï¼Œå¦‚è¾“å…¥é€»è¾‘ï¼Œä¸šåŠ¡é€»è¾‘å’Œ UI é€»è¾‘ï¼ŒåŒæ—¶åœ¨æ‰€æœ‰è¿™äº›å…ƒç´ ä¹‹é—´æä¾›æ¾æ•£è€¦åˆã€‚</p><h3 id="æè¿°ä¸€ä¸‹-dispatcherservlet-çš„å·¥ä½œæµç¨‹"><a class="markdownIt-Anchor" href="#æè¿°ä¸€ä¸‹-dispatcherservlet-çš„å·¥ä½œæµç¨‹"></a> æè¿°ä¸€ä¸‹ DispatcherServlet çš„å·¥ä½œæµç¨‹</h3><p>DispatcherServlet çš„å·¥ä½œæµç¨‹å¯ä»¥ç”¨ä¸€å¹…å›¾æ¥è¯´æ˜ï¼š</p><ol><li><p>å‘æœåŠ¡å™¨å‘é€ HTTP è¯·æ±‚ï¼Œè¯·æ±‚è¢«å‰ç«¯æ§åˆ¶å™¨ <code>DispatcherServlet</code> æ•è·ã€‚</p></li><li><p><code>DispatcherServlet</code> æ ¹æ® <strong>-servlet.xml</strong> ä¸­çš„é…ç½®å¯¹è¯·æ±‚çš„ URL è¿›è¡Œè§£æï¼Œå¾—åˆ°è¯·æ±‚èµ„æºæ ‡è¯†ç¬¦ï¼ˆURIï¼‰ã€‚ç„¶åæ ¹æ®è¯¥ URIï¼Œè°ƒç”¨ <code>HandlerMapping</code> è·å¾—è¯¥ Handler é…ç½®çš„æ‰€æœ‰ç›¸å…³çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ Handler å¯¹è±¡ä»¥åŠ Handler å¯¹è±¡å¯¹åº”çš„æ‹¦æˆªå™¨ï¼‰ï¼Œæœ€åä»¥<code>HandlerExecutionChain</code> å¯¹è±¡çš„å½¢å¼è¿”å›ã€‚</p></li><li><p><code>DispatcherServlet</code> æ ¹æ®è·å¾—çš„<code>Handler</code>ï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ <code>HandlerAdapter</code>ã€‚ï¼ˆé™„æ³¨ï¼šå¦‚æœæˆåŠŸè·å¾—<code>HandlerAdapter</code>åï¼Œæ­¤æ—¶å°†å¼€å§‹æ‰§è¡Œæ‹¦æˆªå™¨çš„ preHandler(â€¦)æ–¹æ³•ï¼‰ã€‚</p></li><li><p>æå–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Request</span><br></pre></td></tr></table></figure><p>ä¸­çš„æ¨¡å‹æ•°æ®ï¼Œå¡«å……</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Handler</span><br></pre></td></tr></table></figure><p>å…¥å‚ï¼Œå¼€å§‹æ‰§è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Handler</span><br></pre></td></tr></table></figure><p>ï¼ˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Controller</span><br></pre></td></tr></table></figure><p>)ã€‚ åœ¨å¡«å……</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Handler</span><br></pre></td></tr></table></figure><p>çš„å…¥å‚è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä½ çš„é…ç½®ï¼ŒSpring å°†å¸®ä½ åšä¸€äº›é¢å¤–çš„å·¥ä½œï¼š</p><ul><li>HttpMessageConveterï¼š å°†è¯·æ±‚æ¶ˆæ¯ï¼ˆå¦‚ Jsonã€xml ç­‰æ•°æ®ï¼‰è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ï¼Œå°†å¯¹è±¡è½¬æ¢ä¸ºæŒ‡å®šçš„å“åº”ä¿¡æ¯ã€‚</li><li>æ•°æ®è½¬æ¢ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®è½¬æ¢ã€‚å¦‚<code>String</code>è½¬æ¢æˆ<code>Integer</code>ã€<code>Double</code>ç­‰ã€‚</li><li>æ•°æ®æ ¹å¼åŒ–ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®æ ¼å¼åŒ–ã€‚ å¦‚å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ ¼å¼åŒ–æ•°å­—æˆ–æ ¼å¼åŒ–æ—¥æœŸç­‰ã€‚</li><li>æ•°æ®éªŒè¯ï¼š éªŒè¯æ•°æ®çš„æœ‰æ•ˆæ€§ï¼ˆé•¿åº¦ã€æ ¼å¼ç­‰ï¼‰ï¼ŒéªŒè¯ç»“æœå­˜å‚¨åˆ°<code>BindingResult</code>æˆ–<code>Error</code>ä¸­ã€‚</li></ul></li><li><p>Handler(Controller)æ‰§è¡Œå®Œæˆåï¼Œå‘ <code>DispatcherServlet</code> è¿”å›ä¸€ä¸ª <code>ModelAndView</code> å¯¹è±¡ï¼›</p></li><li><p>æ ¹æ®è¿”å›çš„<code>ModelAndView</code>ï¼Œé€‰æ‹©ä¸€ä¸ªé€‚åˆçš„ <code>ViewResolver</code>ï¼ˆå¿…é¡»æ˜¯å·²ç»æ³¨å†Œåˆ° Spring å®¹å™¨ä¸­çš„<code>ViewResolver</code>)è¿”å›ç»™<code>DispatcherServlet</code>ã€‚</p></li><li><p><code>ViewResolver</code> ç»“åˆ<code>Model</code>å’Œ<code>View</code>ï¼Œæ¥æ¸²æŸ“è§†å›¾ã€‚</p></li><li><p>è§†å›¾è´Ÿè´£å°†æ¸²æŸ“ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p></li></ol><h3 id="ä»‹ç»ä¸€ä¸‹-webapplicationcontext"><a class="markdownIt-Anchor" href="#ä»‹ç»ä¸€ä¸‹-webapplicationcontext"></a> ä»‹ç»ä¸€ä¸‹ WebApplicationContext</h3><p>WebApplicationContext æ˜¯ ApplicationContext çš„æ‰©å±•ã€‚å®ƒå…·æœ‰ Web åº”ç”¨ç¨‹åºæ‰€éœ€çš„ä¸€äº›é¢å¤–åŠŸèƒ½ã€‚å®ƒä¸æ™®é€šçš„ ApplicationContext åœ¨è§£æä¸»é¢˜å’Œå†³å®šä¸å“ªä¸ª servlet å…³è”çš„èƒ½åŠ›æ–¹é¢æœ‰æ‰€ä¸åŒã€‚</p><p>æœ¬æ–‡å¤§éƒ¨åˆ†ä»ç½‘ç»œæ”¶é›†,å¸Œæœ›æ­¤æ–‡èƒ½ç»™æ‚¨å¸¦æ¥å¸®åŠ©!</p><p>å¦‚æœæ‚¨æœ‰æ›´å¥½çš„å»ºè®®å¯ä»¥åœ¨ä¸‹æ–¹ç•™è¨€!</p>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
          <category> Java </category>
          
          <category> é¢è¯•é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> Springé¢è¯•é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBeanå£°æ˜å‘¨æœŸ</title>
      <link href="/posts/93f3f3c2/"/>
      <url>/posts/93f3f3c2/</url>
      
        <content type="html"><![CDATA[<h2 id="spring-bean-ç®€ä»‹"><a class="markdownIt-Anchor" href="#spring-bean-ç®€ä»‹"></a> Spring Bean ç®€ä»‹</h2><p>å¦‚ä½•æ³¨å†Œä¸€ä¸ª Spring Beanï¼Ÿ</p><p>é€šè¿‡ BeanDefinition å’Œå¤–éƒ¨å•ä½“å¯¹è±¡æ¥æ³¨å†Œ</p><h3 id="beandefinition"><a class="markdownIt-Anchor" href="#beandefinition"></a> BeanDefinition</h3><h4 id="ä»€ä¹ˆæ˜¯-beandefinition"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯-beandefinition"></a> ä»€ä¹ˆæ˜¯ BeanDefinition</h4><p><code>BeanDefinition</code> æ˜¯ Spring Framework ä¸­å®šä¹‰ Bean çš„é…ç½®å…ƒä¿¡æ¯æ¥å£ï¼ŒåŒ…å«ï¼š</p><ul><li>Bean ç±»å</li><li>Bean è¡Œä¸ºé…ç½®å…ƒç´ ï¼Œå¦‚ï¼šä½œç”¨åŸŸã€è‡ªåŠ¨ç»‘å®šçš„æ¨¡å¼ã€ç”Ÿå‘½å‘¨æœŸå›è°ƒç­‰</li><li>å…¶ä»– Bean å¼•ç”¨</li><li>é…ç½®è®¾ç½®ï¼Œå¦‚ Bean å±æ€§ï¼ˆPropertiesï¼‰</li></ul><h4 id="lbeandefinition-å…ƒä¿¡æ¯beandefinition-å…ƒä¿¡æ¯"><a class="markdownIt-Anchor" href="#lbeandefinition-å…ƒä¿¡æ¯beandefinition-å…ƒä¿¡æ¯"></a> l#beandefinition-å…ƒä¿¡æ¯)BeanDefinition å…ƒä¿¡æ¯</h4><p><code>BeanDefinition</code> å…ƒä¿¡æ¯å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å±æ€§ï¼ˆPropertyï¼‰</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Class Bean</td><td>å…¨ç±»åï¼Œå¿…é¡»æ˜¯å…·ä½“ç±»ï¼Œä¸èƒ½ç”¨æŠ½è±¡ç±»æˆ–æ¥å£</td></tr><tr><td>Name Bean</td><td>çš„åç§°æˆ–è€… ID</td></tr><tr><td>Scope Bean</td><td>çš„ä½œç”¨åŸŸï¼ˆå¦‚ï¼šsingletonã€prototype ç­‰ï¼‰</td></tr><tr><td>Constructor arguments Bean</td><td>æ„é€ å™¨å‚æ•°ï¼ˆç”¨äºä¾èµ–æ³¨å…¥ï¼‰</td></tr><tr><td>Properties Bean</td><td>å±æ€§è®¾ç½®ï¼ˆç”¨äºä¾èµ–æ³¨å…¥ï¼‰</td></tr><tr><td>Autowiring mode Bean</td><td>è‡ªåŠ¨ç»‘å®šæ¨¡å¼ï¼ˆå¦‚ï¼šé€šè¿‡åç§° byNameï¼‰</td></tr><tr><td>Lazy initialization mode Bean</td><td>å»¶è¿Ÿåˆå§‹åŒ–æ¨¡å¼ï¼ˆå»¶è¿Ÿå’Œéå»¶è¿Ÿï¼‰</td></tr><tr><td>Initialization method Bean</td><td>åˆå§‹åŒ–å›è°ƒæ–¹æ³•åç§°</td></tr><tr><td>Destruction method Bean</td><td>é”€æ¯å›è°ƒæ–¹æ³•åç§°</td></tr></tbody></table><h4 id="beandefinition-æ„å»º"><a class="markdownIt-Anchor" href="#beandefinition-æ„å»º"></a> BeanDefinition æ„å»º</h4><p>BeanDefinition æ„å»ºæ–¹å¼ï¼š</p><ul><li>é€šè¿‡ <code>BeanDefinitionBuilder</code></li><li>é€šè¿‡ <code>AbstractBeanDefinition</code> ä»¥åŠæ´¾ç”Ÿç±»</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.é€šè¿‡ BeanDefinitionBuilder æ„å»º</span></span><br><span class="line"><span class="type">BeanDefinitionBuilder</span> <span class="variable">beanDefinitionBuilder</span> <span class="operator">=</span> BeanDefinitionBuilder.genericBeanDefinition(User.class);</span><br><span class="line"><span class="comment">// é€šè¿‡å±æ€§è®¾ç½®</span></span><br><span class="line">beanDefinitionBuilder</span><br><span class="line">  .addPropertyValue(<span class="string">&quot;id&quot;</span>, <span class="number">1</span>)</span><br><span class="line">  .addPropertyValue(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;å°é©¬å“¥&quot;</span>);</span><br><span class="line"><span class="comment">// è·å– BeanDefinition å®ä¾‹</span></span><br><span class="line"><span class="type">BeanDefinition</span> <span class="variable">beanDefinition</span> <span class="operator">=</span> beanDefinitionBuilder.getBeanDefinition();</span><br><span class="line"><span class="comment">// BeanDefinition å¹¶é Bean ç»ˆæ€ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¿®æ”¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. é€šè¿‡ AbstractBeanDefinition ä»¥åŠæ´¾ç”Ÿç±»</span></span><br><span class="line"><span class="type">GenericBeanDefinition</span> <span class="variable">genericBeanDefinition</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GenericBeanDefinition</span>();</span><br><span class="line"><span class="comment">// è®¾ç½® Bean ç±»å‹</span></span><br><span class="line">genericBeanDefinition.setBeanClass(User.class);</span><br><span class="line"><span class="comment">// é€šè¿‡ MutablePropertyValues æ‰¹é‡æ“ä½œå±æ€§</span></span><br><span class="line"><span class="type">MutablePropertyValues</span> <span class="variable">propertyValues</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MutablePropertyValues</span>();</span><br><span class="line"><span class="comment">//        propertyValues.addPropertyValue(&quot;id&quot;, 1);</span></span><br><span class="line"><span class="comment">//        propertyValues.addPropertyValue(&quot;name&quot;, &quot;å°é©¬å“¥&quot;);</span></span><br><span class="line">propertyValues</span><br><span class="line">  .add(<span class="string">&quot;id&quot;</span>, <span class="number">1</span>)</span><br><span class="line">  .add(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;å°é©¬å“¥&quot;</span>);</span><br><span class="line"><span class="comment">// é€šè¿‡ set MutablePropertyValues æ‰¹é‡æ“ä½œå±æ€§</span></span><br><span class="line">genericBeanDefinition.setPropertyValues(propertyValues);</span><br></pre></td></tr></table></figure><h3 id="å‘½å-spring-bean"><a class="markdownIt-Anchor" href="#å‘½å-spring-bean"></a> å‘½å Spring Bean</h3><h4 id="spring-bean-å‘½åè§„åˆ™"><a class="markdownIt-Anchor" href="#spring-bean-å‘½åè§„åˆ™"></a> Spring Bean å‘½åè§„åˆ™</h4><p>æ¯ä¸ª Bean æ‹¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡è¯†ç¬¦ï¼ˆidentifiersï¼‰ï¼Œè¿™äº›æ ‡è¯†ç¬¦åœ¨ Bean æ‰€åœ¨çš„å®¹å™¨å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚é€šå¸¸ï¼Œä¸€ä¸ª Bean ä»…æœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œå¦‚æœéœ€è¦é¢å¤–çš„ï¼Œå¯è€ƒè™‘ä½¿ç”¨åˆ«åï¼ˆAliasï¼‰æ¥æ‰©å……ã€‚</p><p>åœ¨åŸºäº XML çš„é…ç½®å…ƒä¿¡æ¯ä¸­ï¼Œå¼€å‘äººå‘˜å¯ç”¨ id æˆ–è€… name å±æ€§æ¥è§„å®š Bean çš„æ ‡è¯†ç¬¦ã€‚é€šå¸¸ Bean çš„æ ‡è¯†ç¬¦ç”±å­—æ¯ç»„æˆï¼Œå…è®¸å‡ºç°ç‰¹æ®Šå­—ç¬¦ã€‚å¦‚æœè¦æƒ³å¼•å…¥ Bean çš„åˆ«åçš„è¯ï¼Œå¯åœ¨ name å±æ€§ä½¿ç”¨åŠè§’é€—å·ï¼ˆâ€œ,â€ï¼‰æˆ–åˆ†å·ï¼ˆâ€œ;â€) æ¥é—´éš”ã€‚</p><p>Bean çš„ id æˆ– name å±æ€§å¹¶éå¿…é¡»åˆ¶å®šï¼Œå¦‚æœç•™ç©ºçš„è¯ï¼Œå®¹å™¨ä¼šä¸º Bean è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„åç§°ã€‚Bean çš„å‘½åå°½ç®¡æ²¡æœ‰é™åˆ¶ï¼Œä¸è¿‡å®˜æ–¹å»ºè®®é‡‡ç”¨é©¼å³°çš„æ–¹å¼ï¼Œæ›´ç¬¦åˆ Java çš„å‘½åçº¦å®šã€‚</p><h4 id="spring-bean-å‘½åç”Ÿæˆå™¨"><a class="markdownIt-Anchor" href="#spring-bean-å‘½åç”Ÿæˆå™¨"></a> Spring Bean å‘½åç”Ÿæˆå™¨</h4><p>Spring æä¾›äº†ä¸¤ç§ Spring Bean å‘½åç”Ÿæˆå™¨ï¼š</p><ul><li>DefaultBeanNameGeneratorï¼šé»˜è®¤é€šç”¨ BeanNameGenerator å®ç°ã€‚</li><li>AnnotationBeanNameGeneratorï¼šåŸºäºæ³¨è§£æ‰«æçš„ BeanNameGenerator å®ç°ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BeanNameGenerator</span> &#123;</span><br><span class="line">   String <span class="title function_">generateBeanName</span><span class="params">(BeanDefinition definition, BeanDefinitionRegistry registry)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="spring-bean-åˆ«å"><a class="markdownIt-Anchor" href="#spring-bean-åˆ«å"></a> Spring Bean åˆ«å</h4><p>å¯èƒ½å­˜åœ¨è¿™æ ·çš„åœºæ™¯ï¼Œä¸åŒç³»ç»Ÿä¸­å¯¹äºåŒä¸€ bean çš„å‘½åæ–¹å¼ä¸ä¸€æ ·ã€‚ ä¸ºäº†é€‚é…ï¼ŒSpring æ”¯æŒ <code>&lt;alias&gt;</code> ä¸º bean æ·»åŠ åˆ«åçš„åŠŸèƒ½ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;io.github.dunwu.spring.core.domain.User&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">p:name</span>=<span class="string">&quot;å¼ ä¸‰&quot;</span> <span class="attr">p:age</span>=<span class="string">&quot;18&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&quot;sysUser&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;superUser&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>Bean åˆ«åï¼ˆAliasï¼‰çš„ä½œç”¨ï¼š</p><ul><li>å¤ç”¨ç°æœ‰çš„ BeanDefinition</li><li>æ›´å…·æœ‰åœºæ™¯åŒ–çš„å‘½åæ–¹æ³•ï¼Œæ¯”å¦‚ï¼š<ul><li><code>&lt;alias name=&quot;myApp-dataSource&quot; alias=&quot;subsystemA-dataSource&quot;/&gt;</code></li><li><code>&lt;alias name=&quot;myApp-dataSource&quot; alias=&quot;subsystemB-dataSource&quot;/&gt;</code></li></ul></li></ul><h2 id="bean-ç”Ÿå‘½å‘¨æœŸæµç¨‹"><a class="markdownIt-Anchor" href="#bean-ç”Ÿå‘½å‘¨æœŸæµç¨‹"></a> Bean ç”Ÿå‘½å‘¨æœŸæµç¨‹</h2><p><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fupload-images.jianshu.io%2Fupload_images%2F14623831-a87d9a6ee1be94a3.png%3FimageMogr2%2Fauto-orient%2Fstrip%257CimageView2%2F2%2Fw%2F1240&amp;refer=http%3A%2F%2Fupload-images.jianshu.io&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1654251154&amp;t=39886bb51305eca4d749695ecca02657" alt="img" /></p><ol><li>Spring å¯¹ Bean è¿›è¡Œå®ä¾‹åŒ–ï¼ˆç›¸å½“äº new XXX()ï¼‰</li><li>Spring å°†å€¼å’Œå¼•ç”¨æ³¨å…¥è¿› Bean å¯¹åº”çš„å±æ€§ä¸­</li><li>å¦‚æœ Bean å®ç°äº† <code>BeanNameAware</code> æ¥å£ï¼ŒSpring å°† Bean çš„ ID ä¼ é€’ç»™ <code>setBeanName</code> æ–¹æ³•<ul><li>ä½œç”¨æ˜¯é€šè¿‡ Bean çš„å¼•ç”¨æ¥è·å¾— Bean IDï¼Œä¸€èˆ¬ä¸šåŠ¡ä¸­æ˜¯å¾ˆå°‘æœ‰ç”¨åˆ° Bean çš„ ID çš„</li></ul></li><li>å¦‚æœ Bean å®ç°äº† <code>BeanFactoryAware</code> æ¥å£ï¼ŒSpring å°†è°ƒç”¨ <code>setBeanDactory</code> æ–¹æ³•ï¼Œå¹¶æŠŠ <code>BeanFactory</code> å®¹å™¨å®ä¾‹ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚<ul><li>ä½œç”¨æ˜¯è·å– Spring å®¹å™¨ï¼Œå¦‚ Bean é€šè¿‡ Spring å®¹å™¨å‘å¸ƒäº‹ä»¶ç­‰</li></ul></li><li>å¦‚æœ Bean å®ç°äº† <code>ApplicationContextAware</code> æ¥å£ï¼ŒSpring å®¹å™¨å°†è°ƒç”¨ <code>setApplicationContext</code> æ–¹æ³•ï¼ŒæŠŠåº”ç”¨ä¸Šä¸‹æ–‡ä½œä¸ºå‚æ•°ä¼ å…¥<ul><li>ä½œç”¨ä¸ <code>BeanFactory</code> ç±»ä¼¼éƒ½æ˜¯ä¸ºäº†è·å– Spring å®¹å™¨ï¼Œä¸åŒçš„æ˜¯ Spring å®¹å™¨åœ¨è°ƒç”¨ <code>setApplicationContext</code> æ–¹æ³•æ—¶ä¼šæŠŠå®ƒè‡ªå·±ä½œä¸º <code>setApplicationContext</code> çš„å‚æ•°ä¼ å…¥ï¼Œè€Œ Spring å®¹å™¨åœ¨è°ƒç”¨ <code>setBeanFactory</code> å‰éœ€è¦ä½¿ç”¨è€…è‡ªå·±æŒ‡å®šï¼ˆæ³¨å…¥ï¼‰<code>setBeanFactory</code> é‡Œçš„å‚æ•° <code>BeanFactory</code></li></ul></li><li>å¦‚æœ Bean å®ç°äº† <code>BeanPostProcess</code> æ¥å£ï¼ŒSpring å°†è°ƒç”¨ <code>postProcessBeforeInitialization</code> æ–¹æ³•<ul><li>ä½œç”¨æ˜¯åœ¨ Bean å®ä¾‹åˆ›å»ºæˆåŠŸåå¯¹å…¶è¿›è¡Œå¢å¼ºå¤„ç†ï¼Œå¦‚å¯¹ Bean è¿›è¡Œä¿®æ”¹ï¼Œå¢åŠ æŸä¸ªåŠŸèƒ½</li></ul></li><li>å¦‚æœ Bean å®ç°äº† <code>InitializingBean</code> æ¥å£ï¼ŒSpring å°†è°ƒç”¨ <code>afterPropertiesSet</code> æ–¹æ³•ï¼Œä½œç”¨ä¸åœ¨é…ç½®æ–‡ä»¶ä¸­å¯¹ Bean ä½¿ç”¨ <code>init-method</code> å£°æ˜åˆå§‹åŒ–çš„ä½œç”¨ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨ Bean çš„å…¨éƒ¨å±æ€§è®¾ç½®æˆåŠŸåæ‰§è¡Œçš„åˆå§‹åŒ–æ–¹æ³•ã€‚</li><li>å¦‚æœ Bean å®ç°äº† <code>BeanPostProcess</code> æ¥å£ï¼ŒSpring å°†è°ƒç”¨ <code>postProcessAfterInitialization</code> æ–¹æ³•<ul><li><code>postProcessBeforeInitialization</code> æ˜¯åœ¨ Bean åˆå§‹åŒ–å‰æ‰§è¡Œçš„ï¼Œè€Œ <code>postProcessAfterInitialization</code> æ˜¯åœ¨ Bean åˆå§‹åŒ–åæ‰§è¡Œçš„</li></ul></li><li>ç»è¿‡ä»¥ä¸Šçš„å·¥ä½œåï¼ŒBean å°†ä¸€ç›´é©»ç•™åœ¨åº”ç”¨ä¸Šä¸‹æ–‡ä¸­ç»™åº”ç”¨ä½¿ç”¨ï¼Œç›´åˆ°åº”ç”¨ä¸Šä¸‹æ–‡è¢«é”€æ¯</li><li>å¦‚æœ Bean å®ç°äº† <code>DispostbleBean</code> æ¥å£ï¼ŒSpring å°†è°ƒç”¨å®ƒçš„ <code>destory</code> æ–¹æ³•ï¼Œä½œç”¨ä¸åœ¨é…ç½®æ–‡ä»¶ä¸­å¯¹ Bean ä½¿ç”¨ <code>destory-method</code> å±æ€§çš„ä½œç”¨ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨ Bean å®ä¾‹é”€æ¯å‰æ‰§è¡Œçš„æ–¹æ³•ã€‚</li></ol><h2 id="spring-bean-æ³¨å†Œ"><a class="markdownIt-Anchor" href="#spring-bean-æ³¨å†Œ"></a> Spring Bean æ³¨å†Œ</h2><p>æ³¨å†Œ Spring Bean å®é™…ä¸Šæ˜¯å°† <code>BeanDefinition</code> æ³¨å†Œåˆ° IoC å®¹å™¨ä¸­ã€‚</p><h3 id="xml-é…ç½®å…ƒä¿¡æ¯"><a class="markdownIt-Anchor" href="#xml-é…ç½®å…ƒä¿¡æ¯"></a> XML é…ç½®å…ƒä¿¡æ¯</h3><p>Spring çš„ä¼ ç»Ÿé…ç½®æ–¹å¼ã€‚åœ¨ <code>&lt;bean&gt;</code> æ ‡ç­¾ä¸­é…ç½®å…ƒæ•°æ®å†…å®¹ã€‚</p><p>ç¼ºç‚¹æ˜¯å½“ JavaBean è¿‡å¤šæ—¶ï¼Œäº§ç”Ÿçš„é…ç½®æ–‡ä»¶è¶³ä»¥è®©ä½ çœ¼èŠ±ç¼­ä¹±ã€‚</p><h3 id="æ³¨è§£é…ç½®å…ƒä¿¡æ¯"><a class="markdownIt-Anchor" href="#æ³¨è§£é…ç½®å…ƒä¿¡æ¯"></a> æ³¨è§£é…ç½®å…ƒä¿¡æ¯</h3><p>ä½¿ç”¨ <code>@Bean</code>ã€<code>@Component</code>ã€<code>@Import</code> æ³¨è§£æ³¨å†Œ Spring Beanã€‚</p><h3 id="java-api-é…ç½®å…ƒä¿¡æ¯"><a class="markdownIt-Anchor" href="#java-api-é…ç½®å…ƒä¿¡æ¯"></a> Java API é…ç½®å…ƒä¿¡æ¯</h3><ul><li>å‘½åæ–¹å¼ï¼š<code>BeanDefinitionRegistry#registerBeanDefinition(String,BeanDefinition)</code></li><li>éå‘½åæ–¹å¼ï¼š<code>BeanDefinitionReaderUtils#registerWithGeneratedName(AbstractBeanDefinition,Be</code> <code>anDefinitionRegistry)</code></li><li>é…ç½®ç±»æ–¹å¼ï¼š<code>AnnotatedBeanDefinitionReader#register(Class...)</code></li></ul><p>[ç¤ºä¾‹]</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import(AnnotationComponentScan.MyConfiguration.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationComponentScan</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      <span class="comment">// åˆ›å»º BeanFactory å®¹å™¨</span></span><br><span class="line">      <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 1.æ³¨å†Œé…ç½®ç±»</span></span><br><span class="line">      ctx.register(AnnotationComponentScan.class);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 2.é€šè¿‡ Java API æ³¨å†Œ</span></span><br><span class="line">      registerBeanDefinition(ctx, <span class="string">&quot;zhaoliu&quot;</span>, User.class);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¯åŠ¨åº”ç”¨ä¸Šä¸‹æ–‡</span></span><br><span class="line">      ctx.refresh();</span><br><span class="line"></span><br><span class="line">      <span class="type">User</span> <span class="variable">wangwu</span> <span class="operator">=</span> (User) ctx.getBean(<span class="string">&quot;wangwu&quot;</span>);</span><br><span class="line">      System.out.println(<span class="string">&quot;wangwu info: &quot;</span> + wangwu);</span><br><span class="line">      System.out.println(<span class="string">&quot;All beans of User: &quot;</span> + ctx.getBeansOfType(User.class));</span><br><span class="line"></span><br><span class="line">      <span class="comment">//æ˜¾ç¤ºå…³é—­ ApplicationContext</span></span><br><span class="line">      ctx.close();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">registerBeanDefinition</span><span class="params">(BeanDefinitionRegistry registry, String beanName, Class&lt;?&gt; beanClass)</span> &#123;</span><br><span class="line">      <span class="type">BeanDefinitionBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> BeanDefinitionBuilder.genericBeanDefinition(beanClass);</span><br><span class="line">      builder.addPropertyValue(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;èµµå…­&quot;</span>);</span><br><span class="line">      builder.addPropertyValue(<span class="string">&quot;age&quot;</span>, <span class="number">31</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ³¨å†Œ BeanDefinition</span></span><br><span class="line">      registry.registerBeanDefinition(beanName, builder.getBeanDefinition());</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Configuration</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ³¨è§£æ–¹å¼é…ç½®å…ƒä¿¡æ¯</span></span><br><span class="line">      <span class="meta">@Bean(name = &#123; &quot;user&quot;, &quot;wangwu&quot; &#125;)</span></span><br><span class="line">      <span class="keyword">public</span> User <span class="title function_">user</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;ç‹äº”&quot;</span>, <span class="number">21</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="spring-bean-å®ä¾‹åŒ–"><a class="markdownIt-Anchor" href="#spring-bean-å®ä¾‹åŒ–"></a> Spring Bean å®ä¾‹åŒ–</h2><p>Spring Bean å®ä¾‹åŒ–æ–¹å¼ï¼š</p><ul><li>å¸¸è§„æ–¹å¼<ul><li>é€šè¿‡æ„é€ å™¨ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java APIï¼‰</li><li>é€šè¿‡é™æ€å·¥å‚æ–¹æ³•ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java APIï¼‰</li><li>é€šè¿‡ Bean å·¥å‚æ–¹æ³•ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java APIï¼‰</li><li>é€šè¿‡ <code>FactoryBean</code>ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java APIï¼‰</li></ul></li><li>ç‰¹æ®Šæ–¹å¼<ul><li>é€šè¿‡ <code>ServiceLoaderFactoryBean</code>ï¼ˆé…ç½®å…ƒä¿¡æ¯ï¼šXMLã€Java æ³¨è§£å’Œ Java API ï¼‰</li><li>é€šè¿‡ <code>AutowireCapableBeanFactory#createBean(java.lang.Class, int, boolean)</code></li><li>é€šè¿‡ <code>BeanDefinitionRegistry#registerBeanDefinition(String,BeanDefinition)</code></li></ul></li></ul><h2 id="spring-bean-åˆå§‹åŒ–å’Œé”€æ¯"><a class="markdownIt-Anchor" href="#spring-bean-åˆå§‹åŒ–å’Œé”€æ¯"></a> Spring Bean åˆå§‹åŒ–å’Œé”€æ¯</h2><p>Spring Bean åˆå§‹åŒ–å’Œé”€æ¯çš„æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ol><li>ä½¿ç”¨ <code>@PostConstruct</code> å’Œ <code>@PreDestroy</code> æ³¨è§£åˆ†åˆ«æŒ‡å®šç›¸åº”çš„åˆå§‹åŒ–æ–¹æ³•å’Œé”€æ¯æ–¹æ³•ã€‚</li><li>å®ç° <code>InitializingBean</code> æ¥å£çš„ <code>afterPropertiesSet()</code> æ–¹æ³•æ¥ç¼–å†™åˆå§‹åŒ–æ–¹æ³•ï¼›å®ç° <code>DisposableBean</code> æ¥å£çš„ <code>destroy()</code> æ–¹æ³•æ¥ç¼–å†™é”€æ¯æ–¹æ³•ã€‚</li><li>è‡ªå®šä¹‰åˆå§‹åŒ–æ–¹æ³•<ul><li>XML é…ç½®ï¼š<code>&lt;bean init-method=&quot;init&quot; destroy=&quot;destroy&quot; ... /&gt;</code></li><li>Java æ³¨è§£ï¼š<code>@Bean(initMethod = &quot;init&quot;, destroyMethod = &quot;destroy&quot;)</code></li><li>Java APIï¼š<code>AbstractBeanDefinition#setInitMethodName(String)</code> å’Œ <code>AbstractBeanDefinition#setDestroyMethodName(String)</code> åˆ†åˆ«å®šä¹‰åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</li></ul></li></ol><p>æ³¨æ„ï¼šå¦‚æœåŒæ—¶å­˜åœ¨ï¼Œæ‰§è¡Œé¡ºåºä¼šæŒ‰ç…§åºåˆ—æ‰§è¡Œã€‚</p><h3 id="bean-çš„-initmethod-å’Œ-destroymethod"><a class="markdownIt-Anchor" href="#bean-çš„-initmethod-å’Œ-destroymethod"></a> <code>@Bean</code> çš„ initMethod å’Œ destroyMethod</h3><p>ï¼ˆ1ï¼‰å®šä¹‰ Bean å®ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pojo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Pojo</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[Pojo æ„é€ æ–¹æ³•]&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[Pojo åˆå§‹åŒ–æ–¹æ³•]&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[Pojo é”€æ¯æ–¹æ³•]&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰ä½¿ç”¨ <code>@Bean</code> åœ¨é…ç½®ç±»ä¸­æ³¨å†Œ Bean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationBeanDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(initMethod = &quot;init&quot;, destroyMethod = &quot;destroy&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Pojo <span class="title function_">pojo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Pojo</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¯´æ˜ï¼š<code>@Bean</code> æ³¨è§£çš„ <code>initMethod</code> å’Œ <code>destroyMethod</code> å±æ€§åˆ†åˆ«ç”¨äºæŒ‡å®š Bean å¯¹åº”çš„åˆå§‹åŒ–æ–¹æ³•å’Œé”€æ¯æ–¹æ³•ã€‚</p></blockquote><p>ï¼ˆ3ï¼‰æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(AnnotationBeanDemo.class);</span><br><span class="line">    System.out.println(<span class="string">&quot;AnnotationBeanDemo ç¤ºä¾‹ç»“æŸ&quot;</span>);</span><br><span class="line">    context.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[Pojo æ„é€ æ–¹æ³•]</span><br><span class="line">[Pojo åˆå§‹åŒ–æ–¹æ³•]</span><br><span class="line">AnnotationBeanDemo ç¤ºä¾‹ç»“æŸ</span><br><span class="line">[Pojo é”€æ¯æ–¹æ³•]</span><br></pre></td></tr></table></figure><h3 id="initializingbean-å’Œ-disposablebean"><a class="markdownIt-Anchor" href="#initializingbean-å’Œ-disposablebean"></a> <code>InitializingBean</code> å’Œ <code>DisposableBean</code></h3><ul><li><code>InitializingBean</code> æ¥å£åŒ…å«ä¸€ä¸ª <code>afterPropertiesSet</code> æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡å®ç°è¯¥æ¥å£ï¼Œç„¶ååœ¨è¿™ä¸ªæ–¹æ³•ä¸­ç¼–å†™åˆå§‹åŒ–é€»è¾‘ã€‚</li><li><code>DisposableBean</code>æ¥å£åŒ…å«ä¸€ä¸ª <code>destory</code> æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡å®ç°è¯¥æ¥å£ï¼Œç„¶ååœ¨è¿™ä¸ªæ–¹æ³•ä¸­ç¼–å†™é”€æ¯é€»è¾‘ã€‚</li></ul><p>ï¼ˆ1ï¼‰å®šä¹‰ Bean å®ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Pojo2</span> <span class="keyword">implements</span> <span class="title class_">InitializingBean</span>, DisposableBean &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Pojo2</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[Pojo2 æ„é€ æ–¹æ³•]&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterPropertiesSet</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[Pojo2 åˆå§‹åŒ–æ–¹æ³•]&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[Pojo2 é”€æ¯æ–¹æ³•]&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰ä½¿ç”¨ <code>@Bean</code> åœ¨é…ç½®ç±»ä¸­æ³¨å†Œ Bean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationBeanDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Pojo2 <span class="title function_">pojo2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Pojo2</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(AnnotationBeanDemo.class);</span><br><span class="line">    System.out.println(<span class="string">&quot;AnnotationBeanDemo ç¤ºä¾‹ç»“æŸ&quot;</span>);</span><br><span class="line">    context.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[Pojo2 æ„é€ æ–¹æ³•]</span><br><span class="line">[Pojo2 åˆå§‹åŒ–æ–¹æ³•]</span><br><span class="line">AnnotationBeanDemo ç¤ºä¾‹ç»“æŸ</span><br><span class="line">[Pojo2 é”€æ¯æ–¹æ³•]</span><br></pre></td></tr></table></figure><h3 id="postconstruct-å’Œ-predestroy"><a class="markdownIt-Anchor" href="#postconstruct-å’Œ-predestroy"></a> <code>@PostConstruct</code> å’Œ <code>@PreDestroy</code></h3><p>å¯ä»¥ä½¿ç”¨ <code>@PostConstruct</code> å’Œ <code>@PreDestroy</code> æ³¨è§£ä¿®é¥°æ–¹æ³•æ¥æŒ‡å®šç›¸åº”çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•ã€‚</p><h3 id="beanpostprocessor"><a class="markdownIt-Anchor" href="#beanpostprocessor"></a> <code>BeanPostProcessor</code></h3><p>Spring æä¾›äº†ä¸€ä¸ª <code>BeanPostProcessor</code> æ¥å£ï¼Œæä¾›äº†ä¸¤ä¸ªæ–¹æ³• <code>postProcessBeforeInitialization</code> å’Œ <code>postProcessAfterInitialization</code>ã€‚å…¶ä¸­<code>postProcessBeforeInitialization</code> åœ¨ç»„ä»¶çš„åˆå§‹åŒ–æ–¹æ³•è°ƒç”¨ä¹‹å‰æ‰§è¡Œï¼Œ<code>postProcessAfterInitialization</code> åœ¨ç»„ä»¶çš„åˆå§‹åŒ–æ–¹æ³•è°ƒç”¨ä¹‹åæ‰§è¡Œã€‚å®ƒä»¬éƒ½åŒ…å«ä¸¤ä¸ªå…¥å‚ï¼š</p><ol><li>beanï¼šå½“å‰ç»„ä»¶å¯¹è±¡ï¼›</li><li>beanNameï¼šå½“å‰ç»„ä»¶åœ¨å®¹å™¨ä¸­çš„åç§°ã€‚</li></ol><p>ï¼ˆ1ï¼‰å®šä¹‰ Pojoï¼Œå¦‚ä¸Šé¢çš„ä¾‹å­</p><p>ï¼ˆ2ï¼‰å®šä¹‰ <code>BeanPostProcessor</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBeanPostProcessor</span> <span class="keyword">implements</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyBeanPostProcessor</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[BeanPostProcessor] construct&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[BeanPostProcessor] postProcessBeforeInitialization&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[BeanPostProcessor] postProcessAfterInitialization&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰ä½¿ç”¨ <code>@Bean</code> åœ¨é…ç½®ç±»ä¸­æ³¨å†Œ Bean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Pojo <span class="title function_">pojo</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Pojo</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> MyBeanPostProcessor <span class="title function_">myBeanPostProcessor</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyBeanPostProcessor</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(MyBeanPostProcessorDemo.class);</span><br><span class="line">    System.out.println(<span class="string">&quot;BeanPostProcessorDemo ç¤ºä¾‹ç»“æŸ&quot;</span>);</span><br><span class="line">    context.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[BeanPostProcessor] construct</span><br><span class="line">[Pojo æ„é€ æ–¹æ³•]</span><br><span class="line">[BeanPostProcessor] postProcessBeforeInitialization</span><br><span class="line">[Pojo åˆå§‹åŒ–æ–¹æ³•]</span><br><span class="line">[BeanPostProcessor] postProcessAfterInitialization</span><br><span class="line">BeanPostProcessorDemo ç¤ºä¾‹ç»“æŸ</span><br><span class="line">[Pojo é”€æ¯æ–¹æ³•]</span><br></pre></td></tr></table></figure><h2 id="spring-bean-åƒåœ¾å›æ”¶"><a class="markdownIt-Anchor" href="#spring-bean-åƒåœ¾å›æ”¶"></a> Spring Bean åƒåœ¾å›æ”¶</h2><p>Spring Bean åƒåœ¾å›æ”¶æ­¥éª¤ï¼š</p><ol><li>å…³é—­ Spring å®¹å™¨ï¼ˆåº”ç”¨ä¸Šä¸‹æ–‡ï¼‰</li><li>æ‰§è¡Œ GC</li><li>Spring Bean è¦†ç›–çš„ finalize() æ–¹æ³•è¢«å›è°ƒ</li></ol><h2 id="å‚è€ƒèµ„æ–™"><a class="markdownIt-Anchor" href="#å‚è€ƒèµ„æ–™"></a> å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#beans">Spring å®˜æ–¹æ–‡æ¡£ä¹‹ Core Technologies</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
          <category> SpringBeanç”Ÿå‘½å‘¨æœŸ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBeanç”Ÿå‘½å‘¨æœŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring-ä¾èµ–æ³¨å…¥IOC</title>
      <link href="/posts/841c624e/"/>
      <url>/posts/841c624e/</url>
      
        <content type="html"><![CDATA[<h2 id="ioc-æ¦‚å¿µç®€ä»‹"><a class="markdownIt-Anchor" href="#ioc-æ¦‚å¿µç®€ä»‹"></a> IoC æ¦‚å¿µç®€ä»‹</h2><h3 id="ioc-æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#ioc-æ˜¯ä»€ä¹ˆ"></a> IoC æ˜¯ä»€ä¹ˆ</h3><blockquote><p><strong>IoCï¼Œæ˜¯ Inversion of Control çš„ç¼©å†™ï¼Œå³æ§åˆ¶åè½¬ã€‚</strong></p><ul><li>ä¸Šå±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºä¸‹å±‚æ¨¡å—ï¼Œå®ƒä»¬å…±åŒä¾èµ–äºä¸€ä¸ªæŠ½è±¡</li><li>æŠ½è±¡ä¸èƒ½ä¾èµ–äºå…·ä½“å®ç°ï¼Œå…·ä½“å®ç°ä¾èµ–äºæŠ½è±¡</li></ul><p><em>æ³¨ï¼šåˆç§°ä¸ºä¾èµ–å€’ç½®åŸåˆ™ã€‚è¿™æ˜¯è®¾è®¡æ¨¡å¼å…­å¤§åŸåˆ™ä¹‹ä¸€ã€‚</em></p></blockquote><p>IoC ä¸æ˜¯ä»€ä¹ˆæŠ€æœ¯ï¼Œè€Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ã€‚åœ¨ Java å¼€å‘ä¸­ï¼ŒIoC æ„å‘³ç€å°†ä½ è®¾è®¡å¥½çš„å¯¹è±¡äº¤ç»™å®¹å™¨æ§åˆ¶ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„åœ¨ä½ çš„å¯¹è±¡å†…éƒ¨ç›´æ¥æ§åˆ¶ã€‚å¦‚ä½•ç†è§£ Ioc å‘¢ï¼Ÿç†è§£ Ioc çš„å…³é”®æ˜¯è¦æ˜ç¡®â€œè°æ§åˆ¶è°ï¼Œæ§åˆ¶ä»€ä¹ˆï¼Œä¸ºä½•æ˜¯åè½¬ï¼ˆæœ‰åè½¬å°±åº”è¯¥æœ‰æ­£è½¬äº†ï¼‰ï¼Œå“ªäº›æ–¹é¢åè½¬äº†â€ï¼Œé‚£æˆ‘ä»¬æ¥æ·±å…¥åˆ†æä¸€ä¸‹ï¼š</p><ul><li>**è°æ§åˆ¶è°ï¼Œæ§åˆ¶ä»€ä¹ˆï¼š**ä¼ ç»Ÿ JavaSE ç¨‹åºè®¾è®¡ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨å¯¹è±¡å†…éƒ¨é€šè¿‡ new è¿›è¡Œåˆ›å»ºå¯¹è±¡ï¼Œæ˜¯ç¨‹åºä¸»åŠ¨å»åˆ›å»ºä¾èµ–å¯¹è±¡ï¼›è€Œ IoC æ˜¯æœ‰ä¸“é—¨ä¸€ä¸ªå®¹å™¨æ¥åˆ›å»ºè¿™äº›å¯¹è±¡ï¼Œå³ç”± IoC å®¹å™¨æ¥æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºï¼›è°æ§åˆ¶è°ï¼Ÿå½“ç„¶æ˜¯ IoC å®¹å™¨æ§åˆ¶äº†å¯¹è±¡ï¼›æ§åˆ¶ä»€ä¹ˆï¼Ÿé‚£å°±æ˜¯ä¸»è¦æ§åˆ¶äº†å¤–éƒ¨èµ„æºè·å–ï¼ˆä¸åªæ˜¯å¯¹è±¡åŒ…æ‹¬æ¯”å¦‚æ–‡ä»¶ç­‰ï¼‰ã€‚</li><li>**ä¸ºä½•æ˜¯åè½¬ï¼Œå“ªäº›æ–¹é¢åè½¬äº†ï¼š**æœ‰åè½¬å°±æœ‰æ­£è½¬ï¼Œä¼ ç»Ÿåº”ç”¨ç¨‹åºæ˜¯ç”±æˆ‘ä»¬è‡ªå·±åœ¨å¯¹è±¡ä¸­ä¸»åŠ¨æ§åˆ¶å»ç›´æ¥è·å–ä¾èµ–å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ­£è½¬ï¼›è€Œåè½¬åˆ™æ˜¯ç”±å®¹å™¨æ¥å¸®å¿™åˆ›å»ºåŠæ³¨å…¥ä¾èµ–å¯¹è±¡ï¼›ä¸ºä½•æ˜¯åè½¬ï¼Ÿå› ä¸ºç”±å®¹å™¨å¸®æˆ‘ä»¬æŸ¥æ‰¾åŠæ³¨å…¥ä¾èµ–å¯¹è±¡ï¼Œå¯¹è±¡åªæ˜¯è¢«åŠ¨çš„æ¥å—ä¾èµ–å¯¹è±¡ï¼Œæ‰€ä»¥æ˜¯åè½¬ï¼›å“ªäº›æ–¹é¢åè½¬äº†ï¼Ÿä¾èµ–å¯¹è±¡çš„è·å–è¢«åè½¬äº†ã€‚</li></ul><h3 id="ioc-èƒ½åšä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#ioc-èƒ½åšä»€ä¹ˆ"></a> IoC èƒ½åšä»€ä¹ˆ</h3><p>IoC ä¸æ˜¯ä¸€ç§æŠ€æœ¯ï¼Œåªæ˜¯ä¸€ç§æ€æƒ³ï¼Œä¸€ä¸ªé‡è¦çš„é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ³•åˆ™ï¼Œå®ƒèƒ½æŒ‡å¯¼æˆ‘ä»¬å¦‚ä½•è®¾è®¡å‡ºæ¾è€¦åˆã€æ›´ä¼˜è‰¯çš„ç¨‹åºã€‚ä¼ ç»Ÿåº”ç”¨ç¨‹åºéƒ½æ˜¯ç”±æˆ‘ä»¬åœ¨ç±»å†…éƒ¨ä¸»åŠ¨åˆ›å»ºä¾èµ–å¯¹è±¡ï¼Œä»è€Œå¯¼è‡´ç±»ä¸ç±»ä¹‹é—´é«˜è€¦åˆï¼Œéš¾äºæµ‹è¯•ï¼›æœ‰äº† IoC å®¹å™¨åï¼ŒæŠŠåˆ›å»ºå’ŒæŸ¥æ‰¾ä¾èµ–å¯¹è±¡çš„æ§åˆ¶æƒäº¤ç»™äº†å®¹å™¨ï¼Œç”±å®¹å™¨è¿›è¡Œæ³¨å…¥ç»„åˆå¯¹è±¡ï¼Œæ‰€ä»¥å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´æ˜¯æ¾æ•£è€¦åˆï¼Œè¿™æ ·ä¹Ÿæ–¹ä¾¿æµ‹è¯•ï¼Œåˆ©äºåŠŸèƒ½å¤ç”¨ï¼Œæ›´é‡è¦çš„æ˜¯ä½¿å¾—ç¨‹åºçš„æ•´ä¸ªä½“ç³»ç»“æ„å˜å¾—éå¸¸çµæ´»ã€‚</p><p>å…¶å® IoC å¯¹ç¼–ç¨‹å¸¦æ¥çš„æœ€å¤§æ”¹å˜ä¸æ˜¯ä»ä»£ç ä¸Šï¼Œè€Œæ˜¯ä»æ€æƒ³ä¸Šï¼Œå‘ç”Ÿäº†â€œä¸»ä»æ¢ä½â€çš„å˜åŒ–ã€‚åº”ç”¨ç¨‹åºåŸæœ¬æ˜¯è€å¤§ï¼Œè¦è·å–ä»€ä¹ˆèµ„æºéƒ½æ˜¯ä¸»åŠ¨å‡ºå‡»ï¼Œä½†æ˜¯åœ¨ IoC/DI æ€æƒ³ä¸­ï¼Œåº”ç”¨ç¨‹åºå°±å˜æˆè¢«åŠ¨çš„äº†ï¼Œè¢«åŠ¨çš„ç­‰å¾… IoC å®¹å™¨æ¥åˆ›å»ºå¹¶æ³¨å…¥å®ƒæ‰€éœ€è¦çš„èµ„æºäº†ã€‚</p><p>IoC å¾ˆå¥½çš„ä½“ç°äº†é¢å‘å¯¹è±¡è®¾è®¡æ³•åˆ™ä¹‹ä¸€â€”â€” <strong>å¥½è±åæ³•åˆ™ï¼šâ€œåˆ«æ‰¾æˆ‘ä»¬ï¼Œæˆ‘ä»¬æ‰¾ä½ â€</strong>ï¼›å³ç”± IoC å®¹å™¨å¸®å¯¹è±¡æ‰¾ç›¸åº”çš„ä¾èµ–å¯¹è±¡å¹¶æ³¨å…¥ï¼Œè€Œä¸æ˜¯ç”±å¯¹è±¡ä¸»åŠ¨å»æ‰¾ã€‚</p><h3 id="ioc-å’Œ-di"><a class="markdownIt-Anchor" href="#ioc-å’Œ-di"></a> IoC å’Œ DI</h3><p>å…¶å®å®ƒä»¬æ˜¯åŒä¸€ä¸ªæ¦‚å¿µçš„ä¸åŒè§’åº¦æè¿°ï¼Œç”±äºæ§åˆ¶åè½¬æ¦‚å¿µæ¯”è¾ƒå«ç³Šï¼ˆå¯èƒ½åªæ˜¯ç†è§£ä¸ºå®¹å™¨æ§åˆ¶å¯¹è±¡è¿™ä¸€ä¸ªå±‚é¢ï¼Œå¾ˆéš¾è®©äººæƒ³åˆ°è°æ¥ç»´æŠ¤å¯¹è±¡å…³ç³»ï¼‰ï¼Œæ‰€ä»¥ 2004 å¹´å¤§å¸ˆçº§äººç‰© Martin Fowler åˆç»™å‡ºäº†ä¸€ä¸ªæ–°çš„åå­—ï¼šâ€œä¾èµ–æ³¨å…¥â€ï¼Œç›¸å¯¹ IoC è€Œè¨€ï¼Œâ€œä¾èµ–æ³¨å…¥â€æ˜ç¡®æè¿°äº†â€œè¢«æ³¨å…¥å¯¹è±¡ä¾èµ– IoC å®¹å™¨é…ç½®ä¾èµ–å¯¹è±¡â€ã€‚</p><blockquote><p>æ³¨ï¼šå¦‚æœæƒ³è¦æ›´åŠ æ·±å…¥çš„äº†è§£ IoC å’Œ DIï¼Œè¯·å‚è€ƒå¤§å¸ˆçº§äººç‰© Martin Fowler çš„ä¸€ç¯‡ç»å…¸æ–‡ç«  <a href="http://www.martinfowler.com/articles/injection.html">Inversion of Control Containers and the Dependency Injection pattern (opens new window)</a>ã€‚</p></blockquote><h3 id="ioc-å®¹å™¨"><a class="markdownIt-Anchor" href="#ioc-å®¹å™¨"></a> IoC å®¹å™¨</h3><p>IoC å®¹å™¨å°±æ˜¯å…·æœ‰ä¾èµ–æ³¨å…¥åŠŸèƒ½çš„å®¹å™¨ã€‚IoC å®¹å™¨è´Ÿè´£å®ä¾‹åŒ–ã€å®šä½ã€é…ç½®åº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡åŠå»ºç«‹è¿™äº›å¯¹è±¡é—´çš„ä¾èµ–ã€‚åº”ç”¨ç¨‹åºæ— éœ€ç›´æ¥åœ¨ä»£ç ä¸­ new ç›¸å…³çš„å¯¹è±¡ï¼Œåº”ç”¨ç¨‹åºç”± IoC å®¹å™¨è¿›è¡Œç»„è£…ã€‚åœ¨ Spring ä¸­ BeanFactory æ˜¯ IoC å®¹å™¨çš„å®é™…ä»£è¡¨è€…ã€‚</p><p>Spring IoC å®¹å™¨å¦‚ä½•çŸ¥é“å“ªäº›æ˜¯å®ƒç®¡ç†çš„å¯¹è±¡å‘¢ï¼Ÿè¿™å°±éœ€è¦é…ç½®æ–‡ä»¶ï¼ŒSpring IoC å®¹å™¨é€šè¿‡è¯»å–é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®å…ƒæ•°æ®ï¼Œé€šè¿‡å…ƒæ•°æ®å¯¹åº”ç”¨ä¸­çš„å„ä¸ªå¯¹è±¡è¿›è¡Œå®ä¾‹åŒ–åŠè£…é…ã€‚ä¸€èˆ¬ä½¿ç”¨åŸºäº xml é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®å…ƒæ•°æ®ï¼Œè€Œä¸” Spring ä¸é…ç½®æ–‡ä»¶å®Œå…¨è§£è€¦çš„ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»–ä»»ä½•å¯èƒ½çš„æ–¹å¼è¿›è¡Œé…ç½®å…ƒæ•°æ®ï¼Œæ¯”å¦‚æ³¨è§£ã€åŸºäº java æ–‡ä»¶çš„ã€åŸºäºå±æ€§æ–‡ä»¶çš„é…ç½®éƒ½å¯ä»¥ã€‚</p><p>é‚£ Spring IoC å®¹å™¨ç®¡ç†çš„å¯¹è±¡å«ä»€ä¹ˆå‘¢ï¼Ÿ</p><h3 id="bean"><a class="markdownIt-Anchor" href="#bean"></a> Bean</h3><blockquote><p><strong>JavaBean</strong> æ˜¯ä¸€ç§ JAVA è¯­è¨€å†™æˆçš„å¯é‡ç”¨ç»„ä»¶ã€‚ä¸ºå†™æˆ JavaBeanï¼Œç±»å¿…é¡»æ˜¯å…·ä½“çš„å’Œå…¬å…±çš„ï¼Œå¹¶ä¸”å…·æœ‰æ— å‚æ•°çš„æ„é€ å™¨ã€‚JavaBean å¯¹å¤–éƒ¨é€šè¿‡æä¾› getter / setter æ–¹æ³•æ¥è®¿é—®å…¶æˆå‘˜ã€‚</p></blockquote><p>ç”± IoC å®¹å™¨ç®¡ç†çš„é‚£äº›ç»„æˆä½ åº”ç”¨ç¨‹åºçš„å¯¹è±¡æˆ‘ä»¬å°±å«å®ƒ Beanã€‚Bean å°±æ˜¯ç”± Spring å®¹å™¨åˆå§‹åŒ–ã€è£…é…åŠç®¡ç†çš„å¯¹è±¡ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œbean å°±ä¸åº”ç”¨ç¨‹åºä¸­çš„å…¶ä»–å¯¹è±¡æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«äº†ã€‚é‚£ IoC æ€æ ·ç¡®å®šå¦‚ä½•å®ä¾‹åŒ– Beanã€ç®¡ç† Bean ä¹‹é—´çš„ä¾èµ–å…³ç³»ä»¥åŠç®¡ç† Bean å‘¢ï¼Ÿè¿™å°±éœ€è¦é…ç½®å…ƒæ•°æ®ï¼Œåœ¨ Spring ä¸­ç”± BeanDefinition ä»£è¡¨ï¼Œåè¾¹ä¼šè¯¦ç»†ä»‹ç»ï¼Œé…ç½®å…ƒæ•°æ®æŒ‡å®šå¦‚ä½•å®ä¾‹åŒ– Beanã€å¦‚ä½•ç»„è£… Bean ç­‰ã€‚</p><h2 id="spring-ioc"><a class="markdownIt-Anchor" href="#spring-ioc"></a> Spring IoC</h2><h3 id="æ ¸å¿ƒæ¥å£"><a class="markdownIt-Anchor" href="#æ ¸å¿ƒæ¥å£"></a> æ ¸å¿ƒæ¥å£</h3><p><code>org.springframework.beans</code> å’Œ <code>org.springframework.context</code> æ˜¯ IoC å®¹å™¨çš„åŸºç¡€ã€‚</p><p>åœ¨ Spring ä¸­ï¼Œæœ‰ä¸¤ç§ IoC å®¹å™¨ï¼š<code>BeanFactory</code> å’Œ <code>ApplicationContext</code>ã€‚</p><ul><li><code>BeanFactory</code>ï¼šBeanFactory æä¾›äº† Spring å®¹å™¨çš„é…ç½®æ¡†æ¶å’ŒåŸºæœ¬åŠŸèƒ½ã€‚</li><li><code>ApplicationContext</code>ï¼šBeanFactory çš„å­æ¥å£ã€‚å®ƒè¿˜æ‰©å±•äº†å…¶ä»–ä¸€äº›æ¥å£ï¼Œä»¥æ”¯æŒæ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼Œå¦‚ï¼šå›½é™…åŒ–ã€è®¿é—®èµ„æºã€äº‹ä»¶æœºåˆ¶ã€æ›´æ–¹ä¾¿çš„æ”¯æŒ AOPã€åœ¨ web åº”ç”¨ä¸­æŒ‡å®šåº”ç”¨å±‚ä¸Šä¸‹æ–‡ç­‰ã€‚</li></ul><p>å®é™…å¼€å‘ä¸­ï¼Œæ›´æ¨èä½¿ç”¨ <code>ApplicationContext</code> ä½œä¸º IoC å®¹å™¨ï¼Œå› ä¸ºå®ƒçš„åŠŸèƒ½è¿œå¤šäº <code>FactoryBean</code>ã€‚</p><p>å¸¸è§ <code>ApplicationContext</code> å®ç°ï¼š</p><ul><li><strong>ClassPathXmlApplicationContext</strong>ï¼š<code>ApplicationContext</code> çš„å®ç°ï¼Œä» classpath è·å–é…ç½®æ–‡ä»¶ï¼›</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BeanFactory</span> <span class="variable">beanFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;classpath.xml&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li><strong>FileSystemXmlApplicationContext</strong>ï¼š<code>ApplicationContext</code> çš„å®ç°ï¼Œä»æ–‡ä»¶ç³»ç»Ÿè·å–é…ç½®æ–‡ä»¶ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BeanFactory</span> <span class="variable">beanFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileSystemXmlApplicationContext</span>(<span class="string">&quot;fileSystemConfig.xml&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="ioc-å®¹å™¨å·¥ä½œæ­¥éª¤"><a class="markdownIt-Anchor" href="#ioc-å®¹å™¨å·¥ä½œæ­¥éª¤"></a> IoC å®¹å™¨å·¥ä½œæ­¥éª¤</h3><p>ä½¿ç”¨ IoC å®¹å™¨å¯åˆ†ä¸ºä¸‰æ­¥éª¤ï¼š</p><ol><li><strong>é…ç½®å…ƒæ•°æ®</strong>ï¼šéœ€è¦é…ç½®ä¸€äº›å…ƒæ•°æ®æ¥å‘Šè¯‰ Springï¼Œä½ å¸Œæœ›å®¹å™¨å¦‚ä½•å·¥ä½œï¼Œå…·ä½“æ¥è¯´ï¼Œå°±æ˜¯å¦‚ä½•å»åˆå§‹åŒ–ã€é…ç½®ã€ç®¡ç† JavaBean å¯¹è±¡ã€‚</li><li><strong>å®ä¾‹åŒ–å®¹å™¨</strong>ï¼šç”± IoC å®¹å™¨è§£æé…ç½®çš„å…ƒæ•°æ®ã€‚IoC å®¹å™¨çš„ Bean Reader è¯»å–å¹¶è§£æé…ç½®æ–‡ä»¶ï¼Œæ ¹æ®å®šä¹‰ç”Ÿæˆ BeanDefinition é…ç½®å…ƒæ•°æ®å¯¹è±¡ï¼ŒIoC å®¹å™¨æ ¹æ® <code>BeanDefinition</code> è¿›è¡Œå®ä¾‹åŒ–ã€é…ç½®åŠç»„è£… Beanã€‚</li><li><strong>ä½¿ç”¨å®¹å™¨</strong>ï¼šç”±å®¢æˆ·ç«¯å®ä¾‹åŒ–å®¹å™¨ï¼Œè·å–éœ€è¦çš„ Bean</li></ol><h3 id="é…ç½®å…ƒæ•°æ®"><a class="markdownIt-Anchor" href="#é…ç½®å…ƒæ•°æ®"></a> é…ç½®å…ƒæ•°æ®</h3><p>**å…ƒæ•°æ®ï¼ˆMetadataï¼‰**åˆç§°ä¸­ä»‹æ•°æ®ã€ä¸­ç»§æ•°æ®ï¼Œä¸ºæè¿°æ•°æ®çš„æ•°æ®ï¼ˆdata about dataï¼‰ï¼Œä¸»è¦æ˜¯æè¿°æ•°æ®å±æ€§ï¼ˆpropertyï¼‰çš„ä¿¡æ¯ã€‚</p><p>é…ç½®å…ƒæ•°æ®çš„æ–¹å¼ï¼š</p><ul><li><p><strong>åŸºäº xml é…ç½®</strong>ï¼šSpring çš„ä¼ ç»Ÿé…ç½®æ–¹å¼ã€‚åœ¨ <code>&lt;beans&gt;</code> æ ‡ç­¾ä¸­é…ç½®å…ƒæ•°æ®å†…å®¹ã€‚</p><p>ç¼ºç‚¹æ˜¯å½“ JavaBean è¿‡å¤šæ—¶ï¼Œäº§ç”Ÿçš„é…ç½®æ–‡ä»¶è¶³ä»¥è®©ä½ çœ¼èŠ±ç¼­ä¹±ã€‚</p></li><li><p><strong>åŸºäºæ³¨è§£é…ç½®</strong>ï¼šSpring2.5 å¼•å…¥ã€‚å¯ä»¥å¤§å¤§ç®€åŒ–ä½ çš„é…ç½®ã€‚</p></li><li><p><strong>åŸºäº Java é…ç½®</strong>ï¼šå¯ä»¥ä½¿ç”¨ Java ç±»æ¥å®šä¹‰ JavaBean ã€‚</p><p>ä¸ºäº†ä½¿ç”¨è¿™ä¸ªæ–°ç‰¹æ€§ï¼Œéœ€è¦ç”¨åˆ° <code>@Configuration</code> ã€<code>@Bean</code> ã€<code>@Import</code> å’Œ <code>@DependsOn</code> æ³¨è§£</p></li></ul><h3 id="spring-bean-æ¦‚è¿°"><a class="markdownIt-Anchor" href="#spring-bean-æ¦‚è¿°"></a> Spring Bean æ¦‚è¿°</h3><p>ä¸€ä¸ª Spring å®¹å™¨ç®¡ç†ä¸€ä¸ªæˆ–å¤šä¸ª beanã€‚è¿™äº› bean æ ¹æ®ä½ é…ç½®çš„å…ƒæ•°æ®ï¼ˆæ¯”å¦‚ xml å½¢å¼ï¼‰æ¥åˆ›å»ºã€‚</p><p>Spring IoC å®¹å™¨æœ¬èº«ï¼Œå¹¶ä¸èƒ½è¯†åˆ«ä½ é…ç½®çš„å…ƒæ•°æ®ã€‚ä¸ºæ­¤ï¼Œè¦å°†è¿™äº›é…ç½®ä¿¡æ¯è½¬ä¸º Spring èƒ½è¯†åˆ«çš„æ ¼å¼â€”â€”<code>BeanDefinition</code> å¯¹è±¡ã€‚</p><ul><li><p><strong>å‘½å Bean</strong></p><ul><li>æŒ‡å®š id å’Œ name å±æ€§ä¸æ˜¯å¿…é¡»çš„ã€‚Spring ä¸­ï¼Œå¹¶éä¸€å®šè¦æŒ‡å®š id å’Œ name å±æ€§ã€‚å®é™…ä¸Šï¼ŒSpring ä¼šè‡ªåŠ¨ä¸ºå…¶åˆ†é…ä¸€ä¸ªç‰¹æ®Šåã€‚å¦‚æœä½ éœ€è¦å¼•ç”¨å£°æ˜çš„ beanï¼Œè¿™æ—¶ä½ æ‰éœ€è¦ä¸€ä¸ªæ ‡è¯†ã€‚å®˜æ–¹æ¨èé©¼å³°å‘½åæ³•æ¥å‘½åã€‚</li></ul></li><li><p><strong>æ”¯æŒåˆ«å</strong></p><ul><li><p>å¯èƒ½å­˜åœ¨è¿™æ ·çš„åœºæ™¯ï¼Œä¸åŒç³»ç»Ÿä¸­å¯¹äºåŒä¸€ bean çš„å‘½åæ–¹å¼ä¸ä¸€æ ·ã€‚ ä¸ºäº†é€‚é…ï¼ŒSpring æ”¯æŒ <code>&lt;alias&gt;</code> ä¸º bean æ·»åŠ åˆ«åçš„åŠŸèƒ½ã€‚</p></li><li><pre class="highlight"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">alias</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"subsystemA-dataSource"</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">"subsystemB-dataSource"</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">alias</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"subsystemA-dataSource"</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">"myApp-dataSource"</span> /&gt;</span><span class="hljs-comment"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- **å®ä¾‹åŒ– Bean**</span><br><span class="line"></span><br><span class="line">  - æ„é€ å™¨æ–¹å¼</span><br><span class="line"></span><br><span class="line">  - ```xml</span><br><span class="line">    &lt;bean id=&quot;exampleBean&quot; class=&quot;examples.ExampleBean&quot;/&gt;</span><br></pre></td></tr></table></figure></span></code></pre></li></ul></li></ul><h3 id="ä¾èµ–æ³¨å…¥æ¨¡å¼"><a class="markdownIt-Anchor" href="#ä¾èµ–æ³¨å…¥æ¨¡å¼"></a> ä¾èµ–æ³¨å…¥æ¨¡å¼</h3><p>ä¾èµ–æ³¨å…¥æ¨¡å¼å¯ä»¥åˆ†ä¸ºæ‰‹åŠ¨æ¨¡å¼å’Œè‡ªåŠ¨æ¨¡å¼ã€‚</p><h4 id="æ‰‹åŠ¨æ³¨å…¥"><a class="markdownIt-Anchor" href="#æ‰‹åŠ¨æ³¨å…¥"></a> æ‰‹åŠ¨æ³¨å…¥</h4><p>é…ç½®æˆ–è€…ç¼–ç¨‹çš„æ–¹å¼ï¼Œæå‰å®‰æ’æ³¨å…¥è§„åˆ™</p><ul><li>XML èµ„æºé…ç½®å…ƒä¿¡æ¯</li><li>Java æ³¨è§£é…ç½®å…ƒä¿¡æ¯</li><li>API é…ç½®å…ƒä¿¡æ¯</li></ul><h4 id="è‡ªåŠ¨æ³¨å…¥"><a class="markdownIt-Anchor" href="#è‡ªåŠ¨æ³¨å…¥"></a> è‡ªåŠ¨æ³¨å…¥</h4><p>å®ç°æ–¹æä¾›ä¾èµ–è‡ªåŠ¨å…³è”çš„æ–¹å¼ï¼ŒæŒ‰ç…§å…§å»ºçš„æ³¨å…¥è§„åˆ™ï¼ˆå®˜æ–¹ä¸æ¨èï¼‰</p><ul><li>Autowiringï¼ˆè‡ªåŠ¨ç»‘å®šï¼‰</li></ul><table><thead><tr><th>æ¨¡å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>no</td><td>é»˜è®¤å€¼ï¼Œæœªæ¿€æ´» Autowiringï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šä¾èµ–æ³¨å…¥å¯¹è±¡ã€‚</td></tr><tr><td>byName</td><td>æ ¹æ®è¢«æ³¨å…¥å±æ€§çš„åç§°ä½œä¸º Bean åç§°è¿›è¡Œä¾èµ–æŸ¥æ‰¾ï¼Œå¹¶å°†å¯¹è±¡è®¾ç½®åˆ°è¯¥å±æ€§ã€‚</td></tr><tr><td>byType</td><td>æ ¹æ®è¢«æ³¨å…¥å±æ€§çš„ç±»å‹ä½œä¸ºä¾èµ–ç±»å‹è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¹¶å°†å¯¹è±¡è®¾ç½®åˆ°è¯¥å±æ€§ã€‚</td></tr><tr><td>constructor</td><td>ç‰¹æ®Š byType ç±»å‹ï¼Œç”¨äºæ„é€ å™¨å‚æ•°ã€‚</td></tr></tbody></table><blockquote><p>é™åˆ¶å’Œä¸è¶³å‚è€ƒï¼š<a href="https://docs.spring.io/spring/docs/5.2.2.RELEASE/spring-frameworkreference/core.html#beans-autowired-exceptions">Limitations and Disadvantages of Autowiring å°èŠ‚(opens new window)</a></p></blockquote><h4 id="ä¾èµ–æ³¨å…¥ç±»å‹"><a class="markdownIt-Anchor" href="#ä¾èµ–æ³¨å…¥ç±»å‹"></a> ä¾èµ–æ³¨å…¥ç±»å‹</h4><table><thead><tr><th>ä¾èµ–æ³¨å…¥ç±»å‹</th><th>é…ç½®å…ƒæ•°æ®ä¸¾ä¾‹</th></tr></thead><tbody><tr><td>Setter æ–¹æ³•</td><td><code>&lt;proeprty name=&quot;user&quot; ref=&quot;userBean&quot;/&gt;</code></td></tr><tr><td>æ„é€ å™¨</td><td><code>&lt;constructor-arg name=&quot;user&quot; ref=&quot;userBean&quot; /&gt;</code></td></tr><tr><td>å­—æ®µ</td><td><code>@Autowired User user;</code></td></tr><tr><td>æ–¹æ³•</td><td><code>@Autowired public void user(User user) &#123; ... &#125;</code></td></tr><tr><td>æ¥å£å›è°ƒ</td><td><code>class MyBean implements BeanFactoryAware &#123; ... &#125;</code></td></tr></tbody></table><h4 id="setter-æ–¹æ³•æ³¨å…¥"><a class="markdownIt-Anchor" href="#setter-æ–¹æ³•æ³¨å…¥"></a> Setter æ–¹æ³•æ³¨å…¥</h4><p>æ‰‹åŠ¨æ¨¡å¼</p><ul><li>XML èµ„æºé…ç½®å…ƒä¿¡æ¯</li><li>Java æ³¨è§£é…ç½®å…ƒä¿¡æ¯</li><li>API é…ç½®å…ƒä¿¡æ¯</li></ul><p>è‡ªåŠ¨æ¨¡å¼</p><ul><li>byName</li><li>byType</li></ul><h4 id="æ„é€ å™¨æ³¨å…¥"><a class="markdownIt-Anchor" href="#æ„é€ å™¨æ³¨å…¥"></a> æ„é€ å™¨æ³¨å…¥</h4><p>æ‰‹åŠ¨æ¨¡å¼</p><ul><li>XML èµ„æºé…ç½®å…ƒä¿¡æ¯</li><li>Java æ³¨è§£é…ç½®å…ƒä¿¡æ¯</li><li>API é…ç½®å…ƒä¿¡æ¯</li></ul><p>è‡ªåŠ¨æ¨¡å¼</p><ul><li>constructor</li></ul><h4 id="å­—æ®µæ³¨å…¥"><a class="markdownIt-Anchor" href="#å­—æ®µæ³¨å…¥"></a> å­—æ®µæ³¨å…¥</h4><p>æ‰‹åŠ¨æ¨¡å¼ï¼ˆJava æ³¨è§£é…ç½®å…ƒä¿¡æ¯ï¼‰</p><ul><li><code>@Autowired</code></li><li><code>@Resource</code></li><li><code>@Inject</code>ï¼ˆå¯é€‰ï¼‰</li></ul><h4 id="æ–¹æ³•æ³¨å…¥"><a class="markdownIt-Anchor" href="#æ–¹æ³•æ³¨å…¥"></a> æ–¹æ³•æ³¨å…¥</h4><p>æ‰‹åŠ¨æ¨¡å¼ï¼ˆJava æ³¨è§£é…ç½®å…ƒä¿¡æ¯ï¼‰</p><ul><li><code>@Autowired</code></li><li><code>@Resource</code></li><li><code>@Inject</code>ï¼ˆå¯é€‰ï¼‰</li><li><code>@Bean</code></li></ul><h4 id="æ¥å£å›è°ƒæ³¨å…¥"><a class="markdownIt-Anchor" href="#æ¥å£å›è°ƒæ³¨å…¥"></a> æ¥å£å›è°ƒæ³¨å…¥</h4><p>Aware ç³»åˆ—æ¥å£å›è°ƒ</p><table><thead><tr><th>å…§å»ºæ¥å£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>BeanFactoryAware</code></td><td>è·å– IoC å®¹å™¨- <code>BeanFactory</code></td></tr><tr><td><code>ApplicationContextAware</code></td><td>è·å– Spring åº”ç”¨ä¸Šä¸‹æ–‡- <code>ApplicationContext</code> å¯¹è±¡</td></tr><tr><td><code>EnvironmentAware</code></td><td>è·å– <code>Environment</code> å¯¹è±¡</td></tr><tr><td><code>ResourceLoaderAware</code></td><td>è·å–èµ„æºåŠ è½½å™¨å¯¹è±¡- <code>ResourceLoader</code></td></tr><tr><td><code>BeanClassLoaderAware</code></td><td>è·å–åŠ è½½å½“å‰ Bean Class çš„ <code>ClassLoader</code></td></tr><tr><td><code>BeanNameAware</code></td><td>è·å–å½“å‰ Bean çš„åç§°</td></tr><tr><td><code>MessageSourceAware</code></td><td>è·å– <code>MessageSource</code> å¯¹è±¡ï¼Œç”¨äº Spring å›½é™…åŒ–</td></tr><tr><td><code>ApplicationEventPublisherAware</code></td><td>è·å– <code>ApplicationEventPublishAware</code> å¯¹è±¡ï¼Œç”¨äº Spring äº‹ä»¶</td></tr><tr><td><code>EmbeddedValueResolverAware</code></td><td>è·å– <code>StringValueResolver</code> å¯¹è±¡ï¼Œç”¨äºå ä½ç¬¦å¤„ç†</td></tr></tbody></table><h4 id="ä¾èµ–æ³¨å…¥ç±»å‹é€‰æ‹©"><a class="markdownIt-Anchor" href="#ä¾èµ–æ³¨å…¥ç±»å‹é€‰æ‹©"></a> ä¾èµ–æ³¨å…¥ç±»å‹é€‰æ‹©</h4><ul><li>ä½ä¾èµ–ï¼šæ„é€ å™¨æ³¨å…¥</li><li>å¤šä¾èµ–ï¼šSetter æ–¹æ³•æ³¨å…¥</li><li>ä¾¿åˆ©æ€§ï¼šå­—æ®µæ³¨å…¥</li><li>å£°æ˜ç±»ï¼šæ–¹æ³•æ³¨å…¥</li></ul><h3 id="è¢«æ³¨å…¥çš„æ•°æ®ç±»å‹"><a class="markdownIt-Anchor" href="#è¢«æ³¨å…¥çš„æ•°æ®ç±»å‹"></a> è¢«æ³¨å…¥çš„æ•°æ®ç±»å‹</h3><p>åŸºç¡€ç±»å‹</p><ul><li>åŸç”Ÿç±»å‹ï¼ˆPrimitiveï¼‰ï¼šbooleanã€byteã€charã€shortã€intã€floatã€longã€double</li><li>æ ‡é‡ç±»å‹ï¼ˆScalarï¼‰ï¼šNumberã€Characterã€Booleanã€Enumã€Localeã€Charsetã€Currencyã€Propertiesã€UUID</li><li>å¸¸è§„ç±»å‹ï¼ˆGeneralï¼‰ï¼šObjectã€Stringã€TimeZoneã€Calendarã€Optional ç­‰</li><li>Spring ç±»å‹ï¼šResourceã€InputSourceã€Formatter ç­‰</li></ul><p>é›†åˆç±»å‹</p><ul><li>æ•°ç»„ç±»å‹ï¼ˆArrayï¼‰ï¼šåŸç”Ÿç±»å‹ã€æ ‡é‡ç±»å‹ã€å¸¸è§„ç±»å‹ã€Spring ç±»å‹</li><li>é›†åˆç±»å‹ï¼ˆCollectionï¼‰<ul><li>Collectionï¼šListã€Setï¼ˆSortedSetã€NavigableSetã€EnumSetï¼‰</li><li>Mapï¼šProperties</li></ul></li></ul><h2 id="ioc-ä¾èµ–æŸ¥æ‰¾"><a class="markdownIt-Anchor" href="#ioc-ä¾èµ–æŸ¥æ‰¾"></a> IoC ä¾èµ–æŸ¥æ‰¾</h2><p><strong>ä¾èµ–æŸ¥æ‰¾æ˜¯ä¸»åŠ¨æˆ–æ‰‹åŠ¨çš„ä¾èµ–æŸ¥æ‰¾æ–¹å¼ï¼Œé€šå¸¸éœ€è¦ä¾èµ–å®¹å™¨æˆ–æ ‡å‡† API å®ç°</strong>ã€‚</p><ul><li>æ ¹æ® Bean åç§°æŸ¥æ‰¾<ul><li>å®æ—¶æŸ¥æ‰¾</li><li>å»¶è¿ŸæŸ¥æ‰¾</li></ul></li><li>æ ¹æ® Bean ç±»å‹æŸ¥æ‰¾</li><li>æ ¹æ® Bean åç§° + ç±»å‹æŸ¥æ‰¾</li><li>æ ¹æ® Java æ³¨è§£æŸ¥æ‰¾</li></ul><p>ã€ç¤ºä¾‹ã€‘Spring IoC ä¾èµ–æŸ¥æ‰¾</p><p>xml å…ƒä¿¡æ¯é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;objectFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.beans.factory.config.ObjectFactoryCreatingFactoryBean&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;targetBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;user&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;io.github.dunwu.spring.core.domain.User&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">p:name</span>=<span class="string">&quot;å¼ ä¸‰&quot;</span> <span class="attr">p:age</span>=<span class="string">&quot;18&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;superUser&quot;</span> <span class="attr">class</span>=<span class="string">&quot;io.github.dunwu.spring.core.domain.SysUser&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æå››&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;19&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å—äº¬&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¾èµ–æŸ¥æ‰¾ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanFactoryDemo</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">BeanFactory</span> <span class="variable">beanFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring/spring-dependency-lookup.xml&quot;</span>);</span><br><span class="line">lookupByType(beanFactory);</span><br><span class="line">lookupByNameInRealTime(beanFactory);</span><br><span class="line">lookupByNameInLazy(beanFactory);</span><br><span class="line">lookupByAnnotation(beanFactory);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">lookupByType</span><span class="params">(BeanFactory beanFactory)</span> &#123;</span><br><span class="line"><span class="type">SysUser</span> <span class="variable">user</span> <span class="operator">=</span> beanFactory.getBean(SysUser.class);</span><br><span class="line">System.out.println(<span class="string">&quot;SysUser = &quot;</span> + user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">lookupByNameInRealTime</span><span class="params">(BeanFactory beanFactory)</span> &#123;</span><br><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) beanFactory.getBean(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;user = &quot;</span> + user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">lookupByNameInLazy</span><span class="params">(BeanFactory beanFactory)</span> &#123;</span><br><span class="line">ObjectFactory&lt;User&gt; objectFactory = (ObjectFactory&lt;User&gt;) beanFactory.getBean(<span class="string">&quot;objectFactory&quot;</span>);</span><br><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> objectFactory.getObject();</span><br><span class="line">System.out.println(<span class="string">&quot;user = &quot;</span> + user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">lookupByAnnotation</span><span class="params">(BeanFactory beanFactory)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (beanFactory <span class="keyword">instanceof</span> ListableBeanFactory) &#123;</span><br><span class="line"><span class="type">ListableBeanFactory</span> <span class="variable">listableBeanFactory</span> <span class="operator">=</span> (ListableBeanFactory) beanFactory;</span><br><span class="line">Map&lt;String, Object&gt; users = listableBeanFactory.getBeansWithAnnotation(Super.class);</span><br><span class="line">System.out.println(<span class="string">&quot;users = &quot;</span> + users);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ioc-ä¾èµ–æ³¨å…¥"><a class="markdownIt-Anchor" href="#ioc-ä¾èµ–æ³¨å…¥"></a> IoC ä¾èµ–æ³¨å…¥</h2><p>DIï¼Œæ˜¯ Dependency Injection çš„ç¼©å†™ï¼Œå³ä¾èµ–æ³¨å…¥ã€‚ä¾èµ–æ³¨å…¥æ˜¯ IoC çš„æœ€å¸¸è§å½¢å¼ã€‚ä¾èµ–æ³¨å…¥æ˜¯æ‰‹åŠ¨æˆ–è‡ªåŠ¨ç»‘å®šçš„æ–¹å¼ï¼Œæ— éœ€ä¾èµ–ç‰¹å®šçš„å®¹å™¨æˆ– APIã€‚</p><p><strong>å®¹å™¨å…¨æƒè´Ÿè´£ç»„ä»¶çš„è£…é…ï¼Œå®ƒä¼šæŠŠç¬¦åˆä¾èµ–å…³ç³»çš„å¯¹è±¡é€šè¿‡ JavaBean å±æ€§æˆ–è€…æ„é€ å‡½æ•°ä¼ é€’ç»™éœ€è¦çš„å¯¹è±¡</strong>ã€‚</p><p>DI æ˜¯ç»„ä»¶ä¹‹é—´ä¾èµ–å…³ç³»ç”±å®¹å™¨åœ¨è¿è¡ŒæœŸå†³å®šï¼Œå½¢è±¡çš„è¯´ï¼Œå³ç”±å®¹å™¨åŠ¨æ€çš„å°†æŸä¸ªä¾èµ–å…³ç³»æ³¨å…¥åˆ°ç»„ä»¶ä¹‹ä¸­ã€‚ä¾èµ–æ³¨å…¥çš„ç›®çš„å¹¶éä¸ºè½¯ä»¶ç³»ç»Ÿå¸¦æ¥æ›´å¤šåŠŸèƒ½ï¼Œè€Œæ˜¯ä¸ºäº†æå‡ç»„ä»¶é‡ç”¨çš„é¢‘ç‡ï¼Œå¹¶ä¸ºç³»ç»Ÿæ­å»ºä¸€ä¸ªçµæ´»ã€å¯æ‰©å±•çš„å¹³å°ã€‚é€šè¿‡ä¾èµ–æ³¨å…¥æœºåˆ¶ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡ç®€å•çš„é…ç½®ï¼Œè€Œæ— éœ€ä»»ä½•ä»£ç å°±å¯æŒ‡å®šç›®æ ‡éœ€è¦çš„èµ„æºï¼Œå®Œæˆè‡ªèº«çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå…·ä½“çš„èµ„æºæ¥è‡ªä½•å¤„ï¼Œç”±è°å®ç°ã€‚</p><p>ç†è§£ DI çš„å…³é”®æ˜¯ï¼šâ€œè°ä¾èµ–è°ï¼Œä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–ï¼Œè°æ³¨å…¥è°ï¼Œæ³¨å…¥äº†ä»€ä¹ˆâ€ï¼Œé‚£æˆ‘ä»¬æ¥æ·±å…¥åˆ†æä¸€ä¸‹ï¼š</p><ul><li>**è°ä¾èµ–äºè°ï¼š**å½“ç„¶æ˜¯åº”ç”¨ç¨‹åºä¾èµ–äº IoC å®¹å™¨ï¼›</li><li>**ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–ï¼š**åº”ç”¨ç¨‹åºéœ€è¦ IoC å®¹å™¨æ¥æä¾›å¯¹è±¡éœ€è¦çš„å¤–éƒ¨èµ„æºï¼›</li><li>**è°æ³¨å…¥è°ï¼š**å¾ˆæ˜æ˜¾æ˜¯ IoC å®¹å™¨æ³¨å…¥åº”ç”¨ç¨‹åºæŸä¸ªå¯¹è±¡ï¼Œåº”ç”¨ç¨‹åºä¾èµ–çš„å¯¹è±¡ï¼›</li><li><strong>æ³¨å…¥äº†ä»€ä¹ˆ</strong>ï¼šå°±æ˜¯æ³¨å…¥æŸä¸ªå¯¹è±¡æ‰€éœ€è¦çš„å¤–éƒ¨èµ„æºï¼ˆåŒ…æ‹¬å¯¹è±¡ã€èµ„æºã€å¸¸é‡æ•°æ®ï¼‰ã€‚</li></ul><p>IoC ä¾èµ–æ³¨å…¥ API</p><ul><li>æ ¹æ® Bean åç§°æ³¨å…¥</li><li>æ ¹æ® Bean ç±»å‹æ³¨å…¥</li><li>æ³¨å…¥å®¹å™¨å†…å»º Bean å¯¹è±¡</li><li>æ³¨å…¥é Bean å¯¹è±¡</li><li>æ³¨å…¥ç±»å‹<ul><li>å®æ—¶æ³¨å…¥</li><li>å»¶è¿Ÿæ³¨å…¥</li></ul></li></ul><h2 id="ioc-å®¹å™¨é…ç½®"><a class="markdownIt-Anchor" href="#ioc-å®¹å™¨é…ç½®"></a> IoC å®¹å™¨é…ç½®</h2><p>IoC å®¹å™¨çš„é…ç½®æœ‰ä¸‰ç§æ–¹å¼ï¼š</p><ul><li>åŸºäº xml é…ç½®</li><li>åŸºäºæ³¨è§£é…ç½®</li><li>åŸºäº Java é…ç½®</li></ul><p>ä½œä¸º Spring ä¼ ç»Ÿçš„é…ç½®æ–¹å¼ï¼Œxml é…ç½®æ–¹å¼ä¸€èˆ¬ä¸ºå¤§å®¶æ‰€ç†ŸçŸ¥ã€‚</p><p>å¦‚æœåŒå€¦äº† xml é…ç½®ï¼ŒSpring ä¹Ÿæä¾›äº†æ³¨è§£é…ç½®æ–¹å¼æˆ– Java é…ç½®æ–¹å¼æ¥ç®€åŒ–é…ç½®ã€‚</p><p><strong>æœ¬æ–‡ï¼Œå°†å¯¹ Java é…ç½® IoC å®¹å™¨åšè¯¦ç»†çš„ä»‹ç»ã€‚</strong></p><h3 id=""><a class="markdownIt-Anchor" href="#"></a> <a href="https://dunwu.github.io/spring-tutorial/core/Spring%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5.html#_5-1-xml-%E9%85%8D%E7%BD%AE">#</a>5.1. Xml é…ç½®</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">         http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;resource1.xml&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bean1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bean2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">&quot;bean2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">alias</span> <span class="attr">alias</span>=<span class="string">&quot;bean3&quot;</span> <span class="attr">name</span>=<span class="string">&quot;bean2&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;resource2.xml&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ ‡ç­¾è¯´æ˜ï¼š</p><ul><li><code>&lt;beans&gt;</code> æ˜¯ Spring é…ç½®æ–‡ä»¶çš„æ ¹èŠ‚ç‚¹ã€‚</li><li><code>&lt;bean&gt;</code> ç”¨æ¥å®šä¹‰ä¸€ä¸ª JavaBeanã€‚<code>id</code> å±æ€§æ˜¯å®ƒçš„æ ‡è¯†ï¼Œåœ¨æ–‡ä»¶ä¸­å¿…é¡»å”¯ä¸€ï¼›<code>class</code> å±æ€§æ˜¯å®ƒå…³è”çš„ç±»ã€‚</li><li><code>&lt;alias&gt;</code> ç”¨æ¥å®šä¹‰ Bean çš„åˆ«åã€‚</li><li><code>&lt;import&gt;</code> ç”¨æ¥å¯¼å…¥å…¶ä»–é…ç½®æ–‡ä»¶çš„ Bean å®šä¹‰ã€‚è¿™æ˜¯ä¸ºäº†åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æŠŠè¿™äº›é…ç½®æ–‡ä»¶æ„é€ ä¸ºä¸€ä¸ªæ•°ç»„ï¼ˆnew String[] {â€œconfig1.xmlâ€, config2.xml}ï¼‰ä¼ ç»™ <code>ApplicationContext</code> å®ç°ç±»è¿›è¡ŒåŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œé‚£ä¸€ä¸ªæ›´é€‚åˆç”±ç”¨æˆ·å†³å®šï¼›è¿™ä¸¤ç§æ–¹å¼éƒ½æ˜¯é€šè¿‡è°ƒç”¨ Bean Definition Reader è¯»å– Bean å®šä¹‰ï¼Œå†…éƒ¨å®ç°æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚<code>&lt;import&gt;</code> æ ‡ç­¾å¯ä»¥æ”¾åœ¨ <code>&lt;beans&gt;</code> ä¸‹çš„ä»»ä½•ä½ç½®ï¼Œæ²¡æœ‰é¡ºåºå…³ç³»ã€‚</li></ul><h4 id="-2"><a class="markdownIt-Anchor" href="#-2"></a> <a href="https://dunwu.github.io/spring-tutorial/core/Spring%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5.html#%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%AE%B9%E5%99%A8">#</a>å®ä¾‹åŒ–å®¹å™¨</h4><p>å®ä¾‹åŒ–å®¹å™¨çš„è¿‡ç¨‹ï¼š å®šä½èµ„æºï¼ˆXML é…ç½®æ–‡ä»¶ï¼‰ è¯»å–é…ç½®ä¿¡æ¯(Resource) è½¬åŒ–ä¸º Spring å¯è¯†åˆ«çš„æ•°æ®å½¢å¼ï¼ˆBeanDefinitionï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="keyword">new</span> <span class="title class_">String</span>[] &#123;<span class="string">&quot;services.xml&quot;</span>, <span class="string">&quot;daos.xml&quot;</span>&#125;);</span><br></pre></td></tr></table></figure><p>ç»„åˆ xml é…ç½®æ–‡ä»¶ é…ç½®çš„ Bean åŠŸèƒ½å„ä¸ç›¸åŒï¼Œéƒ½æ”¾åœ¨ä¸€ä¸ª xml æ–‡ä»¶ä¸­ï¼Œä¸ä¾¿ç®¡ç†ã€‚ Java è®¾è®¡æ¨¡å¼è®²ç©¶èŒè´£å•ä¸€åŸåˆ™ã€‚é…ç½®å…¶å®ä¹Ÿæ˜¯å¦‚æ­¤ï¼ŒåŠŸèƒ½ä¸åŒçš„ JavaBean åº”è¯¥è¢«ç»„ç»‡åœ¨ä¸åŒçš„ xml æ–‡ä»¶ä¸­ã€‚ç„¶åä½¿ç”¨ import æ ‡ç­¾æŠŠå®ƒä»¬ç»Ÿä¸€å¯¼å…¥ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;classpath:spring/applicationContext.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;/WEB-INF/spring/service.xml&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h4 id="-3"><a class="markdownIt-Anchor" href="#-3"></a> <a href="https://dunwu.github.io/spring-tutorial/core/Spring%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5.html#%E4%BD%BF%E7%94%A8%E5%AE%B9%E5%99%A8">#</a>ä½¿ç”¨å®¹å™¨</h4><p>ä½¿ç”¨å®¹å™¨çš„æ–¹å¼å°±æ˜¯é€šè¿‡<code>getBean</code>è·å– IoC å®¹å™¨ä¸­çš„ JavaBeanã€‚ Spring ä¹Ÿæœ‰å…¶ä»–æ–¹æ³•å»è·å¾— JavaBeanï¼Œä½†æ˜¯ Spring å¹¶ä¸æ¨èå…¶ä»–æ–¹å¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create and configure beans</span></span><br><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="keyword">new</span> <span class="title class_">String</span>[] &#123;<span class="string">&quot;services.xml&quot;</span>, <span class="string">&quot;daos.xml&quot;</span>&#125;);</span><br><span class="line"><span class="comment">// retrieve configured instance</span></span><br><span class="line"><span class="type">PetStoreService</span> <span class="variable">service</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;petStore&quot;</span>, PetStoreService.class);</span><br><span class="line"><span class="comment">// use configured instance</span></span><br><span class="line">List&lt;String&gt; userList = service.getUsernameList();</span><br></pre></td></tr></table></figure><h3 id="æ³¨è§£é…ç½®"><a class="markdownIt-Anchor" href="#æ³¨è§£é…ç½®"></a> æ³¨è§£é…ç½®</h3><p>Spring2.5 å¼•å…¥äº†æ³¨è§£ã€‚ äºæ˜¯ï¼Œä¸€ä¸ªé—®é¢˜äº§ç”Ÿäº†ï¼š<strong>ä½¿ç”¨æ³¨è§£æ–¹å¼æ³¨å…¥ JavaBean æ˜¯ä¸æ˜¯ä¸€å®šå®Œçˆ† xml æ–¹å¼ï¼Ÿ</strong> æœªå¿…ã€‚æ­£æ‰€è°“ï¼Œä»è€…è§ä»æ™ºè€…è§æ™ºã€‚ä»»ä½•äº‹ç‰©éƒ½æœ‰å…¶ä¼˜ç¼ºç‚¹ï¼Œçœ‹ä½ å¦‚ä½•å–èˆã€‚æ¥çœ‹çœ‹æ³¨è§£çš„ä¼˜ç¼ºç‚¹ï¼š <strong>ä¼˜ç‚¹</strong>ï¼šå¤§å¤§å‡å°‘äº†é…ç½®ï¼Œå¹¶ä¸”å¯ä»¥ä½¿é…ç½®æ›´åŠ ç²¾ç»†â€”â€”ç±»ï¼Œæ–¹æ³•ï¼Œå­—æ®µéƒ½å¯ä»¥ç”¨æ³¨è§£å»æ ‡è®°ã€‚ <strong>ç¼ºç‚¹</strong>ï¼šä½¿ç”¨æ³¨è§£ï¼Œä¸å¯é¿å…äº§ç”Ÿäº†ä¾µå…¥å¼ç¼–ç¨‹ï¼Œä¹Ÿäº§ç”Ÿäº†ä¸€äº›é—®é¢˜ã€‚</p><ul><li>ä½ éœ€è¦å°†æ³¨è§£åŠ å…¥ä½ çš„æºç å¹¶ç¼–è¯‘å®ƒï¼›</li><li>æ³¨è§£å¾€å¾€æ¯”è¾ƒåˆ†æ•£ï¼Œä¸æ˜“ç®¡æ§ã€‚</li></ul><blockquote><p>æ³¨ï¼šspring ä¸­ï¼Œå…ˆè¿›è¡Œæ³¨è§£æ³¨å…¥ï¼Œç„¶åæ‰æ˜¯ xml æ³¨å…¥ï¼Œå› æ­¤å¦‚æœæ³¨å…¥çš„ç›®æ ‡ç›¸åŒï¼Œåè€…ä¼šè¦†ç›–å‰è€…ã€‚</p></blockquote><h4 id="å¯åŠ¨æ³¨è§£"><a class="markdownIt-Anchor" href="#å¯åŠ¨æ³¨è§£"></a> å¯åŠ¨æ³¨è§£</h4><p>Spring é»˜è®¤æ˜¯ä¸å¯ç”¨æ³¨è§£çš„ã€‚å¦‚æœæƒ³ä½¿ç”¨æ³¨è§£ï¼Œéœ€è¦å…ˆåœ¨ xml ä¸­å¯åŠ¨æ³¨è§£ã€‚ å¯åŠ¨æ–¹å¼ï¼šåœ¨ xml ä¸­åŠ å…¥ä¸€ä¸ªæ ‡ç­¾ï¼Œå¾ˆç®€å•å§ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š<code>&lt;context:annotation-config/&gt;</code> åªä¼šæ£€ç´¢å®šä¹‰å®ƒçš„ä¸Šä¸‹æ–‡ã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½  ä¸º DispatcherServlet æŒ‡å®šäº†ä¸€ä¸ª<code>WebApplicationContext</code>ï¼Œé‚£ä¹ˆå®ƒåªåœ¨ controller ä¸­æŸ¥æ‰¾<code>@Autowired</code>æ³¨è§£ï¼Œè€Œä¸ä¼šæ£€æŸ¥å…¶å®ƒçš„è·¯å¾„ã€‚</p></blockquote><h4 id="required"><a class="markdownIt-Anchor" href="#required"></a> <code>@Required</code></h4><p><code>@Required</code> æ³¨è§£åªèƒ½ç”¨äºä¿®é¥° bean å±æ€§çš„ setter æ–¹æ³•ã€‚å—å½±å“çš„ bean å±æ€§å¿…é¡»åœ¨é…ç½®æ—¶è¢«å¡«å……åœ¨ xml é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦åˆ™å®¹å™¨å°†æŠ›å‡º<code>BeanInitializationException</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationRequired</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Required</span> æ³¨è§£ç”¨äºbeanå±æ€§çš„setteræ–¹æ³•å¹¶ä¸”å®ƒæŒ‡ç¤ºï¼Œå—å½±å“çš„beanå±æ€§å¿…é¡»åœ¨é…ç½®æ—¶è¢«å¡«å……åœ¨xmlé…ç½®æ–‡ä»¶ä¸­ï¼Œ</span></span><br><span class="line"><span class="comment">     *           å¦åˆ™å®¹å™¨å°†æŠ›å‡ºBeanInitializationExceptionã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Required</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSex</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSex</span><span class="params">(String sex)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="autowired"><a class="markdownIt-Anchor" href="#autowired"></a> <code>@Autowired</code></h4><p><code>@Autowired</code>æ³¨è§£å¯ç”¨äºä¿®é¥°å±æ€§ã€setter æ–¹æ³•ã€æ„é€ æ–¹æ³•ã€‚</p><p>@Autowired æ³¨å…¥è¿‡ç¨‹</p><ul><li>å…ƒä¿¡æ¯è§£æ</li><li>ä¾èµ–æŸ¥æ‰¾</li><li>ä¾èµ–æ³¨å…¥ï¼ˆå­—æ®µã€æ–¹æ³•ï¼‰</li></ul><blockquote><p>æ³¨ï¼š<code>@Autowired</code>æ³¨è§£ä¹Ÿå¯ç”¨äºä¿®é¥°æ„é€ æ–¹æ³•ï¼Œä½†å¦‚æœç±»ä¸­åªæœ‰é»˜è®¤æ„é€ æ–¹æ³•ï¼Œåˆ™æ²¡æœ‰å¿…è¦ã€‚å¦‚æœæœ‰å¤šä¸ªæ„é€ å™¨ï¼Œè‡³å°‘åº”è¯¥ä¿®é¥°ä¸€ä¸ªï¼Œæ¥å‘Šè¯‰å®¹å™¨å“ªä¸€ä¸ªå¿…é¡»ä½¿ç”¨ã€‚</p></blockquote><p>å¯ä»¥ä½¿ç”¨ JSR330 çš„æ³¨è§£<code>@Inject</code>æ¥æ›¿ä»£<code>@Autowired</code>ã€‚</p><p><strong>*èŒƒä¾‹*</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationAutowired</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(AnnotationRequired.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Apple fieldA;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Banana fieldB;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Orange fieldC;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Apple <span class="title function_">getFieldA</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fieldA;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFieldA</span><span class="params">(Apple fieldA)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.fieldA = fieldA;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Banana <span class="title function_">getFieldB</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fieldB;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFieldB</span><span class="params">(Banana fieldB)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.fieldB = fieldB;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Orange <span class="title function_">getFieldC</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fieldC;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFieldC</span><span class="params">(Orange fieldC)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.fieldC = fieldC;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AnnotationAutowired</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AnnotationAutowired</span><span class="params">(Orange fieldC)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.fieldC = fieldC;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">AbstractApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span></span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring/spring-annotation.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">AnnotationAutowired</span> <span class="variable">annotationAutowired</span> <span class="operator">=</span></span><br><span class="line">                        (AnnotationAutowired) ctx.getBean(<span class="string">&quot;annotationAutowired&quot;</span>);</span><br><span class="line">        log.debug(<span class="string">&quot;fieldA: &#123;&#125;, fieldB:&#123;&#125;, fieldC:&#123;&#125;&quot;</span>, annotationAutowired.getFieldA().getName(),</span><br><span class="line">                        annotationAutowired.getFieldB().getName(),</span><br><span class="line">                        annotationAutowired.getFieldC().getName());</span><br><span class="line">        ctx.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>xml ä¸­çš„é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æµ‹è¯•@Autowired --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;apple&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.zp.notes.spring.beans.annotation.sample.Apple&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;potato&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.zp.notes.spring.beans.annotation.sample.Banana&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;tomato&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.zp.notes.spring.beans.annotation.sample.Orange&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;annotationAutowired&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.zp.notes.spring.beans.annotation.sample.AnnotationAutowired&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h4 id="qualifier"><a class="markdownIt-Anchor" href="#qualifier"></a> <code>@Qualifier</code></h4><p>åœ¨<code>@Autowired</code>æ³¨è§£ä¸­ï¼Œæåˆ°äº†å¦‚æœå‘ç°æœ‰å¤šä¸ªå€™é€‰çš„ bean éƒ½ç¬¦åˆä¿®é¥°ç±»å‹ï¼ŒSpring å°±ä¼šæŠ“çäº†ã€‚</p><p>é‚£ä¹ˆï¼Œå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>å¯ä»¥é€šè¿‡<code>@Qualifier</code>æŒ‡å®š bean åç§°æ¥é”å®šçœŸæ­£éœ€è¦çš„é‚£ä¸ª beanã€‚</p><p><strong>*èŒƒä¾‹*</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationQualifier</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(AnnotationQualifier.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(&quot;dog&quot;)</span> <span class="comment">/** å»é™¤è¿™è¡Œï¼Œä¼šæŠ¥å¼‚å¸¸ */</span></span><br><span class="line">    Animal dog;</span><br><span class="line"></span><br><span class="line">    Animal cat;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Animal <span class="title function_">getDog</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDog</span><span class="params">(Animal dog)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dog = dog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Animal <span class="title function_">getCat</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cat;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCat</span><span class="params">(<span class="meta">@Qualifier(&quot;cat&quot;)</span> Animal cat)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.cat = cat;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">AbstractApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring/spring-annotation.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">AnnotationQualifier</span> <span class="variable">annotationQualifier</span> <span class="operator">=</span></span><br><span class="line">                (AnnotationQualifier) ctx.getBean(<span class="string">&quot;annotationQualifier&quot;</span>);</span><br><span class="line"></span><br><span class="line">        log.debug(<span class="string">&quot;Dog name: &#123;&#125;&quot;</span>, annotationQualifier.getDog().getName());</span><br><span class="line">        log.debug(<span class="string">&quot;Cat name: &#123;&#125;&quot;</span>, annotationQualifier.getCat().getName());</span><br><span class="line">        ctx.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ç‹—&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;çŒ«&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>xml ä¸­çš„é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æµ‹è¯•@Qualifier --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.zp.notes.spring.beans.annotation.sample.Dog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.zp.notes.spring.beans.annotation.sample.Cat&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;annotationQualifier&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.zp.notes.spring.beans.annotation.sample.AnnotationQualifier&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h4 id="resource"><a class="markdownIt-Anchor" href="#resource"></a> <code>@Resource</code></h4><p>Spring æ”¯æŒ JSP250 è§„å®šçš„æ³¨è§£<code>@Resource</code>ã€‚è¿™ä¸ªæ³¨è§£æ ¹æ®æŒ‡å®šçš„åç§°æ¥æ³¨å…¥ beanã€‚</p><p>å¦‚æœæ²¡æœ‰ä¸º<code>@Resource</code>æŒ‡å®šåç§°ï¼Œå®ƒä¼šåƒ<code>@Autowired</code>ä¸€æ ·æŒ‰ç…§ç±»å‹å»å¯»æ‰¾åŒ¹é…ã€‚</p><p>åœ¨ Spring ä¸­ï¼Œç”±<code>CommonAnnotationBeanPostProcessor</code>æ¥å¤„ç†<code>@Resource</code>æ³¨è§£ã€‚</p><p><strong>*èŒƒä¾‹*</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationResource</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(AnnotationResource.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource(name = &quot;flower&quot;)</span></span><br><span class="line">    Plant flower;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource(name = &quot;tree&quot;)</span></span><br><span class="line">    Plant tree;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Plant <span class="title function_">getFlower</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> flower;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFlower</span><span class="params">(Plant flower)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.flower = flower;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Plant <span class="title function_">getTree</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> tree;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTree</span><span class="params">(Plant tree)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.tree = tree;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">AbstractApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span></span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring/spring-annotation.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">AnnotationResource</span> <span class="variable">annotationResource</span> <span class="operator">=</span></span><br><span class="line">                        (AnnotationResource) ctx.getBean(<span class="string">&quot;annotationResource&quot;</span>);</span><br><span class="line">        log.debug(<span class="string">&quot;type: &#123;&#125;, name: &#123;&#125;&quot;</span>, annotationResource.getFlower().getClass(), annotationResource.getFlower().getName());</span><br><span class="line">        log.debug(<span class="string">&quot;type: &#123;&#125;, name: &#123;&#125;&quot;</span>, annotationResource.getTree().getClass(), annotationResource.getTree().getName());</span><br><span class="line">        ctx.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>xml çš„é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æµ‹è¯•@Resource --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;flower&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.zp.notes.spring.beans.annotation.sample.Flower&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;tree&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.zp.notes.spring.beans.annotation.sample.Tree&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;annotationResource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.zp.notes.spring.beans.annotation.sample.AnnotationResource&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h4 id="postconstruct-å’Œ-predestroy"><a class="markdownIt-Anchor" href="#postconstruct-å’Œ-predestroy"></a> <code>@PostConstruct</code> å’Œ <code>@PreDestroy</code></h4><p><code>@PostConstruct</code> å’Œ <code>@PreDestroy</code> æ˜¯ JSR 250 è§„å®šçš„ç”¨äºç”Ÿå‘½å‘¨æœŸçš„æ³¨è§£ã€‚</p><p>ä»å…¶åå·å°±å¯ä»¥çœ‹å‡ºï¼Œä¸€ä¸ªæ˜¯åœ¨æ„é€ ä¹‹åè°ƒç”¨çš„æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯é”€æ¯ä¹‹å‰è°ƒç”¨çš„æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationPostConstructAndPreDestroy</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(AnnotationPostConstructAndPreDestroy.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        log.debug(<span class="string">&quot;call @PostConstruct method&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PreDestroy</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        log.debug(<span class="string">&quot;call @PreDestroy method&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="inject"><a class="markdownIt-Anchor" href="#inject"></a> <code>@Inject</code></h4><p>ä» Spring3.0 å¼€å§‹ï¼ŒSpring æ”¯æŒ JSR 330 æ ‡å‡†æ³¨è§£ï¼ˆä¾èµ–æ³¨å…¥ï¼‰ã€‚</p><p>æ³¨ï¼šå¦‚æœè¦ä½¿ç”¨ JSR 330 æ³¨è§£ï¼Œéœ€è¦ä½¿ç”¨å¤–éƒ¨ jar åŒ…ã€‚</p><p>è‹¥ä½ ä½¿ç”¨ maven ç®¡ç† jar åŒ…ï¼Œåªéœ€è¦æ·»åŠ ä¾èµ–åˆ° pom.xml å³å¯ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.inject<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.inject<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>@Inject</code> å’Œ <code>@Autowired</code> ä¸€æ ·ï¼Œå¯ä»¥ä¿®é¥°å±æ€§ã€setter æ–¹æ³•ã€æ„é€ æ–¹æ³•ã€‚</p><p><strong>*èŒƒä¾‹*</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationInject</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(AnnotationInject.class);</span><br><span class="line">    <span class="meta">@Inject</span></span><br><span class="line">    Apple fieldA;</span><br><span class="line"></span><br><span class="line">    Banana fieldB;</span><br><span class="line"></span><br><span class="line">    Orange fieldC;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Apple <span class="title function_">getFieldA</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fieldA;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFieldA</span><span class="params">(Apple fieldA)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.fieldA = fieldA;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Banana <span class="title function_">getFieldB</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fieldB;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Inject</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFieldB</span><span class="params">(Banana fieldB)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.fieldB = fieldB;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Orange <span class="title function_">getFieldC</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fieldC;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AnnotationInject</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Inject</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AnnotationInject</span><span class="params">(Orange fieldC)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.fieldC = fieldC;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">AbstractApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span></span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring/spring-annotation.xml&quot;</span>);</span><br><span class="line">        <span class="type">AnnotationInject</span> <span class="variable">annotationInject</span> <span class="operator">=</span> (AnnotationInject) ctx.getBean(<span class="string">&quot;annotationInject&quot;</span>);</span><br><span class="line"></span><br><span class="line">        log.debug(<span class="string">&quot;type: &#123;&#125;, name: &#123;&#125;&quot;</span>, annotationInject.getFieldA().getClass(),</span><br><span class="line">                        annotationInject.getFieldA().getName());</span><br><span class="line"></span><br><span class="line">        log.debug(<span class="string">&quot;type: &#123;&#125;, name: &#123;&#125;&quot;</span>, annotationInject.getFieldB().getClass(),</span><br><span class="line">                        annotationInject.getFieldB().getName());</span><br><span class="line"></span><br><span class="line">        log.debug(<span class="string">&quot;type: &#123;&#125;, name: &#123;&#125;&quot;</span>, annotationInject.getFieldC().getClass(),</span><br><span class="line">                        annotationInject.getFieldC().getName());</span><br><span class="line"></span><br><span class="line">        ctx.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="java-é…ç½®"><a class="markdownIt-Anchor" href="#java-é…ç½®"></a> Java é…ç½®</h3><p>åŸºäº Java é…ç½® Spring IoC å®¹å™¨ï¼Œå®é™…ä¸Šæ˜¯<strong>Spring å…è®¸ç”¨æˆ·å®šä¹‰ä¸€ä¸ªç±»ï¼Œåœ¨è¿™ä¸ªç±»ä¸­å»ç®¡ç† IoC å®¹å™¨çš„é…ç½®</strong>ã€‚</p><p>ä¸ºäº†è®© Spring è¯†åˆ«è¿™ä¸ªå®šä¹‰ç±»ä¸ºä¸€ä¸ª Spring é…ç½®ç±»ï¼Œéœ€è¦ç”¨åˆ°ä¸¤ä¸ªæ³¨è§£ï¼š<code>@Configuration</code>å’Œ<code>@Bean</code>ã€‚</p><p>å¦‚æœä½ ç†Ÿæ‚‰ Spring çš„ xml é…ç½®æ–¹å¼ï¼Œä½ å¯ä»¥å°†<code>@Configuration</code>ç­‰ä»·äº<code>&lt;beans&gt;</code>æ ‡ç­¾ï¼›å°†<code>@Bean</code>ç­‰ä»·äº<code>&lt;bean&gt;</code>æ ‡ç­¾ã€‚</p><h4 id="bean-2"><a class="markdownIt-Anchor" href="#bean-2"></a> <code>@Bean</code></h4><p>@Bean çš„ä¿®é¥°ç›®æ ‡åªèƒ½æ˜¯æ–¹æ³•æˆ–æ³¨è§£ã€‚</p><p>@Bean åªèƒ½å®šä¹‰åœ¨ <code>@Configuration</code> æˆ– <code>@Component</code> æ³¨è§£ä¿®é¥°çš„ç±»ä¸­ã€‚</p><h4 id="å£°æ˜ä¸€ä¸ª-bean"><a class="markdownIt-Anchor" href="#å£°æ˜ä¸€ä¸ª-bean"></a> å£°æ˜ä¸€ä¸ª bean</h4><p>æ­¤å¤–ï¼Œ@Configuration ç±»å…è®¸åœ¨åŒä¸€ä¸ªç±»ä¸­é€šè¿‡@Bean å®šä¹‰å†…éƒ¨ bean ä¾èµ–ã€‚</p><p>å£°æ˜ä¸€ä¸ª beanï¼Œåªéœ€è¦åœ¨ bean å±æ€§çš„ set æ–¹æ³•ä¸Šæ ‡æ³¨@Bean å³å¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationConfiguration</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(JavaComponentScan.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Job <span class="title function_">getPolice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Police</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(AnnotationConfiguration.class);</span><br><span class="line">        ctx.scan(<span class="string">&quot;org.zp.notes.spring.beans&quot;</span>);</span><br><span class="line">        ctx.refresh();</span><br><span class="line">        <span class="type">Job</span> <span class="variable">job</span> <span class="operator">=</span> (Job) ctx.getBean(<span class="string">&quot;police&quot;</span>);</span><br><span class="line">        log.debug(<span class="string">&quot;job: &#123;&#125;, work: &#123;&#125;&quot;</span>, job.getClass(), job.work());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Job</span> &#123;</span><br><span class="line">    String <span class="title function_">work</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component(&quot;police&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Police</span> <span class="keyword">implements</span> <span class="title class_">Job</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">work</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æŠ“ç½ªçŠ¯&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç­‰ä»·äºé…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;police&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.zp.notes.spring.ioc.sample.job.Police&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>@Bean æ³¨è§£ç”¨æ¥è¡¨æ˜ä¸€ä¸ªæ–¹æ³•å®ä¾‹åŒ–ã€é…ç½®åˆåˆå§‹åŒ–ä¸€ä¸ªè¢« Spring IoC å®¹å™¨ç®¡ç†çš„æ–°å¯¹è±¡ã€‚</p><p>å¦‚æœä½ ç†Ÿæ‚‰ Spring çš„ xml é…ç½®ï¼Œä½ å¯ä»¥å°†@Bean è§†ä¸ºç­‰ä»·äº<code>&lt;beans&gt;</code>æ ‡ç­¾ã€‚</p><p>@Bean æ³¨è§£å¯ä»¥ç”¨äºä»»ä½•çš„ Spring <code>@Component</code> beanï¼Œç„¶è€Œï¼Œé€šå¸¸è¢«ç”¨äº<code>@Configuration</code> beanã€‚</p><h4 id="configuration"><a class="markdownIt-Anchor" href="#configuration"></a> <code>@Configuration</code></h4><p><code>@Configuration</code> æ˜¯ä¸€ä¸ªç±»çº§åˆ«çš„æ³¨è§£ï¼Œç”¨æ¥æ ‡è®°è¢«ä¿®é¥°ç±»çš„å¯¹è±¡æ˜¯ä¸€ä¸ª<code>BeanDefinition</code>ã€‚</p><p><code>@Configuration</code> å£°æ˜ bean æ˜¯é€šè¿‡è¢« <code>@Bean</code> ä¿®é¥°çš„å…¬å…±æ–¹æ³•ã€‚æ­¤å¤–ï¼Œ<code>@Configuration</code> å…è®¸åœ¨åŒä¸€ä¸ªç±»ä¸­é€šè¿‡ <code>@Bean</code> å®šä¹‰å†…éƒ¨ bean ä¾èµ–ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MyService <span class="title function_">myService</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyServiceImpl</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç­‰ä»·äºé…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.acme.services.MyServiceImpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç”¨ <code>AnnotationConfigApplicationContext</code> å®ä¾‹åŒ– IoC å®¹å™¨ã€‚</p><h2 id="æœ€ä½³å®è·µ"><a class="markdownIt-Anchor" href="#æœ€ä½³å®è·µ"></a> æœ€ä½³å®è·µ</h2><h3 id="singleton-çš„-bean-å¦‚ä½•æ³¨å…¥-prototype-çš„-bean"><a class="markdownIt-Anchor" href="#singleton-çš„-bean-å¦‚ä½•æ³¨å…¥-prototype-çš„-bean"></a> singleton çš„ Bean å¦‚ä½•æ³¨å…¥ prototype çš„ Bean</h3><p>Spring åˆ›å»ºçš„ Bean é»˜è®¤æ˜¯å•ä¾‹çš„ï¼Œä½†å½“ Bean é‡åˆ°ç»§æ‰¿çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå¿½ç•¥è¿™ä¸€ç‚¹ã€‚</p><p>å‡è®¾æœ‰ä¸€ä¸ª SayService æŠ½è±¡ç±»ï¼Œå…¶ä¸­ç»´æŠ¤äº†ä¸€ä¸ªç±»å‹æ˜¯ ArrayList çš„å­—æ®µ dataï¼Œç”¨äºä¿å­˜æ–¹æ³•å¤„ç†çš„ä¸­é—´æ•°æ®ã€‚æ¯æ¬¡è°ƒç”¨ say æ–¹æ³•éƒ½ä¼šå¾€ data åŠ å…¥æ–°æ•°æ®ï¼Œå¯ä»¥è®¤ä¸º SayService æ˜¯æœ‰çŠ¶æ€ï¼Œå¦‚æœ SayService æ˜¯å•ä¾‹çš„è¯å¿…ç„¶ä¼š OOMã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * SayService æ˜¯æœ‰çŠ¶æ€ï¼Œå¦‚æœ SayService æ˜¯å•ä¾‹çš„è¯å¿…ç„¶ä¼š OOM</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">SayService</span> &#123;</span><br><span class="line"></span><br><span class="line">   List&lt;String&gt; data = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">say</span><span class="params">()</span> &#123;</span><br><span class="line">      data.add(IntStream.rangeClosed(<span class="number">1</span>, <span class="number">1000000</span>)</span><br><span class="line">         .mapToObj(__ -&gt; <span class="string">&quot;a&quot;</span>)</span><br><span class="line">         .collect(Collectors.joining(<span class="string">&quot;&quot;</span>)) + UUID.randomUUID().toString());</span><br><span class="line">      log.info(<span class="string">&quot;I&#x27;m &#123;&#125; size:&#123;&#125;&quot;</span>, <span class="built_in">this</span>, data.size());</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†å®é™…å¼€å‘çš„æ—¶å€™ï¼Œå¼€å‘åŒå­¦æ²¡æœ‰è¿‡å¤šæ€è€ƒå°±æŠŠ SayHello å’Œ SayBye ç±»åŠ ä¸Šäº† @Service æ³¨è§£ï¼Œè®©å®ƒä»¬æˆä¸ºäº† Beanï¼Œä¹Ÿæ²¡æœ‰è€ƒè™‘åˆ°çˆ¶ç±»æ˜¯æœ‰çŠ¶æ€çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SayBye</span> <span class="keyword">extends</span> <span class="title class_">SayService</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">say</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="built_in">super</span>.say();</span><br><span class="line">      log.info(<span class="string">&quot;bye&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SayHello</span> <span class="keyword">extends</span> <span class="title class_">SayService</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">say</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="built_in">super</span>.say();</span><br><span class="line">log.info(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸ºç±»æ ‡è®°ä¸Š @Service æ³¨è§£æŠŠç±»å‹äº¤ç”±å®¹å™¨ç®¡ç†å‰ï¼Œé¦–å…ˆè¯„ä¼°ä¸€ä¸‹ç±»æ˜¯å¦æœ‰çŠ¶æ€ï¼Œç„¶åä¸º Bean è®¾ç½®åˆé€‚çš„ Scopeã€‚</p><p>è°ƒç”¨ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;beansingletonandorder&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanSingletonAndOrderController</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   List&lt;SayService&gt; sayServiceList;</span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> ApplicationContext applicationContext;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@GetMapping(&quot;test&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">      log.info(<span class="string">&quot;====================&quot;</span>);</span><br><span class="line">      sayServiceList.forEach(SayService::say);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯èƒ½æœ‰äººè®¤ä¸ºï¼Œä¸º SayHello å’Œ SayBye ä¸¤ä¸ªç±»éƒ½æ ‡è®°äº† @Scope æ³¨è§£ï¼Œè®¾ç½®äº† PROTOTYPE çš„ç”Ÿå‘½å‘¨æœŸå°±å¯ä»¥è§£å†³ä¸Šé¢çš„é—®é¢˜ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Scope(value = ConfigurableBeanFactory.SCOPE_PROTOTYPE)</span></span><br></pre></td></tr></table></figure><p>ä½†å®é™…ä¸Šè¿˜æ˜¯æœ‰é—®é¢˜ã€‚å› ä¸º@RestController æ³¨è§£ =@Controller æ³¨è§£ +@ResponseBody æ³¨è§£ï¼Œåˆå› ä¸º @Controller æ ‡è®°äº† @Component å…ƒæ³¨è§£ï¼Œæ‰€ä»¥ @RestController æ³¨è§£å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ª Spring Beanã€‚</p><p>Bean é»˜è®¤æ˜¯å•ä¾‹çš„ï¼Œæ‰€ä»¥å•ä¾‹çš„ Controller æ³¨å…¥çš„ Service ä¹Ÿæ˜¯ä¸€æ¬¡æ€§åˆ›å»ºçš„ï¼Œå³ä½¿ Service æœ¬èº«æ ‡è¯†äº† prototype çš„èŒƒå›´ä¹Ÿæ²¡ç”¨ã€‚</p><p>ä¿®å¤æ–¹å¼æ˜¯ï¼Œè®© Service ä»¥ä»£ç†æ–¹å¼æ³¨å…¥ã€‚è¿™æ ·è™½ç„¶ Controller æœ¬èº«æ˜¯å•ä¾‹çš„ï¼Œä½†æ¯æ¬¡éƒ½èƒ½ä»ä»£ç†è·å– Serviceã€‚è¿™æ ·ä¸€æ¥ï¼Œprototype èŒƒå›´çš„é…ç½®æ‰èƒ½çœŸæ­£ç”Ÿæ•ˆã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Scope(value = ConfigurableBeanFactory.SCOPE_PROTOTYPE, proxyMode = ScopedProx)</span></span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒèµ„æ–™"><a class="markdownIt-Anchor" href="#å‚è€ƒèµ„æ–™"></a> å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#beans">Spring å®˜æ–¹æ–‡æ¡£ä¹‹ Core Technologies</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
          <category> Java </category>
          
          <category> SpringIOCè¯¦è§£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> Java </tag>
            
            <tag> SpringIOC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€é”®ç”Ÿæˆä»£ç </title>
      <link href="/posts/1d84dc88/"/>
      <url>/posts/1d84dc88/</url>
      
        <content type="html"><![CDATA[<div class="tip home"><p>å†™åœ¨å‰é¢çš„è¯:<br />æœ¬è„šæœ¬æ¨¡æ¿ä¸æ”¶å–ä»»ä½•è´¹ç”¨,åˆè¡·å°±æ˜¯ä¸æƒ³é‡å¤é€ æ¢¯å­,å¦‚æœå¯¹å„ä½æœ‰å¸®åŠ©çš„è¯,å¯ä»¥ç»™ä½œè€…æ‰“ä¸Šä¸€æ¯å¥¶èŒ¶é’±,ç›®å‰æ’ä»¶è¿˜æ˜¯æœ‰ç‚¹å° Bug,ä½†æ˜¯ä¸å½±å“ä½¿ç”¨,ç°åœ¨å„å¹³å°ç›¸å…³çš„ä»£ç ç”Ÿæˆæ’ä»¶ä¹Ÿæ¯”è¾ƒæˆç†Ÿäº†,å¹¶ä¸”å¸¦æœ‰ç‹¬ç‰¹çš„ç‰¹è‰²å’Œä¸€äº›è‡ªå¸¦çš„ä»£ç æç¤ºåŠŸèƒ½,ä½¿ç”¨æ„Ÿå—æ•´ä½“éƒ½ä¸é”™,ä½†æ˜¯å¥½ç”¨çš„æ’ä»¶è‚¯å®šæ˜¯è¦æ”¶è´¹çš„å•¦~å…·ä½“çš„è¯·å‚è€ƒä¸‹é¢ç›¸å…³æ’ä»¶æŸ¥çœ‹</p></div><details class="folding-tag" green><summary> æŸ¥çœ‹è§†é¢‘æ•™ç¨‹ </summary>              <div class='content'>              <iframe class="bilibili" src="//player.bilibili.com/player.html?aid=981357376&bvid=BV1q44y1u7EL&cid=711986806&page=1&high_quality=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" > </iframe>              </div>            </details><table><thead><tr><th style="text-align:center">å‚è€ƒæ’ä»¶</th></tr></thead><tbody><tr><td style="text-align:center"><strong><a href="https://github.com/gejun123456/MyBatisCodeHelper-Pro">MyBatisCodeHelper-Pro</a></strong></td></tr><tr><td style="text-align:center"><a href="https://github.com/zhengjunbase/codehelper.generator"><strong>codehelper.generator</strong></a></td></tr><tr><td style="text-align:center"><a href="https://github.com/mybatis/mybatis-3"><strong>mybatis</strong></a></td></tr><tr><td style="text-align:center"><a href="https://github.com/mybatis/generator">mybatis generator</a></td></tr><tr><td style="text-align:center"><a href="https://github.com/pagehelper/Mybatis-PageHelper">pageHelper</a></td></tr><tr><td style="text-align:center"><a href="https://github.com/zouzg/mybatis-generator-gui">mybatis-generator-gui</a></td></tr><tr><td style="text-align:center"><a href="https://github.com/itfsw/mybatis-generator-plugin">mybatis generator plugin</a></td></tr><tr><td style="text-align:center"><a href="https://github.com/baomidou/mybatis-plus">mybatisplus</a></td></tr></tbody></table><details class="folding-tag" cyan><summary> åŠŸèƒ½ä»‹ç» </summary>              <div class='content'>              <p>æœ¬è„šæœ¬åªé€‚ç”¨äº EasyCode æ¨¡æ¿æ­é…ä½¿ç”¨</p><p>æ”¯æŒç”Ÿæˆä»£ç å…·ä½“å¦‚ä¸‹:</p><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>controller å±‚ä»£ç </p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>handler å¤„ç†å™¨</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>interceptor æ‹¦æˆªå™¨</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>mapper æ•°æ®åº“æ¥å£</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>pojo å®ä½“ç±»</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>service æœåŠ¡å±‚</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>service-impl æœåŠ¡å±‚å®ç°ç±»</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>application.yaml yamlå…¨å±€é…ç½®æ–‡ä»¶</p>            </div><div class='checkbox red'><input type="checkbox" />            <p>Bugä¿®å¤~</p>            </div><p>æ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿,ä¸€é”®ç”Ÿæˆåˆ°åº•,åŸºæœ¬æ»¡è¶³ä½ æ—¥å¸¸ CRUD</p><p>è™½ç„¶è¿˜æ˜¯æœ‰ç‚¹ Bug,ä½†æ˜¯æˆ‘è§‰å¾—ä»–å·²ç»æˆç†Ÿäº†,å› ä¸ºä¸å½±å“ä½¿ç”¨,å…·ä½“ Bug æˆ‘ä¼šåœ¨ä¸‹æ–‡ä¸­è®²äº›</p>              </div>            </details><h2 id="ä½¿ç”¨æ•™ç¨‹"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ•™ç¨‹"></a> ä½¿ç”¨æ•™ç¨‹</h2><h3 id="å‰ç½®æ¡ä»¶"><a class="markdownIt-Anchor" href="#å‰ç½®æ¡ä»¶"></a> å‰ç½®æ¡ä»¶</h3><p>éšæ„åˆ›å»ºä¸€ä¸ª SpringBoot é¡¹ç›®,åœ¨ pom é‡Œé¢å¼•å…¥ç›¸å…³ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mp--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Mysqlé©±åŠ¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--mpä»£ç ç”Ÿæˆå™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid-spring-boot-starter --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æœç´¢ EasyCode æ’ä»¶å®‰è£…</p><p><img src="https://unpkg.com/serms-assets@1.0.23/imgs/image-20220504090944383.png" alt="" /></p><p>åœ¨æ–‡ä»¶&gt;è®¾ç½®&gt;å…¶ä»–è®¾ç½®&gt;EasyCode&gt;Template ä¸­æ·»åŠ ç»„å,å‘½åéšæ„,å¯ä»¥çœ‹åˆ°,é™¤äº†ç¬¬ä¸€ä¸ª,ä¸‹é¢å››ä¸ªéƒ½æ’ä»¶è‡ªå¸¦çš„,ä½ ä»¬ä¹Ÿå¯ä»¥å°è¯•ä¸€ä¸‹</p><p><img src="https://unpkg.com/serms-assets@1.0.23/imgs/image-20220504091123867.png" alt="" /></p><p>æ¥ä¸‹æ¥å°±æ˜¯æœ€é‡è¦çš„æ·»åŠ æ¨¡æ¿äº†</p><h3 id="pojojavavm"><a class="markdownIt-Anchor" href="#pojojavavm"></a> pojo.java.vm</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">$!&#123;define.vm&#125;</span><br><span class="line">#set($author = <span class="string">&quot;SerMs&quot;</span>)</span><br><span class="line">#save(<span class="string">&quot;/pojo&quot;</span>, <span class="string">&quot;.java&quot;</span>)</span><br><span class="line"></span><br><span class="line">#setPackageSuffix(<span class="string">&quot;pojo&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.*;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#tableComment(<span class="string">&quot;å®ä½“ç±»&quot;</span>)</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>!&#123;tableInfo.name&#125; <span class="keyword">implements</span> <span class="title class_">Serializable</span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> serialVersionUID= $!tool.serial();</span><br><span class="line">#foreach($column in $tableInfo.pkColumn)</span><br><span class="line">    #<span class="keyword">if</span>($&#123;column.comment&#125;)<span class="comment">/**</span></span><br><span class="line"><span class="comment">     * $&#123;column.comment&#125;</span></span><br><span class="line"><span class="comment">     */</span>#end</span><br><span class="line"></span><br><span class="line"><span class="meta">@TableId(value = &quot;$!&#123;column.obj.name&#125;&quot; , type = IdType.AUTO)</span></span><br><span class="line"><span class="keyword">private</span> $!&#123;tool.getClsNameByFullName($column.type)&#125; $!&#123;column.name&#125;;</span><br><span class="line">#end</span><br><span class="line">#foreach($column in $tableInfo.otherColumn)</span><br><span class="line"></span><br><span class="line">    #<span class="keyword">if</span>($&#123;column.comment&#125;)<span class="comment">/**$&#123;column.comment&#125;*/</span>#end</span><br><span class="line">    #<span class="keyword">if</span>(!($column.name.equals(<span class="string">&#x27;deleted&#x27;</span>)||$column.name.equals(<span class="string">&#x27;updateTime&#x27;</span>)||$column.name.equals(<span class="string">&#x27;createTime&#x27;</span>)))<span class="meta">@TableField(value = &quot;$!&#123;column.obj.name&#125;&quot;)</span>#end</span><br><span class="line">    #<span class="keyword">if</span>($column.name.equals(<span class="string">&#x27;createTime&#x27;</span>))</span><br><span class="line">    <span class="comment">/** åˆ›å»ºæ—¶é—´ */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;$!&#123;column.obj.name&#125;&quot; , fill = FieldFill.INSERT)</span>#end</span><br><span class="line">    #<span class="keyword">if</span>($column.name.equals(<span class="string">&#x27;updateTime&#x27;</span>))</span><br><span class="line">    <span class="comment">/** ä¿®æ”¹æ—¶é—´ */</span></span><br><span class="line">    <span class="meta">@TableField(value = &quot;$!&#123;column.obj.name&#125;&quot; , fill = FieldFill.INSERT_UPDATE)</span>#end</span><br><span class="line">    #<span class="keyword">if</span>($column.name.equals(<span class="string">&#x27;deleted&#x27;</span>))<span class="meta">@TableLogic</span></span><br><span class="line">    #end</span><br><span class="line"><span class="keyword">private</span> $!&#123;tool.getClsNameByFullName($column.type)&#125; $!&#123;column.name&#125;;</span><br><span class="line">#end</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="serviceimpljavavm"><a class="markdownIt-Anchor" href="#serviceimpljavavm"></a> serviceImpl.java.vm</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">##å®šä¹‰åˆå§‹å˜é‡</span><br><span class="line">#set($author = <span class="string">&quot;SerMs&quot;</span>)</span><br><span class="line">#set($tableName = $tool.append($tableInfo.name, <span class="string">&quot;ServiceImpl&quot;</span>))</span><br><span class="line">##è®¾ç½®å›è°ƒ</span><br><span class="line">$!callback.setFileName($tool.append($tableName, <span class="string">&quot;.java&quot;</span>))</span><br><span class="line">$!callback.setSavePath($tool.append($tableInfo.savePath, <span class="string">&quot;/service/impl&quot;</span>))</span><br><span class="line"></span><br><span class="line">##æ‹¿åˆ°ä¸»é”®</span><br><span class="line">#<span class="keyword">if</span>(!$tableInfo.pkColumn.isEmpty())</span><br><span class="line">    #set($pk = $tableInfo.pkColumn.get(<span class="number">0</span>))</span><br><span class="line">#end</span><br><span class="line"></span><br><span class="line">#<span class="keyword">if</span>($tableInfo.savePackageName)<span class="keyword">package</span> $!&#123;tableInfo.savePackageName&#125;.#&#123;end&#125;service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> $!&#123;tableInfo.savePackageName&#125;.pojo.$!&#123;tableInfo.name&#125;;</span><br><span class="line"><span class="keyword">import</span> $!&#123;tableInfo.savePackageName&#125;.mapper.$!&#123;tableInfo.name&#125;Mapper;</span><br><span class="line"><span class="keyword">import</span> $!&#123;tableInfo.savePackageName&#125;.service.$!&#123;tableInfo.name&#125;Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * $!&#123;tableInfo.comment&#125;($!&#123;tableInfo.name&#125;)è¡¨æœåŠ¡å®ç°ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> $!author</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> $!time.currTime()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service(&quot;$!tool.firstLowerCase($!&#123;tableInfo.name&#125;)Service&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>!&#123;tableName&#125; <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;$!&#123;tableInfo.name&#125;Mapper, $!&#123;tableInfo.name&#125;&gt; <span class="keyword">implements</span> <span class="title class_">$</span>!&#123;tableInfo.name&#125;Service &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="mapperjavavm"><a class="markdownIt-Anchor" href="#mapperjavavm"></a> mapper.java.vm</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#set($tableName = $tool.append($tableInfo.name, <span class="string">&quot;Mapper&quot;</span>))</span><br><span class="line">#set($author = <span class="string">&quot;SerMs&quot;</span>)</span><br><span class="line"></span><br><span class="line">$!callback.setFileName($tool.append($tableName, <span class="string">&quot;.java&quot;</span>))</span><br><span class="line">$!callback.setSavePath($tool.append($tableInfo.savePath, <span class="string">&quot;/mapper&quot;</span>))</span><br><span class="line"></span><br><span class="line">#<span class="keyword">if</span>(!$tableInfo.pkColumn.isEmpty())</span><br><span class="line">    #set($pk = $tableInfo.pkColumn.get(<span class="number">0</span>))</span><br><span class="line">#end</span><br><span class="line"></span><br><span class="line">#<span class="keyword">if</span>($tableInfo.savePackageName)<span class="keyword">package</span> $!&#123;tableInfo.savePackageName&#125;.#&#123;end&#125;mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> $!&#123;tableInfo.savePackageName&#125;.pojo.$!tableInfo.name;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * $!&#123;tableInfo.comment&#125;($!&#123;tableInfo.name&#125;)è¡¨æ•°æ®åº“è®¿é—®å±‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> $!author</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> $!time.currTime()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">$</span>!&#123;tableName&#125; <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;$!tableInfo.name&gt; &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="servicejavavm"><a class="markdownIt-Anchor" href="#servicejavavm"></a> service.java.vm</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#set($author = <span class="string">&quot;SerMs&quot;</span>)</span><br><span class="line">#set($tableName = $tool.append($tableInfo.name, <span class="string">&quot;Service&quot;</span>))</span><br><span class="line"></span><br><span class="line">$!callback.setFileName($tool.append($tableName, <span class="string">&quot;.java&quot;</span>))</span><br><span class="line">$!callback.setSavePath($tool.append($tableInfo.savePath, <span class="string">&quot;/service&quot;</span>))</span><br><span class="line"></span><br><span class="line">#<span class="keyword">if</span>(!$tableInfo.pkColumn.isEmpty())</span><br><span class="line">    #set($pk = $tableInfo.pkColumn.get(<span class="number">0</span>))</span><br><span class="line">#end</span><br><span class="line"></span><br><span class="line">#<span class="keyword">if</span>($tableInfo.savePackageName)<span class="keyword">package</span> $!&#123;tableInfo.savePackageName&#125;.#&#123;end&#125;service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> $!&#123;tableInfo.savePackageName&#125;.pojo.$!&#123;tableInfo.name&#125;;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * $!&#123;tableInfo.comment&#125;($!&#123;tableInfo.name&#125;)è¡¨æœåŠ¡æ¥å£</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> $!author</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> $!time.currTime()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">$</span>!&#123;tableName&#125; <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;$!tableInfo.name&gt; &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="controllerjavavm"><a class="markdownIt-Anchor" href="#controllerjavavm"></a> controller.java.vm</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">#set($author = <span class="string">&quot;SerMs&quot;</span>)</span><br><span class="line">#set($tableName = $tool.append($tableInfo.name, <span class="string">&quot;Controller&quot;</span>))</span><br><span class="line"></span><br><span class="line">$!callback.setFileName($tool.append($tableName, <span class="string">&quot;.java&quot;</span>))</span><br><span class="line">$!callback.setSavePath($tool.append($tableInfo.savePath, <span class="string">&quot;/controller&quot;</span>))</span><br><span class="line"></span><br><span class="line">#<span class="keyword">if</span>(!$tableInfo.pkColumn.isEmpty())</span><br><span class="line">    #set($pk = $tableInfo.pkColumn.get(<span class="number">0</span>))</span><br><span class="line">#end</span><br><span class="line"></span><br><span class="line">#<span class="keyword">if</span>($tableInfo.savePackageName)<span class="keyword">package</span> $!&#123;tableInfo.savePackageName&#125;.#&#123;end&#125;controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> $!&#123;tableInfo.savePackageName&#125;.pojo.$!&#123;tableInfo.name&#125;;</span><br><span class="line"><span class="keyword">import</span> $!&#123;tableInfo.savePackageName&#125;.service.$!&#123;tableInfo.name&#125;Service;</span><br><span class="line"><span class="keyword">import</span> $!&#123;tableInfo.savePackageName&#125;.util.R;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * $!&#123;tableInfo.comment&#125;($!&#123;tableInfo.name&#125;)è¡¨æ§åˆ¶å±‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> $!author</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> $!time.currTime()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;$!tool.firstLowerCase($tableInfo.name)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>!&#123;tableName&#125; &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æœåŠ¡å¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> $!&#123;tableInfo.name&#125;Service $!tool.firstLowerCase($tableInfo.name)Service;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†é¡µæŸ¥è¯¢æ‰€æœ‰æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">@GetMapping</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">page</span><span class="params">(<span class="meta">@RequestParam</span> <span class="type">int</span> current,<span class="meta">@RequestParam</span> <span class="type">int</span> size)</span>&#123;</span><br><span class="line">        Page&lt;$!&#123;tableInfo.name&#125;&gt; page=<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(current,size);</span><br><span class="line">        <span class="keyword">return</span> R.ok().setData(<span class="built_in">this</span>.$!&#123;tool.firstLowerCase($tableInfo.name)&#125;Service.page(page));&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šè¿‡ä¸»é”®æŸ¥è¯¢å•æ¡æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">selectOne</span><span class="params">(<span class="meta">@PathVariable</span> Serializable id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> R.ok().setData(<span class="built_in">this</span>.$!&#123;tool.firstLowerCase($tableInfo.name)&#125;Service.getById(id));&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ–°å¢æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> $!&#123;tableInfo.name&#125; $!tool.firstLowerCase($tableInfo.name)</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> R.ok().setData(<span class="built_in">this</span>.$!&#123;tool.firstLowerCase($tableInfo.name)&#125;Service.save($!tool.firstLowerCase($tableInfo.name)));&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¿®æ”¹æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PutMapping</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">updateById</span><span class="params">(<span class="meta">@RequestBody</span> $!&#123;tableInfo.name&#125; $!tool.firstLowerCase($tableInfo.name)</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> R.ok().setData(<span class="built_in">this</span>.$!&#123;tool.firstLowerCase($tableInfo.name)&#125;Service.updateById($!tool.firstLowerCase($tableInfo.name)));&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å•æ¡/æ‰¹é‡åˆ é™¤æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@DeleteMapping</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">delete</span><span class="params">(<span class="meta">@RequestParam</span> List&lt;Long&gt; id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> R.ok().setData(<span class="built_in">this</span>.$!&#123;tool.firstLowerCase($tableInfo.name)&#125;Service.removeByIds(id));&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>r.java.vm</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$!&#123;define.vm&#125;</span><br><span class="line">#set($author = <span class="string">&quot;SerMs&quot;</span>)</span><br><span class="line"></span><br><span class="line">#save(<span class="string">&quot;/util&quot;</span>, <span class="string">&quot;R.java&quot;</span>)</span><br><span class="line"></span><br><span class="line">#setPackageSuffix(<span class="string">&quot;util&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿä¸€è¿”å›å¯¹è±¡R</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> $!author</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> $!time.currTime()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">R</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®æ•°æ®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> R</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">setData</span><span class="params">(Object data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ“ä½œæˆåŠŸ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> R</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">ok</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">R</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">R</span>();</span><br><span class="line">        r.code = <span class="number">200</span>;</span><br><span class="line">        r.message = <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ“ä½œå¤±è´¥</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> R</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">fail</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">R</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">R</span>();</span><br><span class="line">        r.code = <span class="number">205</span>;</span><br><span class="line">        r.message = <span class="string">&quot;fail&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç³»ç»Ÿå¼‚å¸¸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">exp</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">R</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">R</span>();</span><br><span class="line">        r.code = <span class="number">500</span>;</span><br><span class="line">        r.message = <span class="string">&quot;exception&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="interceptor351javavm"><a class="markdownIt-Anchor" href="#interceptor351javavm"></a> interceptor3.5.1.java.vm</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$!&#123;define.vm&#125;</span><br><span class="line">#set($author = <span class="string">&quot;SerMs&quot;</span>)</span><br><span class="line"></span><br><span class="line">#save(<span class="string">&quot;/interceptor&quot;</span>, <span class="string">&quot;MybatisPlusPageInterceptor.java&quot;</span>)</span><br><span class="line"></span><br><span class="line">#setPackageSuffix(<span class="string">&quot;interceptor&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * MyBatis-Plus 3.5.1 æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> $!author</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> $!time.currTime()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusPageInterceptor</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–°ç‰ˆåˆ†é¡µæ’ä»¶è®¾ç½®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">getPaginationInnerInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>());</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="handler351javavm"><a class="markdownIt-Anchor" href="#handler351javavm"></a> handler3.5.1.java.vm</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$!&#123;define.vm&#125;</span><br><span class="line">#set($author = <span class="string">&quot;SerMs&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#save(<span class="string">&quot;/handler&quot;</span>,<span class="string">&quot;MyMetaObjectHandler.java&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#setPackageSuffix(<span class="string">&quot;handler&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.reflection.MetaObject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * MyBatis-Plus 3.5.1 å¤„ç†å™¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> $!author</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> $!time.currTime()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥æ—¶çš„å¡«å……ç­–ç•¥</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> metaObject</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;createTime&quot;</span> , <span class="keyword">new</span> <span class="title class_">Date</span>(), metaObject);</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span> , <span class="keyword">new</span> <span class="title class_">Date</span>(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°æ—¶çš„å¡«å……ç­–ç•¥</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> metaObject</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span> , <span class="keyword">new</span> <span class="title class_">Date</span>(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>application.yaml.vm</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">##è®¾ç½®ä¿å­˜åç§°ä¸ä¿å­˜ä½ç½®</span><br><span class="line">$!callback.setFileName(<span class="string">&quot;application.yaml&quot;</span>)</span><br><span class="line">$!callback.setSavePath($tool.append($modulePath, <span class="string">&quot;/src/main/resources&quot;</span>))</span><br><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    url: jdbc:mysql:<span class="comment">//localhost:3306/XXXX?allowPublicKeyRetrieval=true&amp;serverTimezone=GMT%2B8&amp;characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line">    username: root</span><br><span class="line">    password: <span class="number">123456</span></span><br><span class="line">    type: com.alibaba.druid.pool.DruidDataSource</span><br><span class="line">    druid:</span><br><span class="line">      # ä¸‹é¢ä¸ºè¿æ¥æ± çš„è¡¥å……è®¾ç½®ï¼Œåº”ç”¨åˆ°ä¸Šé¢æ‰€æœ‰æ•°æ®æºä¸­</span><br><span class="line">      # åˆå§‹åŒ–å¤§å°ï¼Œæœ€å°ï¼Œæœ€å¤§</span><br><span class="line">      initial-size: <span class="number">5</span></span><br><span class="line">      min-idle: <span class="number">5</span></span><br><span class="line">      max-active: <span class="number">20</span></span><br><span class="line">      # é…ç½®è·å–è¿æ¥ç­‰å¾…è¶…æ—¶çš„æ—¶é—´</span><br><span class="line">      max-wait: <span class="number">60000</span></span><br><span class="line">      # é…ç½®é—´éš”å¤šä¹…æ‰è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œæ£€æµ‹éœ€è¦å…³é—­çš„ç©ºé—²è¿æ¥ï¼Œå•ä½æ˜¯æ¯«ç§’</span><br><span class="line">      time-between-eviction-runs-millis: <span class="number">60000</span></span><br><span class="line">      # é…ç½®ä¸€ä¸ªè¿æ¥åœ¨æ± ä¸­æœ€å°ç”Ÿå­˜çš„æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’</span><br><span class="line">      min-evictable-idle-time-millis: <span class="number">300000</span></span><br><span class="line"></span><br><span class="line">#é…ç½®æ—¥å¿—ï¼Œæˆ‘ä»¬æ‰€ç”¨çš„sqlç°åœ¨æ˜¯ä¸å¯è§çš„ï¼Œæˆ‘ä»¬å¸Œæœ›çŸ¥é“ä»–æ˜¯æ€ä¹ˆæ‰§è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»è¦æŸ¥çœ‹æ—¥å¿—ï¼</span><br><span class="line">mybatis-plus:</span><br><span class="line">  global-config:</span><br><span class="line">    db-config:</span><br><span class="line">      logic-delete-field: deleted # å…¨å±€é€»è¾‘åˆ é™¤çš„å®ä½“å­—æ®µå(since <span class="number">3.3</span><span class="number">.0</span>,é…ç½®åå¯ä»¥å¿½ç•¥ä¸é…ç½®æ­¥éª¤<span class="number">2</span>)</span><br><span class="line">      logic-delete-value: <span class="number">1</span> # é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º <span class="number">1</span>)</span><br><span class="line">      logic-not-delete-value: <span class="number">0</span> # é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º <span class="number">0</span>)</span><br><span class="line">  configuration:</span><br><span class="line">    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl</span><br></pre></td></tr></table></figure><p>æ·»åŠ å®Œåç‚¹å‡»åº”ç”¨</p><h3 id="ä¸€é”®ç”Ÿæˆ"><a class="markdownIt-Anchor" href="#ä¸€é”®ç”Ÿæˆ"></a> ä¸€é”®ç”Ÿæˆ</h3><p>é€‰æ‹©<code>æ•°æ®åº“è¡¨</code>å³å‡»é€‰æ‹©<code>EasyCode</code>é€‰æ‹©ç¬¬ä¸€ä¸ª</p><p>æ³¨æ„çœ‹,ç›®å‰å¯ä»¥çœ‹åˆ°æˆ‘é¡¹ç›®å·¦å³ç›®å½•é‡Œé¢å¹¶æ²¡æœ‰ä»€ä¹ˆä»£ç ~</p><p><img src="https://unpkg.com/serms-assets@1.0.23/imgs/image-20220504093031339.png" alt="" /></p><p>é€‰æ‹©é¡¹ç›®å·¥ç¨‹æ¨¡å—,é€‰æ‹©æ¨¡å—å¯¹åº”çš„åŒ…,é€‰æ‹©ä½ åˆ›å»ºå¥½çš„ç»„å</p><p>é€‰æ‹©å•è¡¨,é€‰æ‹©å•è¡¨,ç¬¬ä¸€æ¬¡ä½¿ç”¨æ¨¡æ¿ä¸è¦å¤šè¡¨!!!</p><p>å•è¡¨æ„å»ºå…¨é€‰æ‰€æœ‰é…ç½®,ä¾§é¢æŒ‰ç…§æˆ‘é€‰çš„æ¥é€‰å°±è¡Œ,ä¸‹é¢æˆ‘ä¼šè®²è§£,å› ä¸ºè¿™é‡Œæœ‰ Bug</p><p><img src="https://unpkg.com/serms-assets@1.0.23/imgs/image-20220504093152583.png" alt="" /></p><p>ç‚¹å‡»ç¡®å®šä¹‹åå¯ä»¥çœ‹åˆ°æˆ‘å·¦ä¾§é¡¹ç›®ç›®å½•ä»£ç å·²ç»ç”Ÿæˆå®Œæ¯•äº†~</p><p>æ¥ä¸‹æ¥å¦‚æœä½ æƒ³å¤šè¡¨åˆ›å»ºå°±å¯ä»¥è¿™æ ·é€‰æ‹©,ä¸éœ€è¦åœ¨é€‰æ‹©<span class='p blue'>applicationYAML&interceptorç±»&Rç±»&handleré…ç½®ç±»</span>äº†</p><p><img src="https://unpkg.com/serms-assets@1.0.23/imgs/image-20220504094428113.png" alt="" /></p><h3 id="é…ç½®"><a class="markdownIt-Anchor" href="#é…ç½®"></a> é…ç½®</h3><p>å› ä¸ºæœ¬äººæŠ€æœ¯æœ‰é™,æœ‰äº›åœ°æ–¹è¿˜æ˜¯ä¼šæœ‰ä¸€ç‚¹å° Bug</p><p>å¦‚ä¸‹å›¾æ‰€ç¤º:åœ¨ç”Ÿæˆçš„æ–‡ä»¶é‡Œé¢ä¼šå‘ç°æœ‰ handler å¤„ç†ç±» interceptor æ‹¦æˆªå™¨ util å·¥å…·ç±»éƒ½ç›¸åº”çš„çˆ†çº¢äº†~</p><p><img src="https://unpkg.com/serms-assets@1.0.23/imgs/image-20220504094957874.png" alt="" /></p><p>ä¸è¦æ…Œ,è¿™é‡Œçš„åŸå› å¾ˆç®€å•,è§£å†³æ–¹æ¡ˆä¹Ÿå°±æ›´å¾ˆç®€å•äº†</p><p>æŠŠæ–‡ä»¶åä¿®æ”¹æ›´ class ç±»åä¸€ç›´å°±æ¬§å…‹äº†</p><p>ç„¶åä¿®æ”¹ applicationYml æ–‡ä»¶,æŠŠä½ æ•°æ®åº“åä¿®æ”¹ä¸€ä¸‹,è´¦å·å¯†ç ä¿®æ”¹ä¸€ä¸‹,å°±å¯ä»¥è·‘äº†~</p><p><img src="https://unpkg.com/serms-assets@1.0.23/imgs/image-20220504095443091.png" alt="" /></p><h3 id="å»-man-è®¿é—®ä¸€ä¸‹~"><a class="markdownIt-Anchor" href="#å»-man-è®¿é—®ä¸€ä¸‹~"></a> å» man è®¿é—®ä¸€ä¸‹~</h3><p>åˆ†é¡µæŸ¥è¯¢ä¸€ä¸‹ 200OK æ²¡é—®é¢˜,</p><p><img src="https://unpkg.com/serms-assets@1.0.23/imgs/image-20220504095959606.png" alt="" /></p><p>å…¶ä½™çš„è‡ªå·±æµ‹è¯•,è¿™é‡Œå°±ä¸å¤šåšé˜è¿°äº†~</p><div class="tip warning"><p>æ³¨æ„:Bug!!!</p><p>åœ¨é¡¹ç›®ç¬¬ä¸€æ¬¡ä½¿ç”¨æ¨¡æ¿çš„æ—¶å€™å»ºè®®å…ˆå•è¡¨ç”Ÿæˆ,å› ä¸º<span class='p blue'>applicationYAML&amp;interceptorç±»&amp;Rç±»&amp;handleré…ç½®ç±»</span>éƒ½åªéœ€ç”Ÿæˆä¸€æ¬¡,å¦‚æœä½ å¤šè¡¨ä¸€æ¬¡æ€§å…¨éƒ¨å…¨é€‰,å°±ä¼šåˆ›å»ºå¤šä¸ª<span class='p blue'>applicationYAML&amp;interceptorç±»&amp;Rç±»&amp;handleré…ç½®ç±»</span>,åˆ°æ—¶å€™å‡ºäº‹å°±åˆ«è¯´æˆ‘æ²¡æé†’~</p><p>å¦‚æœ‰æ›´å¥½çš„å»ºè®®,å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€åé¦ˆ~</p></div>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
          <category> æ’ä»¶ </category>
          
          <category> EasyCodeä»£ç æ¨¡æ¿ç”Ÿæˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBootä»£ç æ¨¡æ¿ </tag>
            
            <tag> MybatisPlusä»£ç æ¨¡æ¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›æº¯ç»å…¸é—®é¢˜</title>
      <link href="/posts/bcbdb63a/"/>
      <url>/posts/bcbdb63a/</url>
      
        <content type="html"><![CDATA[<h2 id="é€’å½’çš„æ¦‚å¿µ"><a class="markdownIt-Anchor" href="#é€’å½’çš„æ¦‚å¿µ"></a> é€’å½’çš„æ¦‚å¿µ</h2><p>ç®€å•çš„è¯´ï¼šé€’å½’å°±æ˜¯æ–¹æ³•<span class='p red'>è°ƒç”¨è‡ªå·±</span>,æ¯æ¬¡è°ƒç”¨<span class='p red'>ä¼ å…¥ä¸åŒçš„å˜é‡</span>ã€‚é€’å½’æœ‰åŠ©äºç¼–ç¨‹è€…è§£å†³å¤æ‚çš„é—®é¢˜ï¼ŒåŒæ—¶å¯ä»¥è®©ä»£ç å˜å¾—ç®€æ´</p><hr /><h2 id="ä¸¤ä¸ªæ¡ˆåˆ—è¯´æ˜é€’å½’çš„è°ƒç”¨æœºåˆ¶"><a class="markdownIt-Anchor" href="#ä¸¤ä¸ªæ¡ˆåˆ—è¯´æ˜é€’å½’çš„è°ƒç”¨æœºåˆ¶"></a> ä¸¤ä¸ªæ¡ˆåˆ—è¯´æ˜é€’å½’çš„è°ƒç”¨æœºåˆ¶</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        test(<span class="number">4</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n&gt;<span class="number">2</span>)&#123;</span><br><span class="line">            test(n-<span class="number">1</span>);</span><br><span class="line">        &#125;<span class="comment">//else&#123;åŠ ä¸Šelseè¾“å‡ºç»“æœåˆæ˜¯æ€ä¹ˆæ ·å‘¢ï¼</span></span><br><span class="line">        System.out.println(<span class="string">&quot;n=&quot;</span>+n);</span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å»ºè®®å…ˆè‡ªå·±åˆ†æä¸€ä¸‹è¿™ä¸ªè¿è¡Œç»“æœæ˜¯å•¥ï¼</p><p>ç„¶ååœ¨ideaé‡Œé¢ç¼–è¯‘è¿è¡Œçœ‹ä¸€ä¸‹ç»“æœï¼Œæ˜¯ä¸æ˜¯å’Œä½ æƒ³çš„ä¸€æ ·ã€‚</p><p>é€’å½’è°ƒç”¨çš„è§„åˆ™ï¼š</p><p>1.å½“ç¨‹åºæ‰§è¡Œåˆ°ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå°±ä¼šå¼€è¾Ÿä¸€ä¸ªç‹¬ç«‹çš„ç©ºé—´(æ ˆ )</p><p>2.å°±åƒä¸Šé¢çš„æ¡ˆä¾‹ï¼Œå½“æ‰§è¡Œtest(4)æ—¶ï¼Œå› ä¸ºn&gt;2,æ‰€ä»¥å¼€å§‹æ‰§è¡Œtest(3)ï¼Œæ³¨æ„æ­¤æ—¶test(4)æ˜¯æœªæ‰§è¡Œå®Œçš„ï¼Œç›´åˆ°test(2),test(3)å®Œæ¯•å‡ºæ ˆä¹‹åï¼Œæœ€åæ‰æ˜¯test(4)</p><p>3.æ¯ä¸ªç©ºé—´çš„æ•°æ®ï¼ˆå±€éƒ¨å˜é‡ï¼Œæ˜¯ç‹¬ç«‹çš„ï¼‰</p><p>å†æ¥ä¸€ä¸ªä¾‹å­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é˜¶ä¹˜é—®é¢˜</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo2</span>&#123;</span><br><span class="line">    puclic <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        System.out.println(fun(<span class="number">4</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">fun</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> n*fun(n-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr /><h2 id="é€’å½’éœ€è¦éµå®ˆçš„é‡è¦è§„åˆ™"><a class="markdownIt-Anchor" href="#é€’å½’éœ€è¦éµå®ˆçš„é‡è¦è§„åˆ™"></a> é€’å½’éœ€è¦éµå®ˆçš„é‡è¦è§„åˆ™</h2><p>1ï¼‰æ‰§è¡Œä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°çš„å—ä¿æŠ¤çš„ç‹¬ç«‹ç©ºé—´ï¼ˆæ ˆç©ºé—´ï¼‰</p><p>2ï¼‰æ–¹æ³•çš„å±€éƒ¨å˜é‡æ—¶ç‹¬ç«‹çš„ï¼Œä¸ä¼šç›¸äº’å½±å“</p><p>3ï¼‰å¦‚æœæ–¹æ³•ä¸­åº”ç”¨çš„æ˜¯å¼•ç”¨ç±»å‹çš„å˜é‡ï¼ˆæ¯”å¦‚æ•°ç»„ï¼‰ï¼Œå°±ä¼šå…±äº«è¯¥å¼•ç”¨ç±»å‹çš„æ•°æ®</p><p>3ï¼‰é€’å½’å¿…é¡»å‘é€€å‡ºé€’å½’çš„æ¡ä»¶é€¼è¿‘ï¼Œå¦åˆ™å°±æ˜¯æ— é™é€’å½’ï¼Œæ­»é¾Ÿï¼</p><p>4ï¼‰å½“ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œæˆ–è€…é‡åˆ°returnï¼Œå°±ä¼šè¿”å›ï¼Œéµå®ˆè°è°ƒç”¨ï¼Œå°±å°†ç»“æœè¿”å›ç»™è°ï¼ŒåŒæ—¶å½“æ–¹æ³•æ‰§è¡Œå®Œæ¯•æˆ–è€…è¿”å›æ—¶ï¼Œè¯¥æ–¹æ³•ä¹Ÿå°±æ‰§è¡Œå®Œæ¯•ã€‚</p><h2 id="ç»å…¸è¿·å®«é—®é¢˜"><a class="markdownIt-Anchor" href="#ç»å…¸è¿·å®«é—®é¢˜"></a> ç»å…¸è¿·å®«é—®é¢˜</h2><span class='p center small'>é—®é¢˜ï¼šå°çƒä»åæ ‡ä½ç½®ä¸ºï¼ˆ1ï¼Œ1ï¼‰çš„ç©ºç™½ä½ç½®ç§»åŠ¨åˆ°ï¼ˆ6ï¼Œ5ï¼‰çš„æœ€çŸ­è·¯å¾„æ€ä¹ˆç”¨å›æº¯çš„æ€æƒ³æ±‚å‡ºæ¥ï¼ˆæ³¨ï¼šå·¦ä¸Šè§’çš„åæ ‡æ˜¯(0ï¼Œ0))</span><p><img src="https://img-blog.csdnimg.cn/20210513162036833.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjMyNDE0,size_16,color_FFFFFF,t_70" alt="" /></p><p>æç¤ºï¼š</p><ul><li>å°çƒå¾—åˆ°çš„è·¯å¾„ï¼Œå’Œç¨‹åºå‘˜è®¾ç½®çš„æ‰¾è·¯ç­–ç•¥æœ‰å…³å³:æ‰¾è·¯çš„ä¸Šä¸‹å·¦å³çš„é¡ºåºç›¸å…³</li><li>åœ¨å¾—åˆ°å°çƒè·¯å¾„æ—¶ï¼Œå¯ä»¥å…ˆä½¿ç”¨(ä¸‹å³ä¸Šå·¦)ï¼Œå†æ”¹æˆ(ä¸Šå³ä¸‹å·¦)ï¼Œçœ‹çœ‹è·¯å¾„æ˜¯ä¸æ˜¯æœ‰å˜åŒ–</li><li>æµ‹è¯•å›æ½®ç°è±¡</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/27 19:52</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MiGong</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//å…ˆåˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„,æ¨¡æ‹Ÿè¿·å®«</span></span><br><span class="line">        <span class="comment">//åœ°å›¾</span></span><br><span class="line">        <span class="type">int</span>[][] map = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">8</span>][<span class="number">7</span>];</span><br><span class="line">        <span class="comment">//ä½¿ç”¨1è¡¨ç¤ºå¢™</span></span><br><span class="line">        <span class="comment">//ä¸Šä¸‹å…¨éƒ¨ç½®ä¸º1</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line">            map[<span class="number">0</span>][i] = <span class="number">1</span>;</span><br><span class="line">            map[<span class="number">7</span>][i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å·¦å³å…¨éƒ¨ç½®ä¸º1</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">            map[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">            map[i][<span class="number">6</span>] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è®¾ç½®æŒ¡æ¿,1è¡¨ç¤º</span></span><br><span class="line">        map[<span class="number">3</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        map[<span class="number">3</span>][<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">        map[<span class="number">1</span>][<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">        map[<span class="number">2</span>][<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¾“å‡ºåœ°å›¾</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">7</span>; j++) &#123;</span><br><span class="line">                System.out.print(map[i][j] + <span class="string">&quot;  &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä½¿ç”¨é€’å½’å›æº¯ç»™å°çƒæ‰¾è·¯</span></span><br><span class="line">        setWay(map, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="comment">//è¾“å‡ºæ–°çš„åœ°å›¾,å°çƒèµ°è¿‡,å¹¶æ ‡è¯†è¿‡çš„é€’å½’</span></span><br><span class="line">        System.out.println(<span class="string">&quot;è¾“å‡ºæ–°çš„åœ°å›¾,å°çƒèµ°è¿‡,å¹¶æ ‡è¯†è¿‡çš„é€’å½’&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">7</span>; j++) &#123;</span><br><span class="line">                System.out.print(map[i][j] + <span class="string">&quot;  &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä½¿ç”¨é€’å½’å›æº¯æ¥ç»™å°çƒæ‰¾è·¯</span></span><br><span class="line">    <span class="comment">//1. mapè¡¨ç¤ºåœ°å›¾</span></span><br><span class="line">    <span class="comment">//2. i,jè¡¨ç¤ºä»åœ°å›¾çš„å“ªä¸ªä½ç½®å¼€å§‹å‡ºå‘(1,1)</span></span><br><span class="line">    <span class="comment">//3. å¦‚æœå°çƒèƒ½åˆ°map[6][5]ä½ç½®,åˆ™è¯´æ˜é€šè·¯æ‰¾åˆ°</span></span><br><span class="line">    <span class="comment">//4. çº¦å®š,å½“map[i][j] ä¸º0è¡¨ç¤ºè¯¥ç‚¹æ²¡æœ‰èµ°è¿‡,å½“ä¸º1è¡¨ç¤ºå¢™,2è¡¨ç¤ºé€šè·¯å¯ä»¥èµ°,3è¡¨ç¤ºè¯¥ç‚¹èµ°è¿‡ä½†æ˜¯ä¸é€š</span></span><br><span class="line">    <span class="comment">//5. åœ¨èµ°è¿·å®«æ—¶,éœ€è¦ç¡®å®šä¸€ä¸ªç­–ç•¥(æ–¹æ³•) ä¸‹-&gt;å³-&gt;ä¸Š-&gt;å·¦,å¦‚æœè¯¥ç‚¹èµ°ä¸é€š,åœ¨å›æº¯</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¯´æ˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> map è¡¨ç¤ºåœ°å›¾</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> i   ä»å“ªä¸ªä½ç½®å¼€å§‹æ‰¾è·¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> j</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¦‚æœæ‰¾åˆ°é€šè·¯, å°±è¿”å›treu, å¦åˆ™è¿”å›false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">setWay</span><span class="params">(<span class="type">int</span>[][] map, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (map[<span class="number">6</span>][<span class="number">5</span>] == <span class="number">2</span>) &#123;    <span class="comment">//é€šè·¯å·²æ‰¾åˆ°æ¬§å…‹</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (map[i][j] == <span class="number">0</span>) &#123;    <span class="comment">//å¦‚æœå½“å‰è¿™ä¸ªç‚¹è¿˜æ²¡æœ‰èµ°è¿‡</span></span><br><span class="line">                <span class="comment">//æŒ‰ç…§ç­–ç•¥  ä¸‹-&gt;å³-&gt;ä¸Š-&gt;å·¦,å¦‚æœè¯¥ç‚¹èµ°ä¸é€š,åœ¨å›æº¯</span></span><br><span class="line">                map[i][j] = <span class="number">2</span>;  <span class="comment">//å‡å®šè¯¥ç‚¹æ—¶å¯ä»¥èµ°é€š</span></span><br><span class="line">                <span class="keyword">if</span> (setWay(map, i + <span class="number">1</span>, j)) &#123;  <span class="comment">//å‘ä¸‹èµ°</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (setWay(map, i, j + <span class="number">1</span>)) &#123;    <span class="comment">//å‘å³èµ°</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (setWay(map, i - <span class="number">1</span>, j)) &#123;   <span class="comment">//å‘ä¸Šèµ°</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (setWay(map, i, j - <span class="number">1</span>)) &#123;  <span class="comment">//å‘å·¦èµ°</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//è¯´æ˜è¯¥ç‚¹æ˜¯èµ°ä¸é€š,æ˜¯æ­»è·¯</span></span><br><span class="line">                    map[i][j] = <span class="number">3</span>;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">//å¦‚æœmap[i][j] !=0,å¯èƒ½æ˜¯1,2,3</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
          <category> é€’å½’ </category>
          
          <category> ç®—æ³• </category>
          
          <category> å›æº¯ </category>
          
          <category> ç®—æ³•é¢è¯•é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å“”å“”å›¾ç‰‡é—®é¢˜</title>
      <link href="/posts/f605ecd9/"/>
      <url>/posts/f605ecd9/</url>
      
        <content type="html"><![CDATA[<div class="tip home"><p>æœ¬æ–‡æ ¹æ®æ´ªå“¥å“”å“”æ•™ç¨‹äºŒæ”¹~è§£å†³å“”å“”å‘é€å›¾ç‰‡é—®é¢˜</p></div><table><thead><tr><th style="text-align:center">ç›¸å…³æ•™ç¨‹</th><th style="text-align:center">æ•™ç¨‹åœ°å€</th></tr></thead><tbody><tr><td style="text-align:center">æ´ªå“¥å“”å“”æ•™ç¨‹</td><td style="text-align:center"><div class="tag link"><a class="link-card" title="æ´ªå“¥å“”å“”æ•™ç¨‹" href="https://blog.zhheo.com/p/a6947667.html"><div class="left"><img src="https://unpkg.com/akilar-friends@latest/avatar/blog.zhheo.com.jpg"/></div><div class="right"><p class="text">æ´ªå“¥å“”å“”æ•™ç¨‹</p><p class="url">https://blog.zhheo.com/p/a6947667.html</p></div></a></div></td></tr><tr><td style="text-align:center">ã€Œå“”å“”ç‚¹å•¥ã€å¾®ä¿¡å…¬ä¼—å·</td><td style="text-align:center"><a href="https://immmmm.com/bb-by-wechat-pro/">ã€Œå“”å“”ç‚¹å•¥ã€å¾®ä¿¡å…¬ä¼—å· 2.0</a></td></tr></tbody></table><details class="folding-tag" yellow><summary> é—®é¢˜è¯´æ˜ </summary>              <div class='content'>              <p><img src="https://unpkg.com/serms-assets@1.0.21/bufferfly/image-20220419142846050.png" alt="" /></p><p><img src="https://unpkg.com/serms-assets@1.0.21/bufferfly/image-20220419142902156.png" alt="" /></p><p><img src="https://unpkg.com/serms-assets@1.0.21/bufferfly/image-20220419142911862.png" alt="" /></p><div class="tip "><p>å¯ä»¥çœ‹åˆ°é—®é¢˜å¾ˆæ˜æ˜¾</p><ol><li>å›¾ç‰‡å¤§å°</li><li>å›¾ç‰‡ä¸Šä¸‹æœ‰å¤šä½™å¾—ä»£ç (æ´ªå“¥ js å¾—é—®é¢˜)</li><li>æ— æ³•é¢„è§ˆ</li></ol></div>              </div>            </details><h2 id="ä¿®æ”¹æ­¥éª¤"><a class="markdownIt-Anchor" href="#ä¿®æ”¹æ­¥éª¤"></a> ä¿®æ”¹æ­¥éª¤</h2><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">æºç ä¿®æ”¹æ–¹å¼</button></li><li class="tab"><button type="button" data-href="#test1-2">cdné“¾æ¥æ›¿æ¢(æ¨è)</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p><img src="https://unpkg.com/serms-assets@1.0.21/bufferfly/image-20220419145803095.png" alt="" /></p><p>å°†æ´ªå“¥ heobbe.js æ–‡ä»¶æ‹‰å–åˆ°åšå®¢å­˜æ”¾ js å¾—ç›®å½•ä¸‹</p><p>ä¿®æ”¹å…¶ä¸­å¾—<code>urlToLink</code>æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">urlToLink</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åˆ¤æ–­æ˜¯å¦æ˜¯å›¾ç‰‡&quot;</span>, str.<span class="title function_">indexOf</span>(<span class="string">&quot;http&quot;</span>));</span><br><span class="line">  <span class="keyword">if</span> (str.<span class="title function_">indexOf</span>(<span class="string">&quot;http&quot;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> re_forpic =</span><br><span class="line">      <span class="regexp">/\bhttps?:[^:&lt;&gt;&quot;]*\/([^:&lt;&gt;&quot;]*)(\.(jpeg)|(png)|(jpg)|(webp))(!blogimg)?/g</span>;</span><br><span class="line">    <span class="keyword">var</span> a1;</span><br><span class="line">    <span class="keyword">var</span> a2;</span><br><span class="line">    str.<span class="title function_">replace</span>(re_forpic, <span class="keyword">function</span> (<span class="params">imgurl</span>) &#123;</span><br><span class="line">      a1 =</span><br><span class="line">        <span class="string">&quot;&lt;a href=&quot;</span> +</span><br><span class="line">        imgurl +</span><br><span class="line">        <span class="string">&quot; data-fancybox=&#x27;gallery&#x27; data-caption=&#x27;&#x27; data-thumb=&quot;</span> +</span><br><span class="line">        imgurl +</span><br><span class="line">        <span class="string">&quot;&gt;&quot;</span>;</span><br><span class="line">      a2 = <span class="string">&quot;&lt;img src=&quot;</span> + imgurl + <span class="string">&quot;&gt;&lt;/img&gt;&lt;/a&gt;&quot;</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    str = a1 + a2;</span><br><span class="line">    <span class="keyword">return</span> a1 + a2;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> re = <span class="regexp">/\bhttps?:\/\/(?!\S+(?:jpe?g|png|bmp|gif|webp|gif))\S+/g</span>;</span><br><span class="line"></span><br><span class="line">    str = str.<span class="title function_">replace</span>(re, <span class="keyword">function</span> (<span class="params">website</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        <span class="string">&quot; &lt;a href=&#x27;&quot;</span> + website + <span class="string">&quot;&#x27;rel=&#x27;noopener&#x27; target=&#x27;_blank&#x27;&gt;â†˜é“¾æ¥â†™&lt;/a&gt;&quot;</span></span><br><span class="line">      );</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å®Œåå…¨æ–‡(å¯ç›´æ¥å¤åˆ¶è¿™ä¸ªç²˜è´´æ›¿æ¢ heobber.js)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// if (document.querySelector(&#x27;#bber-loading&#x27;)) &#123;</span></span><br><span class="line"><span class="comment">//   var loading_pic = document.getElementById(&#x27;bber-loading&#x27;);</span></span><br><span class="line"><span class="comment">//   loading_pic.innerHTML = &#x27;&lt;span id=&quot;moments_loading&quot;&gt;&lt;i class=&quot;fa fa-spinner fa-spin&quot;&gt;&lt;/i&gt;&lt;/span&gt;&#x27;;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getbbdata</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> bbsurl = bbapiurl;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> httpRequest = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>(); <span class="comment">//ç¬¬ä¸€æ­¥ï¼šå»ºç«‹æ‰€éœ€çš„å¯¹è±¡</span></span><br><span class="line">  httpRequest.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, bbsurl, <span class="literal">true</span>); <span class="comment">//ç¬¬äºŒæ­¥ï¼šæ‰“å¼€è¿æ¥  å°†è¯·æ±‚å‚æ•°å†™åœ¨urlä¸­  ps:&quot;./Ptest.php?name=test&amp;nameone=testone&quot;</span></span><br><span class="line">  httpRequest.<span class="title function_">send</span>(); <span class="comment">//ç¬¬ä¸‰æ­¥ï¼šå‘é€è¯·æ±‚  å°†è¯·æ±‚å‚æ•°å†™åœ¨URLä¸­</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * è·å–æ•°æ®åçš„å¤„ç†ç¨‹åº</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  httpRequest.<span class="property">onreadystatechange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (httpRequest.<span class="property">readyState</span> == <span class="number">4</span> &amp;&amp; httpRequest.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> json = httpRequest.<span class="property">responseText</span>; <span class="comment">//è·å–åˆ°jsonå­—ç¬¦ä¸²ï¼Œè¿˜éœ€è§£æ</span></span><br><span class="line">      <span class="keyword">var</span> obj = <span class="built_in">eval</span>(<span class="string">&quot;(&quot;</span> + json + <span class="string">&quot;)&quot;</span>);</span><br><span class="line">      <span class="comment">// console.log(obj.data)</span></span><br><span class="line">      <span class="keyword">const</span> bbArray = obj.<span class="property">data</span>.<span class="title function_">map</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="attr">date</span>: e.<span class="property">date</span>,</span><br><span class="line">          <span class="attr">content</span>: e.<span class="property">content</span>,</span><br><span class="line">          <span class="attr">from</span>: e.<span class="property">from</span>,</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">// console.log(fundsArray)</span></span><br><span class="line">      saveToLocal.<span class="title function_">set</span>(<span class="string">&quot;zhheo-bb&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(bbArray), <span class="number">5</span> / (<span class="number">60</span> * <span class="number">24</span>));</span><br><span class="line">      <span class="keyword">const</span> data = saveToLocal.<span class="title function_">get</span>(<span class="string">&quot;zhheo-bb&quot;</span>);</span><br><span class="line">      <span class="title function_">generateBBHtml</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(data));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">generateBBHtml</span> = array =&gt; &#123;</span><br><span class="line">  <span class="keyword">var</span> $dom = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#bber&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> result = <span class="string">&#x27;&lt;section class=&quot;timeline page-1&quot;&gt;&lt;ul&gt;&lt;div class=&quot;list&quot;&gt;&#x27;</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(array);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (array.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; array.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">var</span> from_icon = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      <span class="keyword">if</span> (array[i].<span class="property">from</span>.<span class="title function_">indexOf</span>(<span class="string">&quot;iPhone&quot;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">        from_icon = <span class="string">&#x27;&lt;i class=&quot;fas fa-mobile-alt&quot;&gt;&lt;/i&gt;&#x27;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (array[i].<span class="property">from</span>.<span class="title function_">indexOf</span>(<span class="string">&quot;iPad&quot;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">        from_icon = <span class="string">&#x27;&lt;i class=&quot;fas fa-tablet-alt&quot;&gt;&lt;/i&gt;&#x27;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (array[i].<span class="property">from</span>.<span class="title function_">indexOf</span>(<span class="string">&quot;Mac&quot;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">        from_icon = <span class="string">&#x27;&lt;i class=&quot;fas fa-laptop&quot;&gt;&lt;/i&gt;&#x27;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (array[i].<span class="property">from</span>.<span class="title function_">indexOf</span>(<span class="string">&quot;å¾®ä¿¡&quot;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">        from_icon = <span class="string">&#x27;&lt;i class=&quot;fab fa-weixin&quot; style=&quot;font-size: 0.6rem&quot;&gt;&lt;/i&gt;&#x27;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        from_icon = <span class="string">&#x27;&lt;i class=&quot;fas fa-tools&quot;&gt;&lt;/i&gt;&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>(array[i].<span class="property">date</span>);</span><br><span class="line">      <span class="keyword">var</span> dtime = array[i].<span class="property">date</span>,</span><br><span class="line">        data =</span><br><span class="line">          d.<span class="title function_">getFullYear</span>() +</span><br><span class="line">          <span class="string">&quot;/&quot;</span> +</span><br><span class="line">          (d.<span class="title function_">getMonth</span>() + <span class="number">1</span>) +</span><br><span class="line">          <span class="string">&quot;/&quot;</span> +</span><br><span class="line">          d.<span class="title function_">getDate</span>() +</span><br><span class="line">          <span class="string">&quot; &quot;</span> +</span><br><span class="line">          d.<span class="title function_">getHours</span>() +</span><br><span class="line">          <span class="string">&quot;:&quot;</span> +</span><br><span class="line">          d.<span class="title function_">getMinutes</span>() +</span><br><span class="line">          <span class="string">&quot;:&quot;</span> +</span><br><span class="line">          d.<span class="title function_">getSeconds</span>();</span><br><span class="line">      <span class="keyword">var</span> dataCont =</span><br><span class="line">        <span class="string">&#x27;&lt;p class=&quot;datacont&quot;&gt;&#x27;</span> + <span class="title function_">urlToLink</span>(array[i].<span class="property">content</span>) + <span class="string">&quot;&lt;/p&gt;&quot;</span>;</span><br><span class="line">      <span class="keyword">var</span> dataTime = <span class="string">&#x27;&lt;p class=&quot;datatime&quot;&gt;&#x27;</span> + data + <span class="string">&quot;&lt;/p&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line">      result +=</span><br><span class="line">        <span class="string">`&lt;li class=&quot;item&quot;&gt;&lt;div&gt;`</span> +</span><br><span class="line">        dataTime +</span><br><span class="line">        dataCont +</span><br><span class="line">        <span class="string">`&lt;/p&gt;&lt;p class=&quot;datafrom&quot;&gt;&lt;small&gt;`</span> +</span><br><span class="line">        from_icon +</span><br><span class="line">        array[i].<span class="property">from</span> +</span><br><span class="line">        <span class="string">`&lt;/small&gt;&lt;/p&gt;&lt;/div&gt;&lt;/li&gt;`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result += <span class="string">&#x27;!&#123;_p(&quot;aside.card_funds.zero&quot;)&#125;&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  result += <span class="string">&quot;&lt;/div&gt;&lt;/ul&gt;&lt;/section&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> $dom = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#bber&quot;</span>);</span><br><span class="line"></span><br><span class="line">  $dom.<span class="property">innerHTML</span> = result;</span><br><span class="line">  <span class="title class_">Lately</span>(&#123;</span><br><span class="line">    <span class="attr">target</span>: <span class="string">&quot;#bber .datatime&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">lazyLoadInstance</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">lazyLoadInstance</span>.<span class="title function_">update</span>();</span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">pjax</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">pjax</span>.<span class="title function_">refresh</span>($dom);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#bber&quot;</span>)) &#123;</span><br><span class="line">  <span class="title function_">getbbdata</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">urlToLink</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åˆ¤æ–­æ˜¯å¦æ˜¯å›¾ç‰‡&quot;</span>, str.<span class="title function_">indexOf</span>(<span class="string">&quot;http&quot;</span>));</span><br><span class="line">  <span class="keyword">if</span> (str.<span class="title function_">indexOf</span>(<span class="string">&quot;http&quot;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> re_forpic =</span><br><span class="line">      <span class="regexp">/\bhttps?:[^:&lt;&gt;&quot;]*\/([^:&lt;&gt;&quot;]*)(\.(jpeg)|(png)|(jpg)|(webp))(!blogimg)?/g</span>;</span><br><span class="line">    <span class="keyword">var</span> a1;</span><br><span class="line">    <span class="keyword">var</span> a2;</span><br><span class="line">    str.<span class="title function_">replace</span>(re_forpic, <span class="keyword">function</span> (<span class="params">imgurl</span>) &#123;</span><br><span class="line">      a1 =</span><br><span class="line">        <span class="string">&quot;&lt;a href=&quot;</span> +</span><br><span class="line">        imgurl +</span><br><span class="line">        <span class="string">&quot; data-fancybox=&#x27;gallery&#x27; data-caption=&#x27;&#x27; data-thumb=&quot;</span> +</span><br><span class="line">        imgurl +</span><br><span class="line">        <span class="string">&quot;&gt;&quot;</span>;</span><br><span class="line">      a2 = <span class="string">&quot;&lt;img src=&quot;</span> + imgurl + <span class="string">&quot;&gt;&lt;/img&gt;&lt;/a&gt;&quot;</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    str = a1 + a2;</span><br><span class="line">    <span class="keyword">return</span> a1 + a2;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> re = <span class="regexp">/\bhttps?:\/\/(?!\S+(?:jpe?g|png|bmp|gif|webp|gif))\S+/g</span>;</span><br><span class="line"></span><br><span class="line">    str = str.<span class="title function_">replace</span>(re, <span class="keyword">function</span> (<span class="params">website</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        <span class="string">&quot; &lt;a href=&#x27;&quot;</span> + website + <span class="string">&quot;&#x27;rel=&#x27;noopener&#x27; target=&#x27;_blank&#x27;&gt;â†˜é“¾æ¥â†™&lt;/a&gt;&quot;</span></span><br><span class="line">      );</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">MIT License - http://www.opensource.org/licenses/mit-license.php</span></span><br><span class="line"><span class="comment">For usage and examples, visit:</span></span><br><span class="line"><span class="comment">https://tokinx.github.io/lately/</span></span><br><span class="line"><span class="comment">Copyright (c) 2017, Biji.IO</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> $jscomp = $jscomp || &#123;&#125;;</span><br><span class="line">$jscomp.<span class="property">scope</span> = &#123;&#125;;</span><br><span class="line">$jscomp.<span class="property">arrayIteratorImpl</span> = <span class="keyword">function</span> (<span class="params">b</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> g = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> g &lt; b.<span class="property">length</span></span><br><span class="line">      ? &#123;</span><br><span class="line">          <span class="attr">done</span>: !<span class="number">1</span>,</span><br><span class="line">          <span class="attr">value</span>: b[g++],</span><br><span class="line">        &#125;</span><br><span class="line">      : &#123;</span><br><span class="line">          <span class="attr">done</span>: !<span class="number">0</span>,</span><br><span class="line">        &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">$jscomp.<span class="property">arrayIterator</span> = <span class="keyword">function</span> (<span class="params">b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">next</span>: $jscomp.<span class="title function_">arrayIteratorImpl</span>(b),</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">$jscomp.<span class="property">makeIterator</span> = <span class="keyword">function</span> (<span class="params">b</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> g = <span class="string">&quot;undefined&quot;</span> != <span class="keyword">typeof</span> <span class="title class_">Symbol</span> &amp;&amp; <span class="title class_">Symbol</span>.<span class="property">iterator</span> &amp;&amp; b[<span class="title class_">Symbol</span>.<span class="property">iterator</span>];</span><br><span class="line">  <span class="keyword">return</span> g ? g.<span class="title function_">call</span>(b) : $jscomp.<span class="title function_">arrayIterator</span>(b);</span><br><span class="line">&#125;;</span><br><span class="line">(<span class="keyword">function</span> (<span class="params">b, g</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> p = <span class="keyword">function</span> (<span class="params">h</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> d = h.<span class="property">lang</span> || &#123;</span><br><span class="line">      <span class="attr">second</span>: <span class="string">&quot;\u79d2&quot;</span>,</span><br><span class="line">      <span class="attr">minute</span>: <span class="string">&quot;\u5206\u949f&quot;</span>,</span><br><span class="line">      <span class="attr">hour</span>: <span class="string">&quot;\u5c0f\u65f6&quot;</span>,</span><br><span class="line">      <span class="attr">day</span>: <span class="string">&quot;\u5929&quot;</span>,</span><br><span class="line">      <span class="attr">month</span>: <span class="string">&quot;\u4e2a\u6708&quot;</span>,</span><br><span class="line">      <span class="attr">year</span>: <span class="string">&quot;\u5e74&quot;</span>,</span><br><span class="line">      <span class="attr">ago</span>: <span class="string">&quot;\u524d&quot;</span>,</span><br><span class="line">      <span class="attr">error</span>: <span class="string">&quot;NaN&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    h = $jscomp.<span class="title function_">makeIterator</span>(<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(h.<span class="property">target</span> || <span class="string">&quot;.time&quot;</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> c = h.<span class="title function_">next</span>(); !c.<span class="property">done</span>; c = h.<span class="title function_">next</span>()) &#123;</span><br><span class="line">      c = c.<span class="property">value</span>;</span><br><span class="line">      <span class="keyword">var</span> a = c.<span class="property">dateTime</span>;</span><br><span class="line">      <span class="keyword">var</span> e = c.<span class="property">title</span>,</span><br><span class="line">        f = c.<span class="property">innerHTML</span>;</span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        !a ||</span><br><span class="line">        <span class="built_in">isNaN</span>(</span><br><span class="line">          <span class="keyword">new</span> <span class="title class_">Date</span>(</span><br><span class="line">            (a = a.<span class="title function_">replace</span>(<span class="regexp">/(.*)[a-z](.*)\+(.*)/gi</span>, <span class="string">&quot;$1 $2&quot;</span>).<span class="title function_">replace</span>(<span class="regexp">/-/g</span>, <span class="string">&quot;/&quot;</span>))</span><br><span class="line">          )</span><br><span class="line">        )</span><br><span class="line">      )</span><br><span class="line">        <span class="keyword">if</span> (e &amp;&amp; !<span class="built_in">isNaN</span>(<span class="keyword">new</span> <span class="title class_">Date</span>((e = e.<span class="title function_">replace</span>(<span class="regexp">/-/g</span>, <span class="string">&quot;/&quot;</span>))))) a = e;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (f &amp;&amp; !<span class="built_in">isNaN</span>(<span class="keyword">new</span> <span class="title class_">Date</span>((f = f.<span class="title function_">replace</span>(<span class="regexp">/-/g</span>, <span class="string">&quot;/&quot;</span>))))) a = f;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">      c.<span class="property">title</span> = a;</span><br><span class="line">      a = <span class="keyword">new</span> <span class="title class_">Date</span>(a);</span><br><span class="line">      a = (<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>() - a.<span class="title function_">getTime</span>()) / <span class="number">1e3</span>;</span><br><span class="line">      e = a / <span class="number">60</span>;</span><br><span class="line">      f = e / <span class="number">60</span>;</span><br><span class="line">      <span class="keyword">var</span> k = f / <span class="number">24</span>,</span><br><span class="line">        l = k / <span class="number">30</span>,</span><br><span class="line">        m = l / <span class="number">12</span>;</span><br><span class="line">      c.<span class="property">innerHTML</span> =</span><br><span class="line">        (<span class="number">1</span> &lt;= m</span><br><span class="line">          ? <span class="title class_">Math</span>.<span class="title function_">floor</span>(m) + d.<span class="property">year</span></span><br><span class="line">          : <span class="number">1</span> &lt;= l</span><br><span class="line">          ? <span class="title class_">Math</span>.<span class="title function_">floor</span>(l) + d.<span class="property">month</span></span><br><span class="line">          : <span class="number">1</span> &lt;= k</span><br><span class="line">          ? <span class="title class_">Math</span>.<span class="title function_">floor</span>(k) + d.<span class="property">day</span></span><br><span class="line">          : <span class="number">1</span> &lt;= f</span><br><span class="line">          ? <span class="title class_">Math</span>.<span class="title function_">floor</span>(f) + d.<span class="property">hour</span></span><br><span class="line">          : <span class="number">1</span> &lt;= e</span><br><span class="line">          ? <span class="title class_">Math</span>.<span class="title function_">floor</span>(e) + d.<span class="property">minute</span></span><br><span class="line">          : <span class="number">1</span> &lt;= a</span><br><span class="line">          ? <span class="title class_">Math</span>.<span class="title function_">floor</span>(a) + d.<span class="property">second</span></span><br><span class="line">          : d.<span class="property">error</span>) + d.<span class="property">ago</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">var</span> n = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span> || (<span class="number">0</span>, <span class="built_in">eval</span>)(<span class="string">&quot;this&quot;</span>);</span><br><span class="line">  &#125;)();</span><br><span class="line">  <span class="string">&quot;Lately&quot;</span> <span class="keyword">in</span> n || (n.<span class="property">Lately</span> = p);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>æ¥ç€åœ¨ css æ–‡ä»¶ä¸­æ·»åŠ :</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.datacont</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><p>ç›´æ¥æŠŠæ´ªå“¥å¾— heobbe.js æ›¿æ¢æˆ,ä½œè€…ç¼–å†™å¥½å¾— js é“¾æ¥:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">https</span>:<span class="comment">//unpkg.com/msstatic@1.0.1/js/heobber.js</span></span><br></pre></td></tr></table></figure><p>æ¥ç€åœ¨ css æ–‡ä»¶ä¸­æ·»åŠ :</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.datacont</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
      
      
      <categories>
          
          <category> bufferfly </category>
          
          <category> å“”å“” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bufferfly </tag>
            
            <tag> å“”å“” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springçš„è‡ªåŠ¨è£…é…</title>
      <link href="/posts/63755f3a/"/>
      <url>/posts/63755f3a/</url>
      
        <content type="html"><![CDATA[<div class="tip home"><p>å¥½å¤„ï¼šå¤§å¹…åº¦å‡å°‘ Spring é…ç½®</p><p>åå¤„ï¼šä¾èµ–ä¸èƒ½æ˜ç¡®ç®¡ç†ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ª bean åŒæ—¶ç¬¦åˆæ³¨å…¥è§„åˆ™ï¼Œæ²¡æœ‰æ¸…æ™°çš„ä¾èµ–å…³ç³»ã€‚</p><p>åœ¨è£…é…çš„æ—¶å€™ä¼šæœ‰ä¸¤ç§æ–¹å¼ï¼Œ<code>byName</code>å’Œ<code>byType</code>ä¸¤ç§ã€‚</p><p>byNameï¼šæ ¹æ®å±æ€§åè‡ªåŠ¨è£…é…ã€‚æ­¤é€‰é¡¹å°†æ£€æŸ¥å®¹å™¨å¹¶æ ¹æ®åå­—æŸ¥æ‰¾ä¸å±æ€§å®Œå…¨ä¸€è‡´çš„ beanï¼Œå¹¶å°†å…¶ä¸å±æ€§è‡ªåŠ¨è£…é…ã€‚</p><p>byTypeï¼šå¦‚æœå®¹å™¨ä¸­å­˜åœ¨ä¸€ä¸ªä¸æŒ‡å®šå±æ€§ç±»å‹ç›¸åŒçš„ beanï¼Œé‚£ä¹ˆå°†ä¸è¯¥å±æ€§è‡ªåŠ¨è£…é…ï¼›å¦‚æœå­˜åœ¨å¤šä¸ªè¯¥ç±»å‹ beanï¼Œé‚£ä¹ˆæŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶æŒ‡å‡ºä¸èƒ½ä½¿ç”¨ byType æ–¹å¼è¿›è¡Œè‡ªåŠ¨è£…é…ï¼›å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç›¸åŒ¹é…çš„ beanï¼Œåˆ™ä»€ä¹ˆäº‹éƒ½ä¸å‘ç”Ÿï¼Œä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®</p></div><h2 id="ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…"></a> ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…</h2><p>è‡ªåŠ¨è£…é…ï¼š<em>ä¹Ÿå°±æ˜¯ <code>Spring</code> ä¼šåœ¨å®¹å™¨ä¸­è‡ªåŠ¨çš„æŸ¥æ‰¾ï¼Œå¹¶è‡ªåŠ¨çš„ç»™ <code>bean</code> è£…é…åŠå…¶å…³è”çš„å±æ€§</em></p><p>æ¶‰åŠåˆ°è‡ªåŠ¨è£…é… <code>bean</code> çš„<a href="https://so.csdn.net/so/search?q=%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB&amp;spm=1001.2101.3001.7020">ä¾èµ–å…³ç³»</a>æ—¶ï¼Œ<code>Spring</code> æœ‰å¤šç§å¤„ç†æ–¹å¼ã€‚<code>Spring</code> æä¾›äº† <code>4</code> ç§è‡ªåŠ¨è£…é…ç­–ç•¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AutowireCapableBeanFactory</span> <span class="keyword">extends</span> <span class="title class_">BeanFactory</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ— éœ€è‡ªåŠ¨è£…é…</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">AUTOWIRE_NO</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‰åç§°è‡ªåŠ¨è£…é… bean å±æ€§</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">AUTOWIRE_BY_NAME</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‰ç±»å‹è‡ªåŠ¨è£…é… bean å±æ€§</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">AUTOWIRE_BY_TYPE</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‰æ„é€ å™¨è‡ªåŠ¨è£…é…</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">AUTOWIRE_CONSTRUCTOR</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿‡æ—¶æ–¹æ³•ï¼ŒSpring3.0 ä¹‹åä¸å†æ”¯æŒ</span></span><br><span class="line">    <span class="meta">@Deprecated</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">AUTOWIRE_AUTODETECT</span> <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥"></a> ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥</h2><p>ä¾èµ–æ³¨å…¥ï¼šå½“ä¸€ä¸ªç±»çš„å®ä¾‹éœ€è¦å¦ä¸€ä¸ªç±»çš„å®ä¾‹ååŠ©æ—¶ï¼Œåœ¨ä¼ ç»Ÿçš„ç¨‹åºè®¾è®¡è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ç”±è°ƒç”¨è€…æ¥åˆ›å»ºè¢«è°ƒç”¨è€…çš„å®ä¾‹ã€‚ç„¶è€Œé‡‡ç”¨ä¾èµ–æ³¨å…¥çš„æ–¹å¼ï¼Œåˆ›å»ºè¢«è°ƒç”¨è€…çš„å·¥ä½œä¸å†ç”±è°ƒç”¨è€…æ¥å®Œæˆï¼Œåˆ›å»ºè¢«è°ƒç”¨è€…çš„å®ä¾‹çš„å·¥ä½œç”± IOC å®¹å™¨æ¥å®Œæˆã€‚ç„¶åæ³¨å…¥è°ƒç”¨è€…ï¼Œç§°ä¸ºä¾èµ–æ³¨å…¥</p><p>æ§åˆ¶åè½¬ï¼šå½“ä¸€ä¸ªç±»çš„å®ä¾‹éœ€è¦å¦ä¸€ä¸ªç±»çš„å®ä¾‹ååŠ©æ—¶ï¼Œåœ¨ä¼ ç»Ÿçš„ç¨‹åºè®¾è®¡è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ç”±è°ƒç”¨è€…æ¥åˆ›å»ºè¢«è°ƒç”¨è€…çš„å®ä¾‹ã€‚ç„¶è€Œé‡‡ç”¨æ§åˆ¶åè½¬çš„æ–¹å¼ï¼Œåˆ›å»ºè¢«è°ƒç”¨è€…çš„å·¥ä½œä¸å†ç”±è°ƒç”¨è€…æ¥å®Œæˆï¼Œåˆ›å»ºè¢«è°ƒç”¨è€…çš„å®ä¾‹çš„å·¥ä½œç”± IOC å®¹å™¨æ¥å®Œæˆã€‚ä¹Ÿå°±æ˜¯æŠŠå¯¹è±¡çš„åˆ›å»ºï¼Œåˆå§‹åŒ–ï¼Œé”€æ¯çš„å·¥ä½œäº¤ç»™ spring ioc å®¹å™¨æ¥åšã€‚ç”± spring ioc å®¹å™¨æ¥ç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ</p><p>ä¾èµ–æ³¨å…¥çš„æ–¹å¼æœ‰ä¸¤ç§ï¼šæ„é€ å™¨æ³¨å…¥å’Œ setter æ–¹æ³•æ³¨å…¥</p><h3 id="ä¾èµ–æ³¨å…¥ä¸è‡ªåŠ¨è£…é…çš„å…³ç³»"><a class="markdownIt-Anchor" href="#ä¾èµ–æ³¨å…¥ä¸è‡ªåŠ¨è£…é…çš„å…³ç³»"></a> ä¾èµ–æ³¨å…¥ä¸è‡ªåŠ¨è£…é…çš„å…³ç³»</h3><p>ä¾èµ–æ³¨å…¥çš„æœ¬è´¨å°±æ˜¯è£…é…ï¼Œè£…é…æ˜¯ä¾èµ–æ³¨å…¥çš„å…·ä½“è¡Œä¸º</p><p>åœ¨ä¼ ç»Ÿçš„ä½¿ç”¨ xml æ–‡ä»¶è£…é… bean æ˜¯ä¸€ä»¶å¾ˆç¹ççš„äº‹æƒ…ï¼Œè€Œä¸”è¿˜éœ€è¦æ‰¾åˆ°å¯¹åº”ç±»å‹çš„ bean æ‰èƒ½è£…é…ï¼Œä¸€æ—¦ bean å¾ˆå¤šï¼Œå°±ä¸å¥½ç»´æŠ¤äº†ã€‚ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ï¼Œspring ä½¿ç”¨æ³¨è§£æ¥è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚è‡ªåŠ¨è£…é…å°±æ˜¯å¼€å‘äººå‘˜ä¸å¿…çŸ¥é“å…·ä½“è¦è£…é…å“ªä¸ª bean çš„å¼•ç”¨ï¼Œè¿™ä¸ªè¯†åˆ«çš„å·¥ä½œä¼šç”± spring æ¥å®Œæˆã€‚ä¸è‡ªåŠ¨è£…é…é…åˆçš„è¿˜æœ‰â€œè‡ªåŠ¨æ£€æµ‹â€ï¼Œè¿™ä¸ªåŠ¨ä½œä¼šè‡ªåŠ¨è¯†åˆ«å“ªäº›ç±»éœ€è¦è¢«é…ç½®æˆ beanï¼Œè¿›è€Œæ¥è¿›è¡Œè£…é…</p><p>å› æ­¤ä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼šè‡ªåŠ¨è£…é…æ˜¯ä¸ºäº†å°†ä¾èµ–æ³¨å…¥â€œè‡ªåŠ¨åŒ–â€çš„ä¸€ä¸ªç®€åŒ–é…ç½®çš„æ“ä½œ</p><h2 id="spring-ä¸­è‡ªåŠ¨è£…é…çš„ç­–ç•¥"><a class="markdownIt-Anchor" href="#spring-ä¸­è‡ªåŠ¨è£…é…çš„ç­–ç•¥"></a> <code>Spring</code> ä¸­è‡ªåŠ¨è£…é…çš„ç­–ç•¥</h2><h3 id="byname"><a class="markdownIt-Anchor" href="#byname"></a> byName</h3><p>å®ƒçš„æ„æ€æ˜¯ï¼šæŠŠä¸ bean çš„å±æ€§å…·æœ‰ç›¸åŒåå­—çš„å…¶ä»– bean è‡ªåŠ¨è£…é…åˆ° bean çš„å¯¹åº”å±æ€§ä¸­</p><p>ä¾‹ï¼šåœ¨ User çš„ bean ä¸­æœ‰ä¸ªå±æ€§ Role myRoleï¼Œå†åˆ›å»ºä¸€ä¸ª Role çš„ beanï¼Œå®ƒçš„åå­—å¦‚æœå« myRoleï¼Œé‚£ä¹ˆåœ¨ User ä¸­å°±å¯ä»¥ä½¿ç”¨ byName æ¥è‡ªåŠ¨è£…é…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Role myRole;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Role</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¯ <code>bean</code> çš„å®šä¹‰ï¼Œå†çœ‹é…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myRole&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.viewscenes.netsupervisor.entity.Role&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1001&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç®¡ç†å‘˜&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.viewscenes.netsupervisor.entity.User&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šæ‰€è¿°ï¼Œåªè¦å±æ€§åç§°å’Œ bean çš„åç§°å¯ä»¥å¯¹åº”ï¼Œé‚£ä¹ˆåœ¨ user çš„ bean ä¸­å°±å¯ä»¥ä½¿ç”¨ byName æ¥è‡ªåŠ¨è£…é…ã€‚é‚£ä¹ˆï¼Œå¦‚æœå±æ€§åç§°å¯¹åº”ä¸ä¸Šå‘¢ï¼Ÿ</p><h3 id="bytype"><a class="markdownIt-Anchor" href="#bytype"></a> byType</h3><p>å®ƒçš„æ„æ€æ˜¯ï¼šæŠŠä¸ bean çš„å±æ€§å…·æœ‰ç›¸åŒç±»å‹çš„å…¶ä»– bean è‡ªåŠ¨è£…é…åˆ° bean çš„å¯¹åº”å±æ€§ä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.viewscenes.netsupervisor.entity.Role&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1001&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç®¡ç†å‘˜&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.viewscenes.netsupervisor.entity.User&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œå¦‚æœä½¿ç”¨ <code>byTypeï¼ŒRole bean</code> çš„ <code>id</code> éƒ½å¯ä»¥çœå»</p><h3 id="constructor"><a class="markdownIt-Anchor" href="#constructor"></a> constructor</h3><p>å®ƒæ˜¯è¯´ï¼š<em>æŠŠä¸ <code>bean</code> çš„æ„é€ å™¨å…¥å‚å…·æœ‰ç›¸åŒç±»å‹çš„å…¶ä»– <code>bean</code> è‡ªåŠ¨è£…é…åˆ° <code>bean</code> æ„é€ å™¨çš„å¯¹åº”å…¥å‚ä¸­</em>ã€‚å€¼çš„æ³¨æ„çš„æ˜¯ï¼Œå…·æœ‰ç›¸åŒç±»å‹çš„å…¶ä»– <code>bean</code> è¿™å¥è¯è¯´æ˜å®ƒåœ¨æŸ¥æ‰¾å…¥å‚çš„æ—¶å€™ï¼Œè¿˜æ˜¯é€šè¿‡ <code>bean</code> çš„ç±»å‹æ¥ç¡®å®š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Role role;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(Role role)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.role = role;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.viewscenes.netsupervisor.entity.User&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;constructor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="autodetectä¸æ¨èä½¿ç”¨äº†"><a class="markdownIt-Anchor" href="#autodetectä¸æ¨èä½¿ç”¨äº†"></a> autodetectï¼ˆä¸æ¨èä½¿ç”¨äº†ï¼‰</h3><p>å®ƒé¦–å…ˆä¼šå°è¯•ä½¿ç”¨ <code>constructor</code> è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œå¦‚æœå¤±è´¥å†å°è¯•ä½¿ç”¨ <code>byType</code> ã€‚ä¸è¿‡ï¼Œå®ƒåœ¨ <code>Spring 3.0</code> ä¹‹åå·²ç»è¢«æ ‡è®°ä¸º <code>@Deprecated</code></p><h2 id="é»˜è®¤çš„è‡ªåŠ¨è£…é…ç­–ç•¥"><a class="markdownIt-Anchor" href="#é»˜è®¤çš„è‡ªåŠ¨è£…é…ç­–ç•¥"></a> é»˜è®¤çš„è‡ªåŠ¨è£…é…ç­–ç•¥</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œdefault-autowire å±æ€§è¢«è®¾ç½®ä¸º noneï¼Œæ ‡ç¤ºæ‰€æœ‰çš„ bean éƒ½ä¸ä½¿ç”¨è‡ªåŠ¨è£…é…ï¼Œé™¤é bean ä¸Šé…ç½®äº† autowire å±æ€§</p><p>å¦‚æœä½ éœ€è¦ä¸ºæ‰€æœ‰çš„ bean é…ç½®ç›¸åŒçš„ autowire å±æ€§ï¼Œæœ‰ä¸ªåŠæ³•å¯ä»¥ç®€åŒ–è¿™ä¸€æ“ä½œï¼Œåœ¨æ ¹å…ƒç´  beans ä¸Šå¢åŠ å±æ€§</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">default-autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="autowired-æ³¨è§£"><a class="markdownIt-Anchor" href="#autowired-æ³¨è§£"></a> @Autowired æ³¨è§£</h2><div class="tag link"><a class="link-card" title="Autowired æ³¨è§£ä½¿ç”¨" href="https://hgm.vercel.app/post/7047b0e7/"><div class="left"><img src="https://hgm.vercel.app/img/favicon.png"/></div><div class="right"><p class="text">Autowired æ³¨è§£ä½¿ç”¨</p><p class="url">https://hgm.vercel.app/post/7047b0e7/</p></div></a></div><p><strong>å…·ä½“çš„å¤§å®¶å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ,è¿™é‡Œè¡¥å……ä¸€äº›æ–‡ç« æ²¡å†™å…¨çš„å†…å®¹</strong></p><p>ä» <code>Spring 2.5</code> å¼€å§‹ï¼Œå¼€å§‹æ”¯æŒä½¿ç”¨æ³¨è§£æ¥è‡ªåŠ¨è£…é… <code>bean</code> çš„å±æ€§ã€‚å®ƒå…è®¸æ›´ç»†ç²’åº¦çš„è‡ªåŠ¨è£…é…ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æ€§çš„æ ‡æ³¨æŸä¸€ä¸ªå±æ€§æ¥å¯¹å…¶åº”ç”¨è‡ªåŠ¨è£…é…ã€‚<code>Spring</code> æ”¯æŒå‡ ç§ä¸åŒçš„åº”ç”¨äºè‡ªåŠ¨è£…é…çš„æ³¨è§£</p><ul><li><code>Spring</code> è‡ªå¸¦çš„ <code>@Autowired</code> æ³¨è§£</li><li><code>JSR-330</code> çš„ <code>@Inject</code> æ³¨è§£</li><li><code>JSR-250</code> çš„ <code>@Resource</code> æ³¨è§£</li></ul><p>ä½¿ç”¨ <code>@Autowired</code> å®ƒæœ‰å‡ ä¸ªç‚¹éœ€è¦æ³¨æ„</p><h3 id="å¼ºåˆ¶æ€§"><a class="markdownIt-Anchor" href="#å¼ºåˆ¶æ€§"></a> å¼ºåˆ¶æ€§</h3><p><em>é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒå…·æœ‰å¼ºåˆ¶å¥‘çº¦ç‰¹æ€§ï¼Œå…¶æ‰€æ ‡æ³¨çš„å±æ€§å¿…é¡»æ˜¯å¯è£…é…çš„ã€‚å¦‚æœæ²¡æœ‰ <code>bean</code> å¯ä»¥è£…é…åˆ° <code>@Autowired</code> æ‰€æ ‡æ³¨çš„å±æ€§æˆ–å‚æ•°ä¸­ï¼Œé‚£ä¹ˆä½ ä¼šçœ‹åˆ° <code>NoSuchBeanDefinitionException</code> çš„å¼‚å¸¸ä¿¡æ¯</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">doResolveDependency</span><span class="params">(DependencyDescriptor descriptor, String beanName,</span></span><br><span class="line"><span class="params">            Set&lt;String&gt; autowiredBeanNames, TypeConverter typeConverter)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥æ‰¾Bean</span></span><br><span class="line">    Map&lt;String, Object&gt; matchingBeans = findAutowireCandidates(beanName, type, descriptor);</span><br><span class="line">    <span class="comment">// å¦‚æœæ‹¿åˆ°çš„ Bean é›†åˆä¸ºç©ºï¼Œä¸” isRequired ä¸º trueï¼Œå°±æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">if</span> (matchingBeans.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (descriptor.isRequired()) &#123;</span><br><span class="line">            raiseNoSuchBeanDefinitionException(type, <span class="string">&quot;&quot;</span>, descriptor);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>çœ‹åˆ°ä¸Šé¢çš„æºç ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™ä¸€ä¿¡æ¯ï¼Œ<code>bean</code> é›†åˆä¸ºç©ºä¸è¦ç´§ï¼Œå…³é”® <code>isRequired</code> æ¡ä»¶ä¸èƒ½æˆç«‹ï¼Œå¦‚æœæˆç«‹å°±ä¼šæŠ›å¼‚å¸¸ã€‚é‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬ä¸ç¡®å®šå±æ€§æ˜¯å¦å¯ä»¥è£…é…ï¼Œå¯ä»¥è¿™æ ·æ¥ä½¿ç”¨ <code>Autowired</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired(required = false)</span></span><br><span class="line">UserService userService;</span><br></pre></td></tr></table></figure><h3 id="è£…é…ç­–ç•¥"><a class="markdownIt-Anchor" href="#è£…é…ç­–ç•¥"></a> è£…é…ç­–ç•¥</h3><p>å‰å‡ å¤©çœ‹åˆ°å¤§ä½¬ç¾¤é‡Œæœ‰ä¸ªé¢è¯•é¢˜æ˜¯è¿™æ ·é—®çš„ï¼š<code>Autowired</code> æ˜¯æŒ‰ç…§ä»€ä¹ˆç­–ç•¥æ¥è‡ªåŠ¨è£…é…çš„å‘¢ï¼Ÿå…³äºè¿™ä¸ªé—®é¢˜ï¼Œä¸èƒ½ä¸€æ¦‚è€Œè®ºï¼Œä½ ä¸èƒ½ç®€å•çš„è¯´æŒ‰ç…§ç±»å‹æˆ–è€…æŒ‰ç…§åç§°ã€‚ä½†å¯ä»¥ç¡®å®šçš„ä¸€ç‚¹çš„æ˜¯ï¼Œå®ƒé»˜è®¤æ˜¯æŒ‰ç…§ç±»å‹æ¥è‡ªåŠ¨è£…é…çš„ï¼Œå³ <code>byType</code></p><h4 id="é»˜è®¤æŒ‰ç…§ç±»å‹è£…é…"><a class="markdownIt-Anchor" href="#é»˜è®¤æŒ‰ç…§ç±»å‹è£…é…"></a> é»˜è®¤æŒ‰ç…§ç±»å‹è£…é…</h4><p>å…³é”®ç‚¹ <code>findAutowireCandidates</code> è¿™ä¸ªæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> Map&lt;String, Object&gt; <span class="title function_">findAutowireCandidates</span><span class="params">(</span></span><br><span class="line"><span class="params">        String beanName, Class&lt;?&gt; requiredType, DependencyDescriptor descriptor)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–ç»™å®šç±»å‹çš„æ‰€æœ‰ bean åç§°ï¼Œé‡Œé¢å®é™…å¾ªç¯æ‰€æœ‰çš„ beanNameï¼Œè·å–å®ƒçš„å®ä¾‹</span></span><br><span class="line">    <span class="comment">// å†é€šè¿‡ isTypeMatch æ–¹æ³•æ¥ç¡®å®š</span></span><br><span class="line">    String[] candidateNames = BeanFactoryUtils.beanNamesForTypeIncludingAncestors(</span><br><span class="line">            <span class="built_in">this</span>, requiredType, <span class="literal">true</span>, descriptor.isEager());</span><br><span class="line"></span><br><span class="line">    Map&lt;String, Object&gt; result = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;String, Object&gt;(candidateNames.length);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ®è¿”å›çš„ beanNameï¼Œè·å–å…¶å®ä¾‹è¿”å›</span></span><br><span class="line">    <span class="keyword">for</span> (String candidateName : candidateNames) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!isSelfReference(beanName, candidateName) &amp;&amp; isAutowireCandidate(candidateName, descriptor)) &#123;</span><br><span class="line">            result.put(candidateName, getBean(candidateName));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œé‚£ä¹ˆå°±è¡¨æ˜ï¼ŒæŒ‰ç…§ç±»å‹åŒ¹é…å¯èƒ½ä¼šæŸ¥è¯¢åˆ°å¤šä¸ªå®ä¾‹ã€‚åˆ°åº•åº”è¯¥è£…é…å“ªä¸ªå®ä¾‹å‘¢ï¼Ÿæˆ‘çœ‹æœ‰çš„æ–‡ç« é‡Œè¯´ï¼Œå¯ä»¥åŠ æ³¨è§£ä»¥æ­¤è§„é¿ã€‚æ¯”å¦‚ <code>@qulifierã€@Primary</code> ç­‰ï¼Œå®é™…è¿˜æœ‰ä¸ªç®€å•çš„åŠæ³•</p><p>æ¯”å¦‚ï¼ŒæŒ‰ç…§ <code>UserService</code> æ¥å£ç±»å‹æ¥è£…é…å®ƒçš„å®ç°ç±»ã€‚<code>UserService</code> æ¥å£æœ‰å¤šä¸ªå®ç°ç±»ï¼Œåˆ†ä¸º <code>UserServiceImplã€UserServiceImpl2</code>ã€‚é‚£ä¹ˆæˆ‘ä»¬åœ¨æ³¨å…¥çš„æ—¶å€™ï¼Œå°±å¯ä»¥æŠŠå±æ€§åç§°å®šä¹‰ä¸º <code>bean</code> å®ç°ç±»çš„åç§°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">UserService UserServiceImpl2;</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„è¯ï¼Œ<code>spring</code> ä¼šæŒ‰ç…§ <code>byName</code> æ¥è¿›è¡Œè£…é…ã€‚é¦–å…ˆï¼Œå¦‚æœæŸ¥åˆ°ç±»å‹çš„å¤šä¸ªå®ä¾‹ï¼Œ<code>spring</code> å·²ç»åšäº†åˆ¤æ–­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">doResolveDependency</span><span class="params">(DependencyDescriptor descriptor, String beanName,</span></span><br><span class="line"><span class="params">            Set&lt;String&gt; autowiredBeanNames, TypeConverter typeConverter)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‰ç…§ç±»å‹æŸ¥æ‰¾ bean å®ä¾‹</span></span><br><span class="line">    Map&lt;String, Object&gt; matchingBeans = findAutowireCandidates(beanName, type, descriptor);</span><br><span class="line">    <span class="comment">// å¦‚æœ bean é›†åˆä¸ºç©ºï¼Œä¸” isRequired æˆç«‹,å°±æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">if</span> (matchingBeans.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (descriptor.isRequired()) &#123;</span><br><span class="line">            raiseNoSuchBeanDefinitionException(type, <span class="string">&quot;&quot;</span>, descriptor);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœæŸ¥æ‰¾çš„ bean å®ä¾‹å¤§äº 1 ä¸ª</span></span><br><span class="line">    <span class="keyword">if</span> (matchingBeans.size() &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// æ‰¾åˆ°æœ€åˆé€‚çš„é‚£ä¸ªï¼Œå¦‚æœæ²¡æœ‰åˆé€‚çš„ï¼Œä¹ŸæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">primaryBeanName</span> <span class="operator">=</span> determineAutowireCandidate(matchingBeans, descriptor);</span><br><span class="line">        <span class="keyword">if</span> (primaryBeanName == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoUniqueBeanDefinitionException</span>(type, matchingBeans.keySet());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (autowiredBeanNames != <span class="literal">null</span>) &#123;</span><br><span class="line">            autowiredBeanNames.add(primaryBeanName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> matchingBeans.get(primaryBeanName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœæŸ¥åˆ°å¤šä¸ªå®ä¾‹ï¼Œ<code>determineAutowireCandidate</code> æ–¹æ³•å°±æ˜¯å…³é”®ã€‚å®ƒæ¥ç¡®å®šä¸€ä¸ªåˆé€‚çš„ <code>bean</code> è¿”å›ã€‚å…¶ä¸­ä¸€éƒ¨åˆ†å°±æ˜¯æŒ‰ç…§ <code>bean</code> çš„åç§°æ¥åŒ¹é…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> String <span class="title function_">determineAutowireCandidate</span><span class="params">(Map&lt;String, Object&gt; candidateBeans,</span></span><br><span class="line"><span class="params">                DependencyDescriptor descriptor)</span> &#123;</span><br><span class="line">    <span class="comment">// å¾ªç¯æ‹¿åˆ°çš„ bean é›†åˆ</span></span><br><span class="line">    <span class="keyword">for</span> (Map.Entry&lt;String, Object&gt; entry : candidateBeans.entrySet()) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">candidateBeanName</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">beanInstance</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">        <span class="comment">// é€šè¿‡ matchesBeanName æ–¹æ³•æ¥ç¡®å®š bean é›†åˆä¸­çš„åç§°æ˜¯å¦ä¸å±æ€§çš„åç§°ç›¸åŒ</span></span><br><span class="line">        <span class="keyword">if</span> (matchesBeanName(candidateBeanName, descriptor.getDependencyName())) &#123;</span><br><span class="line">            <span class="keyword">return</span> candidateBeanName;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åæˆ‘ä»¬å›åˆ°é—®é¢˜ä¸Šï¼Œå¾—åˆ°çš„ç­”æ¡ˆå°±æ˜¯ï¼š<em><code>@Autowired</code> é»˜è®¤ä½¿ç”¨ <code>byType</code> æ¥è£…é…å±æ€§ï¼Œå¦‚æœåŒ¹é…åˆ°ç±»å‹çš„å¤šä¸ªå®ä¾‹ï¼Œå†é€šè¿‡ <code>byName</code> æ¥ç¡®å®š <code>bean</code></em></p><h3 id="ä¸»å’Œä¼˜å…ˆçº§"><a class="markdownIt-Anchor" href="#ä¸»å’Œä¼˜å…ˆçº§"></a> ä¸»å’Œä¼˜å…ˆçº§</h3><p>ä¸Šé¢æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†ï¼Œé€šè¿‡ <code>byType</code> å¯èƒ½ä¼šæ‰¾åˆ°å¤šä¸ªå®ä¾‹çš„ <code>bean</code>ã€‚ç„¶åå†é€šè¿‡ <code>byName</code> æ¥ç¡®å®šä¸€ä¸ªåˆé€‚çš„ <code>bean</code>ï¼Œå¦‚æœé€šè¿‡åç§°ä¹Ÿç¡®å®šä¸äº†å‘¢ï¼Ÿ</p><p>è¿˜æ˜¯ <code>determineAutowireCandidate</code> è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒè¿˜æœ‰ä¸¤ç§æ–¹å¼æ¥ç¡®å®š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> String <span class="title function_">determineAutowireCandidate</span><span class="params">(Map&lt;String, Object&gt; candidateBeans,</span></span><br><span class="line"><span class="params">                DependencyDescriptor descriptor)</span> &#123;</span><br><span class="line">    Class&lt;?&gt; requiredType = descriptor.getDependencyType();</span><br><span class="line">    <span class="comment">// é€šè¿‡ @Primaryæ³¨è§£æ¥æ ‡è¯† bean</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">primaryCandidate</span> <span class="operator">=</span> determinePrimaryCandidate(candidateBeans, requiredType);</span><br><span class="line">    <span class="keyword">if</span> (primaryCandidate != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> primaryCandidate;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é€šè¿‡ @Priority(value = 0) æ³¨è§£æ¥æ ‡è¯† bean, value ä¸ºä¼˜å…ˆçº§å¤§å°</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">priorityCandidate</span> <span class="operator">=</span> determineHighestPriorityCandidate(candidateBeans, requiredType);</span><br><span class="line">    <span class="keyword">if</span> (priorityCandidate != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> priorityCandidate;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="primary-æ³¨è§£"><a class="markdownIt-Anchor" href="#primary-æ³¨è§£"></a> <code>@Primary</code> æ³¨è§£</h4><p>å®ƒçš„ä½œç”¨æ˜¯çœ‹ <code>bean</code> ä¸Šæ˜¯å¦åŒ…å« <code>@Primary</code> æ³¨è§£ï¼Œå¦‚æœåŒ…å«å°±è¿”å›ã€‚å½“ç„¶äº†ï¼Œä½ ä¸èƒ½æŠŠå¤šä¸ª <code>bean</code> éƒ½è®¾ç½®ä¸º <code>@Primary</code>ï¼Œä¸ç„¶ä½ ä¼šå¾—åˆ° <code>NoUniqueBeanDefinitionException</code> è¿™ä¸ªå¼‚å¸¸</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> String <span class="title function_">determinePrimaryCandidate</span><span class="params">(Map&lt;String, Object&gt; candidateBeans, Class&lt;?&gt; requiredType)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">primaryBeanName</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">for</span> (Map.Entry&lt;String, Object&gt; entry : candidateBeans.entrySet()) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">candidateBeanName</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">beanInstance</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">        <span class="keyword">if</span> (isPrimary(candidateBeanName, beanInstance)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (primaryBeanName != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="type">boolean</span> <span class="variable">candidateLocal</span> <span class="operator">=</span> containsBeanDefinition(candidateBeanName);</span><br><span class="line">                <span class="type">boolean</span> <span class="variable">primaryLocal</span> <span class="operator">=</span> containsBeanDefinition(primaryBeanName);</span><br><span class="line">                <span class="keyword">if</span> (candidateLocal &amp;&amp; primaryLocal) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoUniqueBeanDefinitionException</span>(requiredType, candidateBeans.size(),</span><br><span class="line">                            <span class="string">&quot;more than one &#x27;primary&#x27; bean found among candidates: &quot;</span> + candidateBeans.keySet());</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (candidateLocal) &#123;</span><br><span class="line">                    primaryBeanName = candidateBeanName;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                primaryBeanName = candidateBeanName;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> primaryBeanName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="priority-æ³¨è§£"><a class="markdownIt-Anchor" href="#priority-æ³¨è§£"></a> <code>@Priority</code> æ³¨è§£</h4><p>ä½ ä¹Ÿå¯ä»¥åœ¨ <code>bean</code>ä¸Šé…ç½®<code>@Priority</code>æ³¨è§£ï¼Œå®ƒæœ‰ä¸ª int ç±»å‹çš„å±æ€§ <code>value</code>ï¼Œå¯ä»¥é…ç½®ä¼˜å…ˆçº§å¤§å°ã€‚æ•°å­—è¶Šå°çš„ï¼Œå°±è¢«ä¼˜å…ˆåŒ¹é…ã€‚åŒæ ·çš„ï¼Œä½ ä¹Ÿä¸èƒ½æŠŠå¤šä¸ª <code>bean</code>çš„ä¼˜å…ˆçº§é…ç½®æˆç›¸åŒå¤§å°çš„æ•°å€¼ï¼Œå¦åˆ™ <code>NoUniqueBeanDefinitionException</code>å¼‚å¸¸ç…§æ ·å‡ºæ¥æ‰¾ä½ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> String <span class="title function_">determineHighestPriorityCandidate</span><span class="params">(Map&lt;String, Object&gt; candidateBeans,</span></span><br><span class="line"><span class="params">                                    Class&lt;?&gt; requiredType)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">highestPriorityBeanName</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">highestPriority</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">for</span> (Map.Entry&lt;String, Object&gt; entry : candidateBeans.entrySet()) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">candidateBeanName</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">beanInstance</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">candidatePriority</span> <span class="operator">=</span> getPriority(beanInstance);</span><br><span class="line">        <span class="keyword">if</span> (candidatePriority != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (highestPriorityBeanName != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœä¼˜å…ˆçº§å¤§å°ç›¸åŒ</span></span><br><span class="line">                <span class="keyword">if</span> (candidatePriority.equals(highestPriority)) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoUniqueBeanDefinitionException</span>(requiredType, candidateBeans.size(),</span><br><span class="line">                        <span class="string">&quot;Multiple beans found with the same priority (&#x27;&quot;</span> + highestPriority + <span class="string">&quot;&#x27;) &quot;</span> +</span><br><span class="line">                            <span class="string">&quot;among candidates: &quot;</span> + candidateBeans.keySet());</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (candidatePriority &lt; highestPriority) &#123;</span><br><span class="line">                    highestPriorityBeanName = candidateBeanName;</span><br><span class="line">                    highestPriority = candidatePriority;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                highestPriorityBeanName = candidateBeanName;</span><br><span class="line">                highestPriority = candidatePriority;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> highestPriorityBeanName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Priority</code> çš„åŒ…åœ¨ <code>javax.annotation.Priority</code>ï¼Œå¦‚æœæƒ³ä½¿ç”¨å®ƒè¿˜è¦å¼•å…¥ä¸€ä¸ªåæ ‡</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.annotation<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.annotation-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“</h2><p>æœ¬ç« èŠ‚é‡ç‚¹é˜è¿°äº† Spring ä¸­çš„è‡ªåŠ¨è£…é…çš„å‡ ç§ç­–ç•¥ï¼Œåˆé€šè¿‡æºç åˆ†æäº† Autowired æ³¨è§£çš„ä½¿ç”¨æ–¹å¼ã€‚<br />åœ¨ Spring3.0 ä¹‹åï¼Œæœ‰æ•ˆçš„è‡ªåŠ¨è£…é…ç­–ç•¥åˆ†ä¸º<code>byTypeã€byNameã€constructor</code>ä¸‰ç§æ–¹å¼ã€‚æ³¨è§£<br />Autowired é»˜è®¤ä½¿ç”¨ byType æ¥è‡ªåŠ¨è£…é…ï¼Œå¦‚æœå­˜åœ¨ç±»å‹çš„å¤šä¸ªå®ä¾‹å°±å°è¯•ä½¿ç”¨ byName åŒ¹é…ï¼Œå¦‚æœé€šè¿‡ byName ä¹Ÿç¡®å®šä¸äº†ï¼Œå¯ä»¥é€šè¿‡ Primary å’Œ Priority æ³¨è§£æ¥ç¡®å®šã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
          <category> Java </category>
          
          <category> Springè‡ªåŠ¨è£…é… </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> Springæ³¨è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springæ³¨è§£-@Autowiredæ³¨è§£ä½¿ç”¨</title>
      <link href="/posts/7047b0e7/"/>
      <url>/posts/7047b0e7/</url>
      
        <content type="html"><![CDATA[<details class="folding-tag" cyan><summary> å†™åœ¨å‰é¢å¾—è¯ </summary>              <div class='content'>              <div class="note info simple"><p>å­¦ä¹ @Autowired ä¹‹å‰å»ºè®®å…ˆå­¦ä¼šä½¿ç”¨ byType å’Œ byName</p></div><div class="tag link"><a class="link-card" title="Springçš„è‡ªåŠ¨è£…é…" href="https://hgm.vercel.app/post/63755f3a/"><div class="left"><img src="https://unpkg.com/serms-assets/imgs/avatar.jpg"/></div><div class="right"><p class="text">Springçš„è‡ªåŠ¨è£…é…</p><p class="url">https://hgm.vercel.app/post/63755f3a/</p></div></a></div>              </div>            </details><h2 id="autowired-è¯¦è§£"><a class="markdownIt-Anchor" href="#autowired-è¯¦è§£"></a> @Autowired è¯¦è§£</h2><p>é¦–å…ˆè¦çŸ¥é“å¦ä¸€ä¸ªä¸œè¥¿ï¼Œdefault-autowireï¼Œå®ƒæ˜¯åœ¨ xml æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®çš„ï¼Œå¯ä»¥è®¾ç½®ä¸º byNameã€byTypeã€constructor å’Œ autodetectï¼›æ¯”å¦‚ byNameï¼Œä¸ç”¨æ˜¾å¼çš„åœ¨ bean ä¸­å†™å‡ºä¾èµ–çš„å¯¹è±¡ï¼Œå®ƒä¼šè‡ªåŠ¨çš„åŒ¹é…å…¶å®ƒ bean ä¸­ id åä¸æœ¬ bean çš„ set**ç›¸åŒçš„ï¼Œå¹¶è‡ªåŠ¨è£…è½½ã€‚<br />@Autowired æ˜¯ç”¨åœ¨ JavaBean ä¸­çš„æ³¨è§£ï¼Œé€šè¿‡ byType å½¢å¼ï¼Œç”¨æ¥ç»™æŒ‡å®šçš„å­—æ®µæˆ–æ–¹æ³•æ³¨å…¥æ‰€éœ€çš„å¤–éƒ¨èµ„æºã€‚<br />ä¸¤è€…çš„åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯èƒ½å‡å°‘æˆ–è€…æ¶ˆé™¤å±æ€§æˆ–æ„é€ å™¨å‚æ•°çš„è®¾ç½®ï¼Œåªæ˜¯é…ç½®åœ°æ–¹ä¸ä¸€æ ·è€Œå·²ã€‚<br />autowire å››ç§æ¨¡å¼çš„åŒºåˆ«<br /><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTYwODI0MTcyODAwMTYz?x-oss-process=image/format,png" alt="" /></p><p>å…ˆçœ‹ä¸€ä¸‹ bean å®ä¾‹åŒ–å’Œ@Autowired è£…é…è¿‡ç¨‹ï¼š<br />ä¸€åˆ‡éƒ½æ˜¯ä» bean å·¥å‚çš„ getBean æ–¹æ³•å¼€å§‹çš„ï¼Œä¸€æ—¦è¯¥æ–¹æ³•è°ƒç”¨æ€»ä¼šè¿”å›ä¸€ä¸ª bean å®ä¾‹ï¼Œæ— è®ºå½“å‰æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨å°±å®ä¾‹åŒ–ä¸€ä¸ªå¹¶è£…é…ï¼Œå¦åˆ™ç›´æ¥è¿”å›ã€‚ï¼ˆSpring MVC æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™å¼€å§‹æ‰§è¡Œ bean çš„å®ä¾‹åŒ–è¿‡ç¨‹çš„å‘¢ï¼Ÿå…¶å®å°±åœ¨ç»„ä»¶æ‰«æå®Œæˆä¹‹åï¼‰</p><p>å®ä¾‹åŒ–å’Œè£…é…è¿‡ç¨‹ä¸­ä¼šå¤šæ¬¡é€’å½’è°ƒç”¨ getBean æ–¹æ³•æ¥è§£å†³ç±»ä¹‹é—´çš„ä¾èµ–ã€‚</p><p>Spring å‡ ä¹è€ƒè™‘äº†æ‰€æœ‰å¯èƒ½æ€§ï¼Œæ‰€ä»¥æ–¹æ³•ç‰¹åˆ«å¤æ‚ä½†å®Œæ•´æœ‰æ¡ç†ã€‚</p><p>@Autowired æœ€ç»ˆæ˜¯æ ¹æ®ç±»å‹æ¥æŸ¥æ‰¾å’Œè£…é…å…ƒç´ çš„ï¼Œä½†æ˜¯æˆ‘ä»¬è®¾ç½®äº†<beans default-autowire="byName"/>åä¼šå½±å“æœ€ç»ˆçš„ç±»å‹åŒ¹é…æŸ¥æ‰¾ã€‚å› ä¸ºåœ¨å‰é¢æœ‰æ ¹æ® BeanDefinition çš„ autowire ç±»å‹è®¾ç½® PropertyValue å€¼å¾—ä¸€æ­¥ï¼Œå…¶ä¸­ä¼šæœ‰æ–°å®ä¾‹çš„åˆ›å»ºå’Œæ³¨å†Œã€‚å°±æ˜¯é‚£ä¸ª autowireByName æ–¹æ³•ã€‚</p><p>ä¸‹é¢é€šè¿‡@Autowired æ¥è¯´æ˜ä¸€ä¸‹ç”¨æ³•</p><h2 id="setter-æ–¹æ³•ä¸­çš„-autowired"><a class="markdownIt-Anchor" href="#setter-æ–¹æ³•ä¸­çš„-autowired"></a> Setter æ–¹æ³•ä¸­çš„ @Autowired</h2><p>ä½ å¯ä»¥åœ¨ JavaBean ä¸­çš„ setter æ–¹æ³•ä¸­ä½¿ç”¨ @Autowired æ³¨è§£ã€‚å½“ Spring é‡åˆ°ä¸€ä¸ªåœ¨ setter æ–¹æ³•ä¸­ä½¿ç”¨çš„ @Autowired æ³¨è§£ï¼Œå®ƒä¼šåœ¨æ–¹æ³•ä¸­æ‰§è¡Œ byType è‡ªåŠ¨è£…é…ã€‚<br />è¿™é‡Œæ˜¯ TextEditor.java æ–‡ä»¶çš„å†…å®¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tutorialspoint;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TextEditor</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> SpellChecker spellChecker;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSpellChecker</span><span class="params">( SpellChecker spellChecker )</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.spellChecker = spellChecker;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> SpellChecker <span class="title function_">getSpellChecker</span><span class="params">( )</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> spellChecker;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">spellCheck</span><span class="params">()</span> &#123;</span><br><span class="line">        spellChecker.checkSpelling();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾èµ–çš„ç±»æ–‡ä»¶ SpellChecker.java çš„å†…å®¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tutorialspoint;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpellChecker</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SpellChecker</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Inside SpellChecker constructor.&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">checkSpelling</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Inside checkSpelling.&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ MainApp.java æ–‡ä»¶çš„å†…å®¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tutorialspoint;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainApp</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;Beans.xml&quot;</span>);</span><br><span class="line">        <span class="type">TextEditor</span> <span class="variable">te</span> <span class="operator">=</span> (TextEditor) context.getBean(<span class="string">&quot;textEditor&quot;</span>);</span><br><span class="line">        te.spellCheck();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯é…ç½®æ–‡ä»¶ Beans.xmlï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/context/spring-context-3.0.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Definition for textEditor bean without constructor-arg  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;textEditor&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.tutorialspoint.TextEditor&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Definition for spellChecker bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;spellChecker&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.tutorialspoint.SpellChecker&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸€æ—¦ä½ å·²ç»å®Œæˆçš„åˆ›å»ºäº†æºæ–‡ä»¶å’Œ bean é…ç½®æ–‡ä»¶ï¼Œè®©æˆ‘ä»¬è¿è¡Œä¸€ä¸‹åº”ç”¨ç¨‹åºã€‚å¦‚æœä½ çš„åº”ç”¨ç¨‹åºä¸€åˆ‡éƒ½æ­£å¸¸çš„è¯ï¼Œè¿™å°†ä¼šè¾“å‡ºä»¥ä¸‹æ¶ˆæ¯ï¼š</p><p>Inside SpellChecker constructor.<br />Inside checkSpelling.</p><h2 id="å±æ€§ä¸­çš„-autowired"><a class="markdownIt-Anchor" href="#å±æ€§ä¸­çš„-autowired"></a> å±æ€§ä¸­çš„ @Autowired</h2><p>ä½ å¯ä»¥åœ¨å±æ€§ä¸­ä½¿ç”¨ @Autowired æ³¨è§£æ¥é™¤å» setter æ–¹æ³•ã€‚å½“æ—¶ä½¿ç”¨ ä¸ºè‡ªåŠ¨è¿æ¥å±æ€§ä¼ é€’çš„æ—¶å€™ï¼ŒSpring ä¼šå°†è¿™äº›ä¼ é€’è¿‡æ¥çš„å€¼æˆ–è€…å¼•ç”¨è‡ªåŠ¨åˆ†é…ç»™é‚£äº›å±æ€§ã€‚æ‰€ä»¥åˆ©ç”¨åœ¨å±æ€§ä¸­ @Autowired çš„ç”¨æ³•ï¼Œä½ çš„ TextEditor.java æ–‡ä»¶å°†å˜æˆå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tutorialspoint;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TextEditor</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SpellChecker spellChecker;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TextEditor</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Inside TextEditor constructor.&quot;</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> SpellChecker <span class="title function_">getSpellChecker</span><span class="params">( )</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> spellChecker;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">spellCheck</span><span class="params">()</span>&#123;</span><br><span class="line">        spellChecker.checkSpelling();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯é…ç½®æ–‡ä»¶ Beans.xmlï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/context/spring-context-3.0.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Definition for textEditor bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;textEditor&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.tutorialspoint.TextEditor&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Definition for spellChecker bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;spellChecker&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.tutorialspoint.SpellChecker&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸€æ—¦ä½ åœ¨æºæ–‡ä»¶å’Œ bean é…ç½®æ–‡ä»¶ä¸­å®Œæˆäº†ä¸Šé¢ä¸¤å¤„æ”¹å˜ï¼Œè®©æˆ‘ä»¬è¿è¡Œä¸€ä¸‹åº”ç”¨ç¨‹åºã€‚å¦‚æœä½ çš„åº”ç”¨ç¨‹åºä¸€åˆ‡éƒ½æ­£å¸¸çš„è¯ï¼Œè¿™å°†ä¼šè¾“å‡ºä»¥ä¸‹æ¶ˆæ¯ï¼š</p><p>Inside TextEditor constructor.<br />Inside SpellChecker constructor.<br />Inside checkSpelling.</p><h2 id="æ„é€ å‡½æ•°ä¸­çš„-autowired"><a class="markdownIt-Anchor" href="#æ„é€ å‡½æ•°ä¸­çš„-autowired"></a> æ„é€ å‡½æ•°ä¸­çš„ @Autowired</h2><p>ä½ ä¹Ÿå¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ @Autowiredã€‚ä¸€ä¸ªæ„é€ å‡½æ•° @Autowired è¯´æ˜å½“åˆ›å»º bean æ—¶ï¼Œå³ä½¿åœ¨ XML æ–‡ä»¶ä¸­æ²¡æœ‰ä½¿ç”¨ å…ƒç´ é…ç½® bean ï¼Œæ„é€ å‡½æ•°ä¹Ÿä¼šè¢«è‡ªåŠ¨è¿æ¥ã€‚è®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹ä¸‹é¢çš„ç¤ºä¾‹ã€‚<br />è¿™é‡Œæ˜¯ TextEditor.java æ–‡ä»¶çš„å†…å®¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tutorialspoint;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TextEditor</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> SpellChecker spellChecker;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TextEditor</span><span class="params">(SpellChecker spellChecker)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Inside TextEditor constructor.&quot;</span> );</span><br><span class="line">        <span class="built_in">this</span>.spellChecker = spellChecker;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">spellCheck</span><span class="params">()</span>&#123;</span><br><span class="line">        spellChecker.checkSpelling();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯é…ç½®æ–‡ä»¶ Beans.xmlï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/context/spring-context-3.0.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Definition for textEditor bean without constructor-arg  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;textEditor&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.tutorialspoint.TextEditor&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Definition for spellChecker bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;spellChecker&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.tutorialspoint.SpellChecker&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸€æ—¦ä½ åœ¨æºæ–‡ä»¶å’Œ bean é…ç½®æ–‡ä»¶ä¸­å®Œæˆäº†ä¸Šé¢ä¸¤å¤„æ”¹å˜ï¼Œè®©æˆ‘ä»¬è¿è¡Œä¸€ä¸‹åº”ç”¨ç¨‹åºã€‚å¦‚æœä½ çš„åº”ç”¨ç¨‹åºä¸€åˆ‡éƒ½æ­£å¸¸çš„è¯ï¼Œè¿™å°†ä¼šè¾“å‡ºä»¥ä¸‹æ¶ˆæ¯ï¼š</p><p>Inside TextEditor constructor.<br />Inside SpellChecker constructor.<br />Inside checkSpelling.</p><h2 id="autowired-çš„requiredfalseé€‰é¡¹"><a class="markdownIt-Anchor" href="#autowired-çš„requiredfalseé€‰é¡¹"></a> @Autowired çš„ï¼ˆrequired=falseï¼‰é€‰é¡¹</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ@Autowired æ³¨è§£æ„å‘³ç€ä¾èµ–æ˜¯å¿…é¡»çš„ï¼Œå®ƒç±»ä¼¼äº @Required æ³¨è§£ï¼Œç„¶è€Œï¼Œä½ å¯ä»¥ä½¿ç”¨ @Autowired çš„ ï¼ˆrequired=falseï¼‰ é€‰é¡¹å…³é—­é»˜è®¤è¡Œä¸ºã€‚<br />å³ä½¿ä½ ä¸ä¸º age å±æ€§ä¼ é€’ä»»ä½•å‚æ•°ï¼Œä¸‹é¢çš„ç¤ºä¾‹ä¹Ÿä¼šæˆåŠŸè¿è¡Œï¼Œä½†æ˜¯å¯¹äº name å±æ€§åˆ™éœ€è¦ä¸€ä¸ªå‚æ•°ã€‚ä½ å¯ä»¥è‡ªå·±å°è¯•ä¸€ä¸‹è¿™ä¸ªç¤ºä¾‹ï¼Œå› ä¸ºé™¤äº†åªæœ‰ Student.java æ–‡ä»¶è¢«ä¿®æ”¹ä»¥å¤–ï¼Œå®ƒå’Œ @Required æ³¨è§£ç¤ºä¾‹æ˜¯ç›¸ä¼¼çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tutorialspoint;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Autowired(required=false)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å…¶ä»–"><a class="markdownIt-Anchor" href="#å…¶ä»–"></a> å…¶ä»–</h2><p><strong>@Autowired æ³¨é‡Šåº”ç”¨äºå…·æœ‰ä»»æ„åç§°å’Œå¤šä¸ªå‚æ•°çš„æ–¹æ³•:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MovieRecommender</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MovieCatalog movieCatalog;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CustomerPreferenceDao customerPreferenceDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">prepare</span><span class="params">(MovieCatalog movieCatalog,</span></span><br><span class="line"><span class="params">                        CustomerPreferenceDao customerPreferenceDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.movieCatalog = movieCatalog;</span><br><span class="line">        <span class="built_in">this</span>.customerPreferenceDao = customerPreferenceDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ‚¨ä¹Ÿå¯ä»¥å°†@Autowired åº”ç”¨äºå­—æ®µï¼Œæˆ–è€…å°†å…¶ä¸æ„é€ å‡½æ•°æ··åˆï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤º</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MovieRecommender</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> CustomerPreferenceDao customerPreferenceDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MovieCatalog movieCatalog;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MovieRecommender</span><span class="params">(CustomerPreferenceDao customerPreferenceDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.customerPreferenceDao = customerPreferenceDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†@Autowired æ³¨é‡Šæ·»åŠ åˆ°éœ€è¦è¯¥ç±»å‹æ•°ç»„çš„å­—æ®µæˆ–æ–¹æ³•ï¼Œåˆ™ spring ä¼šä» ApplicationContext ä¸­æœå¯»ç¬¦åˆæŒ‡å®šç±»å‹çš„æ‰€æœ‰ beanï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MovieRecommender</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MovieCatalog[] movieCatalogs;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•°ç»„å¯ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥é©¬ä¸Šä¸¾ä¸€åä¸‰ï¼Œé‚£å®¹å™¨ä¹Ÿå¯ä»¥å—ï¼Œç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œä¸‹é¢æ˜¯ set ä»¥åŠ map çš„ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MovieRecommender</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Set&lt;MovieCatalog&gt; movieCatalogs;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMovieCatalogs</span><span class="params">(Set&lt;MovieCatalog&gt; movieCatalogs)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.movieCatalogs = movieCatalogs;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MovieRecommender</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, MovieCatalog&gt; movieCatalogs;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMovieCatalogs</span><span class="params">(Map&lt;String, MovieCatalog&gt; movieCatalogs)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.movieCatalogs = movieCatalogs;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯@Autowired æ³¨è§£çš„ä¸»è¦ä½¿ç”¨æ–¹å¼ï¼Œç»å¸¸ä½¿ç”¨ spring çš„è¯åº”è¯¥å¯¹å…¶ä¸­å¸¸ç”¨çš„å‡ ç§ä¸ä¼šæ„Ÿåˆ°é™Œç”Ÿã€‚</p><h2 id="autowired-è£…é…ä¸æˆåŠŸçš„å‡ ç§æƒ…å†µ"><a class="markdownIt-Anchor" href="#autowired-è£…é…ä¸æˆåŠŸçš„å‡ ç§æƒ…å†µ"></a> @Autowired è£…é…ä¸æˆåŠŸçš„å‡ ç§æƒ…å†µï¼Ÿ</h2><h3 id="æ²¡æœ‰åŠ component-æ³¨è§£"><a class="markdownIt-Anchor" href="#æ²¡æœ‰åŠ component-æ³¨è§£"></a> æ²¡æœ‰åŠ @Component æ³¨è§£</h3><p>åœ¨ç±»ä¸Šé¢å¿˜äº†åŠ @Controllerã€@Serviceã€@Componentã€@Repository ç­‰æ³¨è§£ï¼Œspring å°±æ— æ³•å®Œæˆè‡ªåŠ¨è£…é…çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IUser user;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        user.say();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æƒ…å†µåº”è¯¥æ˜¯æœ€å¸¸è§çš„é”™è¯¯äº†ï¼Œä¸ä¼šå› ä¸ºä½ é•¿å¾—å¸…ï¼Œå°±ä¸ä¼šçŠ¯è¿™ç§ä½çº§çš„é”™è¯¯ã€‚</p><h3 id="æ³¨å…¥-filter-æˆ–-listener"><a class="markdownIt-Anchor" href="#æ³¨å…¥-filter-æˆ–-listener"></a> æ³¨å…¥ Filter æˆ– Listener</h3><p>web åº”ç”¨å¯åŠ¨çš„é¡ºåºæ˜¯ï¼šlistener-&gt;filter-&gt;servletã€‚</p><p><img src="https://unpkg.com/serms-assets@1.0.13/Spring/sasasas.png" alt="img" /></p><p>æ¥ä¸‹æ¥çœ‹çœ‹è¿™ä¸ªæ¡ˆä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IUser user;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        user.say();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FilterConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> FilterRegistrationBean <span class="title function_">filterRegistrationBean</span><span class="params">()</span> &#123;</span><br><span class="line">        bean = <span class="keyword">new</span> <span class="title class_">FilterRegistrationBean</span>();</span><br><span class="line">        bean.setFilter(<span class="keyword">new</span> <span class="title class_">UserFilter</span>());</span><br><span class="line">        bean.addUrlPatterns(<span class="string">&quot;/*&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¨‹åºå¯åŠ¨ä¼šæŠ¥é”™,tomcat ä¹Ÿæ— æ³•æ­£å¸¸å¯åŠ¨???ä»€ä¹ˆåŸå› ??</p><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œspringmvc çš„å¯åŠ¨æ˜¯åœ¨ DisptachServlet é‡Œé¢åšçš„ï¼Œè€Œå®ƒæ˜¯åœ¨ listener å’Œ filter ä¹‹åæ‰§è¡Œã€‚å¦‚æœæˆ‘ä»¬æƒ³åœ¨ listener å’Œ filter é‡Œé¢@Autowired æŸä¸ª beanï¼Œè‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œå› ä¸º filter åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæ­¤æ—¶ bean è¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼Œæ— æ³•è‡ªåŠ¨è£…é…ã€‚</p><p>å¦‚æœå·¥ä½œå½“ä¸­çœŸçš„éœ€è¦è¿™æ ·åšï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserFilter</span>  <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> IUser user;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> WebApplicationContextUtils.getWebApplicationContext(</span><br><span class="line">            filterConfig.getServletContext());</span><br><span class="line">        <span class="built_in">this</span>.user = ((IUser)(applicationContext.getBean(<span class="string">&quot;user1&quot;</span>)));</span><br><span class="line">        user.say();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç­”æ¡ˆæ˜¯ä½¿ç”¨ WebApplicationContextUtils.getWebApplicationContext è·å–å½“å‰çš„ ApplicationContextï¼Œå†é€šè¿‡å®ƒè·å–åˆ° bean å®ä¾‹ã€‚</p><h3 id="æ³¨è§£æœªè¢«componentscan-æ‰«æ"><a class="markdownIt-Anchor" href="#æ³¨è§£æœªè¢«componentscan-æ‰«æ"></a> æ³¨è§£æœªè¢«@ComponentScan æ‰«æ</h3><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œ@Controllerã€@Serviceã€@Componentã€@Repositoryã€@Configuration ç­‰æ³¨è§£ï¼Œæ˜¯éœ€è¦é€šè¿‡@ComponentScan æ³¨è§£æ‰«æï¼Œæ”¶é›†å…ƒæ•°æ®çš„ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰åŠ @ComponentScan æ³¨è§£ï¼Œæˆ–è€…@ComponentScan æ³¨è§£æ‰«æçš„è·¯å¾„ä¸å¯¹ï¼Œæˆ–è€…è·¯å¾„èŒƒå›´å¤ªå°ï¼Œä¼šå¯¼è‡´æœ‰äº›æ³¨è§£æ— æ³•æ”¶é›†ï¼Œåˆ°åé¢æ— æ³•ä½¿ç”¨@Autowired å®Œæˆè‡ªåŠ¨è£…é…çš„åŠŸèƒ½ã€‚</p><p>æœ‰ä¸ªå¥½æ¶ˆæ¯æ˜¯ï¼Œåœ¨ springboot é¡¹ç›®ä¸­ï¼Œå¦‚æœä½¿ç”¨äº†@SpringBootApplication æ³¨è§£ï¼Œå®ƒé‡Œé¢å†…ç½®äº†@ComponentScan æ³¨è§£çš„åŠŸèƒ½ã€‚</p><h3 id="å¾ªç¯ä¾èµ–é—®é¢˜"><a class="markdownIt-Anchor" href="#å¾ªç¯ä¾èµ–é—®é¢˜"></a> å¾ªç¯ä¾èµ–é—®é¢˜</h3><p>å¦‚æœ A ä¾èµ–äº Bï¼ŒB ä¾èµ–äº Cï¼ŒC åˆä¾èµ–äº Aï¼Œè¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ªæ­»å¾ªç¯ã€‚</p><p><img src="https://unpkg.com/serms-assets@1.0.13/Spring/ssas.png" alt="img" /></p><p>spring çš„ bean é»˜è®¤æ˜¯å•ä¾‹çš„ï¼Œå¦‚æœå•ä¾‹ bean ä½¿ç”¨@Autowired è‡ªåŠ¨è£…é…ï¼Œå¤§å¤šæ•°æƒ…å†µï¼Œèƒ½è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜ã€‚</p><p>ä½†æ˜¯å¦‚æœ bean æ˜¯å¤šä¾‹çš„ï¼Œä¼šå‡ºç°å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œå¯¼è‡´ bean è‡ªåŠ¨è£…é…ä¸äº†ã€‚</p><p>è¿˜æœ‰æœ‰äº›æƒ…å†µä¸‹ï¼Œå¦‚æœåˆ›å»ºäº†ä»£ç†å¯¹è±¡ï¼Œå³ä½¿ bean æ˜¯å•ä¾‹çš„ï¼Œä¾ç„¶ä¼šå‡ºç°å¾ªç¯ä¾èµ–é—®é¢˜ã€‚</p><h2 id="autowired-å’Œresouce-çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#autowired-å’Œresouce-çš„åŒºåˆ«"></a> @Autowired å’Œ@Resouce çš„åŒºåˆ«</h2><p>@Autowired åŠŸèƒ½è™½è¯´éå¸¸å¼ºå¤§ï¼Œä½†æ˜¯ä¹Ÿæœ‰äº›ä¸è¶³ä¹‹å¤„ã€‚æ¯”å¦‚ï¼šæ¯”å¦‚å®ƒè·Ÿ spring å¼ºè€¦åˆäº†ï¼Œå¦‚æœæ¢æˆäº† JFinal ç­‰å…¶ä»–æ¡†æ¶ï¼ŒåŠŸèƒ½å°±ä¼šå¤±æ•ˆã€‚è€Œ@Resource æ˜¯ JSR-250 æä¾›çš„ï¼Œå®ƒæ˜¯ Java æ ‡å‡†ï¼Œç»å¤§éƒ¨åˆ†æ¡†æ¶éƒ½æ”¯æŒã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œæœ‰äº›åœºæ™¯ä½¿ç”¨@Autowired æ— æ³•æ»¡è¶³çš„è¦æ±‚ï¼Œæ”¹æˆ@Resource å´èƒ½è§£å†³é—®é¢˜ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é‡ç‚¹çœ‹çœ‹@Autowired å’Œ@Resource çš„åŒºåˆ«ã€‚</p><ul><li>@Autowired é»˜è®¤æŒ‰ byType è‡ªåŠ¨è£…é…ï¼Œè€Œ@Resource é»˜è®¤ byName è‡ªåŠ¨è£…é…ã€‚</li><li>@Autowired åªåŒ…å«ä¸€ä¸ªå‚æ•°ï¼šrequiredï¼Œè¡¨ç¤ºæ˜¯å¦å¼€å¯è‡ªåŠ¨å‡†å…¥ï¼Œé»˜è®¤æ˜¯ trueã€‚è€Œ@Resource åŒ…å«ä¸ƒä¸ªå‚æ•°ï¼Œå…¶ä¸­æœ€é‡è¦çš„ä¸¤ä¸ªå‚æ•°æ˜¯ï¼šname å’Œ typeã€‚</li><li>@Autowired å¦‚æœè¦ä½¿ç”¨ byNameï¼Œéœ€è¦ä½¿ç”¨@Qualifier ä¸€èµ·é…åˆã€‚è€Œ@Resource å¦‚æœæŒ‡å®šäº† nameï¼Œåˆ™ç”¨ byName è‡ªåŠ¨è£…é…ï¼Œå¦‚æœæŒ‡å®šäº† typeï¼Œåˆ™ç”¨ byType è‡ªåŠ¨è£…é…ã€‚</li><li>@Autowired èƒ½å¤Ÿç”¨åœ¨ï¼šæ„é€ å™¨ã€æ–¹æ³•ã€å‚æ•°ã€æˆå‘˜å˜é‡å’Œæ³¨è§£ä¸Šï¼Œè€Œ@Resource èƒ½ç”¨åœ¨ï¼šç±»ã€æˆå‘˜å˜é‡å’Œæ–¹æ³•ä¸Šã€‚</li><li>@Autowired æ˜¯ spring å®šä¹‰çš„æ³¨è§£ï¼Œè€Œ@Resource æ˜¯ JSR-250 å®šä¹‰çš„æ³¨è§£ã€‚</li></ul><p>æ­¤å¤–ï¼Œå®ƒä»¬çš„è£…é…é¡ºåºä¸åŒã€‚</p><h3 id="autowired-çš„è£…é…é¡ºåºå¦‚ä¸‹"><a class="markdownIt-Anchor" href="#autowired-çš„è£…é…é¡ºåºå¦‚ä¸‹"></a> <strong>@Autowired çš„è£…é…é¡ºåºå¦‚ä¸‹ï¼š</strong></h3><p><img src="https://unpkg.com/serms-assets@1.0.13/Spring/sdsd.png" alt="img" /></p><p><strong>@Resource çš„è£…é…é¡ºåºå¦‚ä¸‹ï¼š</strong></p><p><strong>1.å¦‚æœåŒæ—¶æŒ‡å®šäº† name å’Œ typeï¼š</strong></p><p><img src="https://unpkg.com/serms-assets@1.0.13/Spring/aasassa.png" alt="img" /></p><p><strong>å¦‚æœæŒ‡å®šäº† name:</strong></p><p><img src="https://unpkg.com/serms-assets@1.0.13/Spring/8644ebf81a4c510f236bccbc57802424d62adc4dfb9aab2.png" alt="img" /></p><p><strong>å¦‚æœæŒ‡å®šäº† typeï¼š</strong></p><p><img src="https://unpkg.com/serms-assets@1.0.13/Spring/342ac65c10385343ed8ea3ad912bd2dbd263fd54e1666998.png" alt="img" /></p><p><strong>å¦‚æœæ—¢æ²¡æœ‰æŒ‡å®š nameï¼Œä¹Ÿæ²¡æœ‰æŒ‡å®š typeï¼š</strong></p><p><img src="https://unpkg.com/serms-assets@1.0.13/Spring/7af40ad162d9f2d385020d6c9e358b8c65c069af359a71ef5.png" alt="img" /></p>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
          <category> Springæ³¨è§£ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> Springæ³¨è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ºä»€ä¹ˆIDEAä¸æ¨èä½ ä½¿ç”¨@Autowired?</title>
      <link href="/posts/e97079a9/"/>
      <url>/posts/e97079a9/</url>
      
        <content type="html"><![CDATA[<p><code>@Autowired</code>æ³¨è§£ç›¸ä¿¡æ¯ä¸ª Spring å¼€å‘è€…éƒ½ä¸é™Œç”Ÿäº†ï¼</p><p>ä½†æ˜¯å½“æˆ‘ä»¬ä½¿ç”¨ IDEA å†™ä»£ç çš„æ—¶å€™ï¼Œç»å¸¸ä¼šå‘ç°<code>@Autowired</code>æ³¨è§£ä¸‹é¢æ˜¯æœ‰å°é»„çº¿çš„ï¼Œæˆ‘ä»¬æŠŠå°é¼ æ ‡æ‚¬åœåœ¨ä¸Šé¢ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªå¦‚ä¸‹å›¾æ‰€ç¤ºçš„è­¦å‘Šä¿¡æ¯ï¼š</p><p><img src="https://unpkg.com/serms-assets@1.0.12/Spring/242dd42a2834eb844.png" alt="" /></p><p>é‚£ä¹ˆä¸ºä»€ä¹ˆ IDEA ä¼šç»™å‡º<code>Field injection is not recommended</code>è¿™æ ·çš„è­¦å‘Šå‘¢ï¼Ÿ</p><p>ä¸‹é¢å¸¦ç€è¿™æ ·çš„é—®é¢˜ï¼Œä¸€èµ·æ¥å…¨é¢çš„äº†è§£ä¸‹ Spring ä¸­çš„ä¸‰ç§æ³¨å…¥æ–¹å¼ä»¥åŠä»–ä»¬ä¹‹é—´åœ¨å„æ–¹é¢çš„ä¼˜åŠ£ã€‚</p><h2 id="spring-ä¸­çš„ä¸‰ç§ä¾èµ–æ³¨å…¥æ–¹å¼"><a class="markdownIt-Anchor" href="#spring-ä¸­çš„ä¸‰ç§ä¾èµ–æ³¨å…¥æ–¹å¼"></a> Spring ä¸­çš„ä¸‰ç§ä¾èµ–æ³¨å…¥æ–¹å¼</h2><h3 id="field-injection"><a class="markdownIt-Anchor" href="#field-injection"></a> <strong>Field Injection</strong></h3><p><code>@Autowired</code>æ³¨è§£çš„ä¸€å¤§ä½¿ç”¨åœºæ™¯å°±æ˜¯<code>Field Injection</code>ã€‚</p><p>å…·ä½“å½¢å¼å¦‚ä¸‹ï¼š</p><p><img src="https://unpkg.com/serms-assets@1.0.12/Spring/94cad1c8a786c9170784f2ca88ad1939c.png" alt="" /></p><p>è¿™ç§æ³¨å…¥æ–¹å¼é€šè¿‡ Java çš„åå°„æœºåˆ¶å®ç°ï¼Œæ‰€ä»¥ private çš„æˆå‘˜ä¹Ÿå¯ä»¥è¢«æ³¨å…¥å…·ä½“çš„å¯¹è±¡ã€‚</p><h3 id="constructor-injection"><a class="markdownIt-Anchor" href="#constructor-injection"></a> Constructor Injection</h3><p><code>Constructor Injection</code>æ˜¯æ„é€ å™¨æ³¨å…¥ï¼Œæ˜¯æˆ‘ä»¬æ—¥å¸¸æœ€ä¸ºæ¨èçš„ä¸€ç§ä½¿ç”¨æ–¹å¼ã€‚</p><p>å…·ä½“å½¢å¼å¦‚ä¸‹ï¼š</p><p><img src="https://unpkg.com/serms-assets@1.0.12/Spring/2e2eb9389b504fc20e5f6adeb8f58053b8df6d7.png" alt="" /></p><p>è¿™ç§æ³¨å…¥æ–¹å¼å¾ˆç›´æ¥ï¼Œé€šè¿‡å¯¹è±¡æ„å»ºçš„æ—¶å€™å»ºç«‹å…³ç³»ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼å¯¹å¯¹è±¡åˆ›å»ºçš„é¡ºåºä¼šæœ‰è¦æ±‚ï¼Œå½“ç„¶ Spring ä¼šä¸ºä½ æå®šè¿™æ ·çš„å…ˆåé¡ºåºï¼Œé™¤éä½ å‡ºç°å¾ªç¯ä¾èµ–ï¼Œç„¶åå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><h3 id="setter-injection"><a class="markdownIt-Anchor" href="#setter-injection"></a> Setter Injection</h3><p><code>Setter Injection</code>ä¹Ÿä¼šç”¨åˆ°<code>@Autowired</code>æ³¨è§£ï¼Œä½†ä½¿ç”¨æ–¹å¼ä¸<code>Field Injection</code>æœ‰æ‰€ä¸åŒï¼Œ<code>Field Injection</code>æ˜¯ç”¨åœ¨æˆå‘˜å˜é‡ä¸Šï¼Œè€Œ<code>Setter Injection</code>çš„æ—¶å€™ï¼Œæ˜¯ç”¨åœ¨æˆå‘˜å˜é‡çš„ Setter å‡½æ•°ä¸Šã€‚</p><p>å…·ä½“å½¢å¼å¦‚ä¸‹ï¼š</p><p><img src="https://unpkg.com/serms-assets@1.0.12/Spring/a08b87d6277f9e2fd1b1ab1c4230882dsee208a50.png" alt="" /></p><p>è¿™ç§æ³¨å…¥æ–¹å¼ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯é€šè¿‡è°ƒç”¨æˆå‘˜å˜é‡çš„ set æ–¹æ³•æ¥æ³¨å…¥æƒ³è¦ä½¿ç”¨çš„ä¾èµ–å¯¹è±¡ã€‚</p><h3 id="ä¸‰ç§ä¾èµ–æ³¨å…¥çš„å¯¹æ¯”"><a class="markdownIt-Anchor" href="#ä¸‰ç§ä¾èµ–æ³¨å…¥çš„å¯¹æ¯”"></a> ä¸‰ç§ä¾èµ–æ³¨å…¥çš„å¯¹æ¯”</h3><p>åœ¨çŸ¥é“äº† Spring æä¾›çš„ä¸‰ç§ä¾èµ–æ³¨å…¥æ–¹å¼ä¹‹åï¼Œæˆ‘ä»¬ç»§ç»­å›åˆ°æœ¬æ–‡å¼€å¤´è¯´åˆ°çš„é—®é¢˜ï¼šIDEA ä¸ºä»€ä¹ˆä¸æ¨èä½¿ç”¨<code>Field Injection</code>å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥ä»å¤šä¸ªå¼€å‘æµ‹è¯•çš„è€ƒå¯Ÿè§’åº¦æ¥å¯¹æ¯”ä¸€ä¸‹å®ƒä»¬ä¹‹é—´çš„ä¼˜åŠ£ï¼š</p><p><strong>å¯é æ€§</strong></p><p>ä»å¯¹è±¡æ„å»ºè¿‡ç¨‹å’Œä½¿ç”¨è¿‡ç¨‹ï¼Œçœ‹å¯¹è±¡åœ¨å„é˜¶æ®µçš„ä½¿ç”¨æ˜¯å¦å¯é æ¥è¯„åˆ¤ï¼š</p><ul><li><code>Field Injection</code>ï¼šä¸å¯é </li><li><code>Constructor Injection</code>ï¼šå¯é </li><li><code>Setter Injection</code>ï¼šä¸å¯é </li></ul><p>ç”±äºæ„é€ å‡½æ•°æœ‰ä¸¥æ ¼çš„æ„å»ºé¡ºåºå’Œä¸å¯å˜æ€§ï¼Œä¸€æ—¦æ„å»ºå°±å¯ç”¨ï¼Œä¸”ä¸ä¼šè¢«æ›´æ”¹ã€‚</p><p><strong>å¯ç»´æŠ¤æ€§</strong></p><p>ä¸»è¦ä»æ›´å®¹æ˜“é˜…è¯»ã€åˆ†æä¾èµ–å…³ç³»çš„è§’åº¦æ¥è¯„åˆ¤ï¼š</p><ul><li><code>Field Injection</code>ï¼šå·®</li><li><code>Constructor Injection</code>ï¼šå¥½</li><li><code>Setter Injection</code>ï¼šå·®</li></ul><p>è¿˜æ˜¯ç”±äºä¾èµ–å…³é”®çš„æ˜ç¡®ï¼Œä»æ„é€ å‡½æ•°ä¸­å¯ä»¥æ˜¾ç°çš„åˆ†æå‡ºä¾èµ–å…³ç³»ï¼Œå¯¹äºæˆ‘ä»¬å¦‚ä½•å»è¯»æ‡‚å…³ç³»å’Œç»´æŠ¤å…³ç³»æ›´å‹å¥½ã€‚</p><p><strong>å¯æµ‹è¯•æ€§</strong></p><p>å½“åœ¨å¤æ‚ä¾èµ–å…³ç³»çš„æƒ…å†µä¸‹ï¼Œè€ƒå¯Ÿç¨‹åºæ˜¯å¦æ›´å®¹æ˜“ç¼–å†™å•å…ƒæµ‹è¯•æ¥è¯„åˆ¤</p><ul><li><code>Field Injection</code>ï¼šå·®</li><li><code>Constructor Injection</code>ï¼šå¥½</li><li><code>Setter Injection</code>ï¼šå¥½</li></ul><p><code>Constructor Injection</code>å’Œ<code>Setter Injection</code>çš„æ–¹å¼æ›´å®¹æ˜“ Mock å’Œæ³¨å…¥å¯¹è±¡ï¼Œæ‰€ä»¥æ›´å®¹æ˜“å®ç°å•å…ƒæµ‹è¯•ã€‚</p><p><strong>çµæ´»æ€§</strong></p><p>ä¸»è¦æ ¹æ®å¼€å‘å®ç°æ—¶å€™çš„ç¼–ç çµæ´»æ€§æ¥åˆ¤æ–­ï¼š</p><ul><li><code>Field Injection</code>ï¼šå¾ˆçµæ´»</li><li><code>Constructor Injection</code>ï¼šä¸çµæ´»</li><li><code>Setter Injection</code>ï¼šå¾ˆçµæ´»</li></ul><p>ç”±äº<code>Constructor Injection</code>å¯¹ Bean çš„ä¾èµ–å…³ç³»è®¾è®¡æœ‰ä¸¥æ ¼çš„é¡ºåºè¦æ±‚ï¼Œæ‰€ä»¥è¿™ç§æ³¨å…¥æ–¹å¼ä¸å¤ªçµæ´»ã€‚ç›¸å<code>Field Injection</code>å’Œ<code>Setter Injection</code>å°±éå¸¸çµæ´»ï¼Œä½†ä¹Ÿå› ä¸ºçµæ´»å¸¦æ¥äº†å±€é¢çš„æ··ä¹±ï¼Œä¹Ÿæ˜¯ä¸€æŠŠåŒåˆƒå‰‘ã€‚</p><p><strong>å¾ªç¯å…³ç³»çš„æ£€æµ‹</strong></p><p>å¯¹äº Bean ä¹‹é—´æ˜¯å¦å­˜åœ¨å¾ªç¯ä¾èµ–å…³ç³»çš„æ£€æµ‹èƒ½åŠ›ï¼š</p><ul><li><code>Field Injection</code>ï¼šä¸æ£€æµ‹</li><li><code>Constructor Injection</code>ï¼šè‡ªåŠ¨æ£€æµ‹</li><li><code>Setter Injection</code>ï¼šä¸æ£€æµ‹</li></ul><p><strong>æ€§èƒ½è¡¨ç°</strong></p><p>ä¸åŒçš„æ³¨å…¥æ–¹å¼ï¼Œå¯¹æ€§èƒ½çš„å½±å“</p><ul><li><code>Field Injection</code>ï¼šå¯åŠ¨å¿«</li><li><code>Constructor Injection</code>ï¼šå¯åŠ¨æ…¢</li><li><code>Setter Injection</code>ï¼šå¯åŠ¨å¿«</li></ul><p>ä¸»è¦å½±å“å°±æ˜¯å¯åŠ¨æ—¶é—´ï¼Œç”±äº<code>Constructor Injection</code>æœ‰ä¸¥æ ¼çš„é¡ºåºè¦æ±‚ï¼Œæ‰€ä»¥ä¼šæ‹‰é•¿å¯åŠ¨æ—¶é—´ã€‚</p><p>æ‰€ä»¥ï¼Œç»¼åˆä¸Šé¢å„æ–¹é¢çš„æ¯”è¾ƒï¼Œå¯ä»¥è·å¾—å¦‚ä¸‹è¡¨æ ¼ï¼š</p><p><img src="https://unpkg.com/serms-assets@1.0.12/Spring/sc99aef1ea6ee7a3a703ba.png" alt="" /></p><p>ç»“æœä¸€ç›®äº†ç„¶ï¼Œ<code>Constructor Injection</code>åœ¨å¾ˆå¤šæ–¹é¢éƒ½æ˜¯ä¼˜äºå…¶ä»–ä¸¤ç§æ–¹å¼çš„ï¼Œæ‰€ä»¥<code>Constructor Injection</code>é€šå¸¸éƒ½æ˜¯é¦–é€‰æ–¹æ¡ˆï¼</p><p>è€Œ<code>Setter Injection</code>æ¯”èµ·<code>Field Injection</code>æ¥è¯´ï¼Œå¤§éƒ¨åˆ†éƒ½ä¸€æ ·ï¼Œä½†å› ä¸ºå¯æµ‹è¯•æ€§æ›´å¥½ï¼Œæ‰€ä»¥å½“ä½ è¦ç”¨<code>@Autowired</code>çš„æ—¶å€™ï¼Œæ¨èä½¿ç”¨<code>Setter Injection</code>çš„æ–¹å¼ï¼Œè¿™æ · IDEA ä¹Ÿä¸ä¼šç»™å‡ºè­¦å‘Šäº†ã€‚åŒæ—¶ï¼Œä¹Ÿä¾§é¢ä¹Ÿåæ˜ äº†ï¼Œå¯æµ‹è¯•æ€§çš„é‡è¦åœ°ä½å•Šï¼</p><h3 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“</h3><p>æœ€åï¼Œå¯¹äºä»Šå¤©çš„é—®é¢˜è®¨è®ºï¼Œæˆ‘ä»¬ç»™å‡ºä¸¤ä¸ªç»“è®ºï¼Œæ–¹ä¾¿å¤§å®¶è®°å¿†ï¼š</p><ol><li>ä¾èµ–æ³¨å…¥çš„ä½¿ç”¨ä¸Šï¼Œ<code>Constructor Injection</code>æ˜¯é¦–é€‰ã€‚</li><li>ä½¿ç”¨<code>@Autowired</code>æ³¨è§£çš„æ—¶å€™ï¼Œè¦ä½¿ç”¨<code>Setter Injection</code>æ–¹å¼ï¼Œè¿™æ ·ä»£ç æ›´å®¹æ˜“ç¼–å†™å•å…ƒæµ‹è¯•ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> å¥‡æ€ªçš„çŸ¥è¯† </category>
          
          <category> ä¸ºä»€ä¹ˆIDEAä¸æ¨èä½ ä½¿ç”¨@Autowired? </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¥‡æ€ªçš„çŸ¥è¯† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springæ³¨è§£-Configurationæ³¨è§£ä½¿ç”¨</title>
      <link href="/posts/1d0508a6/"/>
      <url>/posts/1d0508a6/</url>
      
        <content type="html"><![CDATA[<h2 id="configuration-çš„ä½¿ç”¨"><a class="markdownIt-Anchor" href="#configuration-çš„ä½¿ç”¨"></a> <a href="https://hgm.vercel.app/post/1d0508a6/">@Configuration çš„ä½¿ç”¨</a></h2><p>ä» Spring3.0ï¼Œ@Configuration ç”¨äºå®šä¹‰é…ç½®ç±»ï¼Œå¯æ›¿æ¢ xml é…ç½®æ–‡ä»¶ï¼Œè¢«æ³¨è§£çš„ç±»å†…éƒ¨åŒ…å«æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¢«@Bean æ³¨è§£çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å°†ä¼šè¢« AnnotationConfigApplicationContext æˆ– AnnotationConfigWebApplicationContext ç±»è¿›è¡Œæ‰«æï¼Œå¹¶ç”¨äºæ„å»º bean å®šä¹‰ï¼Œåˆå§‹åŒ– Spring å®¹å™¨ã€‚ä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨äº†è¿™ä¸ªæ³¨è§£å®Œå…¨ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»é…ç½®<code>applicationContext.xml</code>äº†</p><p><strong>æ³¨æ„</strong>ï¼š@Configuration æ³¨è§£çš„é…ç½®ç±»æœ‰å¦‚ä¸‹è¦æ±‚ï¼š</p><ol><li>@Configuration ä¸å¯ä»¥æ˜¯ final ç±»å‹ï¼›</li><li>@Configuration ä¸å¯ä»¥æ˜¯åŒ¿åç±»ï¼›</li><li>åµŒå¥—çš„ configuration å¿…é¡»æ˜¯é™æ€ç±»ã€‚</li></ol><p><strong>@Configuation åŠ è½½ Spring æ–¹æ³•</strong></p><h2 id="configuration-é…ç½®-spring-å¹¶å¯åŠ¨-spring-å®¹å™¨"><a class="markdownIt-Anchor" href="#configuration-é…ç½®-spring-å¹¶å¯åŠ¨-spring-å®¹å™¨"></a> @Configuration é…ç½® spring å¹¶å¯åŠ¨ spring å®¹å™¨</h2><p>@Configuration æ ‡æ³¨åœ¨ç±»ä¸Šï¼Œç›¸å½“äºæŠŠè¯¥ç±»ä½œä¸º spring çš„ xml é…ç½®æ–‡ä»¶ä¸­çš„<code>&lt;beans&gt;</code>ï¼Œä½œç”¨ä¸ºï¼šé…ç½® spring å®¹å™¨(åº”ç”¨ä¸Šä¸‹æ–‡)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ms.demo.configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/7 22:43</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç©ºå‚æ„é€ </span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TestConfiguration</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;TestConfigurationå®¹å™¨å¯åŠ¨åˆå§‹åŒ–ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç›¸å½“äº Spring çš„ xml é…ç½®æ–‡ä»¶:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸»æ–¹æ³•è¿›è¡Œæµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.ms.demo.configuration.TestConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/7 22:46</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMain</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// @Configurationæ³¨è§£çš„springå®¹å™¨åŠ è½½æ–¹å¼ï¼Œç”¨AnnotationConfigApplicationContextæ›¿æ¢ClassPathXmlApplicationContext</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(TestConfiguration.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœåŠ è½½spring-context.xmlæ–‡ä»¶ï¼š</span></span><br><span class="line">        <span class="comment">// ApplicationContext context = new</span></span><br><span class="line">        <span class="comment">// ClassPathXmlApplicationContext(&quot;spring-context.xml&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»è¿è¡Œä¸»æ–¹æ³•ç»“æœå¯ä»¥çœ‹å‡ºï¼Œspring å®¹å™¨å·²ç»å¯åŠ¨äº†ï¼š</p><p><img src="https://unpkg.com/serms-assets@1.0.11/Spring/image-20220407224716063.png" alt="" /></p><h2 id="configuration-å¯åŠ¨å®¹å™¨bean-æ³¨å†Œ-beanbean-ä¸‹ç®¡ç†-bean-çš„ç”Ÿå‘½å‘¨æœŸ"><a class="markdownIt-Anchor" href="#configuration-å¯åŠ¨å®¹å™¨bean-æ³¨å†Œ-beanbean-ä¸‹ç®¡ç†-bean-çš„ç”Ÿå‘½å‘¨æœŸ"></a> @Configuration å¯åŠ¨å®¹å™¨+@Bean æ³¨å†Œ Beanï¼Œ@Bean ä¸‹ç®¡ç† bean çš„ç”Ÿå‘½å‘¨æœŸ</h2><p>@Bean æ ‡æ³¨åœ¨æ–¹æ³•ä¸Š(è¿”å›æŸä¸ªå®ä¾‹çš„æ–¹æ³•)ï¼Œç­‰ä»·äº spring çš„ xml é…ç½®æ–‡ä»¶ä¸­çš„<code>&lt;bean&gt;</code>ï¼Œä½œç”¨ä¸ºï¼šæ³¨å†Œ bean å¯¹è±¡</p><p>bean ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ms.demo.configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/7 22:49</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBean</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sayHello</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;TestBean sayHello...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;username:&quot;</span> + <span class="built_in">this</span>.username + <span class="string">&quot;,url:&quot;</span> + <span class="built_in">this</span>.url + <span class="string">&quot;,password:&quot;</span> + <span class="built_in">this</span>.password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;TestBean åˆå§‹åŒ–ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cleanUp</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;TestBean é”€æ¯ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é…ç½®ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ms.demo.configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Scope;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/7 22:43</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç©ºå‚æ„é€ </span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TestConfiguration</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;TestConfigurationå®¹å™¨å¯åŠ¨åˆå§‹åŒ–ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @Beanæ³¨è§£æ³¨å†Œbean,åŒæ—¶å¯ä»¥æŒ‡å®šåˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</span></span><br><span class="line">    <span class="comment">// @Bean(name=&quot;testBean&quot;,initMethod=&quot;start&quot;,destroyMethod=&quot;cleanUp&quot;)</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Scope(&quot;prototype&quot;)</span>     <span class="comment">//é…ç½®ä½œç”¨åŸŸ,é»˜è®¤:singletonå•ä¾‹æ¨¡å¼ ;prototype:åŒä¾‹æ¨¡å¼,ä¿è¯æ¯æ¬¡è¯·æ±‚éƒ½åˆ›å»ºä¸€æ¬¡å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> TestBean <span class="title function_">testBean</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">TestBean</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»æ–¹æ³•æµ‹è¯•ç±»:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ms.demo.configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMain</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// @Configurationæ³¨è§£çš„springå®¹å™¨åŠ è½½æ–¹å¼ï¼Œç”¨AnnotationConfigApplicationContextæ›¿æ¢ClassPathXmlApplicationContext</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(TestConfiguration.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœåŠ è½½spring-context.xmlæ–‡ä»¶ï¼š</span></span><br><span class="line">        <span class="comment">// ApplicationContext context = new</span></span><br><span class="line">        <span class="comment">// ClassPathXmlApplicationContext(&quot;spring-context.xml&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–bean</span></span><br><span class="line">        <span class="type">TestBean</span> <span class="variable">tb</span> <span class="operator">=</span> (TestBean) context.getBean(<span class="string">&quot;testBean&quot;</span>);</span><br><span class="line">        tb.sayHello();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœ:</p><p><img src="https://unpkg.com/serms-assets@1.0.11/Spring/image-20220407225446317.png" alt="" /></p><p>æ³¨ï¼š<br />(1)ã€@Bean æ³¨è§£åœ¨è¿”å›å®ä¾‹çš„æ–¹æ³•ä¸Šï¼Œå¦‚æœæœªé€šè¿‡@Bean æŒ‡å®š bean çš„åç§°ï¼Œåˆ™é»˜è®¤ä¸æ ‡æ³¨çš„æ–¹æ³•åç›¸åŒï¼›<br />(2)ã€@Bean æ³¨è§£é»˜è®¤ä½œç”¨åŸŸä¸ºå•ä¾‹ singleton ä½œç”¨åŸŸï¼Œå¯é€šè¿‡@Scope(â€œprototypeâ€)è®¾ç½®ä¸ºåŸå‹ä½œç”¨åŸŸï¼›<br />(3)ã€æ—¢ç„¶@Bean çš„ä½œç”¨æ˜¯æ³¨å†Œ bean å¯¹è±¡ï¼Œé‚£ä¹ˆå®Œå…¨å¯ä»¥ä½¿ç”¨@Componentã€@Controllerã€@Serviceã€@Ripository ç­‰æ³¨è§£æ³¨å†Œ beanï¼Œå½“ç„¶éœ€è¦é…ç½®@ComponentScan æ³¨è§£è¿›è¡Œè‡ªåŠ¨æ‰«æã€‚</p><h2 id="bean-ä¸‹ç®¡ç†-bean-çš„ç”Ÿå‘½å‘¨æœŸ"><a class="markdownIt-Anchor" href="#bean-ä¸‹ç®¡ç†-bean-çš„ç”Ÿå‘½å‘¨æœŸ"></a> <strong>@Bean ä¸‹ç®¡ç† bean çš„ç”Ÿå‘½å‘¨æœŸ</strong></h2><p>å¯ä»¥ä½¿ç”¨åŸºäº Java çš„é…ç½®æ¥ç®¡ç† bean çš„ç”Ÿå‘½å‘¨æœŸã€‚<code>@Bean</code> æ”¯æŒä¸¤ç§å±æ€§ï¼Œå³ <code>initMethod</code> å’Œ<code>destroyMethod</code>ï¼Œè¿™äº›å±æ€§å¯ç”¨äºå®šä¹‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚åœ¨å®ä¾‹åŒ– bean æˆ–å³å°†é”€æ¯å®ƒæ—¶ï¼Œå®¹å™¨ä¾¿å¯è°ƒç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¹Ÿç§°ä¸ºå›è°ƒæ–¹æ³•ï¼Œå› ä¸ºå®ƒå°†ç”±å®¹å™¨è°ƒç”¨ã€‚ä½¿ç”¨ <code>@Bean</code> æ³¨é‡Šæ³¨å†Œçš„ bean ä¹Ÿæ”¯æŒ JSR-250 è§„å®šçš„æ ‡å‡† <code>@PostConstruct</code> å’Œ <code>@PreDestroy</code> æ³¨é‡Šã€‚å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨ XML æ–¹æ³•æ¥å®šä¹‰ beanï¼Œé‚£ä¹ˆå°±åº”è¯¥ä½¿ç”¨ bean å…ƒç´ æ¥å®šä¹‰ç”Ÿå‘½å‘¨æœŸå›è°ƒæ–¹æ³•ã€‚ä»¥ä¸‹ä»£ç æ˜¾ç¤ºäº†åœ¨ XML é…ç½®ä¸­é€šå¸¸ä½¿ç”¨ bean å…ƒç´ å®šä¹‰å›è°ƒçš„æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ms.demo.configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Scope;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/7 22:43</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç©ºå‚æ„é€ </span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TestConfiguration</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;TestConfigurationå®¹å™¨å¯åŠ¨åˆå§‹åŒ–ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// @Beanæ³¨è§£æ³¨å†Œbean,åŒæ—¶å¯ä»¥æŒ‡å®šåˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Bean(name=&quot;testBean&quot;,initMethod=&quot;start&quot;,destroyMethod=&quot;cleanUp&quot;)</span></span><br><span class="line">    <span class="meta">@Scope(&quot;prototype&quot;)</span>     <span class="comment">//é…ç½®ä½œç”¨åŸŸ,é»˜è®¤:singletonå•ä¾‹æ¨¡å¼ ;prototype:åŒä¾‹æ¨¡å¼,ä¿è¯æ¯æ¬¡è¯·æ±‚éƒ½åˆ›å»ºä¸€æ¬¡å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> TestBean <span class="title function_">testBean</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">TestBean</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯åŠ¨ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.ms.demo.configuration.TestBean;</span><br><span class="line"><span class="keyword">import</span> com.ms.demo.configuration.TestConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/7 22:46</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMain</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// @Configurationæ³¨è§£çš„springå®¹å™¨åŠ è½½æ–¹å¼ï¼Œç”¨AnnotationConfigApplicationContextæ›¿æ¢ClassPathXmlApplicationContext</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(TestConfiguration.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœåŠ è½½spring-context.xmlæ–‡ä»¶ï¼š</span></span><br><span class="line">        <span class="comment">// ApplicationContext context = new</span></span><br><span class="line">        <span class="comment">// ClassPathXmlApplicationContext(&quot;spring-context.xml&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–bean</span></span><br><span class="line">        <span class="type">TestBean</span> <span class="variable">tb</span> <span class="operator">=</span> (TestBean) context.getBean(<span class="string">&quot;testBean&quot;</span>);</span><br><span class="line">        tb.sayHello();</span><br><span class="line">        System.out.println(tb);</span><br><span class="line"></span><br><span class="line">        <span class="type">TestBean</span> <span class="variable">tb2</span> <span class="operator">=</span> (TestBean) context.getBean(<span class="string">&quot;testBean&quot;</span>);</span><br><span class="line">        tb2.sayHello();</span><br><span class="line">        System.out.println(tb2);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç»“æœ:</p><p><img src="https://unpkg.com/serms-assets@1.0.11/Spring/image-20220407230933661.png" alt="" /></p><h2 id="configuration-å¯åŠ¨å®¹å™¨component-æ³¨å†Œ-bean"><a class="markdownIt-Anchor" href="#configuration-å¯åŠ¨å®¹å™¨component-æ³¨å†Œ-bean"></a> @Configuration å¯åŠ¨å®¹å™¨+@Component æ³¨å†Œ Bean</h2><p>Bean ç±»:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ms.demo.configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/7 22:49</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//æ·»åŠ æ³¨å†ŒBeançš„æ³¨è§£</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBean</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sayHello</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;TestBean sayHello...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;username:&quot;</span> + <span class="built_in">this</span>.username + <span class="string">&quot;,url:&quot;</span> + <span class="built_in">this</span>.url + <span class="string">&quot;,password:&quot;</span> + <span class="built_in">this</span>.password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;TestBean åˆå§‹åŒ–ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cleanUp</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;TestBean é”€æ¯ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é…ç½®ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ms.demo.configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Scope;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/7 22:43</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//æ·»åŠ è‡ªåŠ¨æ‰«ææ³¨è§£ï¼ŒbasePackagesä¸ºTestBeanåŒ…è·¯å¾„,ä¹Ÿå°±æ˜¯è®©SpringIOCå®¹å™¨æ‰«æåˆ°åˆšåˆšæ·»åŠ @Componentçš„Beanç±»</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &quot;com.ms.demo.configuration&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç©ºå‚æ„é€ </span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TestConfiguration</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;TestConfigurationå®¹å™¨å¯åŠ¨åˆå§‹åŒ–ã€‚ã€‚ã€‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸»æ–¹æ³•æµ‹è¯•è·å– bean å¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.ms.demo.configuration.TestBean;</span><br><span class="line"><span class="keyword">import</span> com.ms.demo.configuration.TestConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/7 22:46</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMain</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// @Configurationæ³¨è§£çš„springå®¹å™¨åŠ è½½æ–¹å¼ï¼Œç”¨AnnotationConfigApplicationContextæ›¿æ¢ClassPathXmlApplicationContext</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(TestConfiguration.class);</span><br><span class="line">        <span class="comment">//è·å–bean</span></span><br><span class="line">        <span class="type">TestBean</span> <span class="variable">tb</span> <span class="operator">=</span> (TestBean) context.getBean(<span class="string">&quot;testBean&quot;</span>);</span><br><span class="line">        tb.sayHello();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>sayHello()æ–¹æ³•éƒ½è¢«æ­£å¸¸è°ƒç”¨ã€‚</p><p><img src="https://unpkg.com/serms-assets@1.0.11/Spring/image-20220407231701864.png" alt="" /></p><h2 id="ä½¿ç”¨-annotationconfigapplicationcontext-æ³¨å†Œ-appcontext-ç±»çš„ä¸¤ç§æ–¹æ³•"><a class="markdownIt-Anchor" href="#ä½¿ç”¨-annotationconfigapplicationcontext-æ³¨å†Œ-appcontext-ç±»çš„ä¸¤ç§æ–¹æ³•"></a> <strong>ä½¿ç”¨ AnnotationConfigApplicationContext æ³¨å†Œ AppContext ç±»çš„ä¸¤ç§æ–¹æ³•</strong></h2><ol><li>é…ç½®ç±»çš„æ³¨å†Œæ–¹å¼æ˜¯å°†å…¶ä¼ é€’ç»™ <code>AnnotationConfigApplicationContext</code> æ„é€ å‡½æ•°</li></ol><p><img src="https://unpkg.com/serms-assets@1.0.11/Spring/image-20220407232200976.png" alt="" /></p><ol start="2"><li><code>AnnotationConfigApplicationContext</code> çš„<code>register</code> æ–¹æ³•ä¼ å…¥é…ç½®ç±»æ¥æ³¨å†Œé…ç½®ç±»</li></ol><p><img src="https://unpkg.com/serms-assets@1.0.11/Spring/image-20220407232908741.png" alt="" /></p><h2 id="configuation-æ€»ç»“"><a class="markdownIt-Anchor" href="#configuation-æ€»ç»“"></a> @Configuation æ€»ç»“</h2><p>@Configuation ç­‰ä»·äº<code>&lt;Beans&gt;&lt;/Beans&gt;</code></p><p>@Bean ç­‰ä»·äº<code>&lt;Bean&gt;&lt;/Bean&gt;</code></p><p>@ComponentScan ç­‰ä»·äº<code>&lt;context:component-scan base-package=&quot;com.ms.demo&quot;/&gt;</code></p>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
          <category> Springæ³¨è§£ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> Springæ³¨è§£ </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springå…¨å®¶æ¡¶æ³¨è§£è§£æ(æŒç»­è·Ÿæ–°ing~)</title>
      <link href="/posts/3d190b4f/"/>
      <url>/posts/3d190b4f/</url>
      
        <content type="html"><![CDATA[<div class="tip home"><p>åœ¨æ¢ç©¶æ³¨è§£å‰å…ˆäº†è§£ä¸€ä¸‹æ³¨è§£,ä½•ä¸ºæ³¨è§£ï¼Ÿæ³¨è§£æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªç±»ï¼Œå¼€å‘ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ³¨è§£ å–ä»£ <a href="https://so.csdn.net/so/search?q=xml&amp;spm=1001.2101.3001.7020">xml</a>é…ç½®æ–‡ä»¶ã€‚</p></div><p><strong>æ³¨æ„:åœ¨ä½¿ç”¨æ³¨è§£å¼€å‘æ—¶,è¯·æŸ¥çœ‹å¯¹åº”çš„æ¡†æ¶æ˜¯å¦éœ€è¦å¼€å¯æ³¨è§£æ”¯æŒ,å¦åˆ™ç”¨äº†æ³¨è§£ä¹Ÿæ— æ•ˆ!!!</strong></p><h2 id="ioc-å®¹å™¨ç›¸å…³"><a class="markdownIt-Anchor" href="#ioc-å®¹å™¨ç›¸å…³"></a> IOC å®¹å™¨ç›¸å…³</h2><h3 id="componen"><a class="markdownIt-Anchor" href="#componen"></a> @Componen:</h3><details class="folding-tag" yellow><summary> @Componentæ³¨è§£ </summary>              <div class='content'>              <blockquote><p><code>@component(value)</code>:ç”¨äºåˆ›å»ºå¯¹è±¡çš„,ä½œç”¨äºç±».</p><p><code>value</code>ï¼šæŒ‡å®š bean çš„ idã€‚å¦‚æœä¸æŒ‡å®š value å±æ€§ï¼Œé»˜è®¤ bean çš„ id æ˜¯å½“å‰ç±»çš„ç±»åã€‚é¦–å­—æ¯å°å†™ã€‚</p><p><code>@component</code>æ˜¯ spring ä¸­çš„ä¸€ä¸ªæ³¨è§£ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å®ç° bean çš„æ³¨å…¥,ä»£æ›¿äº†ä¼ ç»Ÿçš„ xml æ–¹å¼æ³¨å…¥ bean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@Componentç»„ä»¶ ç­‰ä»·äº:&lt;bean id=&quot;user&quot; class=&quot;com.ms.pojo.User&quot;/&gt;</span></span><br><span class="line"><span class="comment">//ä¹Ÿè¯´æ˜è¿™ä¸ªç±»è¢«Springæ¥ç®¡äº†,æ³¨å†Œåˆ°äº†å®¹å™¨ä¸­</span></span><br><span class="line"><span class="meta">@Component(&quot;user&quot;)</span><span class="comment">//(&quot;user&quot;)å…¶å®å°±æ˜¯Bean id</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">   è¿™é‡Œçœç•¥ä»£ç .....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote><p>åœ¨ web å¼€å‘ä¸­ï¼Œä¼šæŒ‰ç…§ MVC ä¸‰å±‚æ¶æ„åˆ†å±‚ï¼æä¾› 3 ä¸ª<code>@Component</code>æ³¨è§£è¡ç”Ÿæ³¨è§£ï¼ˆåŠŸèƒ½ä¸€æ ·ï¼‰æ¥å–ä»£,å…¶å®å°±æ˜¯æ›´åŠ è¯­ä¹‰åŒ–</p><div class="tabs" id=""><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#-1">controlleræ³¨è§£</button></li><li class="tab"><button type="button" data-href="#-2">serviceæ³¨è§£</button></li><li class="tab"><button type="button" data-href="#-3">repositoryæ³¨è§£</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><p>@controller æ§åˆ¶å™¨ï¼ˆè¡¨ç°å±‚æ³¨è§£ï¼‰<br />ç”¨äºæ ‡æ³¨æ§åˆ¶å±‚ï¼Œç›¸å½“äº MVC å±‚ä¸­çš„ web å±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller(&quot;userCotroller&quot;)</span><span class="comment">//valueç›¸å½“äºBeanä¸­çš„id</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-2"><p>@service æœåŠ¡ï¼ˆä¸šåŠ¡å±‚æ³¨è§£ï¼‰<br />ç”¨äºæ ‡æ³¨æœåŠ¡å±‚ï¼Œä¸»è¦ç”¨æ¥è¿›è¡Œä¸šåŠ¡çš„é€»è¾‘å¤„ç†,ç›¸å½“äº MVC å±‚ä¸­çš„ service å±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service(&quot;userService&quot;)</span><span class="comment">//valueç›¸å½“äºBeanä¸­çš„id</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-3"><p>@repositoryï¼ˆæŒä¹…å±‚æ³¨è§£ï¼‰<br />ç”¨äºæ ‡æ³¨æ•°æ®è®¿é—®å±‚ï¼Œä¹Ÿå¯ä»¥è¯´ç”¨äºæ ‡æ³¨æ•°æ®è®¿é—®ç»„ä»¶ï¼Œå³ DAO ç»„ä»¶,ç›¸å½“äº MVC å±‚ä¸­çš„ dao å±‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository(&quot;userDao&quot;)</span> <span class="comment">//valueç›¸å½“äºBeanä¸­çš„id</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><blockquote><p>æ€»ç»“:</p><p>@Component ç”¨äºæŠŠå½“å‰æ–¹æ³•çš„è¿”å›å€¼ä½œä¸º bean å¯¹è±¡å­˜å…¥ spring çš„ ioc å®¹å™¨ä¸­<br />å±æ€§: value:ç”¨äºæŒ‡å®š bean çš„ idã€‚å½“ä¸å†™æ—¶ï¼Œé»˜è®¤å€¼æ˜¯å½“å‰æ–¹æ³•çš„åç§°<br />ç»†èŠ‚ï¼šå½“æˆ‘ä»¬ä½¿ç”¨æ³¨è§£é…ç½®æ–¹æ³•æ—¶ï¼Œå¦‚æœæ–¹æ³•æœ‰å‚æ•°ï¼Œspring æ¡†æ¶ä¼šå»å®¹å™¨ä¸­æŸ¥æ‰¾æœ‰æ²¡æœ‰å¯ç”¨çš„ bean å¯¹è±¡ã€‚<br />æŸ¥æ‰¾çš„æ–¹å¼å’Œ Autowired æ³¨è§£çš„ä½œç”¨æ˜¯ä¸€æ ·çš„</p></blockquote>              </div>            </details><h2 id="ç”¨äºæ³¨å…¥æ•°æ®"><a class="markdownIt-Anchor" href="#ç”¨äºæ³¨å…¥æ•°æ®"></a> <strong>ç”¨äºæ³¨å…¥æ•°æ®</strong></h2><h3 id="autowiredqualifierresourcevalue"><a class="markdownIt-Anchor" href="#autowiredqualifierresourcevalue"></a> @Autowired&amp;@Qualifier&amp;@Resource&amp;@Value</h3><details class="folding-tag" cyan><summary> @Autowired&@Qualifier&@Resource&@Value </summary>              <div class='content'>              <div class="tabs" id=""><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#-1">Autowiredæ³¨è§£</button></li><li class="tab"><button type="button" data-href="#-2">Qualifieræ³¨è§£</button></li><li class="tab"><button type="button" data-href="#-3">Resourceæ³¨è§£</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><div class="tag link"><a class="link-card" title="Autowired æ³¨è§£ä½¿ç”¨" href="https://serms.top/post/7047b0e7/"><div class="left"><img src="https://serms.top/img/favicon.png"/></div><div class="right"><p class="text">Autowired æ³¨è§£ä½¿ç”¨</p><p class="url">https://serms.top/post/7047b0e7/</p></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-2"><p>è¿™æ˜¯å®˜æ–¹çš„ä»‹ç»:</p><blockquote><p>This annotation may be used on a field or parameter as a qualifier for<br />candidate beans when autowiring. It may also be used to annotate other<br />custom annotations that can then in turn be used as qualifiers.</p></blockquote><p>ç®€å•çš„ç†è§£å°±æ˜¯ï¼š<br />ï¼ˆ1ï¼‰åœ¨ä½¿ç”¨@Autowire è‡ªåŠ¨æ³¨å…¥çš„æ—¶å€™ï¼ŒåŠ ä¸Š<code>@Qualifier(â€œtestâ€)</code>å¯ä»¥æŒ‡å®šæ³¨å…¥å“ªä¸ªå¯¹è±¡ï¼›<br />ï¼ˆ2ï¼‰å¯ä»¥ä½œä¸ºç­›é€‰çš„é™å®šç¬¦ï¼Œæˆ‘ä»¬åœ¨åšè‡ªå®šä¹‰æ³¨è§£æ—¶å¯ä»¥åœ¨å…¶å®šä¹‰ä¸Šå¢åŠ @Qualifierï¼Œç”¨æ¥ç­›é€‰éœ€è¦çš„å¯¹è±¡ã€‚è¿™ä¸ªç†è§£çœ‹ä¸‹é¢çš„ä»£ç å§ï¼Œä¸å¥½è§£é‡Šã€‚</p><p><strong>åŠŸèƒ½ä»‹ç»</strong></p><ol><li><p><strong>é¦–å…ˆæ˜¯å¯¹ï¼ˆ1ï¼‰çš„ç†è§£ã€‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªTestClasså¯¹è±¡ï¼Œåˆ†åˆ«æ˜¯testClass1å’ŒtestClass2</span></span><br><span class="line"><span class="comment">//æˆ‘ä»¬å¦‚æœåœ¨å¦å¤–ä¸€ä¸ªå¯¹è±¡ä¸­ç›´æ¥ä½¿ç”¨@Autowireå»æ³¨å…¥çš„è¯ï¼Œspringè‚¯å®šä¸çŸ¥é“ä½¿ç”¨å“ªä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="comment">//ä¼šæ’é™¤å¼‚å¸¸ required a single bean, but 2 were found</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestConfiguration</span> &#123;</span><br><span class="line">    <span class="meta">@Bean(&quot;testClass1&quot;)</span></span><br><span class="line">    TestClass <span class="title function_">testClass1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">TestClass</span>(<span class="string">&quot;TestClass1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean(&quot;testClass2&quot;)</span></span><br><span class="line">    TestClass <span class="title function_">testClass2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">TestClass</span>(<span class="string">&quot;TestClass2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯æ­£å¸¸çš„å¼•ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ­¤æ—¶è¿™ä¸¤ä¸ªæ³¨è§£çš„è¿ç”¨å°±ç±»ä¼¼ @Resource(name=&quot;testClass1&quot;)</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(&quot;testClass1&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> TestClass testClass;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> testClassList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>@Autowired å’Œ@Qualifier è¿™ä¸¤ä¸ªæ³¨è§£çš„è¿ç”¨åœ¨è¿™ä¸ªä½ç½®å°±ç±»ä¼¼ @Resource(name=â€œtestClass1â€)</p></li><li><p><strong>å¯¹(2)çš„ç†è§£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestConfiguration</span> &#123;</span><br><span class="line">    <span class="comment">//æˆ‘ä»¬è°ƒæ•´ä¸‹åœ¨testClass1ä¸Šå¢åŠ @Qualifieræ³¨è§£</span></span><br><span class="line">    <span class="meta">@Qualifier</span></span><br><span class="line">    <span class="meta">@Bean(&quot;testClass1&quot;)</span></span><br><span class="line">    TestClass <span class="title function_">testClass1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">TestClass</span>(<span class="string">&quot;TestClass1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(&quot;testClass2&quot;)</span></span><br><span class="line">    TestClass <span class="title function_">testClass2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">TestClass</span>(<span class="string">&quot;TestClass2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line">    <span class="comment">//æˆ‘ä»¬è¿™é‡Œä½¿ç”¨ä¸€ä¸ªlistå»æ¥æ”¶testClassçš„å¯¹è±¡</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    List&lt;TestClass&gt; testClassList= Collections.emptyList();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/test&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> testClassList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è°ƒç”¨å¾—åˆ°çš„ç»“æœæ˜¯</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">     &#123;</span><br><span class="line">        &quot;name&quot;: &quot;TestClass1&quot;</span><br><span class="line">     &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">       &quot;name&quot;: &quot;TestClass2&quot;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„ testclass éƒ½è·å–åˆ°äº†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¿®æ”¹ä¸‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Qualifier</span> <span class="comment">//æˆ‘ä»¬åœ¨è¿™å¢åŠ æ³¨è§£</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    List&lt;TestClass&gt; testClassList= Collections.emptyList();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/test&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> testClassList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å’Œä¸Šé¢ä»£ç å¯¹æ¯”å°±æ˜¯åœ¨æ¥æ”¶å‚æ•°ä¸Šå¢åŠ äº†@Qualifier æ³¨è§£ï¼Œè¿™æ ·çœ‹æ˜¯æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæˆ‘ä»¬è°ƒç”¨ä¸‹ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">     &#123;</span><br><span class="line">        &quot;name&quot;: &quot;TestClass1&quot;</span><br><span class="line">     &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>è¿”å›ç»“æœåªå‰©ä¸‹å¢åŠ äº†@Qualifier æ³¨è§£çš„ TestClass å¯¹è±¡ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç†è§£å®˜æ–¹è¯´çš„æ ‡è®°ç­›é€‰æ˜¯ä»€ä¹ˆæ„æ€äº†ã€‚<br />å¦å¤–ï¼Œ@Qualifier æ³¨è§£æ˜¯å¯ä»¥æŒ‡å®š value çš„ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥é€šè¿‡ values æ¥åˆ†ç±»ç­›é€‰æƒ³è¦çš„å¯¹è±¡äº†ï¼Œè¿™é‡Œä¸åˆ—ä¸¾ä»£ç äº†~</p></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-3"><p>@Resource ç”¨æ³•ä¸<code>@Autowired</code>ç”¨æ³• ç”¨æ³•ç›¸ä¼¼ï¼Œä¹Ÿæ˜¯åšä¾èµ–æ³¨çš„ï¼Œä»å®¹å™¨ä¸­è‡ªåŠ¨è·å– beanã€‚ä½†è¿˜æ˜¯æœ‰ä¸€å®šçš„åŒºåˆ«ã€‚</p><ul><li>åœ¨å¯åŠ¨ spring çš„æ—¶å€™ï¼Œé¦–å…ˆè¦å¯åŠ¨å®¹å™¨ï¼›</li><li>å¯åŠ¨ spring å®¹å™¨æ—¶ï¼Œä¼šé»˜è®¤å¯»æ‰¾å®¹å™¨æ‰«æèŒƒå›´å†…çš„å¯åŠ è½½ beanï¼Œç„¶åæŸ¥æ‰¾å“ªäº› bean ä¸Šçš„å±æ€§å’Œæ–¹æ³•ä¸Šæœ‰@Resource æ³¨è§£ï¼›</li><li>æ‰¾åˆ°@Resource æ³¨è§£åï¼Œåˆ¤æ–­@Resource æ³¨è§£æ‹¬å·ä¸­çš„ name å±æ€§æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼šçœ‹ spring å®¹å™¨ä¸­çš„ bean çš„ id ä¸@Resource è¦æ³¨è§£çš„é‚£ä¸ªå˜é‡å±æ€§åæ˜¯å¦ç›¸åŒï¼Œå¦‚ç›¸åŒï¼ŒåŒ¹é…æˆåŠŸï¼›å¦‚æœä¸ç›¸åŒï¼Œçœ‹ spring å®¹å™¨ä¸­ bean çš„ id å¯¹åº”çš„ç±»å‹æ˜¯å¦ä¸@Resource è¦æ³¨è§£çš„é‚£ä¸ªå˜é‡å±æ€§å¯¹åº”çš„ç±»å‹æ˜¯å¦ç›¸ç­‰ï¼Œè‹¥ç›¸ç­‰ï¼ŒåŒ¹é…æˆåŠŸï¼Œè‹¥ä¸ç›¸ç­‰ï¼ŒåŒ¹é…å¤±è´¥ã€‚</li><li>å¦‚æœ@Resource æ³¨è§£æ‹¬å·ä¸­çš„ name å±æ€§ä¸ä¸ºç©ºï¼Œçœ‹ name çš„å±æ€§å€¼å’Œå®¹å™¨ä¸­çš„ bean çš„ id åæ˜¯å¦ç›¸ç­‰ï¼Œå¦‚ç›¸ç­‰ï¼Œåˆ™åŒ¹é…æˆåŠŸï¼›å¦‚ä¸ç›¸ç­‰ï¼Œåˆ™åŒ¹é…å¤±è´¥ã€‚<br />ç¤ºä¾‹å¦‚ä¸‹ï¼š</li></ul><p><strong>@Resource æ³¨è§£æ³¨è§£çš„ name å±æ€§ä¸ä¸ºç©º</strong></p><p><strong>é¦–å…ˆåˆ›å»º Person ç±»ï¼Œå¹¶çº³å…¥å®¹å™¨ä¸­ç®¡ç†ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzj.springboot.resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*çº³å…¥å®¹å™¨ä¸­åï¼Œbeançš„idåå­—ä¸ºps*/</span></span><br><span class="line"><span class="meta">@Component(value=&quot;ps&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">say</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;------say()------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç„¶ååˆ›å»º Man ç±»ï¼Œç±»ä¸­çš„å±æ€§ä¾èµ– Person ç±»å‹çš„ bean</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lzj.springboot.resource;</span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Man</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*ä»å®¹å™¨ä¸­å–idåå­—ä¸ºpsçš„beanï¼Œå¦‚æœæ‰¾ä¸åˆ°è¯¥beanï¼Œspringå¯åŠ¨è¿‡ç¨‹ä¸­å°±ä¼šæŠ¥é”™ï¼Œè¡¨ç¤ºæŠŠManç±»å‹çš„beanæ³¨å…¥åˆ°å®¹å™¨ä¸­ä¸æˆåŠŸï¼Œå› ä¸ºpersonçš„å±æ€§ä¾èµ–æ³¨å…¥çš„æ—¶å€™å°±å‡ºé”™äº†ï¼Œæ‰€ä»¥åˆ›å»ºMançš„beançš„æ—¶å€™è‚¯å®šä¸æˆåŠŸã€‚*/</span></span><br><span class="line">    <span class="meta">@Resource(name=&quot;ps&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Person person;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*ä¾èµ–æ³¨å…¥å¤±è´¥ï¼Œå› ä¸ºPersonç±»å‹æ³¨å…¥åˆ°å®¹å™¨ä¸­çš„beançš„idæŒ‡å®šä¸ºps,æ‰€ä»¥ä»å®¹å™¨ä¸­è·å–idä¸ºpersonçš„beanå°±ä¼šå¤±è´¥*/</span></span><br><span class="line">    <span class="comment">//  @Resource(name=&quot;person&quot;)</span></span><br><span class="line">    <span class="comment">//  private Person ps;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">()</span>&#123;</span><br><span class="line">        person.say();</span><br><span class="line">        System.out.println(<span class="string">&quot;------work()------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ç±»ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication(scanBasePackages=&quot;com.lzj.springboot&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">SpringApplication</span> <span class="variable">app</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SpringApplication</span>(App.class);</span><br><span class="line">        <span class="type">ConfigurableApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> app.run(args);</span><br><span class="line">        <span class="comment">/*ä»å®¹å™¨ä¸­è·å–Manç±»å‹çš„beanï¼Œå¦‚æœManç±»å‹çš„beanæ³¨å…¥åˆ°å®¹å™¨æˆåŠŸï¼Œæ­¤æ—¶å°±èƒ½è·å–åˆ°ï¼›å¦‚æœæ³¨å…¥ä¸æˆåŠŸï¼Œåˆ™è·å–ä¸åˆ°ã€‚æ³¨å…¥ä¸æˆåŠŸï¼Œå°±ä¼šæœ‰å¯èƒ½æ˜¯Manä¸­çš„@Resourceæ³¨è§£çš„ä¾èµ–æ³¨å…¥æ²¡æœ‰æˆåŠŸ*/</span></span><br><span class="line">        context.getBean(Man.class).work();</span><br><span class="line">        context.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨å·¥ç¨‹ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">------say()------</span><br><span class="line">------work()------</span><br></pre></td></tr></table></figure><p><strong>@Resource æ³¨è§£æ³¨è§£çš„ name å±æ€§ä¸ºç©º</strong></p><p><strong>1ã€@Resource è¦æ³¨è§£çš„é‚£ä¸ªå˜é‡å±æ€§ä¸å®¹å™¨ä¸­çš„ bean çš„ id çš„åå­—ç›¸ç­‰</strong><br />å¯åŠ¨ç±»å’Œ Person çš„ç±»ä¸ç›¸é¢ä¸€æ ·ï¼Œä¸‹é¢ç›´æ¥ä¿®æ”¹ Man ç±»å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Man</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*@Resourceæ³¨è§£çš„å±æ€§å˜é‡psä¸å®¹å™¨ä¸­çš„beançš„idåå­—psç›¸ç­‰ï¼Œå¯ä»¥åŒ¹é…*/</span></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> Person ps;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">()</span>&#123;</span><br><span class="line">        ps.say();</span><br><span class="line">        System.out.println(<span class="string">&quot;------work()------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2ã€@Resource è¦æ³¨è§£çš„é‚£ä¸ªå˜é‡å±æ€§ä¸å®¹å™¨ä¸­çš„ bean çš„ id çš„åå­—ä¸ç›¸ç­‰<br />å¯åŠ¨ç±»å’Œ Person çš„ç±»ä¸ç›¸é¢ä¸€æ ·ï¼Œä¸‹é¢ç›´æ¥ä¿®æ”¹ Man ç±»å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Man</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*@Resourceæ³¨è§£çš„å±æ€§å˜é‡psä¸å®¹å™¨ä¸­çš„beançš„idåå­—psä¸ç›¸ç­‰ï¼Œç„¶åé€šè¿‡beançš„ç±»å‹åˆ¤æ–­ï¼špersonå˜é‡å±æ€§çš„ç±»å‹ä¸ºPersonç±»ï¼Œå®¹å™¨ä¸­çš„idä¸ºpsçš„beançš„ç±»å‹ä¹Ÿä¸ºPersonç±»å‹ï¼Œå› æ­¤æ­¤ç§æƒ…å†µä¸‹ä¹Ÿå¯ä»¥åŒ¹é…*/</span></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> Person person;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">()</span>&#123;</span><br><span class="line">        person.say();</span><br><span class="line">        System.out.println(<span class="string">&quot;------work()------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h2 id="é…ç½®ç±»ç›¸å…³"><a class="markdownIt-Anchor" href="#é…ç½®ç±»ç›¸å…³"></a> <strong>é…ç½®ç±»ç›¸å…³</strong></h2><h3 id="configuration"><a class="markdownIt-Anchor" href="#configuration"></a> @Configuration:</h3><details class="folding-tag" cyan><summary> @Configurationæ³¨è§£ </summary>              <div class='content'>              <p>ä½œç”¨ï¼šç”¨äºæŒ‡å®šå½“å‰ç±»æ˜¯ä¸€ä¸ª spring é…ç½®ç±»ï¼Œ å½“åˆ›å»ºå®¹å™¨æ—¶ä¼šä»è¯¥ç±»ä¸ŠåŠ è½½æ³¨è§£ã€‚ è·å–å®¹å™¨æ—¶éœ€è¦ä½¿ç”¨<br /><code>AnnotationApplicationContext</code>(æœ‰<code>@Configuration</code> æ³¨è§£çš„ç±».class)<br />ç»†èŠ‚:å½“é…ç½®ç±»ä½œä¸º<code>AnnotationConfigApplicationContext</code>å¯¹è±¡åˆ›å»ºçš„å‚æ•°æ—¶ï¼Œè¯¥æ³¨è§£å¯ä»¥ä¸å†™ã€‚</p><details class="folding-tag" blue><summary> å»ºè®®çœ‹ä¸€ä¸‹è¿™ä¸ª </summary>              <div class='content'>              <div class="tag link"><a class="link-card" title="Configurationæ³¨è§£ä½¿ç”¨" href="https://serms.top/post/1d0508a6/"><div class="left"><img src="https://serms.top/img/favicon.png"/></div><div class="right"><p class="text">Configurationæ³¨è§£ä½¿ç”¨</p><p class="url">https://serms.top/post/1d0508a6/</p></div></a></div><p>åœ¨ä½¿ç”¨@Bean æ³¨è§£çš„æ—¶å€™å¿…é¡»é…åˆ@Configuration æ¥ä½¿ç”¨: <strong><a href="https://blog.csdn.net/qq_41907991/article/details/106008651?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522164933918316782092931312%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=164933918316782092931312&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-106008651.142%5Ev7%5Econtrol,157%5Ev4%5Econtrol&amp;utm_term=%40Configuration&amp;spm=1018.2226.3001.4187">åŸå› </a></strong></p>              </div>            </details>              </div>            </details><p>æœªå­¦ä¹ çš„æ³¨è§£:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import(&#123;User.class, ByteArrayUtil.class&#125;)</span></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = true)</span> <span class="comment">//å‘Šè¯‰Springè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±» === é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment">//@ConditionalOnBean(name = &quot;tom&quot;)    //æ¡ä»¶æ³¨è§£ æœ‰æŸä¸ªç»„ä»¶æ‰æ³¨å…¥å®¹å™¨</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(name = &quot;tom&quot;)</span>   <span class="comment">//æ¡ä»¶æ³¨è§£ æ²¡æœ‰æŸä¸ªç»„ä»¶æ‰æ³¨å…¥å®¹å™¨</span></span><br><span class="line"><span class="meta">@ImportResource(&quot;classpath:beans.xml&quot;)</span></span><br><span class="line"><span class="comment">//1. å¼€å¯Caré…ç½®ç»‘å®šåŠŸèƒ½</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(&#123;Car.class&#125;)</span></span><br><span class="line"><span class="comment">//2, æŠŠè¿™ä¸ªCarè¿™ä¸ªç»„ä»¶è‡ªåŠ¨æ³¨å†Œåˆ°å®¹å™¨ä¸­</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;mycar&quot;)</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"> <span class="meta">@RequestMapping(&quot;/car&quot;)</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
          <category> Springæ³¨è§£ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> Springæ³¨è§£ </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ideaä¸­Mavené¡¹ç›®æ·»åŠ webæ¨¡å—</title>
      <link href="/posts/3208ee03/"/>
      <url>/posts/3208ee03/</url>
      
        <content type="html"><![CDATA[<h2 id="æ•™ç¨‹æ­¥éª¤"><a class="markdownIt-Anchor" href="#æ•™ç¨‹æ­¥éª¤"></a> æ•™ç¨‹æ­¥éª¤</h2><details class="folding-tag" cyan open><summary> ç‚¹å‡»æŸ¥çœ‹æ•™ç¨‹ </summary>              <div class='content'>              <p>1.é¦–å…ˆåˆ›å»ºä¸€ä¸ª Maven é¡¹ç›®ï¼Œä¸€è·¯ nextï¼Œèµ·ä¸‹é¡¹ç›®åå­—</p><p><img src="https://unpkg.com/serms-assets@1.0.7/maven/image-20220403171155529.png" alt="" /></p><p>2.å»ºå¥½ä¹‹åå°±æ˜¯è¿™ä¸ªæ ·å­</p><p><img src="https://unpkg.com/serms-assets@1.0.7/maven/image-20220403171554797.png" alt="" /></p><p>3.ç„¶åå³é”®é¡¹ç›®æ‰¾åˆ° open modules setting (æ‰“å¼€æ¨¡å—è®¾ç½®) æˆ–è€…å¿«æ·é”® ctrl+shift +alt+s æˆ–è€…å³ä¸Šè§’æœ‰ä¸ªç±»ä¼¼æ–‡ä»¶å¤¹çš„å›¾æ ‡</p><p><img src="https://unpkg.com/serms-assets@1.0.7/maven/image-20220403171742797.png" alt="" /></p><p>4.æ‰“å¼€ä»¥åç‚¹ Modules ç‚¹é¡¹ç›®åç‚¹ add æ‰¾åˆ° web</p><p><img src="https://unpkg.com/serms-assets@1.0.7/maven/image-20220403172017430.png" alt="" /></p><p>5.ç„¶åä¿®æ”¹ web.xml å’Œ web èµ„æºç›®å½•çš„è·¯å¾„</p><div class="tip warning faa-horizontal animated"><p>æ³¨æ„:è·¯å¾„ä¿®æ”¹å¦‚æœä½ ä¸æ‡‚å°±æ”¾æˆ‘å†™çš„è·¯å¾„:<wavy>é¡¹ç›®å\src\main\webapp\ â€¦</wavy></p></div><p><img src="https://unpkg.com/serms-assets@1.0.7/maven/image-20220403172956018.png" alt="" /></p><p>xml å’Œèµ„æºè·¯å¾„åº”è¯¥æ”¾åœ¨åŒä¸€ä¸ª webapp ä¸‹é¢</p><p><img src="https://unpkg.com/serms-assets@1.0.7/maven/image-20220403173108342.png" alt="" /></p><div class="tip warning faa-horizontal animated"><p>æ³¨æ„:ä¿®æ”¹å®Œåç‚¹å‡»ç¡®å®š,ä»–ä¼šæç¤ºä½ è¯´æ²¡æœ‰ webapp è¿™ä¸ªé¡¹ç›®æ˜¯å¦åˆ›å»º,ç‚¹å‡»åˆ›å»ºå³å¯</p></div><p>åˆ›å»ºå®Œæˆçš„æ ·å­:</p><p><img src="https://unpkg.com/serms-assets@1.0.7/maven/image-20220403174021409.png" alt="" /></p><p>6.åˆ›å»º Web application Exploded</p><p>ä¾ç„¶è¿˜æ˜¯æ‰“å¼€æ¨¡å—è®¾ç½®&gt;é€‰æ‹©æ¨¡å—&gt;ç‚¹å‡»åˆšåˆšåˆ›å»ºå¥½çš„ web ç›®å½•,å¦‚æœä¸‹é¢æœ‰é»„è‰²ä¸‰è§’æ„Ÿå¹å·çš„æç¤ºçš„è¯,å’±ä»¬å¯ä»¥ç›´æ¥ç‚¹å‡»å³ä¾§çš„åˆ›å»º</p><p><img src="https://unpkg.com/serms-assets@1.0.7/maven/image-20220403174050465.png" alt="" /></p><p>å¦‚æœæ²¡æœ‰çš„è¯: ç‚¹å‡» artifacts ç‚¹+å· é€‰æ‹© Web application Explodedï¼ŒFrom Modules é€‰æ‹©é¡¹ç›®ã€‚</p><p><img src="https://unpkg.com/serms-assets@1.0.7/maven/image-20220403174353863.png" alt="" /></p><p>ä¹‹åå³å¯ç‚¹å‡»åº”ç”¨å’Œç¡®å®šå°±è¡Œ</p><p><img src="https://unpkg.com/serms-assets@1.0.7/maven/image-20220403174445834.png" alt="" /></p><p>7.ç„¶åæ·»åŠ ä¸€ä¸ª tomcat ç‚¹ fix é€‰æ‹©åˆšæ‰æ–°å»ºçš„ artifacts</p><p><img src="https://unpkg.com/serms-assets@1.0.7/maven/image-20220403174606202.png" alt="" /></p><p><img src="https://unpkg.com/serms-assets@1.0.7/maven/image-20220403174704803.png" alt="" /></p><p>8.ä¿®æ”¹ Application context ä¸ºé¡¹ç›®å å°±å®Œæˆäº† å»æ–°å»ºä¸€ä¸ª html é¡µé¢è®¿é—®ä¸€ä¸‹,è¿™é‡Œå°±å®Œæˆäº† web æ¨¡å—çš„æ·»åŠ </p><p><img src="https://unpkg.com/serms-assets@1.0.7/maven/image-20220403174937843.png" alt="" /></p>              </div>            </details>]]></content>
      
      
      <categories>
          
          <category> Maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¯åŠ¨Tomcatå‡ºç°ä¹±ç </title>
      <link href="/posts/3a723147/"/>
      <url>/posts/3a723147/</url>
      
        <content type="html"><![CDATA[<p>å¯åŠ¨ Tomcat çš„æ—¶å€™è€å‡ºç°è¿™ç§<span class='p red'>æ·‡â„ƒä¼…</span>ä¹±ç é—®é¢˜<img no-lazy class="inline" src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F201608%2F02%2F20160802214728_Nhytn.thumb.400_0.jpeg&refer=http%3A%2F%2Fc-ssl.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1651217931&t=4a196c48ab42a6eb60cefb363f37418b" style="height:80px;"/></p><p>è™½ç„¶ä¸ç¢äº‹,ä½†æ˜¯çœ‹ç€ä¹±ç å°±çƒ¦,ä¹Ÿè®¸æ˜¯æˆ‘å¼ºè¿«ç—‡çŠ¯äº†:</p><p><img src="https://unpkg.com/serms-assets@1.0.6/Tomcat/image-20220330152805998.png" alt="" /></p><h2 id="è§£å†³æ–¹æ¡ˆå¦‚ä¸‹"><a class="markdownIt-Anchor" href="#è§£å†³æ–¹æ¡ˆå¦‚ä¸‹"></a> è§£å†³æ–¹æ¡ˆå¦‚ä¸‹</h2><div class="tip success"><p>æ‰¾åˆ° tomcat å®‰è£…ç›®å½•ä¸‹çš„<span class='p red'>conf/logging.properties</span>æ–‡ä»¶å¤¹ ä¿®æ”¹<span class='p red'>logging.properties</span> æ–‡ä»¶</p></div><p><img src="https://unpkg.com/serms-assets@1.0.6/Tomcat/image-20220330153004409.png" alt="" /></p><div class="tip success"><p>å°† java.util.logging.ConsoleHandler.encoding = <span class='p red'>utf-8</span><br />æ›´æ”¹ä¸º java.util.logging.ConsoleHandler.encoding = <span class='p red'>GBK</span></p></div><p><img src="https://unpkg.com/serms-assets@1.0.6/Tomcat/image-20220330152553962.png" alt="" /></p><blockquote><p>ä¿®æ”¹ä¹‹åçš„è¿è¡Œç»“æœ:</p></blockquote><p><img src="https://unpkg.com/serms-assets@1.0.6/Tomcat/image-20220330153216427.png" alt="" /></p><blockquote><p>å®Œæ»¡è§£å†³~~~</p><p>è§‰å¾—æœ‰ç”¨çš„è¯,ç»™å°å¼Ÿæ‰“èµä¸€ä¸‹~</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Tomcat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> idea </tag>
            
            <tag> Tomcatä¹±ç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVCå­¦ä¹ ç¬”è®°</title>
      <link href="/posts/319c21eb/"/>
      <url>/posts/319c21eb/</url>
      
        <content type="html"><![CDATA[<details class="folding-tag" cyan><summary> æ›´æ–°è®°å½• </summary>              <div class='content'>              <div class="note blue icon modern"><i class="note-icon fas fa-bullhorn"></i><p>æœ¬äººç«™é•¿ä¹Ÿæ­£åœ¨å­¦ä¹ å½“ä¸­,å¦‚æœæœ‰çº é”™ä»¥åŠæ„è§å¯ä»¥åœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€,æˆ‘ä¼šå°½å¿«å›å¤æ‚¨,æ„Ÿè°¢æ‚¨å¯¹æœ¬ç«™çš„æ”¯æŒ</p></div><div class="timeline blue"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>2022</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-04-04</p></div></div><div class='timeline-item-content'><ol><li>æ¿å—åšäº†ç›¸åº”çš„ä¼˜åŒ–</li><li>è¡¥å……äº†ä¸€äº›å›¾ç‰‡å’Œä¸€äº›ä»£ç </li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2022-03-30</p></div></div><div class='timeline-item-content'><p>æ–‡ç« å‘å¸ƒ</p></div></div></div>              </div>            </details><details class="folding-tag" blue><summary> å‚è€ƒæ•™ç¨‹ </summary>              <div class='content'>              <p><strong>æ³¨è§£ç±»</strong></p><table><thead><tr><th style="text-align:center">æ³¨è§£åç§°</th><th style="text-align:center">æ•™ç¨‹è´´</th></tr></thead><tbody><tr><td style="text-align:center">@Controller æ³¨è§£</td><td style="text-align:center"><a href="https://www.cnblogs.com/hualishu/p/7398881.html">æ•™ç¨‹</a></td></tr></tbody></table><p><strong>å…¶ä»–</strong></p><table><thead><tr><th style="text-align:center">å‚è€ƒæ–¹å‘</th><th style="text-align:center">æ•™ç¨‹è´´</th></tr></thead><tbody><tr><td style="text-align:center">è½¬å‘å’Œé‡å®šå‘çš„åŒºåˆ«å’Œä½¿ç”¨</td><td style="text-align:center"><a href="https://blog.csdn.net/weixin_40001125/article/details/88663468">æ•™ç¨‹</a></td></tr></tbody></table>              </div>            </details><h1 id="springmvc-ç®€ä»‹"><a class="markdownIt-Anchor" href="#springmvc-ç®€ä»‹"></a> SpringMVC ç®€ä»‹</h1><details class="folding-tag" cyan><summary> ä»€ä¹ˆæ˜¯MVC </summary>              <div class='content'>              <p>MVC æ˜¯ä¸€ç§è½¯ä»¶æ¶æ„çš„æ€æƒ³ï¼Œå°†è½¯ä»¶æŒ‰ç…§æ¨¡å‹ã€è§†å›¾ã€æ§åˆ¶å™¨æ¥åˆ’åˆ†</p><p>Mï¼šModelï¼Œæ¨¡å‹å±‚ï¼ŒæŒ‡å·¥ç¨‹ä¸­çš„ JavaBeanï¼Œä½œç”¨æ˜¯å¤„ç†æ•°æ®</p><p>JavaBean åˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li>ä¸€ç±»ç§°ä¸ºå®ä½“ç±» Beanï¼šä¸“é—¨å­˜å‚¨ä¸šåŠ¡æ•°æ®çš„ï¼Œå¦‚ Studentã€User ç­‰</li><li>ä¸€ç±»ç§°ä¸ºä¸šåŠ¡å¤„ç† Beanï¼šæŒ‡ Service æˆ– Dao å¯¹è±¡ï¼Œä¸“é—¨ç”¨äºå¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®ã€‚</li></ul><p>Vï¼šViewï¼Œè§†å›¾å±‚ï¼ŒæŒ‡å·¥ç¨‹ä¸­çš„ html æˆ– jsp ç­‰é¡µé¢ï¼Œä½œç”¨æ˜¯ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ï¼Œå±•ç¤ºæ•°æ®</p><p>Cï¼šControllerï¼Œæ§åˆ¶å±‚ï¼ŒæŒ‡å·¥ç¨‹ä¸­çš„ servletï¼Œä½œç”¨æ˜¯æ¥æ”¶è¯·æ±‚å’Œå“åº”æµè§ˆå™¨</p><p>MVC çš„å·¥ä½œæµç¨‹ï¼š<br />ç”¨æˆ·é€šè¿‡è§†å›¾å±‚å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨ä¸­è¯·æ±‚è¢« Controller æ¥æ”¶ï¼ŒController è°ƒç”¨ç›¸åº”çš„ Model å±‚å¤„ç†è¯·æ±‚ï¼Œå¤„ç†å®Œæ¯•å°†ç»“æœè¿”å›åˆ° Controllerï¼ŒController å†æ ¹æ®è¯·æ±‚å¤„ç†çš„ç»“æœæ‰¾åˆ°ç›¸åº”çš„ View è§†å›¾ï¼Œæ¸²æŸ“æ•°æ®åæœ€ç»ˆå“åº”ç»™æµè§ˆå™¨</p><div class="tip warning"><p>æ³¨ï¼šä¸‰å±‚æ¶æ„åˆ†ä¸ºè¡¨è¿°å±‚ï¼ˆæˆ–è¡¨ç¤ºå±‚ï¼‰ã€ä¸šåŠ¡é€»è¾‘å±‚ã€æ•°æ®è®¿é—®å±‚ï¼Œè¡¨è¿°å±‚è¡¨ç¤ºå‰å°é¡µé¢å’Œåå° servlet</p></div>              </div>            </details><details class="folding-tag" cyan><summary> ä»€ä¹ˆæ˜¯SpringMVC </summary>              <div class='content'>              <p>SpringMVC æ˜¯ Spring çš„ä¸€ä¸ªåç»­äº§å“ï¼Œæ˜¯ Spring çš„ä¸€ä¸ªå­é¡¹ç›®</p><p>SpringMVC æ˜¯ Spring ä¸ºè¡¨è¿°å±‚å¼€å‘æä¾›çš„ä¸€æ•´å¥—å®Œå¤‡çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨è¡¨è¿°å±‚æ¡†æ¶å†ç» Strustã€WebWorkã€Strust2 ç­‰è¯¸å¤šäº§å“çš„å†ä»£æ›´è¿­ä¹‹åï¼Œç›®å‰ä¸šç•Œæ™®éé€‰æ‹©äº† SpringMVC ä½œä¸º Java EE é¡¹ç›®è¡¨è¿°å±‚å¼€å‘çš„<strong>é¦–é€‰æ–¹æ¡ˆ</strong>ã€‚</p>              </div>            </details><details class="folding-tag" cyan><summary> SpringMVCçš„ç‰¹ç‚¹ </summary>              <div class='content'>              <ul><li><strong>Spring å®¶æ—åŸç”Ÿäº§å“</strong>ï¼Œä¸ IOC å®¹å™¨ç­‰åŸºç¡€è®¾æ–½æ— ç¼å¯¹æ¥</li><li><strong>åŸºäºåŸç”Ÿçš„ Servlet</strong>ï¼Œé€šè¿‡äº†åŠŸèƒ½å¼ºå¤§çš„<strong>å‰ç«¯æ§åˆ¶å™¨ DispatcherServlet</strong>ï¼Œå¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œç»Ÿä¸€å¤„ç†</li><li>è¡¨è¿°å±‚å„ç»†åˆ†é¢†åŸŸéœ€è¦è§£å†³çš„é—®é¢˜<strong>å…¨æ–¹ä½è¦†ç›–</strong>ï¼Œæä¾›<strong>å…¨é¢è§£å†³æ–¹æ¡ˆ</strong></li><li><strong>ä»£ç æ¸…æ–°ç®€æ´</strong>ï¼Œå¤§å¹…åº¦æå‡å¼€å‘æ•ˆç‡</li><li>å†…éƒ¨ç»„ä»¶åŒ–ç¨‹åº¦é«˜ï¼Œå¯æ’æ‹”å¼ç»„ä»¶<strong>å³æ’å³ç”¨</strong>ï¼Œæƒ³è¦ä»€ä¹ˆåŠŸèƒ½é…ç½®ç›¸åº”ç»„ä»¶å³å¯</li><li><strong>æ€§èƒ½å“è‘—</strong>ï¼Œå°¤å…¶é€‚åˆç°ä»£å¤§å‹ã€è¶…å¤§å‹äº’è”ç½‘é¡¹ç›®è¦æ±‚</li></ul>              </div>            </details><h3 id="spring-ç½‘ç«™é“¾æ¥"><a class="markdownIt-Anchor" href="#spring-ç½‘ç«™é“¾æ¥"></a> Spring ç½‘ç«™é“¾æ¥</h3><div class="tabs" id=""><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#-1">Springå®˜ç½‘</button></li><li class="tab"><button type="button" data-href="#-2">SpringMVCæ–‡æ¡£</button></li><li class="tab"><button type="button" data-href="#-3">Thymeleafå®˜ç½‘</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><div class="tag link"><a class="link-card" title="Spring.io" href="https://spring.io/"><div class="left"><img src="https://spring.io/images/favicon-9d25009f65637a49ac8d91eb1cf7b75e.ico"/></div><div class="right"><p class="text">Spring.io</p><p class="url">https://spring.io/</p></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-2"><div class="tag link"><a class="link-card" title="SpringMVC" href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#spring-web"><div class="left"><img src="https://spring.io/images/favicon-9d25009f65637a49ac8d91eb1cf7b75e.ico"/></div><div class="right"><p class="text">SpringMVC</p><p class="url">https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#spring-web</p></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-3"><div class="tag link"><a class="link-card" title="Thymeleaf" href="https://www.thymeleaf.org/"><div class="left"><img src="https://www.thymeleaf.org/images/thymeleaf.png"/></div><div class="right"><p class="text">Thymeleaf</p><p class="url">https://www.thymeleaf.org/</p></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="åˆ›å»º-mvc-é¡¹ç›®åŠç¼–å†™-helloworld"><a class="markdownIt-Anchor" href="#åˆ›å»º-mvc-é¡¹ç›®åŠç¼–å†™-helloworld"></a> åˆ›å»º MVC é¡¹ç›®åŠç¼–å†™ HelloWorld</h1><details class="folding-tag" blue><summary> å¼€å‘ç¯å¢ƒ </summary>              <div class='content'>              <p><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Idea%20Ultimate%20Edition-2021.3.2-orange?logo=IntelliJ IDEA&color=brightgreen&link=https://www.jetbrains.com/idea/&style=social&logoWidth=20"></object><br></p><p><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/maven3.8.1-%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7-orange?logo=Apache Maven&color=brightgreen&link=https://maven.apache.org/docs/3.8.1/release-notes.html&style=social&logoWidth=20"></object><br></p><p><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/tomcat9-%E6%9C%8D%E5%8A%A1%E5%99%A8-orange?logo=Apache Tomcat&color=yellow&link=https://tomcat.apache.org/download-90.cgi&style=social&logoWidth=20"></object><br></p><p><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Spring-%E7%89%88%E6%9C%AC:3.0.1-orange?logo=Spring&color=yellow&link=https://spring.io/projects/spring-framework&style=social&logoWidth=20"></object><br></p>              </div>            </details><details class="folding-tag" green open><summary> åˆ›å»ºmavenå·¥ç¨‹ & é…ç½®SpringMVC </summary>              <div class='content'>              <p>1.åˆ›å»º Maven å·¥ç¨‹(ç®€å•çš„ä¸€åŒ¹,ä¸ä¼šçš„è¯è‡ªè¡Œç™¾åº¦~)</p><p>2.ç»™åˆ›å»ºå¥½çš„ Maven é¡¹ç›®æ·»åŠ  web æ¨¡å—</p><div class="tag link"><a class="link-card" title="Ideaä¸­Mavené¡¹ç›®æ·»åŠ web æ¨¡å—" href="https://serms.top/post/3208ee03/"><div class="left"><img src="https://serms.top/img/favicon.png"/></div><div class="right"><p class="text">Ideaä¸­Mavené¡¹ç›®æ·»åŠ web æ¨¡å—</p><p class="url">https://serms.top/post/3208ee03/</p></div></a></div><p>3.é…ç½®<kbd>pom.xml</kbd>æ–‡ä»¶æ‰“åŒ…æ–¹å¼ï¼šwar å’Œå¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è®¾ç½®æ‰“åŒ…æ–¹å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- SpringMVC --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ—¥å¿— --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ServletAPI --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Spring5å’ŒThymeleafæ•´åˆåŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.12.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¼–å†™å¥½çš„ pom.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.hgm<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springMVC-demo1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- SpringMVC --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æ—¥å¿— --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ServletAPI --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Spring5å’ŒThymeleafæ•´åˆåŒ… --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.12.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="tip warning"><p>æ³¨ï¼šç”±äº Maven çš„ä¼ é€’æ€§ï¼Œæˆ‘ä»¬ä¸å¿…å°†æ‰€æœ‰éœ€è¦çš„åŒ…å…¨éƒ¨é…ç½®ä¾èµ–ï¼Œè€Œæ˜¯é…ç½®æœ€é¡¶ç«¯çš„ä¾èµ–ï¼Œå…¶ä»–é ä¼ é€’æ€§å¯¼å…¥ã€‚</p><p><img src="https://unpkg.com/serms-assets@1.0.6/Spring/img001.png" alt="" /></p></div><p>4.é…ç½® web.xml</p><p>æ³¨å†Œ SpringMVC çš„å‰ç«¯æ§åˆ¶å™¨ DispatcherServlet</p><p>æ‰“å¼€ web.xml</p><p><img src="https://unpkg.com/serms-assets@1.0.9/Spring/image-20220403225805963.png" alt="" /></p><div class="tabs" id=""><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#-1">é»˜è®¤é…ç½®æ–¹å¼</button></li><li class="tab"><button type="button" data-href="#-2">æ‰©å±•é…ç½®æ–¹å¼</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><p>æ­¤é…ç½®ä½œç”¨ä¸‹ï¼ŒSpringMVC çš„é…ç½®æ–‡ä»¶é»˜è®¤ä½äº WEB-INF ä¸‹ï¼Œé»˜è®¤åç§°ä¸º&lt;servlet-name&gt;-servlet.xmlï¼Œä¾‹å¦‚ï¼Œä»¥ä¸‹é…ç½®æ‰€å¯¹åº” SpringMVC çš„é…ç½®æ–‡ä»¶ä½äº WEB-INF ä¸‹ï¼Œæ–‡ä»¶åä¸º springMVC-servlet.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨ï¼Œå¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚ç»Ÿä¸€è¿›è¡Œå¤„ç† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        è®¾ç½®springMVCçš„æ ¸å¿ƒæ§åˆ¶å™¨æ‰€èƒ½å¤„ç†çš„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line"><span class="comment">        /æ‰€åŒ¹é…çš„è¯·æ±‚å¯ä»¥æ˜¯/loginæˆ–.htmlæˆ–.jsæˆ–.cssæ–¹å¼çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line"><span class="comment">        ä½†æ˜¯/ä¸èƒ½åŒ¹é….jspè¯·æ±‚è·¯å¾„çš„è¯·æ±‚</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="tip warning"><p>æ³¨ï¼š</p><p>&lt;url-pattern&gt;æ ‡ç­¾ä¸­ä½¿ç”¨/å’Œ/*çš„åŒºåˆ«ï¼š</p><p>/æ‰€åŒ¹é…çš„è¯·æ±‚å¯ä»¥æ˜¯/login æˆ–.html æˆ–.js æˆ–.css æ–¹å¼çš„è¯·æ±‚è·¯å¾„ï¼Œä½†æ˜¯/ä¸èƒ½åŒ¹é….jsp è¯·æ±‚è·¯å¾„çš„è¯·æ±‚</p><p>å› æ­¤å°±å¯ä»¥é¿å…åœ¨è®¿é—® jsp é¡µé¢æ—¶ï¼Œè¯¥è¯·æ±‚è¢« DispatcherServlet å¤„ç†ï¼Œä»è€Œæ‰¾ä¸åˆ°ç›¸åº”çš„é¡µé¢</p><p>/*åˆ™èƒ½å¤ŸåŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼Œä¾‹å¦‚åœ¨ä½¿ç”¨è¿‡æ»¤å™¨æ—¶ï¼Œè‹¥éœ€è¦å¯¹æ‰€æœ‰è¯·æ±‚è¿›è¡Œè¿‡æ»¤ï¼Œå°±éœ€è¦ä½¿ç”¨/*çš„å†™æ³•</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-2"><p><strong>å¯é€šè¿‡ init-param æ ‡ç­¾è®¾ç½® SpringMVC é…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§°ï¼Œé€šè¿‡ load-on-startup æ ‡ç­¾è®¾ç½® SpringMVC å‰ç«¯æ§åˆ¶å™¨ DispatcherServlet çš„åˆå§‹åŒ–æ—¶é—´</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨ï¼Œå¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚ç»Ÿä¸€è¿›è¡Œå¤„ç† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é€šè¿‡åˆå§‹åŒ–å‚æ•°æŒ‡å®šSpringMVCé…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- contextConfigLocationä¸ºå›ºå®šå€¼ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ä½¿ç”¨classpath:è¡¨ç¤ºä»ç±»è·¯å¾„æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚mavenå·¥ç¨‹ä¸­çš„src/main/resources --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springMVC.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"> ä½œä¸ºæ¡†æ¶çš„æ ¸å¿ƒç»„ä»¶ï¼Œåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­æœ‰å¤§é‡çš„åˆå§‹åŒ–æ“ä½œè¦åš</span></span><br><span class="line"><span class="comment">è€Œè¿™äº›æ“ä½œæ”¾åœ¨ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶æ‰æ‰§è¡Œä¼šä¸¥é‡å½±å“è®¿é—®é€Ÿåº¦</span></span><br><span class="line"><span class="comment">å› æ­¤éœ€è¦é€šè¿‡æ­¤æ ‡ç­¾å°†å¯åŠ¨æ§åˆ¶DispatcherServletçš„åˆå§‹åŒ–æ—¶é—´æå‰åˆ°æœåŠ¡å™¨å¯åŠ¨æ—¶</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        è®¾ç½®springMVCçš„æ ¸å¿ƒæ§åˆ¶å™¨æ‰€èƒ½å¤„ç†çš„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line"><span class="comment">        /æ‰€åŒ¹é…çš„è¯·æ±‚å¯ä»¥æ˜¯/loginæˆ–.htmlæˆ–.jsæˆ–.cssæ–¹å¼çš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line"><span class="comment">        ä½†æ˜¯/ä¸èƒ½åŒ¹é….jspè¯·æ±‚è·¯å¾„çš„è¯·æ±‚</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="tip warning"><p>æ³¨ï¼š</p><p><code>&lt;url-pattern&gt;</code>æ ‡ç­¾ä¸­ä½¿ç”¨/å’Œ/*çš„åŒºåˆ«ï¼š</p><p>/æ‰€åŒ¹é…çš„è¯·æ±‚å¯ä»¥æ˜¯/login æˆ–.html æˆ–.js æˆ–.css æ–¹å¼çš„è¯·æ±‚è·¯å¾„ï¼Œä½†æ˜¯/ä¸èƒ½åŒ¹é….jsp è¯·æ±‚è·¯å¾„çš„è¯·æ±‚</p><p>å› æ­¤å°±å¯ä»¥é¿å…åœ¨è®¿é—® jsp é¡µé¢æ—¶ï¼Œè¯¥è¯·æ±‚è¢« DispatcherServlet å¤„ç†ï¼Œä»è€Œæ‰¾ä¸åˆ°ç›¸åº”çš„é¡µé¢</p><p>/*åˆ™èƒ½å¤ŸåŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼Œä¾‹å¦‚åœ¨ä½¿ç”¨è¿‡æ»¤å™¨æ—¶ï¼Œè‹¥éœ€è¦å¯¹æ‰€æœ‰è¯·æ±‚è¿›è¡Œè¿‡æ»¤ï¼Œå°±éœ€è¦ä½¿ç”¨/*çš„å†™æ³•</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>é…ç½®å¥½çš„ web.xml ä¸º:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨,å¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚è¿›è¡Œç»Ÿä¸€å¤„ç†--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åˆå§‹åŒ–å‚æ•° é…ç½®SpringMVCé…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springMVC.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å°†å‰ç«¯æ§åˆ¶å™¨DispatcherServletçš„åˆå§‹åŒ–æ—¶é—´æå‰åˆ°æœåŠ¡å™¨å¯åŠ¨æ—¶--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><p>5.åˆ›å»º springMVC çš„é…ç½®æ–‡ä»¶</p><blockquote><p>åœ¨<wavy>resources</wavy>æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºåä¸º : <wavy>springMVC.xml</wavy>æ–‡ä»¶</p><p><img src="https://unpkg.com/serms-assets@1.0.10/Spring/image-20220403230416170.png" alt="" /></p><p>å†™å…¥ä¸€ä¸‹é…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è‡ªåŠ¨æ‰«æåŒ… --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu.mvc.controller&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®Thymeleafè§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;viewResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.view.ThymeleafViewResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;order&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateEngine&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.SpringTemplateEngine&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateResolver&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- è§†å›¾å‰ç¼€ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/templates/&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- è§†å›¾åç¼€ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.html&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateMode&quot;</span> <span class="attr">value</span>=<span class="string">&quot;HTML5&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  è¿™é‡Œå¼•å…¥å¯èƒ½ä¼šæŠ¥é”™,å¯ä»¥å…ˆåˆ æ‰,åç»­å°†ä¼šè®²è§£æ­¤å¤„çš„ä½œç”¨</span></span><br><span class="line"><span class="comment">   å¤„ç†é™æ€èµ„æºï¼Œä¾‹å¦‚htmlã€jsã€cssã€jpg</span></span><br><span class="line"><span class="comment">  è‹¥åªè®¾ç½®è¯¥æ ‡ç­¾ï¼Œåˆ™åªèƒ½è®¿é—®é™æ€èµ„æºï¼Œå…¶ä»–è¯·æ±‚åˆ™æ— æ³•è®¿é—®</span></span><br><span class="line"><span class="comment">  æ­¤æ—¶å¿…é¡»è®¾ç½®&lt;mvc:annotation-driven/&gt;è§£å†³é—®é¢˜</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¼€å¯mvcæ³¨è§£é©±åŠ¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¤„ç†å“åº”ä¸­æ–‡å†…å®¹ä¹±ç  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultCharset&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;supportedMediaTypes&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span>text/html<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span>application/json<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å†™å¥½çš„ springMVC.xml ä¸º:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ‰«æç»„ä»¶ è‡ªåŠ¨æ‰«æ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu.mvc.controller&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®Thymeleafè§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;viewResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.view.ThymeleafViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è®¾ç½®è§†å›¾è§£æå™¨ä¼˜å…ˆçº§--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;order&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è§†å›¾è§£æå™¨ç¼–ç --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è§†å›¾è§£æå™¨æ¨¡æ¿--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateEngine&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--å†…éƒ¨Beanç»™templateEngineèµ‹å€¼--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.SpringTemplateEngine&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateResolver&quot;</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--å†…éƒ¨Beanç»™templateResolverèµ‹å€¼--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">&lt;!-- è§†å›¾å‰ç¼€ --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/templates/&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">&lt;!-- è§†å›¾åç¼€ --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.html&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateMode&quot;</span> <span class="attr">value</span>=<span class="string">&quot;HTML5&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></blockquote><p>6.åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨</p><blockquote><p>åˆ›å»ºä¸€ä¸ªæ§åˆ¶ç±»(HelloController)å¹¶å£°æ˜æ§åˆ¶å±‚æ³¨è§£@Controller</p></blockquote><p><img src="https://unpkg.com/serms-assets@1.0.9/Spring/image-20220403230247900.png" alt="" /></p><blockquote><p>ç”±äºå‰ç«¯æ§åˆ¶å™¨å¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚è¿›è¡Œäº†ç»Ÿä¸€çš„å¤„ç†ï¼Œä½†æ˜¯å…·ä½“çš„è¯·æ±‚æœ‰ä¸åŒçš„å¤„ç†è¿‡ç¨‹ï¼Œå› æ­¤éœ€è¦åˆ›å»ºå¤„ç†å…·ä½“è¯·æ±‚çš„ç±»ï¼Œå³è¯·æ±‚æ§åˆ¶å™¨</p><p>è¯·æ±‚æ§åˆ¶å™¨ä¸­æ¯ä¸€ä¸ªå¤„ç†è¯·æ±‚çš„æ–¹æ³•æˆä¸ºæ§åˆ¶å™¨æ–¹æ³•</p><p>å› ä¸º SpringMVC çš„æ§åˆ¶å™¨ç”±ä¸€ä¸ª POJOï¼ˆæ™®é€šçš„ Java ç±»ï¼‰æ‹…ä»»ï¼Œå› æ­¤éœ€è¦é€šè¿‡@Controller æ³¨è§£å°†å…¶æ ‡è¯†ä¸ºä¸€ä¸ªæ§åˆ¶å±‚ç»„ä»¶ï¼Œäº¤ç»™ Spring çš„ IoC å®¹å™¨ç®¡ç†ï¼Œæ­¤æ—¶ SpringMVC æ‰èƒ½å¤Ÿè¯†åˆ«æ§åˆ¶å™¨çš„å­˜åœ¨</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.mvc.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/3/30 11:48</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span> <span class="comment">//æ§åˆ¶å™¨ç±» æ‰«ææ§åˆ¶å±‚ç»„ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" green open><summary> æµ‹è¯•HelloWorld </summary>              <div class='content'>              <p>åœ¨ WEB-INF èµ„æºæ–‡ä»¶å¤¹ä¸‹é¢åˆ›å»º<wavy>templates</wavy>æ–‡ä»¶å¤¹.å¹¶åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åˆ›å»º<wavy>index.html</wavy>æ–‡ä»¶</p><div class="tip warning"><p>æ³¨:</p><p>å› æˆ‘ä»¬åœ¨<wavy>Thymeleafè§†å›¾è§£æå™¨</wavy>ä¸­å·²ç»é…ç½®äº†<wavy>è§†å›¾å‰ç¼€</wavy>çš„ value å€¼ä¸º:value=&quot;/WEB-INF/templates/&quot;æ‰€ä»¥æˆ‘ä»¬å¿…é¡»æŠŠé™æ€æ–‡ä»¶åˆ›å»ºåœ¨ WEB-INF ä¸‹çš„ templates æ–‡ä»¶å¤¹</p></div><p><img src="https://unpkg.com/serms-assets@1.0.9/Spring/image-20220403231346495.png" alt="" /></p><p>åˆ›å»ºå¥½ä¹‹ååœ¨ index.html å†™å…¥ä»£ç </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="tabs" id=""><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#-1">å®ç°å¯¹é¦–é¡µçš„è®¿é—®</button></li><li class="tab"><button type="button" data-href="#-2">é€šè¿‡è¶…é“¾æ¥è·³è½¬åˆ°æŒ‡å®šé¡µé¢</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><p>åœ¨è¯·æ±‚æ§åˆ¶å™¨(HelloController.java)ä¸­åˆ›å»ºå¤„ç†è¯·æ±‚çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @RequestMappingæ³¨è§£ï¼šå¤„ç†è¯·æ±‚å’Œæ§åˆ¶å™¨æ–¹æ³•ä¹‹é—´çš„æ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="comment">// @RequestMappingæ³¨è§£çš„valueå±æ€§å¯ä»¥é€šè¿‡è¯·æ±‚åœ°å€åŒ¹é…è¯·æ±‚ï¼Œ/è¡¨ç¤ºçš„å½“å‰å·¥ç¨‹çš„ä¸Šä¸‹æ–‡è·¯å¾„</span></span><br><span class="line"><span class="comment">// localhost:8080/springMVC/</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">index</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//è®¾ç½®è§†å›¾åç§°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†™å®Œä¹‹åçš„æ•´ä¸ªæ–‡ä»¶:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/3/30 11:48</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span> <span class="comment">//æ§åˆ¶å™¨ç±» æ‰«ææ§åˆ¶å±‚ç»„ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// RequestMappingæ³¨è§£==&gt;è¯·æ±‚æ˜ å°„</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">index</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//è¿”å›è§†å›¾åç§°</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿è¡Œ Tomcat å³å¯çœ‹åˆ°é¡µé¢å‘ˆç° é¦–é¡µ å­—æ ·</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-2"><p>1.åœ¨ä¸»é¡µ index.html ä¸­è®¾ç½®è¶…é“¾æ¥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/hello&#125;&quot;</span>&gt;</span>HelloWorld<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.åœ¨ templates ä¸‹åˆ›å»ºç¬¬äºŒä¸ª html é¡µé¢åä¸º target</p><p><img src="https://unpkg.com/serms-assets@1.0.9/Spring/image-20220403233628709.png" alt="" /></p><p>åœ¨é‡Œé¢å†™å…¥:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    HelloWorld</span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3.åœ¨è¯·æ±‚æ§åˆ¶å™¨ä¸­åˆ›å»ºå¤„ç†è¯·æ±‚çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">HelloWorld</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;target&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†™å®Œåçš„æ§åˆ¶å±‚æ–‡ä»¶ä¸º:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/3/30 11:48</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span> <span class="comment">//æ§åˆ¶å™¨ç±» æ‰«ææ§åˆ¶å±‚ç»„ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// RequestMappingæ³¨è§£==&gt;è¯·æ±‚æ˜ å°„</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">index</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//è¿”å›è§†å›¾åç§°</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/target&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toTarget</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;target&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><div class="tip success"><p>æ³¨:</p><p>æ­¤å¤„çš„è¶…é“¾æ¥ä¸­ç”¨åˆ°çš„ th:XXX æ˜¯ thymeleaf çš„æ¨¡æ¿è¯­æ³•,è€Œä¸”å¿…é¡»åœ¨ html æ ‡ç­¾å†…å¼•å…¥ xmlns åœ°å€</p><p>ä¸€èˆ¬å†™æ³•ä¸º: th:href=&quot;@{å€¼}&quot;</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="tip home"><p>æ€»ç»“</p><p>æµè§ˆå™¨å‘é€è¯·æ±‚ï¼Œè‹¥è¯·æ±‚åœ°å€ç¬¦åˆå‰ç«¯æ§åˆ¶å™¨çš„ url-patternï¼Œè¯¥è¯·æ±‚å°±ä¼šè¢«å‰ç«¯æ§åˆ¶å™¨ DispatcherServlet å¤„ç†ã€‚å‰ç«¯æ§åˆ¶å™¨ä¼šè¯»å– SpringMVC çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œé€šè¿‡æ‰«æç»„ä»¶æ‰¾åˆ°æ§åˆ¶å™¨ï¼Œå°†è¯·æ±‚åœ°å€å’Œæ§åˆ¶å™¨ä¸­@RequestMapping æ³¨è§£çš„ value å±æ€§å€¼è¿›è¡ŒåŒ¹é…ï¼Œè‹¥åŒ¹é…æˆåŠŸï¼Œè¯¥æ³¨è§£æ‰€æ ‡è¯†çš„æ§åˆ¶å™¨æ–¹æ³•å°±æ˜¯å¤„ç†è¯·æ±‚çš„æ–¹æ³•ã€‚å¤„ç†è¯·æ±‚çš„æ–¹æ³•éœ€è¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„è§†å›¾åç§°ï¼Œè¯¥è§†å›¾åç§°ä¼šè¢«è§†å›¾è§£æå™¨è§£æï¼ŒåŠ ä¸Šå‰ç¼€å’Œåç¼€ç»„æˆè§†å›¾çš„è·¯å¾„ï¼Œé€šè¿‡ Thymeleaf å¯¹è§†å›¾è¿›è¡Œæ¸²æŸ“ï¼Œæœ€ç»ˆè½¬å‘åˆ°è§†å›¾æ‰€å¯¹åº”é¡µé¢</p></div>              </div>            </details><h1 id="requestmapping-æ³¨è§£"><a class="markdownIt-Anchor" href="#requestmapping-æ³¨è§£"></a> @RequestMapping æ³¨è§£</h1><h3 id="requestmapping-æ³¨è§£çš„åŠŸèƒ½"><a class="markdownIt-Anchor" href="#requestmapping-æ³¨è§£çš„åŠŸèƒ½"></a> @RequestMapping æ³¨è§£çš„åŠŸèƒ½</h3><p>ä»æ³¨è§£åç§°ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ@RequestMapping æ³¨è§£çš„ä½œç”¨å°±æ˜¯å°†è¯·æ±‚å’Œå¤„ç†è¯·æ±‚çš„æ§åˆ¶å™¨æ–¹æ³•å…³è”èµ·æ¥ï¼Œå»ºç«‹æ˜ å°„å…³ç³»ã€‚</p><p>SpringMVC æ¥æ”¶åˆ°æŒ‡å®šçš„è¯·æ±‚ï¼Œå°±ä¼šæ¥æ‰¾åˆ°åœ¨æ˜ å°„å…³ç³»ä¸­å¯¹åº”çš„æ§åˆ¶å™¨æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚</p><h3 id="requestmapping-æ³¨è§£çš„ä½ç½®"><a class="markdownIt-Anchor" href="#requestmapping-æ³¨è§£çš„ä½ç½®"></a> @RequestMapping æ³¨è§£çš„ä½ç½®</h3><p>@RequestMapping æ ‡è¯†ä¸€ä¸ªç±»ï¼šè®¾ç½®æ˜ å°„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„çš„åˆå§‹ä¿¡æ¯</p><p>@RequestMapping æ ‡è¯†ä¸€ä¸ªæ–¹æ³•ï¼šè®¾ç½®æ˜ å°„è¯·æ±‚è¯·æ±‚è·¯å¾„çš„å…·ä½“ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestMappingController</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ­¤æ—¶è¯·æ±‚æ˜ å°„æ‰€æ˜ å°„çš„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„ä¸ºï¼š/test/testRequestMapping</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/testRequestMapping&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testRequestMapping</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="requestmapping-æ³¨è§£çš„-value-å±æ€§"><a class="markdownIt-Anchor" href="#requestmapping-æ³¨è§£çš„-value-å±æ€§"></a> @RequestMapping æ³¨è§£çš„ value å±æ€§</h3><p>@RequestMapping æ³¨è§£çš„ value å±æ€§é€šè¿‡è¯·æ±‚çš„è¯·æ±‚åœ°å€åŒ¹é…è¯·æ±‚æ˜ å°„</p><p>@RequestMapping æ³¨è§£çš„ value å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚æ˜ å°„èƒ½å¤ŸåŒ¹é…å¤šä¸ªè¯·æ±‚åœ°å€æ‰€å¯¹åº”çš„è¯·æ±‚</p><p>@RequestMapping æ³¨è§£çš„ value å±æ€§å¿…é¡»è®¾ç½®ï¼Œè‡³å°‘é€šè¿‡è¯·æ±‚åœ°å€åŒ¹é…è¯·æ±‚æ˜ å°„</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testRequestMapping&#125;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span>æµ‹è¯•@RequestMappingçš„valueå±æ€§--&gt;/testRequestMapping&lt;/a</span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/test&#125;&quot;</span>&gt;</span>æµ‹è¯•@RequestMappingçš„valueå±æ€§--&gt;/test<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(</span></span><br><span class="line"><span class="meta">        value = &#123;&quot;/testRequestMapping&quot;, &quot;/test&quot;&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestMapping</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="requestmapping-æ³¨è§£çš„-method-å±æ€§"><a class="markdownIt-Anchor" href="#requestmapping-æ³¨è§£çš„-method-å±æ€§"></a> @RequestMapping æ³¨è§£çš„ method å±æ€§</h3><p>@RequestMapping æ³¨è§£çš„ method å±æ€§é€šè¿‡è¯·æ±‚çš„è¯·æ±‚æ–¹å¼ï¼ˆget æˆ– postï¼‰åŒ¹é…è¯·æ±‚æ˜ å°„</p><p>@RequestMapping æ³¨è§£çš„ method å±æ€§æ˜¯ä¸€ä¸ª RequestMethod ç±»å‹çš„æ•°ç»„ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚æ˜ å°„èƒ½å¤ŸåŒ¹é…å¤šç§è¯·æ±‚æ–¹å¼çš„è¯·æ±‚</p><p>è‹¥å½“å‰è¯·æ±‚çš„è¯·æ±‚åœ°å€æ»¡è¶³è¯·æ±‚æ˜ å°„çš„ value å±æ€§ï¼Œä½†æ˜¯è¯·æ±‚æ–¹å¼ä¸æ»¡è¶³ method å±æ€§ï¼Œåˆ™æµè§ˆå™¨æŠ¥é”™ 405ï¼šRequest method â€˜POSTâ€™ not supported</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/test&#125;&quot;</span>&gt;</span>æµ‹è¯•@RequestMappingçš„valueå±æ€§--&gt;/test<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/test&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(</span></span><br><span class="line"><span class="meta">        value = &#123;&quot;/testRequestMapping&quot;, &quot;/test&quot;&#125;,</span></span><br><span class="line"><span class="meta">        method = &#123;RequestMethod.GET, RequestMethod.POST&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestMapping</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>1ã€å¯¹äºå¤„ç†æŒ‡å®šè¯·æ±‚æ–¹å¼çš„æ§åˆ¶å™¨æ–¹æ³•ï¼ŒSpringMVC ä¸­æä¾›äº†@RequestMapping çš„æ´¾ç”Ÿæ³¨è§£</p><p>å¤„ç† get è¯·æ±‚çš„æ˜ å°„â€“&gt;@GetMapping</p><p>å¤„ç† post è¯·æ±‚çš„æ˜ å°„â€“&gt;@PostMapping</p><p>å¤„ç† put è¯·æ±‚çš„æ˜ å°„â€“&gt;@PutMapping</p><p>å¤„ç† delete è¯·æ±‚çš„æ˜ å°„â€“&gt;@DeleteMapping</p><p>2ã€å¸¸ç”¨çš„è¯·æ±‚æ–¹å¼æœ‰ getï¼Œpostï¼Œputï¼Œdelete</p><p>ä½†æ˜¯ç›®å‰æµè§ˆå™¨åªæ”¯æŒ get å’Œ postï¼Œè‹¥åœ¨ form è¡¨å•æäº¤æ—¶ï¼Œä¸º method è®¾ç½®äº†å…¶ä»–è¯·æ±‚æ–¹å¼çš„å­—ç¬¦ä¸²ï¼ˆput æˆ– deleteï¼‰ï¼Œåˆ™æŒ‰ç…§é»˜è®¤çš„è¯·æ±‚æ–¹å¼ get å¤„ç†</p><p>è‹¥è¦å‘é€ put å’Œ delete è¯·æ±‚ï¼Œåˆ™éœ€è¦é€šè¿‡ spring æä¾›çš„è¿‡æ»¤å™¨ HiddenHttpMethodFilterï¼Œåœ¨ RESTful éƒ¨åˆ†ä¼šè®²åˆ°</p></blockquote><h3 id="requestmapping-æ³¨è§£çš„-params-å±æ€§äº†è§£"><a class="markdownIt-Anchor" href="#requestmapping-æ³¨è§£çš„-params-å±æ€§äº†è§£"></a> @RequestMapping æ³¨è§£çš„ params å±æ€§ï¼ˆäº†è§£ï¼‰</h3><p>@RequestMapping æ³¨è§£çš„ params å±æ€§é€šè¿‡è¯·æ±‚çš„è¯·æ±‚å‚æ•°åŒ¹é…è¯·æ±‚æ˜ å°„</p><p>@RequestMapping æ³¨è§£çš„ params å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡å››ç§è¡¨è¾¾å¼è®¾ç½®è¯·æ±‚å‚æ•°å’Œè¯·æ±‚æ˜ å°„çš„åŒ¹é…å…³ç³»</p><p>â€œparamâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦ param è¯·æ±‚å‚æ•°</p><p>â€œ!paramâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»ä¸èƒ½æºå¸¦ param è¯·æ±‚å‚æ•°</p><p>â€œparam=valueâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦ param è¯·æ±‚å‚æ•°ä¸” param=value</p><p>â€œparam!=valueâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦ param è¯·æ±‚å‚æ•°ä½†æ˜¯ param!=value</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/test(username=&#x27;admin&#x27;,password=123456)&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span>æµ‹è¯•@RequestMappingçš„paramså±æ€§--&gt;/test&lt;/a</span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(</span></span><br><span class="line"><span class="meta">        value = &#123;&quot;/testRequestMapping&quot;, &quot;/test&quot;&#125;</span></span><br><span class="line"><span class="meta">        ,method = &#123;RequestMethod.GET, RequestMethod.POST&#125;</span></span><br><span class="line"><span class="meta">        ,params = &#123;&quot;username&quot;,&quot;password!=123456&quot;&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestMapping</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>è‹¥å½“å‰è¯·æ±‚æ»¡è¶³@RequestMapping æ³¨è§£çš„ value å’Œ method å±æ€§ï¼Œä½†æ˜¯ä¸æ»¡è¶³ params å±æ€§ï¼Œæ­¤æ—¶é¡µé¢å›æŠ¥é”™ 400ï¼šParameter conditions â€œusername, password!=123456â€ not met for actual request parameters: username={admin}, password={123456}</p></blockquote><h3 id="requestmapping-æ³¨è§£çš„-headers-å±æ€§äº†è§£"><a class="markdownIt-Anchor" href="#requestmapping-æ³¨è§£çš„-headers-å±æ€§äº†è§£"></a> @RequestMapping æ³¨è§£çš„ headers å±æ€§ï¼ˆäº†è§£ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/testParamsAndHeders&quot;,</span></span><br><span class="line"><span class="meta">                headers = &#123;&quot;Host=localhost:8080&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testParamsAndHeders</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>@RequestMapping æ³¨è§£çš„ headers å±æ€§é€šè¿‡è¯·æ±‚çš„è¯·æ±‚å¤´ä¿¡æ¯åŒ¹é…è¯·æ±‚æ˜ å°„</p><p>@RequestMapping æ³¨è§£çš„ headers å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡å››ç§è¡¨è¾¾å¼è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯å’Œè¯·æ±‚æ˜ å°„çš„åŒ¹é…å…³ç³»</p><p>â€œheaderâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦ header è¯·æ±‚å¤´ä¿¡æ¯</p><p>â€œ!headerâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»ä¸èƒ½æºå¸¦ header è¯·æ±‚å¤´ä¿¡æ¯</p><p>â€œheader=valueâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦ header è¯·æ±‚å¤´ä¿¡æ¯ä¸” header=value</p><p>â€œheader!=valueâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦ header è¯·æ±‚å¤´ä¿¡æ¯ä¸” header!=value</p><p>è‹¥å½“å‰è¯·æ±‚æ»¡è¶³@RequestMapping æ³¨è§£çš„ value å’Œ method å±æ€§ï¼Œä½†æ˜¯ä¸æ»¡è¶³ headers å±æ€§ï¼Œæ­¤æ—¶é¡µé¢æ˜¾ç¤º 404 é”™è¯¯ï¼Œå³èµ„æºæœªæ‰¾åˆ°</p><h3 id="springmvc-æ”¯æŒ-ant-é£æ ¼çš„è·¯å¾„"><a class="markdownIt-Anchor" href="#springmvc-æ”¯æŒ-ant-é£æ ¼çš„è·¯å¾„"></a> SpringMVC æ”¯æŒ ant é£æ ¼çš„è·¯å¾„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//    @RequestMapping(&quot;/a?a/testAnt&quot;)</span></span><br><span class="line"><span class="comment">//    @RequestMapping(&quot;/a*a/testAnt&quot;)</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/**/testAnt&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testAnt</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼Ÿï¼šè¡¨ç¤ºä»»æ„çš„å•ä¸ªå­—ç¬¦</p><p>*ï¼šè¡¨ç¤ºä»»æ„çš„ 0 ä¸ªæˆ–å¤šä¸ªå­—ç¬¦</p><p>**ï¼šè¡¨ç¤ºä»»æ„çš„ä¸€å±‚æˆ–å¤šå±‚ç›®å½•</p><p>æ³¨æ„ï¼šåœ¨ä½¿ç”¨**æ—¶ï¼Œåªèƒ½ä½¿ç”¨/**/xxx çš„æ–¹å¼</p><h3 id="springmvc-æ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦é‡ç‚¹"><a class="markdownIt-Anchor" href="#springmvc-æ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦é‡ç‚¹"></a> SpringMVC æ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦ï¼ˆé‡ç‚¹ï¼‰</h3><p>åŸå§‹æ–¹å¼ï¼š/deleteUser?id=1</p><p>rest æ–¹å¼ï¼š/deleteUser/1</p><p>SpringMVC è·¯å¾„ä¸­çš„å ä½ç¬¦å¸¸ç”¨äº RESTful é£æ ¼ä¸­ï¼Œå½“è¯·æ±‚è·¯å¾„ä¸­å°†æŸäº›æ•°æ®é€šè¿‡è·¯å¾„çš„æ–¹å¼ä¼ è¾“åˆ°æœåŠ¡å™¨ä¸­ï¼Œå°±å¯ä»¥åœ¨ç›¸åº”çš„@RequestMapping æ³¨è§£çš„ value å±æ€§ä¸­é€šè¿‡å ä½ç¬¦{xxx}è¡¨ç¤ºä¼ è¾“çš„æ•°æ®ï¼Œåœ¨é€šè¿‡@PathVariable æ³¨è§£ï¼Œå°†å ä½ç¬¦æ‰€è¡¨ç¤ºçš„æ•°æ®èµ‹å€¼ç»™æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testRest/1/admin&#125;&quot;</span>&gt;</span>æµ‹è¯•è·¯å¾„ä¸­çš„å ä½ç¬¦--&gt;/testRest<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRest/&#123;id&#125;/&#123;username&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRest</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> String id, <span class="meta">@PathVariable(&quot;username&quot;)</span> String username)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;id:&quot;</span>+id+<span class="string">&quot;,username:&quot;</span>+username);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ€ç»ˆè¾“å‡ºçš„å†…å®¹ä¸º--&gt;id:1,username:admin</span></span><br></pre></td></tr></table></figure><h1 id="springmvc-è·å–è¯·æ±‚å‚æ•°"><a class="markdownIt-Anchor" href="#springmvc-è·å–è¯·æ±‚å‚æ•°"></a> SpringMVC è·å–è¯·æ±‚å‚æ•°</h1><h3 id="é€šè¿‡-servletapi-è·å–"><a class="markdownIt-Anchor" href="#é€šè¿‡-servletapi-è·å–"></a> é€šè¿‡ ServletAPI è·å–</h3><p>å°† HttpServletRequest ä½œä¸ºæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ï¼Œæ­¤æ—¶ HttpServletRequest ç±»å‹çš„å‚æ•°è¡¨ç¤ºå°è£…äº†å½“å‰è¯·æ±‚çš„è¯·æ±‚æŠ¥æ–‡çš„å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testParam&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testParam</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;username:&quot;</span>+username+<span class="string">&quot;,password:&quot;</span>+password);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–è¯·æ±‚å‚æ•°"><a class="markdownIt-Anchor" href="#é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–è¯·æ±‚å‚æ•°"></a> é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–è¯·æ±‚å‚æ•°</h3><p>åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä½ç½®ï¼Œè®¾ç½®å’Œè¯·æ±‚å‚æ•°åŒåçš„å½¢å‚ï¼Œå½“æµè§ˆå™¨å‘é€è¯·æ±‚ï¼ŒåŒ¹é…åˆ°è¯·æ±‚æ˜ å°„æ—¶ï¼Œåœ¨ DispatcherServlet ä¸­å°±ä¼šå°†è¯·æ±‚å‚æ•°èµ‹å€¼ç»™ç›¸åº”çš„å½¢å‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testParam(username=&#x27;admin&#x27;,password=123456)&#125;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span>æµ‹è¯•è·å–è¯·æ±‚å‚æ•°--&gt;/testParam&lt;/a</span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testParam&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testParam</span><span class="params">(String username, String password)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;username:&quot;</span>+username+<span class="string">&quot;,password:&quot;</span>+password);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>è‹¥è¯·æ±‚æ‰€ä¼ è¾“çš„è¯·æ±‚å‚æ•°ä¸­æœ‰å¤šä¸ªåŒåçš„è¯·æ±‚å‚æ•°ï¼Œæ­¤æ—¶å¯ä»¥åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä¸­è®¾ç½®å­—ç¬¦ä¸²æ•°ç»„æˆ–è€…å­—ç¬¦ä¸²ç±»å‹çš„å½¢å‚æ¥æ”¶æ­¤è¯·æ±‚å‚æ•°</p><p>è‹¥ä½¿ç”¨å­—ç¬¦ä¸²æ•°ç»„ç±»å‹çš„å½¢å‚ï¼Œæ­¤å‚æ•°çš„æ•°ç»„ä¸­åŒ…å«äº†æ¯ä¸€ä¸ªæ•°æ®</p><p>è‹¥ä½¿ç”¨å­—ç¬¦ä¸²ç±»å‹çš„å½¢å‚ï¼Œæ­¤å‚æ•°çš„å€¼ä¸ºæ¯ä¸ªæ•°æ®ä¸­é—´ä½¿ç”¨é€—å·æ‹¼æ¥çš„ç»“æœ</p></blockquote><h3 id="requestparam"><a class="markdownIt-Anchor" href="#requestparam"></a> @RequestParam</h3><p>@RequestParam æ˜¯å°†è¯·æ±‚å‚æ•°å’Œæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚åˆ›å»ºæ˜ å°„å…³ç³»</p><p>@RequestParam æ³¨è§£ä¸€å…±æœ‰ä¸‰ä¸ªå±æ€§ï¼š</p><p>valueï¼šæŒ‡å®šä¸ºå½¢å‚èµ‹å€¼çš„è¯·æ±‚å‚æ•°çš„å‚æ•°å</p><p>requiredï¼šè®¾ç½®æ˜¯å¦å¿…é¡»ä¼ è¾“æ­¤è¯·æ±‚å‚æ•°ï¼Œé»˜è®¤å€¼ä¸º true</p><p>è‹¥è®¾ç½®ä¸º true æ—¶ï¼Œåˆ™å½“å‰è¯·æ±‚å¿…é¡»ä¼ è¾“ value æ‰€æŒ‡å®šçš„è¯·æ±‚å‚æ•°ï¼Œè‹¥æ²¡æœ‰ä¼ è¾“è¯¥è¯·æ±‚å‚æ•°ï¼Œä¸”æ²¡æœ‰è®¾ç½® defaultValue å±æ€§ï¼Œåˆ™é¡µé¢æŠ¥é”™ 400ï¼šRequired String parameter â€˜xxxâ€™ is not presentï¼›è‹¥è®¾ç½®ä¸º falseï¼Œåˆ™å½“å‰è¯·æ±‚ä¸æ˜¯å¿…é¡»ä¼ è¾“ value æ‰€æŒ‡å®šçš„è¯·æ±‚å‚æ•°ï¼Œè‹¥æ²¡æœ‰ä¼ è¾“ï¼Œåˆ™æ³¨è§£æ‰€æ ‡è¯†çš„å½¢å‚çš„å€¼ä¸º null</p><p>defaultValueï¼šä¸ç®¡ required å±æ€§å€¼ä¸º true æˆ– falseï¼Œå½“ value æ‰€æŒ‡å®šçš„è¯·æ±‚å‚æ•°æ²¡æœ‰ä¼ è¾“æˆ–ä¼ è¾“çš„å€¼ä¸º&quot;&quot;æ—¶ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ä¸ºå½¢å‚èµ‹å€¼</p><h3 id="requestheader"><a class="markdownIt-Anchor" href="#requestheader"></a> @RequestHeader</h3><p>@RequestHeader æ˜¯å°†è¯·æ±‚å¤´ä¿¡æ¯å’Œæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚åˆ›å»ºæ˜ å°„å…³ç³»</p><p>@RequestHeader æ³¨è§£ä¸€å…±æœ‰ä¸‰ä¸ªå±æ€§ï¼švalueã€requiredã€defaultValueï¼Œç”¨æ³•åŒ@RequestParam</p><h3 id="cookievalue"><a class="markdownIt-Anchor" href="#cookievalue"></a> @CookieValue</h3><p>@CookieValue æ˜¯å°† cookie æ•°æ®å’Œæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚åˆ›å»ºæ˜ å°„å…³ç³»</p><p>@CookieValue æ³¨è§£ä¸€å…±æœ‰ä¸‰ä¸ªå±æ€§ï¼švalueã€requiredã€defaultValueï¼Œç”¨æ³•åŒ@RequestParam</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/testParam&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">  ç”¨æˆ·å:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user_name&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  å¯†ç :<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  çˆ±å¥½:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;a&quot;</span> /&gt;</span>a<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;b&quot;</span> /&gt;</span>b<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;c&quot;</span> /&gt;</span>c<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æµ‹è¯•ä½¿ç”¨æ§åˆ¶å™¨å½¢å‚è·å–è¯·æ±‚å‚æ•°&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;testParam&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testParam</span><span class="params">(</span></span><br><span class="line"><span class="params">        <span class="meta">@RequestParam(value = &quot;user_name&quot;, required = false, defaultValue = &quot;hehe&quot;)</span> String username,</span></span><br><span class="line"><span class="params">        String password,</span></span><br><span class="line"><span class="params">        String[] hobby,</span></span><br><span class="line"><span class="params">        <span class="meta">@RequestHeader(value = &quot;sayHaha&quot;, required = false, defaultValue = &quot;haha&quot;)</span> String host,</span></span><br><span class="line"><span class="params">        <span class="meta">@CookieValue(&quot;JSESSIONID&quot;)</span> String JSESSIONID)</span> &#123;</span><br><span class="line">    <span class="comment">//è‹¥è¯·æ±‚å‚æ•°ä¸­å‡ºç°å¤šä¸ªåŒåçš„è¯·æ±‚å‚æ•°.å¯ä»¥åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä½ç½®è®¾ç½®å­—ç¬¦ä¸²ç±»å‹æˆ–å­—ç¬¦ä¸²æ•°ç»„æ¥æ”¶æ­¤è¯·æ±‚å‚æ•°</span></span><br><span class="line">    <span class="comment">//è‹¥ä½¿ç”¨å­—ç¬¦ä¸²ç±»å‹çš„å½¢å‚,æœ€ç»ˆç»“æœä¸ºè¯·æ±‚å‚æ•°çš„æ¯ä¸€ä¸ªå€¼ä¹‹é—´ä½¿ç”¨é€—å·è¿›è¡Œæ‹¼æ¥</span></span><br><span class="line">    System.out.println(<span class="string">&quot;username:&quot;</span> + username + <span class="string">&quot;  password: &quot;</span> + password + <span class="string">&quot; hobby: &quot;</span> + Arrays.toString(hobby));</span><br><span class="line">    System.out.println(<span class="string">&quot;hsot : &quot;</span> + host);</span><br><span class="line">    System.out.println(<span class="string">&quot;JSESSIONID : &quot;</span> + JSESSIONID);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é€šè¿‡-pojo-è·å–è¯·æ±‚å‚æ•°"><a class="markdownIt-Anchor" href="#é€šè¿‡-pojo-è·å–è¯·æ±‚å‚æ•°"></a> é€šè¿‡ POJO è·å–è¯·æ±‚å‚æ•°</h3><p>å¯ä»¥åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä½ç½®è®¾ç½®ä¸€ä¸ªå®ä½“ç±»ç±»å‹çš„å½¢å‚ï¼Œæ­¤æ—¶è‹¥æµè§ˆå™¨ä¼ è¾“çš„è¯·æ±‚å‚æ•°çš„å‚æ•°åå’Œå®ä½“ç±»ä¸­çš„å±æ€§åä¸€è‡´ï¼Œé‚£ä¹ˆè¯·æ±‚å‚æ•°å°±ä¼šä¸ºæ­¤å±æ€§èµ‹å€¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/testpojo&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">  ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  æ€§åˆ«ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”·&quot;</span> /&gt;</span>ç”·<span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">value</span>=<span class="string">&quot;å¥³&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span>å¥³<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  å¹´é¾„ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  é‚®ç®±ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testpojo&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testPOJO</span><span class="params">(User user)</span>&#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ€ç»ˆç»“æœ--&gt;User&#123;id=null, username=&#x27;å¼ ä¸‰&#x27;, password=&#x27;123&#x27;, age=23, sex=&#x27;ç”·&#x27;, email=&#x27;123@qq.com&#x27;&#125;</span></span><br></pre></td></tr></table></figure><h3 id="è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜"><a class="markdownIt-Anchor" href="#è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜"></a> è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜</h3><p>è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ SpringMVC æä¾›çš„ç¼–ç è¿‡æ»¤å™¨ CharacterEncodingFilterï¼Œä½†æ˜¯å¿…é¡»åœ¨ web.xml ä¸­è¿›è¡Œæ³¨å†Œ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®springMVCçš„ç¼–ç è¿‡æ»¤å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceResponseEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>SpringMVC ä¸­å¤„ç†ç¼–ç çš„è¿‡æ»¤å™¨ä¸€å®šè¦é…ç½®åˆ°å…¶ä»–è¿‡æ»¤å™¨ä¹‹å‰ï¼Œå¦åˆ™æ— æ•ˆ</p></blockquote><h1 id="åŸŸå¯¹è±¡å…±äº«æ•°æ®"><a class="markdownIt-Anchor" href="#åŸŸå¯¹è±¡å…±äº«æ•°æ®"></a> åŸŸå¯¹è±¡å…±äº«æ•°æ®</h1><details class="folding-tag" green><summary> æ–°å»ºé¡¹ç›®:[`SpringMVC-demo3`] </summary>              <div class='content'>              <ol><li><p>é¦–å…ˆè¿˜æ˜¯å…ˆåˆ›å»º webapp ç›®å½•,å°† web.xml çš„è·¯å¾„æ”¹ä¸º<code>src\main\webapp</code>ä¸‹,å‰é¢æœ‰è®²åˆ°å°±ä¸åšé˜è¿°äº†~</p></li><li><p>é…ç½® web.xml æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®ç¼–ç è¿‡æ»¤å™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è®¾ç½®è¯·æ±‚ç¼–ç --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è®¾ç½®å“åº”ç¼–ç --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceResponseEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--é…ç½®springå‰ç«¯æ§åˆ¶å™¨DispatcherServlet--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springMVC.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¡¨ç¤ºå¯åŠ¨å®¹å™¨æ—¶å…ˆåˆå§‹åŒ–è¯¥servletçš„é¡ºåº --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨<code>resources</code>ä¸‹åˆ›å»º<code>springMVC.xml</code>æ–‡ä»¶,å¹¶é…ç½® springMVC.xml,é…ç½®å®Œåçš„ springMVC.xml ä¸º:.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ‰«æç»„ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.atguigu.mvc.controller&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®Thymeleafè§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;viewResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.view.ThymeleafViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;order&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateEngine&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.SpringTemplateEngine&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateResolver&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">&lt;!-- è§†å›¾å‰ç¼€ --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/templates/&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">&lt;!-- è§†å›¾åç¼€ --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.html&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateMode&quot;</span> <span class="attr">value</span>=<span class="string">&quot;HTML5&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨ğŸ“<code>Java</code>ç›®å½•ä¸‹åˆ›å»ºæ§åˆ¶å™¨ç±»(TestController)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.mvc.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Author</span> SerMs</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Date</span> 2022/4/4 21:50</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">index</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>åœ¨ ğŸ“<code>WEB-INF</code> ç›®å½•ä¸‹ åˆ›å»º ğŸ“<code>templates</code>,å¹¶åœ¨ğŸ“templates ä¸‹åˆ›å»º index.xml æ–‡ä»¶,ç„¶ååœ¨ index.xml ä¸‹å†™å…¥ä»£ç :</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½®<i class="iconfont icon-Tomcat"></i><code>Tomcat</code>æŸ¥çœ‹æ˜¯å¦å¯ä»¥è¿è¡Œ~</p></li></ol>              </div>            </details><div class="tip warning"><p>æ³¨:</p><p><code>&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</code>è§£é‡Š:</p><pre><code>1. load-on-startup å…ƒç´ æ ‡è®°å®¹å™¨æ˜¯å¦åº”è¯¥åœ¨webåº”ç”¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™å°±åŠ è½½è¿™ä¸ªservletï¼Œ(å®ä¾‹åŒ–å¹¶è°ƒç”¨å…¶init()æ–¹æ³•)ã€‚2. å®ƒçš„å€¼å¿…é¡»æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºservletè¢«åŠ è½½çš„å…ˆåé¡ºåºã€‚3. å¦‚æœè¯¥å…ƒç´ çš„å€¼ä¸ºè´Ÿæ•°æˆ–è€…æ²¡æœ‰è®¾ç½®ï¼Œåˆ™å®¹å™¨ä¼šå½“Servletè¢«è¯·æ±‚æ—¶å†åŠ è½½ã€‚4. å¦‚æœå€¼ä¸ºæ­£æ•´æ•°æˆ–è€…0æ—¶ï¼Œè¡¨ç¤ºå®¹å™¨åœ¨åº”ç”¨å¯åŠ¨æ—¶å°±åŠ è½½å¹¶åˆå§‹åŒ–è¿™ä¸ªservletï¼Œå€¼è¶Šå°ï¼Œservletçš„ä¼˜å…ˆçº§è¶Šé«˜ï¼Œå°±è¶Šå…ˆè¢«åŠ è½½ã€‚å€¼ç›¸åŒæ—¶ï¼Œå®¹å™¨å°±ä¼šè‡ªå·±é€‰æ‹©é¡ºåºæ¥åŠ è½½</code></pre></div><h3 id="ä½¿ç”¨-servletapi-å‘-request-åŸŸå¯¹è±¡å…±äº«æ•°æ®"><a class="markdownIt-Anchor" href="#ä½¿ç”¨-servletapi-å‘-request-åŸŸå¯¹è±¡å…±äº«æ•°æ®"></a> ä½¿ç”¨ ServletAPI å‘ request åŸŸå¯¹è±¡å…±äº«æ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testServletAPI&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testServletAPI</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">    request.setAttribute(<span class="string">&quot;testScope&quot;</span>, <span class="string">&quot;hello,servletAPI&quot;</span>);</span><br><span class="line">    <span class="comment">//æ­¤å¤„ç”¨çš„æ˜¯è¯·æ±‚è½¬å‘</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-modelandview-å‘-request-åŸŸå¯¹è±¡å…±äº«æ•°æ®"><a class="markdownIt-Anchor" href="#ä½¿ç”¨-modelandview-å‘-request-åŸŸå¯¹è±¡å…±äº«æ•°æ®"></a> ä½¿ç”¨ ModelAndView å‘ request åŸŸå¯¹è±¡å…±äº«æ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testModelAndView&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">testModelAndView</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ModelAndViewæœ‰Modelå’ŒViewçš„åŠŸèƒ½</span></span><br><span class="line"><span class="comment">     * Modelä¸»è¦ç”¨äºå‘è¯·æ±‚åŸŸå…±äº«æ•°æ®</span></span><br><span class="line"><span class="comment">     * Viewä¸»è¦ç”¨äºè®¾ç½®è§†å›¾ï¼Œå®ç°é¡µé¢è·³è½¬</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">mav</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">    <span class="comment">//å‘è¯·æ±‚åŸŸå…±äº«æ•°æ®</span></span><br><span class="line">    mav.addObject(<span class="string">&quot;testScope&quot;</span>, <span class="string">&quot;hello,ModelAndView&quot;</span>);</span><br><span class="line">    <span class="comment">//è®¾ç½®è§†å›¾ï¼Œå®ç°é¡µé¢è·³è½¬</span></span><br><span class="line">    mav.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> mav;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-model-å‘-request-åŸŸå¯¹è±¡å…±äº«æ•°æ®"><a class="markdownIt-Anchor" href="#ä½¿ç”¨-model-å‘-request-åŸŸå¯¹è±¡å…±äº«æ•°æ®"></a> ä½¿ç”¨ Model å‘ request åŸŸå¯¹è±¡å…±äº«æ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testModel&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testModel</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;testScope&quot;</span>, <span class="string">&quot;hello,Model&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-map-å‘-request-åŸŸå¯¹è±¡å…±äº«æ•°æ®"><a class="markdownIt-Anchor" href="#ä½¿ç”¨-map-å‘-request-åŸŸå¯¹è±¡å…±äº«æ•°æ®"></a> ä½¿ç”¨ map å‘ request åŸŸå¯¹è±¡å…±äº«æ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testMap&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testMap</span><span class="params">(Map&lt;String, Object&gt; map)</span>&#123;</span><br><span class="line">    map.put(<span class="string">&quot;testScope&quot;</span>, <span class="string">&quot;hello,Map&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-modelmap-å‘-request-åŸŸå¯¹è±¡å…±äº«æ•°æ®"><a class="markdownIt-Anchor" href="#ä½¿ç”¨-modelmap-å‘-request-åŸŸå¯¹è±¡å…±äº«æ•°æ®"></a> ä½¿ç”¨ ModelMap å‘ request åŸŸå¯¹è±¡å…±äº«æ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testModelMap&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testModelMap</span><span class="params">(ModelMap modelMap)</span>&#123;</span><br><span class="line">    modelMap.addAttribute(<span class="string">&quot;testScope&quot;</span>, <span class="string">&quot;hello,ModelMap&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="model-modelmap-map-çš„å…³ç³»"><a class="markdownIt-Anchor" href="#model-modelmap-map-çš„å…³ç³»"></a> Modelã€ModelMapã€Map çš„å…³ç³»</h3><p>Modelã€ModelMapã€Map ç±»å‹çš„å‚æ•°å…¶å®æœ¬è´¨ä¸Šéƒ½æ˜¯ BindingAwareModelMap ç±»å‹çš„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface Model&#123;&#125;</span><br><span class="line">public class ModelMap extends LinkedHashMap&lt;String, Object&gt; &#123;&#125;</span><br><span class="line">public class ExtendedModelMap extends ModelMap implements Model &#123;&#125;</span><br><span class="line">public class BindingAwareModelMap extends ExtendedModelMap &#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="å‘-session-åŸŸå…±äº«æ•°æ®"><a class="markdownIt-Anchor" href="#å‘-session-åŸŸå…±äº«æ•°æ®"></a> å‘ session åŸŸå…±äº«æ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testSession&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testSession</span><span class="params">(HttpSession session)</span>&#123;</span><br><span class="line">    session.setAttribute(<span class="string">&quot;testSessionScope&quot;</span>, <span class="string">&quot;hello,session&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‘-application-åŸŸå…±äº«æ•°æ®"><a class="markdownIt-Anchor" href="#å‘-application-åŸŸå…±äº«æ•°æ®"></a> å‘ application åŸŸå…±äº«æ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testApplication&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testApplication</span><span class="params">(HttpSession session)</span>&#123;</span><br><span class="line"><span class="type">ServletContext</span> <span class="variable">application</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">    application.setAttribute(<span class="string">&quot;testApplicationScope&quot;</span>, <span class="string">&quot;hello,application&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><details class="folding-tag" cyan><summary> å…¨éƒ¨ä»£ç : </summary>              <div class='content'>              <div class="tabs" id=""><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#-1">ScopeController.java</button></li><li class="tab"><button type="button" data-href="#-2">index.html</button></li><li class="tab"><button type="button" data-href="#-3">success.html</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.mvc.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.ModelMap;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/4 22:26</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ScopeController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/testRequestByServletAPI&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testRequestByServletAPI</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">        request.setAttribute(<span class="string">&quot;testRequestScope&quot;</span>, <span class="string">&quot;hello,servletAPI&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. ä½¿ç”¨ ModelAndView å‘ request åŸŸå¯¹è±¡å…±äº«æ•°æ®</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸¤ä¸ªåŠŸèƒ½</span></span><br><span class="line"><span class="comment">     * 1.Modelå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</span></span><br><span class="line"><span class="comment">     * 2.è®¾ç½®è§†å›¾åç§°</span></span><br><span class="line"><span class="comment">     * æ³¨æ„:</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®æ—¶,è¿”å›å€¼å¿…é¡»æ˜¯ModelAndView,</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/testModelAndView&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">testModelAndView</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mav</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        <span class="comment">//å¤„ç†æ¨¡å‹æ•°æ®,å³å‘è¯·æ±‚åŸŸrequestå…±äº«æ•°æ®</span></span><br><span class="line">        mav.addObject(<span class="string">&quot;testRequestScope&quot;</span>, <span class="string">&quot;hello,ModelAdnView&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®è§†å›¾åç§°</span></span><br><span class="line">        mav.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mav;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä½¿ç”¨ Model å‘ request åŸŸå¯¹è±¡å…±äº«æ•°æ®</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/testModel&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testModel</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;testRequestScope&quot;</span>, <span class="string">&quot;hello,model&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä½¿ç”¨ ModelMap å‘ request åŸŸå¯¹è±¡å…±äº«æ•°æ®</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/testMap&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testMap</span><span class="params">(Map&lt;String, Object&gt; map)</span> &#123;</span><br><span class="line">        map.put(<span class="string">&quot;testRequestScope&quot;</span>, <span class="string">&quot;hello,map&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä½¿ç”¨ ModelMap å‘ request åŸŸå¯¹è±¡å…±äº«æ•°æ®</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/testModelMap&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testModelMap</span><span class="params">(ModelMap modelMap)</span> &#123;</span><br><span class="line">        modelMap.addAttribute(<span class="string">&quot;testRequestScope&quot;</span>, <span class="string">&quot;hello,testModelMap&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘ session åŸŸå…±äº«æ•°æ®</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/testSession&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testSession</span><span class="params">(HttpSession session)</span> &#123;</span><br><span class="line">        session.setAttribute(<span class="string">&quot;testSessionScope&quot;</span>, <span class="string">&quot;hello,Session&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘ application åŸŸå…±äº«æ•°æ®</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/testApplication&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testApplication</span><span class="params">(HttpSession session)</span> &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;testApplicationScope&quot;</span>, <span class="string">&quot;hello,testApplication&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-2"><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testRequestByServletAPI&#125;&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span>é€šè¿‡ServletAPIå‘RequeståŸŸå¯¹è±¡å…±äº«æ•°æ®&lt;/a</span><br><span class="line">    &gt;<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testModelAndView&#125;&quot;</span>&gt;</span>é€šè¿‡ModelAndViewå‘RequeståŸŸå¯¹è±¡å…±äº«æ•°æ®&lt;/a</span><br><span class="line">    &gt;<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testModel&#125;&quot;</span>&gt;</span>é€šè¿‡modelå‘RequeståŸŸå¯¹è±¡å…±äº«æ•°æ®<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testMap&#125;&quot;</span>&gt;</span>é€šè¿‡mapé›†åˆå‘RequeståŸŸå¯¹è±¡å…±äº«æ•°æ®<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testModelMap&#125;&quot;</span>&gt;</span>é€šè¿‡ModelMapé›†åˆå‘RequeståŸŸå¯¹è±¡å…±äº«æ•°æ®&lt;/a</span><br><span class="line">    &gt;<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testSession&#125;&quot;</span>&gt;</span>é€šè¿‡ServletAPIå‘SessionåŸŸå¯¹è±¡å…±äº«æ•°æ®<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testApplication&#125;&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span>é€šè¿‡ServletAPIå‘ApplicationåŸŸå¯¹è±¡å…±äº«æ•°æ®&lt;/a</span><br><span class="line">    &gt;<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-3"><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>success<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;p th:text=&quot;$&#123;testRequestScope&#125;&quot;&gt;&lt;/p&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;#request.getAttribute(&#x27;testRequestScope&#x27;)&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.testSessionScope&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;application.testApplicationScope&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>              </div>            </details><h1 id="springmvc-çš„è§†å›¾"><a class="markdownIt-Anchor" href="#springmvc-çš„è§†å›¾"></a> SpringMVC çš„è§†å›¾</h1><p>SpringMVC ä¸­çš„è§†å›¾æ˜¯ View æ¥å£ï¼Œè§†å›¾çš„ä½œç”¨æ¸²æŸ“æ•°æ®ï¼Œå°†æ¨¡å‹ Model ä¸­çš„æ•°æ®å±•ç¤ºç»™ç”¨æˆ·</p><p>SpringMVC è§†å›¾çš„ç§ç±»å¾ˆå¤šï¼Œé»˜è®¤æœ‰è½¬å‘è§†å›¾(InternalResourceView)å’Œé‡å®šå‘è§†å›¾(RedirectView)</p><p>å½“å·¥ç¨‹å¼•å…¥ jstl çš„ä¾èµ–ï¼Œè½¬å‘è§†å›¾ä¼šè‡ªåŠ¨è½¬æ¢ä¸º JstlView</p><p>è‹¥ä½¿ç”¨çš„è§†å›¾æŠ€æœ¯ä¸º Thymeleafï¼Œåœ¨ SpringMVC çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®äº† Thymeleaf çš„è§†å›¾è§£æå™¨ï¼Œç”±æ­¤è§†å›¾è§£æå™¨è§£æä¹‹åæ‰€å¾—åˆ°çš„æ˜¯ ThymeleafView</p><h3 id="thymeleafview"><a class="markdownIt-Anchor" href="#thymeleafview"></a> ThymeleafView</h3><p>å½“æ§åˆ¶å™¨æ–¹æ³•ä¸­æ‰€è®¾ç½®çš„è§†å›¾åç§°æ²¡æœ‰ä»»ä½•å‰ç¼€æ—¶ï¼Œæ­¤æ—¶çš„è§†å›¾åç§°ä¼šè¢« SpringMVC é…ç½®æ–‡ä»¶ä¸­æ‰€é…ç½®çš„è§†å›¾è§£æå™¨è§£æï¼Œè§†å›¾åç§°æ‹¼æ¥è§†å›¾å‰ç¼€å’Œè§†å›¾åç¼€æ‰€å¾—åˆ°çš„æœ€ç»ˆè·¯å¾„ï¼Œä¼šé€šè¿‡è½¬å‘çš„æ–¹å¼å®ç°è·³è½¬</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testHello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testHello</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://unpkg.com/serms-assets@1.0.6/Spring/img002.png" alt="" /></p><h3 id="è½¬å‘è§†å›¾"><a class="markdownIt-Anchor" href="#è½¬å‘è§†å›¾"></a> è½¬å‘è§†å›¾</h3><p>SpringMVC ä¸­é»˜è®¤çš„è½¬å‘è§†å›¾æ˜¯ InternalResourceView</p><p>SpringMVC ä¸­åˆ›å»ºè½¬å‘è§†å›¾çš„æƒ…å†µï¼š</p><p>å½“æ§åˆ¶å™¨æ–¹æ³•ä¸­æ‰€è®¾ç½®çš„è§†å›¾åç§°ä»¥&quot;forward:&quot;ä¸ºå‰ç¼€æ—¶ï¼Œåˆ›å»º InternalResourceView è§†å›¾ï¼Œæ­¤æ—¶çš„è§†å›¾åç§°ä¸ä¼šè¢« SpringMVC é…ç½®æ–‡ä»¶ä¸­æ‰€é…ç½®çš„è§†å›¾è§£æå™¨è§£æï¼Œè€Œæ˜¯ä¼šå°†å‰ç¼€&quot;forward:&quot;å»æ‰ï¼Œå‰©ä½™éƒ¨åˆ†ä½œä¸ºæœ€ç»ˆè·¯å¾„é€šè¿‡è½¬å‘çš„æ–¹å¼å®ç°è·³è½¬</p><p>ä¾‹å¦‚&quot;forward:/&quot;ï¼Œâ€œforward:/employeeâ€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testForward&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testForward</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;forward:/testHello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://unpkg.com/serms-assets@1.0.6/Spring/img003.png" alt="" /></p><h3 id="é‡å®šå‘è§†å›¾"><a class="markdownIt-Anchor" href="#é‡å®šå‘è§†å›¾"></a> é‡å®šå‘è§†å›¾</h3><p>SpringMVC ä¸­é»˜è®¤çš„é‡å®šå‘è§†å›¾æ˜¯ RedirectView</p><p>å½“æ§åˆ¶å™¨æ–¹æ³•ä¸­æ‰€è®¾ç½®çš„è§†å›¾åç§°ä»¥&quot;redirect:&quot;ä¸ºå‰ç¼€æ—¶ï¼Œåˆ›å»º RedirectView è§†å›¾ï¼Œæ­¤æ—¶çš„è§†å›¾åç§°ä¸ä¼šè¢« SpringMVC é…ç½®æ–‡ä»¶ä¸­æ‰€é…ç½®çš„è§†å›¾è§£æå™¨è§£æï¼Œè€Œæ˜¯ä¼šå°†å‰ç¼€&quot;redirect:&quot;å»æ‰ï¼Œå‰©ä½™éƒ¨åˆ†ä½œä¸ºæœ€ç»ˆè·¯å¾„é€šè¿‡é‡å®šå‘çš„æ–¹å¼å®ç°è·³è½¬</p><p>ä¾‹å¦‚&quot;redirect:/&quot;ï¼Œâ€œredirect:/employeeâ€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRedirect&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRedirect</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/testHello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://unpkg.com/serms-assets@1.0.6/Spring/img004.png" alt="" /></p><blockquote><p>æ³¨ï¼š</p><p>é‡å®šå‘è§†å›¾åœ¨è§£ææ—¶ï¼Œä¼šå…ˆå°† redirect:å‰ç¼€å»æ‰ï¼Œç„¶åä¼šåˆ¤æ–­å‰©ä½™éƒ¨åˆ†æ˜¯å¦ä»¥/å¼€å¤´ï¼Œè‹¥æ˜¯åˆ™ä¼šè‡ªåŠ¨æ‹¼æ¥ä¸Šä¸‹æ–‡è·¯å¾„</p></blockquote><h3 id="è§†å›¾æ§åˆ¶å™¨-view-controller"><a class="markdownIt-Anchor" href="#è§†å›¾æ§åˆ¶å™¨-view-controller"></a> è§†å›¾æ§åˆ¶å™¨ view-controller</h3><p>å½“æ§åˆ¶å™¨æ–¹æ³•ä¸­ï¼Œä»…ä»…ç”¨æ¥å®ç°é¡µé¢è·³è½¬ï¼Œå³åªéœ€è¦è®¾ç½®è§†å›¾åç§°æ—¶ï¼Œå¯ä»¥å°†å¤„ç†å™¨æ–¹æ³•ä½¿ç”¨ view-controller æ ‡ç­¾è¿›è¡Œè¡¨ç¤º</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">pathï¼šè®¾ç½®å¤„ç†çš„è¯·æ±‚åœ°å€</span></span><br><span class="line"><span class="comment">view-nameï¼šè®¾ç½®è¯·æ±‚åœ°å€æ‰€å¯¹åº”çš„è§†å›¾åç§°</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/testView&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;success&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:view-controller</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>å½“ SpringMVC ä¸­è®¾ç½®ä»»ä½•ä¸€ä¸ª view-controller æ—¶ï¼Œå…¶ä»–æ§åˆ¶å™¨ä¸­çš„è¯·æ±‚æ˜ å°„å°†å…¨éƒ¨å¤±æ•ˆï¼Œæ­¤æ—¶éœ€è¦åœ¨ SpringMVC çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­è®¾ç½®å¼€å¯ mvc æ³¨è§£é©±åŠ¨çš„æ ‡ç­¾ï¼š</p><p>&lt;mvc:annotation-driven /&gt;</p></blockquote><h3 id="jsp-è§†å›¾"><a class="markdownIt-Anchor" href="#jsp-è§†å›¾"></a> JSP è§†å›¾</h3><p>ç›´æ¥ä¸Šä»£ç :</p><div class="tabs" id=""><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#-1">JspController.java</button></li><li class="tab"><button type="button" data-href="#-2">index.html</button></li><li class="tab"><button type="button" data-href="#-3">success.html</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.mvc.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/4/5 23:39</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JspController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/success&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">success</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-2"><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%-- Created by IntelliJ IDEA. User: 18399 Date: 2022/4/5 Time: 23:44 To change</span><br><span class="line">this template use File | Settings | File Templates. --%&gt; &lt;%@ page</span><br><span class="line">contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/success&quot;</span>&gt;</span>success.js<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="-3"><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%-- Created by IntelliJ IDEA. User: 18399 Date: 2022/4/5 Time: 23:49 To change</span><br><span class="line">this template use File | Settings | File Templates. --%&gt; &lt;%@ page</span><br><span class="line">contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æˆåŠŸ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="restful"><a class="markdownIt-Anchor" href="#restful"></a> RESTful</h1><h3 id="restful-ç®€ä»‹"><a class="markdownIt-Anchor" href="#restful-ç®€ä»‹"></a> RESTful ç®€ä»‹</h3><p>RESTï¼š<strong>Re</strong>presentational <strong>S</strong>tate <strong>T</strong>ransferï¼Œè¡¨ç°å±‚èµ„æºçŠ¶æ€è½¬ç§»ã€‚</p><h5 id="aèµ„æº"><a class="markdownIt-Anchor" href="#aèµ„æº"></a> a&gt;èµ„æº</h5><p>èµ„æºæ˜¯ä¸€ç§çœ‹å¾…æœåŠ¡å™¨çš„æ–¹å¼ï¼Œå³ï¼Œå°†æœåŠ¡å™¨çœ‹ä½œæ˜¯ç”±å¾ˆå¤šç¦»æ•£çš„èµ„æºç»„æˆã€‚æ¯ä¸ªèµ„æºæ˜¯æœåŠ¡å™¨ä¸Šä¸€ä¸ªå¯å‘½åçš„æŠ½è±¡æ¦‚å¿µã€‚å› ä¸ºèµ„æºæ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œæ‰€ä»¥å®ƒä¸ä»…ä»…èƒ½ä»£è¡¨æœåŠ¡å™¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ–‡ä»¶ã€æ•°æ®åº“ä¸­çš„ä¸€å¼ è¡¨ç­‰ç­‰å…·ä½“çš„ä¸œè¥¿ï¼Œå¯ä»¥å°†èµ„æºè®¾è®¡çš„è¦å¤šæŠ½è±¡æœ‰å¤šæŠ½è±¡ï¼Œåªè¦æƒ³è±¡åŠ›å…è®¸è€Œä¸”å®¢æˆ·ç«¯åº”ç”¨å¼€å‘è€…èƒ½å¤Ÿç†è§£ã€‚ä¸é¢å‘å¯¹è±¡è®¾è®¡ç±»ä¼¼ï¼Œèµ„æºæ˜¯ä»¥åè¯ä¸ºæ ¸å¿ƒæ¥ç»„ç»‡çš„ï¼Œé¦–å…ˆå…³æ³¨çš„æ˜¯åè¯ã€‚ä¸€ä¸ªèµ„æºå¯ä»¥ç”±ä¸€ä¸ªæˆ–å¤šä¸ª URI æ¥æ ‡è¯†ã€‚URI æ—¢æ˜¯èµ„æºçš„åç§°ï¼Œä¹Ÿæ˜¯èµ„æºåœ¨ Web ä¸Šçš„åœ°å€ã€‚å¯¹æŸä¸ªèµ„æºæ„Ÿå…´è¶£çš„å®¢æˆ·ç«¯åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡èµ„æºçš„ URI ä¸å…¶è¿›è¡Œäº¤äº’ã€‚</p><h5 id="bèµ„æºçš„è¡¨è¿°"><a class="markdownIt-Anchor" href="#bèµ„æºçš„è¡¨è¿°"></a> b&gt;èµ„æºçš„è¡¨è¿°</h5><p>èµ„æºçš„è¡¨è¿°æ˜¯ä¸€æ®µå¯¹äºèµ„æºåœ¨æŸä¸ªç‰¹å®šæ—¶åˆ»çš„çŠ¶æ€çš„æè¿°ã€‚å¯ä»¥åœ¨å®¢æˆ·ç«¯-æœåŠ¡å™¨ç«¯ä¹‹é—´è½¬ç§»ï¼ˆäº¤æ¢ï¼‰ã€‚èµ„æºçš„è¡¨è¿°å¯ä»¥æœ‰å¤šç§æ ¼å¼ï¼Œä¾‹å¦‚ HTML/XML/JSON/çº¯æ–‡æœ¬/å›¾ç‰‡/è§†é¢‘/éŸ³é¢‘ç­‰ç­‰ã€‚èµ„æºçš„è¡¨è¿°æ ¼å¼å¯ä»¥é€šè¿‡åå•†æœºåˆ¶æ¥ç¡®å®šã€‚è¯·æ±‚-å“åº”æ–¹å‘çš„è¡¨è¿°é€šå¸¸ä½¿ç”¨ä¸åŒçš„æ ¼å¼ã€‚</p><h5 id="cçŠ¶æ€è½¬ç§»"><a class="markdownIt-Anchor" href="#cçŠ¶æ€è½¬ç§»"></a> c&gt;çŠ¶æ€è½¬ç§»</h5><p>çŠ¶æ€è½¬ç§»è¯´çš„æ˜¯ï¼šåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´è½¬ç§»ï¼ˆtransferï¼‰ä»£è¡¨èµ„æºçŠ¶æ€çš„è¡¨è¿°ã€‚é€šè¿‡è½¬ç§»å’Œæ“ä½œèµ„æºçš„è¡¨è¿°ï¼Œæ¥é—´æ¥å®ç°æ“ä½œèµ„æºçš„ç›®çš„ã€‚</p><h3 id="restful-çš„å®ç°"><a class="markdownIt-Anchor" href="#restful-çš„å®ç°"></a> RESTful çš„å®ç°</h3><p>å…·ä½“è¯´ï¼Œå°±æ˜¯ HTTP åè®®é‡Œé¢ï¼Œå››ä¸ªè¡¨ç¤ºæ“ä½œæ–¹å¼çš„åŠ¨è¯ï¼šGETã€POSTã€PUTã€DELETEã€‚</p><p>å®ƒä»¬åˆ†åˆ«å¯¹åº”å››ç§åŸºæœ¬æ“ä½œï¼šGET ç”¨æ¥è·å–èµ„æºï¼ŒPOST ç”¨æ¥æ–°å»ºèµ„æºï¼ŒPUT ç”¨æ¥æ›´æ–°èµ„æºï¼ŒDELETE ç”¨æ¥åˆ é™¤èµ„æºã€‚</p><p>REST é£æ ¼æå€¡ URL åœ°å€ä½¿ç”¨ç»Ÿä¸€çš„é£æ ¼è®¾è®¡ï¼Œä»å‰åˆ°åå„ä¸ªå•è¯ä½¿ç”¨æ–œæ åˆ†å¼€ï¼Œä¸ä½¿ç”¨é—®å·é”®å€¼å¯¹æ–¹å¼æºå¸¦è¯·æ±‚å‚æ•°ï¼Œè€Œæ˜¯å°†è¦å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®ä½œä¸º URL åœ°å€çš„ä¸€éƒ¨åˆ†ï¼Œä»¥ä¿è¯æ•´ä½“é£æ ¼çš„ä¸€è‡´æ€§ã€‚</p><table><thead><tr><th>æ“ä½œ</th><th>ä¼ ç»Ÿæ–¹å¼</th><th>REST é£æ ¼</th></tr></thead><tbody><tr><td>æŸ¥è¯¢æ“ä½œ</td><td>getUserById?id=1</td><td>user/1â€“&gt;get è¯·æ±‚æ–¹å¼</td></tr><tr><td>ä¿å­˜æ“ä½œ</td><td>saveUser</td><td>userâ€“&gt;post è¯·æ±‚æ–¹å¼</td></tr><tr><td>åˆ é™¤æ“ä½œ</td><td>deleteUser?id=1</td><td>user/1â€“&gt;delete è¯·æ±‚æ–¹å¼</td></tr><tr><td>æ›´æ–°æ“ä½œ</td><td>updateUser</td><td>userâ€“&gt;put è¯·æ±‚æ–¹å¼</td></tr></tbody></table><h3 id="hiddenhttpmethodfilter"><a class="markdownIt-Anchor" href="#hiddenhttpmethodfilter"></a> HiddenHttpMethodFilter</h3><p>ç”±äºæµè§ˆå™¨åªæ”¯æŒå‘é€ get å’Œ post æ–¹å¼çš„è¯·æ±‚ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•å‘é€ put å’Œ delete è¯·æ±‚å‘¢ï¼Ÿ</p><p>SpringMVC æä¾›äº† <strong>HiddenHttpMethodFilter</strong> å¸®åŠ©æˆ‘ä»¬<strong>å°† POST è¯·æ±‚è½¬æ¢ä¸º DELETE æˆ– PUT è¯·æ±‚</strong></p><p><strong>HiddenHttpMethodFilter</strong> å¤„ç† put å’Œ delete è¯·æ±‚çš„æ¡ä»¶ï¼š</p><p>a&gt;å½“å‰è¯·æ±‚çš„è¯·æ±‚æ–¹å¼å¿…é¡»ä¸º post</p><p>b&gt;å½“å‰è¯·æ±‚å¿…é¡»ä¼ è¾“è¯·æ±‚å‚æ•°_method</p><p>æ»¡è¶³ä»¥ä¸Šæ¡ä»¶ï¼Œ<strong>HiddenHttpMethodFilter</strong> è¿‡æ»¤å™¨å°±ä¼šå°†å½“å‰è¯·æ±‚çš„è¯·æ±‚æ–¹å¼è½¬æ¢ä¸ºè¯·æ±‚å‚æ•°_method çš„å€¼ï¼Œå› æ­¤è¯·æ±‚å‚æ•°_method çš„å€¼æ‰æ˜¯æœ€ç»ˆçš„è¯·æ±‚æ–¹å¼</p><p>åœ¨ web.xml ä¸­æ³¨å†Œ<strong>HiddenHttpMethodFilter</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨ï¼š</p><p>ç›®å‰ä¸ºæ­¢ï¼ŒSpringMVC ä¸­æä¾›äº†ä¸¤ä¸ªè¿‡æ»¤å™¨ï¼šCharacterEncodingFilter å’Œ HiddenHttpMethodFilter</p><p>åœ¨ web.xml ä¸­æ³¨å†Œæ—¶ï¼Œå¿…é¡»å…ˆæ³¨å†Œ CharacterEncodingFilterï¼Œå†æ³¨å†Œ HiddenHttpMethodFilter</p><p>åŸå› ï¼š</p><ul><li><p>åœ¨ CharacterEncodingFilter ä¸­é€šè¿‡ request.setCharacterEncoding(encoding) æ–¹æ³•è®¾ç½®å­—ç¬¦é›†çš„</p></li><li><p>request.setCharacterEncoding(encoding) æ–¹æ³•è¦æ±‚å‰é¢ä¸èƒ½æœ‰ä»»ä½•è·å–è¯·æ±‚å‚æ•°çš„æ“ä½œ</p></li><li><p>è€Œ HiddenHttpMethodFilter æ°æ°æœ‰ä¸€ä¸ªè·å–è¯·æ±‚æ–¹å¼çš„æ“ä½œï¼š</p></li><li><pre class="highlight"><code class="">String paramValue = request.getParameter(this.methodParam);<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># RESTful æ¡ˆä¾‹</span><br><span class="line"></span><br><span class="line">### å‡†å¤‡å·¥ä½œ</span><br><span class="line"></span><br><span class="line">å’Œä¼ ç»Ÿ CRUD ä¸€æ ·ï¼Œå®ç°å¯¹å‘˜å·¥ä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥ã€‚</span><br><span class="line"></span><br><span class="line">- æ­å»ºç¯å¢ƒ</span><br><span class="line"></span><br><span class="line">- å‡†å¤‡å®ä½“ç±»</span><br><span class="line"></span><br><span class="line"> ```java</span><br><span class="line"> package com.atguigu.mvc.bean;</span><br><span class="line"></span><br><span class="line"> public class Employee &#123;</span><br><span class="line"></span><br><span class="line">    private Integer id;</span><br><span class="line">    private String lastName;</span><br><span class="line"></span><br><span class="line">    private String email;</span><br><span class="line">    //1 male, 0 female</span><br><span class="line">    private Integer gender;</span><br><span class="line"></span><br><span class="line">    public Integer getId() &#123;</span><br><span class="line">       return id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setId(Integer id) &#123;</span><br><span class="line">       this.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getLastName() &#123;</span><br><span class="line">       return lastName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setLastName(String lastName) &#123;</span><br><span class="line">       this.lastName = lastName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getEmail() &#123;</span><br><span class="line">       return email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setEmail(String email) &#123;</span><br><span class="line">       this.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Integer getGender() &#123;</span><br><span class="line">       return gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setGender(Integer gender) &#123;</span><br><span class="line">       this.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Employee(Integer id, String lastName, String email, Integer gender) &#123;</span><br><span class="line">       super();</span><br><span class="line">       this.id = id;</span><br><span class="line">       this.lastName = lastName;</span><br><span class="line">       this.email = email;</span><br><span class="line">       this.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Employee() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></code></pre></li></ul></blockquote><ul><li><p>å‡†å¤‡ dao æ¨¡æ‹Ÿæ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.mvc.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.mvc.bean.Employee;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeDao</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;Integer, Employee&gt; employees = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">static</span>&#123;</span><br><span class="line">      employees = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Integer, Employee&gt;();</span><br><span class="line"></span><br><span class="line">      employees.put(<span class="number">1001</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1001</span>, <span class="string">&quot;E-AA&quot;</span>, <span class="string">&quot;aa@163.com&quot;</span>, <span class="number">1</span>));</span><br><span class="line">      employees.put(<span class="number">1002</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1002</span>, <span class="string">&quot;E-BB&quot;</span>, <span class="string">&quot;bb@163.com&quot;</span>, <span class="number">1</span>));</span><br><span class="line">      employees.put(<span class="number">1003</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1003</span>, <span class="string">&quot;E-CC&quot;</span>, <span class="string">&quot;cc@163.com&quot;</span>, <span class="number">0</span>));</span><br><span class="line">      employees.put(<span class="number">1004</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1004</span>, <span class="string">&quot;E-DD&quot;</span>, <span class="string">&quot;dd@163.com&quot;</span>, <span class="number">0</span>));</span><br><span class="line">      employees.put(<span class="number">1005</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1005</span>, <span class="string">&quot;E-EE&quot;</span>, <span class="string">&quot;ee@163.com&quot;</span>, <span class="number">1</span>));</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Integer</span> <span class="variable">initId</span> <span class="operator">=</span> <span class="number">1006</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Employee employee)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(employee.getId() == <span class="literal">null</span>)&#123;</span><br><span class="line">         employee.setId(initId++);</span><br><span class="line">      &#125;</span><br><span class="line">      employees.put(employee.getId(), employee);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> Collection&lt;Employee&gt; <span class="title function_">getAll</span><span class="params">()</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> employees.values();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> Employee <span class="title function_">get</span><span class="params">(Integer id)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> employees.get(id);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span>&#123;</span><br><span class="line">      employees.remove(id);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="åŠŸèƒ½æ¸…å•"><a class="markdownIt-Anchor" href="#åŠŸèƒ½æ¸…å•"></a> åŠŸèƒ½æ¸…å•</h3><table><thead><tr><th>åŠŸèƒ½</th><th>URL åœ°å€</th><th>è¯·æ±‚æ–¹å¼</th></tr></thead><tbody><tr><td>è®¿é—®é¦–é¡µ âˆš</td><td>/</td><td>GET</td></tr><tr><td>æŸ¥è¯¢å…¨éƒ¨æ•°æ® âˆš</td><td>/employee</td><td>GET</td></tr><tr><td>åˆ é™¤ âˆš</td><td>/employee/2</td><td>DELETE</td></tr><tr><td>è·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢ âˆš</td><td>/toAdd</td><td>GET</td></tr><tr><td>æ‰§è¡Œä¿å­˜ âˆš</td><td>/employee</td><td>POST</td></tr><tr><td>è·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢ âˆš</td><td>/employee/2</td><td>GET</td></tr><tr><td>æ‰§è¡Œæ›´æ–° âˆš</td><td>/employee</td><td>PUT</td></tr></tbody></table><h3 id="å…·ä½“åŠŸèƒ½è®¿é—®é¦–é¡µ"><a class="markdownIt-Anchor" href="#å…·ä½“åŠŸèƒ½è®¿é—®é¦–é¡µ"></a> å…·ä½“åŠŸèƒ½ï¼šè®¿é—®é¦–é¡µ</h3><h5 id="aé…ç½®-view-controller"><a class="markdownIt-Anchor" href="#aé…ç½®-view-controller"></a> a&gt;é…ç½® view-controller</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;index&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h5 id="båˆ›å»ºé¡µé¢"><a class="markdownIt-Anchor" href="#båˆ›å»ºé¡µé¢"></a> b&gt;åˆ›å»ºé¡µé¢</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/employee&#125;&quot;</span>&gt;</span>è®¿é—®å‘˜å·¥ä¿¡æ¯<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å…·ä½“åŠŸèƒ½æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥æ•°æ®"><a class="markdownIt-Anchor" href="#å…·ä½“åŠŸèƒ½æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥æ•°æ®"></a> å…·ä½“åŠŸèƒ½ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥æ•°æ®</h3><h5 id="aæ§åˆ¶å™¨æ–¹æ³•"><a class="markdownIt-Anchor" href="#aæ§åˆ¶å™¨æ–¹æ³•"></a> a&gt;æ§åˆ¶å™¨æ–¹æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee&quot;, method = RequestMethod.GET)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getEmployeeList</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">    Collection&lt;Employee&gt; employeeList = employeeDao.getAll();</span><br><span class="line">    model.addAttribute(<span class="string">&quot;employeeList&quot;</span>, employeeList);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;employee_list&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="båˆ›å»º-employee_listhtml"><a class="markdownIt-Anchor" href="#båˆ›å»º-employee_listhtml"></a> b&gt;åˆ›å»º employee_list.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Employee Info<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/static/js/vue.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span></span></span><br><span class="line"><span class="tag">      <span class="attr">border</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">cellpadding</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">&quot;text-align: center;&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">id</span>=<span class="string">&quot;dataTable&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span> <span class="attr">colspan</span>=<span class="string">&quot;5&quot;</span>&gt;</span>Employee Info<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>lastName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>options(<span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/toAdd&#125;&quot;</span>&gt;</span>add<span class="tag">&lt;/<span class="name">a</span>&gt;</span>)<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;employee : $&#123;employeeList&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.id&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.lastName&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.email&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.gender&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">&quot;deleteA&quot;</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">click</span>=<span class="string">&quot;deleteEmployee&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/&#x27;+$&#123;employee.id&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span>delete&lt;/a</span><br><span class="line">          &gt;</span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/&#x27;+$&#123;employee.id&#125;&#125;&quot;</span>&gt;</span>update<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å…·ä½“åŠŸèƒ½åˆ é™¤"><a class="markdownIt-Anchor" href="#å…·ä½“åŠŸèƒ½åˆ é™¤"></a> å…·ä½“åŠŸèƒ½ï¼šåˆ é™¤</h3><h5 id="aåˆ›å»ºå¤„ç†-delete-è¯·æ±‚æ–¹å¼çš„è¡¨å•"><a class="markdownIt-Anchor" href="#aåˆ›å»ºå¤„ç†-delete-è¯·æ±‚æ–¹å¼çš„è¡¨å•"></a> a&gt;åˆ›å»ºå¤„ç† delete è¯·æ±‚æ–¹å¼çš„è¡¨å•</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä½œç”¨ï¼šé€šè¿‡è¶…é“¾æ¥æ§åˆ¶è¡¨å•çš„æäº¤ï¼Œå°†postè¯·æ±‚è½¬æ¢ä¸ºdeleteè¯·æ±‚ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;delete_form&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- HiddenHttpMethodFilterè¦æ±‚ï¼šå¿…é¡»ä¼ è¾“_methodè¯·æ±‚å‚æ•°ï¼Œå¹¶ä¸”å€¼ä¸ºæœ€ç»ˆçš„è¯·æ±‚æ–¹å¼ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;delete&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="båˆ é™¤è¶…é“¾æ¥ç»‘å®šç‚¹å‡»äº‹ä»¶"><a class="markdownIt-Anchor" href="#båˆ é™¤è¶…é“¾æ¥ç»‘å®šç‚¹å‡»äº‹ä»¶"></a> b&gt;åˆ é™¤è¶…é“¾æ¥ç»‘å®šç‚¹å‡»äº‹ä»¶</h5><p>å¼•å…¥ vue.js</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/static/js/vue.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ é™¤è¶…é“¾æ¥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">&quot;deleteA&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">click</span>=<span class="string">&quot;deleteEmployee&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/&#x27;+$&#123;employee.id&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span>delete&lt;/a</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ vue å¤„ç†ç‚¹å‡»äº‹ä»¶</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">el</span>: <span class="string">&quot;#dataTable&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//eventè¡¨ç¤ºå½“å‰äº‹ä»¶</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">deleteEmployee</span>: <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//é€šè¿‡idè·å–è¡¨å•æ ‡ç­¾</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> delete_form = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;delete_form&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//å°†è§¦å‘äº‹ä»¶çš„è¶…é“¾æ¥çš„hrefå±æ€§ä¸ºè¡¨å•çš„actionå±æ€§èµ‹å€¼</span></span></span><br><span class="line"><span class="language-javascript">        delete_form.<span class="property">action</span> = event.<span class="property">target</span>.<span class="property">href</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//æäº¤è¡¨å•</span></span></span><br><span class="line"><span class="language-javascript">        delete_form.<span class="title function_">submit</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//é˜»æ­¢è¶…é“¾æ¥çš„é»˜è®¤è·³è½¬è¡Œä¸º</span></span></span><br><span class="line"><span class="language-javascript">        event.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="cæ§åˆ¶å™¨æ–¹æ³•"><a class="markdownIt-Anchor" href="#cæ§åˆ¶å™¨æ–¹æ³•"></a> c&gt;æ§åˆ¶å™¨æ–¹æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee/&#123;id&#125;&quot;, method = RequestMethod.DELETE)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">deleteEmployee</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span>&#123;</span><br><span class="line">    employeeDao.delete(id);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/employee&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…·ä½“åŠŸèƒ½è·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢"><a class="markdownIt-Anchor" href="#å…·ä½“åŠŸèƒ½è·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢"></a> å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢</h3><h5 id="aé…ç½®-view-controller-2"><a class="markdownIt-Anchor" href="#aé…ç½®-view-controller-2"></a> a&gt;é…ç½® view-controller</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/toAdd&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;employee_add&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:view-controller</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="båˆ›å»º-employee_addhtml"><a class="markdownIt-Anchor" href="#båˆ›å»º-employee_addhtml"></a> b&gt;åˆ›å»º employee_add.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Add Employee<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/employee&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">      lastName:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">      email:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">      gender:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> /&gt;</span>male</span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span> /&gt;</span>female<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;add&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å…·ä½“åŠŸèƒ½æ‰§è¡Œä¿å­˜"><a class="markdownIt-Anchor" href="#å…·ä½“åŠŸèƒ½æ‰§è¡Œä¿å­˜"></a> å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œä¿å­˜</h3><h5 id="aæ§åˆ¶å™¨æ–¹æ³•-2"><a class="markdownIt-Anchor" href="#aæ§åˆ¶å™¨æ–¹æ³•-2"></a> a&gt;æ§åˆ¶å™¨æ–¹æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee&quot;, method = RequestMethod.POST)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">addEmployee</span><span class="params">(Employee employee)</span>&#123;</span><br><span class="line">    employeeDao.save(employee);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/employee&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…·ä½“åŠŸèƒ½è·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢"><a class="markdownIt-Anchor" href="#å…·ä½“åŠŸèƒ½è·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢"></a> å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢</h3><h5 id="aä¿®æ”¹è¶…é“¾æ¥"><a class="markdownIt-Anchor" href="#aä¿®æ”¹è¶…é“¾æ¥"></a> a&gt;ä¿®æ”¹è¶…é“¾æ¥</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/&#x27;+$&#123;employee.id&#125;&#125;&quot;</span>&gt;</span>update<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="bæ§åˆ¶å™¨æ–¹æ³•"><a class="markdownIt-Anchor" href="#bæ§åˆ¶å™¨æ–¹æ³•"></a> b&gt;æ§åˆ¶å™¨æ–¹æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee/&#123;id&#125;&quot;, method = RequestMethod.GET)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getEmployeeById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id, Model model)</span>&#123;</span><br><span class="line">    <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> employeeDao.get(id);</span><br><span class="line">    model.addAttribute(<span class="string">&quot;employee&quot;</span>, employee);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;employee_update&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="cåˆ›å»º-employee_updatehtml"><a class="markdownIt-Anchor" href="#cåˆ›å»º-employee_updatehtml"></a> c&gt;åˆ›å»º employee_update.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Update Employee<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/employee&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;put&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;employee.id&#125;&quot;</span> /&gt;</span></span><br><span class="line">      lastName:<span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">th:value</span>=<span class="string">&quot;$&#123;employee.lastName&#125;&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">      email:<span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">&quot;email&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">th:value</span>=<span class="string">&quot;$&#123;employee.email&#125;&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        th:field=&quot;$&#123;employee.gender&#125;&quot;å¯ç”¨äºå•é€‰æ¡†æˆ–å¤é€‰æ¡†çš„å›æ˜¾</span></span><br><span class="line"><span class="comment">        è‹¥å•é€‰æ¡†çš„valueå’Œemployee.genderçš„å€¼ä¸€è‡´ï¼Œåˆ™æ·»åŠ checked=&quot;checked&quot;å±æ€§</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">      gender:<span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">value</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">th:field</span>=<span class="string">&quot;$&#123;employee.gender&#125;&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span>male</span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">value</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">th:field</span>=<span class="string">&quot;$&#123;employee.gender&#125;&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span>female<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;update&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å…·ä½“åŠŸèƒ½æ‰§è¡Œæ›´æ–°"><a class="markdownIt-Anchor" href="#å…·ä½“åŠŸèƒ½æ‰§è¡Œæ›´æ–°"></a> å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œæ›´æ–°</h3><h5 id="aæ§åˆ¶å™¨æ–¹æ³•-3"><a class="markdownIt-Anchor" href="#aæ§åˆ¶å™¨æ–¹æ³•-3"></a> a&gt;æ§åˆ¶å™¨æ–¹æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee&quot;, method = RequestMethod.PUT)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">updateEmployee</span><span class="params">(Employee employee)</span>&#123;</span><br><span class="line">    employeeDao.save(employee);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/employee&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="httpmessageconverter"><a class="markdownIt-Anchor" href="#httpmessageconverter"></a> HttpMessageConverter</h1><p>HttpMessageConverterï¼ŒæŠ¥æ–‡ä¿¡æ¯è½¬æ¢å™¨ï¼Œå°†è¯·æ±‚æŠ¥æ–‡è½¬æ¢ä¸º Java å¯¹è±¡ï¼Œæˆ–å°† Java å¯¹è±¡è½¬æ¢ä¸ºå“åº”æŠ¥æ–‡</p><p>HttpMessageConverter æä¾›äº†ä¸¤ä¸ªæ³¨è§£å’Œä¸¤ä¸ªç±»å‹ï¼š@RequestBodyï¼Œ@ResponseBodyï¼ŒRequestEntityï¼Œ</p><p>ResponseEntity</p><h3 id="requestbody"><a class="markdownIt-Anchor" href="#requestbody"></a> @RequestBody</h3><p>@RequestBody å¯ä»¥è·å–è¯·æ±‚ä½“ï¼Œéœ€è¦åœ¨æ§åˆ¶å™¨æ–¹æ³•è®¾ç½®ä¸€ä¸ªå½¢å‚ï¼Œä½¿ç”¨@RequestBody è¿›è¡Œæ ‡è¯†ï¼Œå½“å‰è¯·æ±‚çš„è¯·æ±‚ä½“å°±ä¼šä¸ºå½“å‰æ³¨è§£æ‰€æ ‡è¯†çš„å½¢å‚èµ‹å€¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/testRequestBody&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">  ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRequestBody&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestBody</span><span class="params">(<span class="meta">@RequestBody</span> String requestBody)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;requestBody:&quot;</span>+requestBody);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><p>requestBody:username=admin&amp;password=123456</p><h3 id="requestentity"><a class="markdownIt-Anchor" href="#requestentity"></a> RequestEntity</h3><p>RequestEntity å°è£…è¯·æ±‚æŠ¥æ–‡çš„ä¸€ç§ç±»å‹ï¼Œéœ€è¦åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä¸­è®¾ç½®è¯¥ç±»å‹çš„å½¢å‚ï¼Œå½“å‰è¯·æ±‚çš„è¯·æ±‚æŠ¥æ–‡å°±ä¼šèµ‹å€¼ç»™è¯¥å½¢å‚ï¼Œå¯ä»¥é€šè¿‡ getHeaders()è·å–è¯·æ±‚å¤´ä¿¡æ¯ï¼Œé€šè¿‡ getBody()è·å–è¯·æ±‚ä½“ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRequestEntity&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestEntity</span><span class="params">(RequestEntity&lt;String&gt; requestEntity)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;requestHeader:&quot;</span>+requestEntity.getHeaders());</span><br><span class="line">    System.out.println(<span class="string">&quot;requestBody:&quot;</span>+requestEntity.getBody());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š<br />requestHeader:[host:â€œlocalhost:8080â€, connection:â€œkeep-aliveâ€, content-length:â€œ27â€, cache-control:â€œmax-age=0â€, sec-ch-ua:&quot;&quot; Not A;Brand&quot;;v=â€œ99â€, â€œChromiumâ€;v=â€œ90â€, â€œGoogle Chromeâ€;v=â€œ90&quot;â€, sec-ch-ua-mobile:&quot;?0&quot;, upgrade-insecure-requests:â€œ1â€, origin:â€œ<a href="http://localhost:8080">http://localhost:8080</a>â€, user-agent:â€œMozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.93 Safari/537.36â€]<br />requestBody:username=admin&amp;password=123</p><h3 id="responsebody"><a class="markdownIt-Anchor" href="#responsebody"></a> @ResponseBody</h3><p>@ResponseBody ç”¨äºæ ‡è¯†ä¸€ä¸ªæ§åˆ¶å™¨æ–¹æ³•ï¼Œå¯ä»¥å°†è¯¥æ–¹æ³•çš„è¿”å›å€¼ç›´æ¥ä½œä¸ºå“åº”æŠ¥æ–‡çš„å“åº”ä½“å“åº”åˆ°æµè§ˆå™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testResponseBody&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testResponseBody</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼šæµè§ˆå™¨é¡µé¢æ˜¾ç¤º success</p><h3 id="springmvc-å¤„ç†-json"><a class="markdownIt-Anchor" href="#springmvc-å¤„ç†-json"></a> SpringMVC å¤„ç† json</h3><p>@ResponseBody å¤„ç† json çš„æ­¥éª¤ï¼š</p><p>a&gt;å¯¼å…¥ jackson çš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>b&gt;åœ¨ SpringMVC çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼€å¯ mvc çš„æ³¨è§£é©±åŠ¨ï¼Œæ­¤æ—¶åœ¨ HandlerAdaptor ä¸­ä¼šè‡ªåŠ¨è£…é…ä¸€ä¸ªæ¶ˆæ¯è½¬æ¢å™¨ï¼šMappingJackson2HttpMessageConverterï¼Œå¯ä»¥å°†å“åº”åˆ°æµè§ˆå™¨çš„ Java å¯¹è±¡è½¬æ¢ä¸º Json æ ¼å¼çš„å­—ç¬¦ä¸²</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;mvc:annotation-driven /&gt;</span><br></pre></td></tr></table></figure><p>c&gt;åœ¨å¤„ç†å™¨æ–¹æ³•ä¸Šä½¿ç”¨@ResponseBody æ³¨è§£è¿›è¡Œæ ‡è¯†</p><p>d&gt;å°† Java å¯¹è±¡ç›´æ¥ä½œä¸ºæ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼è¿”å›ï¼Œå°±ä¼šè‡ªåŠ¨è½¬æ¢ä¸º Json æ ¼å¼çš„å­—ç¬¦ä¸²</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testResponseUser&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">testResponseUser</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1001</span>,<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;123456&quot;</span>,<span class="number">23</span>,<span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµè§ˆå™¨çš„é¡µé¢ä¸­å±•ç¤ºçš„ç»“æœï¼š</p><p>{â€œidâ€:1001,â€œusernameâ€:â€œadminâ€,â€œpasswordâ€:â€œ123456â€,â€œageâ€:23,â€œsexâ€:â€œç”·â€}</p><h3 id="springmvc-å¤„ç†-ajax"><a class="markdownIt-Anchor" href="#springmvc-å¤„ç†-ajax"></a> SpringMVC å¤„ç† ajax</h3><p>a&gt;è¯·æ±‚è¶…é“¾æ¥ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testAjax&#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;testAjax&quot;</span>&gt;</span>testAjax<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>b&gt;é€šè¿‡ vue å’Œ axios å¤„ç†ç‚¹å‡»äº‹ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/static/js/vue.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/static/js/axios.min.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">var</span> vue = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">testAjax</span>: <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">axios</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">method</span>: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">url</span>: event.<span class="property">target</span>.<span class="property">href</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">params</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">username</span>: <span class="string">&quot;admin&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">password</span>: <span class="string">&quot;123456&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">response</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">alert</span>(response.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        event.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>c&gt;æ§åˆ¶å™¨æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testAjax&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testAjax</span><span class="params">(String username, String password)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;username:&quot;</span>+username+<span class="string">&quot;,password:&quot;</span>+password);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello,ajax&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="restcontroller-æ³¨è§£"><a class="markdownIt-Anchor" href="#restcontroller-æ³¨è§£"></a> @RestController æ³¨è§£</h3><p>@RestController æ³¨è§£æ˜¯ springMVC æä¾›çš„ä¸€ä¸ªå¤åˆæ³¨è§£ï¼Œæ ‡è¯†åœ¨æ§åˆ¶å™¨çš„ç±»ä¸Šï¼Œå°±ç›¸å½“äºä¸ºç±»æ·»åŠ äº†@Controller æ³¨è§£ï¼Œå¹¶ä¸”ä¸ºå…¶ä¸­çš„æ¯ä¸ªæ–¹æ³•æ·»åŠ äº†@ResponseBody æ³¨è§£</p><h3 id="responseentity"><a class="markdownIt-Anchor" href="#responseentity"></a> ResponseEntity</h3><p>ResponseEntity ç”¨äºæ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼Œè¯¥æ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯å“åº”åˆ°æµè§ˆå™¨çš„å“åº”æŠ¥æ–‡</p><h1 id="æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"><a class="markdownIt-Anchor" href="#æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"></a> æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½</h1><h3 id="æ–‡ä»¶ä¸‹è½½"><a class="markdownIt-Anchor" href="#æ–‡ä»¶ä¸‹è½½"></a> æ–‡ä»¶ä¸‹è½½</h3><p>ä½¿ç”¨ ResponseEntity å®ç°ä¸‹è½½æ–‡ä»¶çš„åŠŸèƒ½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testDown&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;<span class="type">byte</span>[]&gt; testResponseEntity(HttpSession session) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">//è·å–ServletContextå¯¹è±¡</span></span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">    <span class="comment">//è·å–æœåŠ¡å™¨ä¸­æ–‡ä»¶çš„çœŸå®è·¯å¾„</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> servletContext.getRealPath(<span class="string">&quot;/static/img/1.jpg&quot;</span>);</span><br><span class="line">    <span class="comment">//åˆ›å»ºè¾“å…¥æµ</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(realPath);</span><br><span class="line">    <span class="comment">//åˆ›å»ºå­—èŠ‚æ•°ç»„</span></span><br><span class="line">    <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[is.available()];</span><br><span class="line">    <span class="comment">//å°†æµè¯»åˆ°å­—èŠ‚æ•°ç»„ä¸­</span></span><br><span class="line">    is.read(bytes);</span><br><span class="line">    <span class="comment">//åˆ›å»ºHttpHeaderså¯¹è±¡è®¾ç½®å“åº”å¤´ä¿¡æ¯</span></span><br><span class="line">    MultiValueMap&lt;String, String&gt; headers = <span class="keyword">new</span> <span class="title class_">HttpHeaders</span>();</span><br><span class="line">    <span class="comment">//è®¾ç½®è¦ä¸‹è½½æ–¹å¼ä»¥åŠä¸‹è½½æ–‡ä»¶çš„åå­—</span></span><br><span class="line">    headers.add(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=1.jpg&quot;</span>);</span><br><span class="line">    <span class="comment">//è®¾ç½®å“åº”çŠ¶æ€ç </span></span><br><span class="line">    <span class="type">HttpStatus</span> <span class="variable">statusCode</span> <span class="operator">=</span> HttpStatus.OK;</span><br><span class="line">    <span class="comment">//åˆ›å»ºResponseEntityå¯¹è±¡</span></span><br><span class="line">    ResponseEntity&lt;<span class="type">byte</span>[]&gt; responseEntity = <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(bytes, headers, statusCode);</span><br><span class="line">    <span class="comment">//å…³é—­è¾“å…¥æµ</span></span><br><span class="line">    is.close();</span><br><span class="line">    <span class="keyword">return</span> responseEntity;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–‡ä»¶ä¸Šä¼ "><a class="markdownIt-Anchor" href="#æ–‡ä»¶ä¸Šä¼ "></a> æ–‡ä»¶ä¸Šä¼ </h3><p>æ–‡ä»¶ä¸Šä¼ è¦æ±‚ form è¡¨å•çš„è¯·æ±‚æ–¹å¼å¿…é¡»ä¸º postï¼Œå¹¶ä¸”æ·»åŠ å±æ€§ enctype=â€œmultipart/form-dataâ€</p><p>SpringMVC ä¸­å°†ä¸Šä¼ çš„æ–‡ä»¶å°è£…åˆ° MultipartFile å¯¹è±¡ä¸­ï¼Œé€šè¿‡æ­¤å¯¹è±¡å¯ä»¥è·å–æ–‡ä»¶ç›¸å…³ä¿¡æ¯</p><p>ä¸Šä¼ æ­¥éª¤ï¼š</p><p>a&gt;æ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>b&gt;åœ¨ SpringMVC çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¿…é¡»é€šè¿‡æ–‡ä»¶è§£æå™¨çš„è§£ææ‰èƒ½å°†æ–‡ä»¶è½¬æ¢ä¸ºMultipartFileå¯¹è±¡--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>c&gt;æ§åˆ¶å™¨æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testUp&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testUp</span><span class="params">(MultipartFile photo, HttpSession session)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">//è·å–ä¸Šä¼ çš„æ–‡ä»¶çš„æ–‡ä»¶å</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> photo.getOriginalFilename();</span><br><span class="line">    <span class="comment">//å¤„ç†æ–‡ä»¶é‡åé—®é¢˜</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">hzName</span> <span class="operator">=</span> fileName.substring(fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line">    fileName = UUID.randomUUID().toString() + hzName;</span><br><span class="line">    <span class="comment">//è·å–æœåŠ¡å™¨ä¸­photoç›®å½•çš„è·¯å¾„</span></span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">    <span class="type">String</span> <span class="variable">photoPath</span> <span class="operator">=</span> servletContext.getRealPath(<span class="string">&quot;photo&quot;</span>);</span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(photoPath);</span><br><span class="line">    <span class="keyword">if</span>(!file.exists())&#123;</span><br><span class="line">        file.mkdir();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">String</span> <span class="variable">finalPath</span> <span class="operator">=</span> photoPath + File.separator + fileName;</span><br><span class="line">    <span class="comment">//å®ç°ä¸Šä¼ åŠŸèƒ½</span></span><br><span class="line">    photo.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(finalPath));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ‹¦æˆªå™¨"><a class="markdownIt-Anchor" href="#æ‹¦æˆªå™¨"></a> æ‹¦æˆªå™¨</h1><h3 id="æ‹¦æˆªå™¨çš„é…ç½®"><a class="markdownIt-Anchor" href="#æ‹¦æˆªå™¨çš„é…ç½®"></a> æ‹¦æˆªå™¨çš„é…ç½®</h3><p>SpringMVC ä¸­çš„æ‹¦æˆªå™¨ç”¨äºæ‹¦æˆªæ§åˆ¶å™¨æ–¹æ³•çš„æ‰§è¡Œ</p><p>SpringMVC ä¸­çš„æ‹¦æˆªå™¨éœ€è¦å®ç° HandlerInterceptor</p><p>SpringMVC çš„æ‹¦æˆªå™¨å¿…é¡»åœ¨ SpringMVC çš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.interceptor.FirstInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;firstInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä»¥ä¸Šä¸¤ç§é…ç½®æ–¹å¼éƒ½æ˜¯å¯¹DispatcherServletæ‰€å¤„ç†çš„æ‰€æœ‰çš„è¯·æ±‚è¿›è¡Œæ‹¦æˆª --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">&quot;/testRequestEntity&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;firstInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">ä»¥ä¸Šé…ç½®æ–¹å¼å¯ä»¥é€šè¿‡refæˆ–beanæ ‡ç­¾è®¾ç½®æ‹¦æˆªå™¨ï¼Œé€šè¿‡mvc:mappingè®¾ç½®éœ€è¦æ‹¦æˆªçš„è¯·æ±‚ï¼Œé€šè¿‡mvc:exclude-mappingè®¾ç½®éœ€è¦æ’é™¤çš„è¯·æ±‚ï¼Œå³ä¸éœ€è¦æ‹¦æˆªçš„è¯·æ±‚</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ‹¦æˆªå™¨çš„ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•"><a class="markdownIt-Anchor" href="#æ‹¦æˆªå™¨çš„ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•"></a> æ‹¦æˆªå™¨çš„ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•</h3><p>SpringMVC ä¸­çš„æ‹¦æˆªå™¨æœ‰ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•ï¼š</p><p>preHandleï¼šæ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œ preHandle()ï¼Œå…¶ boolean ç±»å‹çš„è¿”å›å€¼è¡¨ç¤ºæ˜¯å¦æ‹¦æˆªæˆ–æ”¾è¡Œï¼Œè¿”å› true ä¸ºæ”¾è¡Œï¼Œå³è°ƒç”¨æ§åˆ¶å™¨æ–¹æ³•ï¼›è¿”å› false è¡¨ç¤ºæ‹¦æˆªï¼Œå³ä¸è°ƒç”¨æ§åˆ¶å™¨æ–¹æ³•</p><p>postHandleï¼šæ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œ postHandle()</p><p>afterComplationï¼šå¤„ç†å®Œè§†å›¾å’Œæ¨¡å‹æ•°æ®ï¼Œæ¸²æŸ“è§†å›¾å®Œæ¯•ä¹‹åæ‰§è¡Œ afterComplation()</p><h3 id="å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº"><a class="markdownIt-Anchor" href="#å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº"></a> å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº</h3><p>a&gt;è‹¥æ¯ä¸ªæ‹¦æˆªå™¨çš„ preHandle()éƒ½è¿”å› true</p><p>æ­¤æ—¶å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåºå’Œæ‹¦æˆªå™¨åœ¨ SpringMVC çš„é…ç½®æ–‡ä»¶çš„é…ç½®é¡ºåºæœ‰å…³ï¼š</p><p>preHandle()ä¼šæŒ‰ç…§é…ç½®çš„é¡ºåºæ‰§è¡Œï¼Œè€Œ postHandle()å’Œ afterComplation()ä¼šæŒ‰ç…§é…ç½®çš„ååºæ‰§è¡Œ</p><p>b&gt;è‹¥æŸä¸ªæ‹¦æˆªå™¨çš„ preHandle()è¿”å›äº† false</p><p>preHandle()è¿”å› false å’Œå®ƒä¹‹å‰çš„æ‹¦æˆªå™¨çš„ preHandle()éƒ½ä¼šæ‰§è¡Œï¼ŒpostHandle()éƒ½ä¸æ‰§è¡Œï¼Œè¿”å› false çš„æ‹¦æˆªå™¨ä¹‹å‰çš„æ‹¦æˆªå™¨çš„ afterComplation()ä¼šæ‰§è¡Œ</p><h1 id="å¼‚å¸¸å¤„ç†å™¨"><a class="markdownIt-Anchor" href="#å¼‚å¸¸å¤„ç†å™¨"></a> å¼‚å¸¸å¤„ç†å™¨</h1><h3 id="åŸºäºé…ç½®çš„å¼‚å¸¸å¤„ç†"><a class="markdownIt-Anchor" href="#åŸºäºé…ç½®çš„å¼‚å¸¸å¤„ç†"></a> åŸºäºé…ç½®çš„å¼‚å¸¸å¤„ç†</h3><p>SpringMVC æä¾›äº†ä¸€ä¸ªå¤„ç†æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€å‡ºç°çš„å¼‚å¸¸çš„æ¥å£ï¼šHandlerExceptionResolver</p><p>HandlerExceptionResolver æ¥å£çš„å®ç°ç±»æœ‰ï¼šDefaultHandlerExceptionResolver å’Œ SimpleMappingExceptionResolver</p><p>SpringMVC æä¾›äº†è‡ªå®šä¹‰çš„å¼‚å¸¸å¤„ç†å™¨ SimpleMappingExceptionResolverï¼Œä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;exceptionMappings&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        propertiesçš„é”®è¡¨ç¤ºå¤„ç†å™¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°çš„å¼‚å¸¸</span></span><br><span class="line"><span class="comment">        propertiesçš„å€¼è¡¨ç¤ºè‹¥å‡ºç°æŒ‡å®šå¼‚å¸¸æ—¶ï¼Œè®¾ç½®ä¸€ä¸ªæ–°çš„è§†å›¾åç§°ï¼Œè·³è½¬åˆ°æŒ‡å®šé¡µé¢</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;java.lang.ArithmeticException&quot;</span>&gt;</span>error<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    exceptionAttributeå±æ€§è®¾ç½®ä¸€ä¸ªå±æ€§åï¼Œå°†å‡ºç°çš„å¼‚å¸¸ä¿¡æ¯åœ¨è¯·æ±‚åŸŸä¸­è¿›è¡Œå…±äº«</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;exceptionAttribute&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="åŸºäºæ³¨è§£çš„å¼‚å¸¸å¤„ç†"><a class="markdownIt-Anchor" href="#åŸºäºæ³¨è§£çš„å¼‚å¸¸å¤„ç†"></a> åŸºäºæ³¨è§£çš„å¼‚å¸¸å¤„ç†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@ControllerAdviceå°†å½“å‰ç±»æ ‡è¯†ä¸ºå¼‚å¸¸å¤„ç†çš„ç»„ä»¶</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExceptionController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@ExceptionHandlerç”¨äºè®¾ç½®æ‰€æ ‡è¯†æ–¹æ³•å¤„ç†çš„å¼‚å¸¸</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(ArithmeticException.class)</span></span><br><span class="line">    <span class="comment">//exè¡¨ç¤ºå½“å‰è¯·æ±‚å¤„ç†ä¸­å‡ºç°çš„å¼‚å¸¸å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">handleArithmeticException</span><span class="params">(Exception ex, Model model)</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;ex&quot;</span>, ex);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ³¨è§£é…ç½®-springmvc"><a class="markdownIt-Anchor" href="#æ³¨è§£é…ç½®-springmvc"></a> æ³¨è§£é…ç½® SpringMVC</h1><p>ä½¿ç”¨é…ç½®ç±»å’Œæ³¨è§£ä»£æ›¿ web.xml å’Œ SpringMVC é…ç½®æ–‡ä»¶çš„åŠŸèƒ½</p><h3 id="åˆ›å»ºåˆå§‹åŒ–ç±»ä»£æ›¿-webxml"><a class="markdownIt-Anchor" href="#åˆ›å»ºåˆå§‹åŒ–ç±»ä»£æ›¿-webxml"></a> åˆ›å»ºåˆå§‹åŒ–ç±»ï¼Œä»£æ›¿ web.xml</h3><p>åœ¨ Servlet3.0 ç¯å¢ƒä¸­ï¼Œå®¹å™¨ä¼šåœ¨ç±»è·¯å¾„ä¸­æŸ¥æ‰¾å®ç° javax.servlet.ServletContainerInitializer æ¥å£çš„ç±»ï¼Œå¦‚æœæ‰¾åˆ°çš„è¯å°±ç”¨å®ƒæ¥é…ç½® Servlet å®¹å™¨ã€‚<br />Spring æä¾›äº†è¿™ä¸ªæ¥å£çš„å®ç°ï¼Œåä¸º SpringServletContainerInitializerï¼Œè¿™ä¸ªç±»åè¿‡æ¥åˆä¼šæŸ¥æ‰¾å®ç° WebApplicationInitializer çš„ç±»å¹¶å°†é…ç½®çš„ä»»åŠ¡äº¤ç»™å®ƒä»¬æ¥å®Œæˆã€‚Spring3.2 å¼•å…¥äº†ä¸€ä¸ªä¾¿åˆ©çš„ WebApplicationInitializer åŸºç¡€å®ç°ï¼Œåä¸º AbstractAnnotationConfigDispatcherServletInitializerï¼Œå½“æˆ‘ä»¬çš„ç±»æ‰©å±•äº† AbstractAnnotationConfigDispatcherServletInitializer å¹¶å°†å…¶éƒ¨ç½²åˆ° Servlet3.0 å®¹å™¨çš„æ—¶å€™ï¼Œå®¹å™¨ä¼šè‡ªåŠ¨å‘ç°å®ƒï¼Œå¹¶ç”¨å®ƒæ¥é…ç½® Servlet ä¸Šä¸‹æ–‡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebInit</span> <span class="keyword">extends</span> <span class="title class_">AbstractAnnotationConfigDispatcherServletInitializer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŒ‡å®šspringçš„é…ç½®ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŒ‡å®šSpringMVCçš„é…ç½®ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;WebConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŒ‡å®šDispatcherServletçš„æ˜ å°„è§„åˆ™ï¼Œå³url-pattern</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Filter[] getServletFilters() &#123;</span><br><span class="line">        <span class="type">CharacterEncodingFilter</span> <span class="variable">encodingFilter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharacterEncodingFilter</span>();</span><br><span class="line">        encodingFilter.setEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        encodingFilter.setForceRequestEncoding(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">HiddenHttpMethodFilter</span> <span class="variable">hiddenHttpMethodFilter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HiddenHttpMethodFilter</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Filter</span>[]&#123;encodingFilter, hiddenHttpMethodFilter&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»º-springconfig-é…ç½®ç±»ä»£æ›¿-spring-çš„é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#åˆ›å»º-springconfig-é…ç½®ç±»ä»£æ›¿-spring-çš„é…ç½®æ–‡ä»¶"></a> åˆ›å»º SpringConfig é…ç½®ç±»ï¼Œä»£æ›¿ spring çš„é…ç½®æ–‡ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line"><span class="comment">//ssmæ•´åˆä¹‹åï¼Œspringçš„é…ç½®ä¿¡æ¯å†™åœ¨æ­¤ç±»ä¸­</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»º-webconfig-é…ç½®ç±»ä»£æ›¿-springmvc-çš„é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#åˆ›å»º-webconfig-é…ç½®ç±»ä»£æ›¿-springmvc-çš„é…ç½®æ–‡ä»¶"></a> åˆ›å»º WebConfig é…ç½®ç±»ï¼Œä»£æ›¿ SpringMVC çš„é…ç½®æ–‡ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//æ‰«æç»„ä»¶</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.atguigu.mvc.controller&quot;)</span></span><br><span class="line"><span class="comment">//å¼€å¯MVCæ³¨è§£é©±åŠ¨</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä½¿ç”¨é»˜è®¤çš„servletå¤„ç†é™æ€èµ„æº</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureDefaultServletHandling</span><span class="params">(DefaultServletHandlerConfigurer configurer)</span> &#123;</span><br><span class="line">        configurer.enable();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CommonsMultipartResolver <span class="title function_">multipartResolver</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonsMultipartResolver</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é…ç½®æ‹¦æˆªå™¨</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        <span class="type">FirstInterceptor</span> <span class="variable">firstInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FirstInterceptor</span>();</span><br><span class="line">        registry.addInterceptor(firstInterceptor).addPathPatterns(<span class="string">&quot;/**&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é…ç½®è§†å›¾æ§åˆ¶</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*@Override</span></span><br><span class="line"><span class="comment">    public void addViewControllers(ViewControllerRegistry registry) &#123;</span></span><br><span class="line"><span class="comment">        registry.addViewController(&quot;/&quot;).setViewName(&quot;index&quot;);</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//é…ç½®å¼‚å¸¸æ˜ å°„</span></span><br><span class="line">    <span class="comment">/*@Override</span></span><br><span class="line"><span class="comment">    public void configureHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers) &#123;</span></span><br><span class="line"><span class="comment">        SimpleMappingExceptionResolver exceptionResolver = new SimpleMappingExceptionResolver();</span></span><br><span class="line"><span class="comment">        Properties prop = new Properties();</span></span><br><span class="line"><span class="comment">        prop.setProperty(&quot;java.lang.ArithmeticException&quot;, &quot;error&quot;);</span></span><br><span class="line"><span class="comment">        //è®¾ç½®å¼‚å¸¸æ˜ å°„</span></span><br><span class="line"><span class="comment">        exceptionResolver.setExceptionMappings(prop);</span></span><br><span class="line"><span class="comment">        //è®¾ç½®å…±äº«å¼‚å¸¸ä¿¡æ¯çš„é”®</span></span><br><span class="line"><span class="comment">        exceptionResolver.setExceptionAttribute(&quot;ex&quot;);</span></span><br><span class="line"><span class="comment">        resolvers.add(exceptionResolver);</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//é…ç½®ç”Ÿæˆæ¨¡æ¿è§£æå™¨</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ITemplateResolver <span class="title function_">templateResolver</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">WebApplicationContext</span> <span class="variable">webApplicationContext</span> <span class="operator">=</span> ContextLoader.getCurrentWebApplicationContext();</span><br><span class="line">        <span class="comment">// ServletContextTemplateResolveréœ€è¦ä¸€ä¸ªServletContextä½œä¸ºæ„é€ å‚æ•°ï¼Œå¯é€šè¿‡WebApplicationContext çš„æ–¹æ³•è·å¾—</span></span><br><span class="line">        <span class="type">ServletContextTemplateResolver</span> <span class="variable">templateResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletContextTemplateResolver</span>(</span><br><span class="line">                webApplicationContext.getServletContext());</span><br><span class="line">        templateResolver.setPrefix(<span class="string">&quot;/WEB-INF/templates/&quot;</span>);</span><br><span class="line">        templateResolver.setSuffix(<span class="string">&quot;.html&quot;</span>);</span><br><span class="line">        templateResolver.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        templateResolver.setTemplateMode(TemplateMode.HTML);</span><br><span class="line">        <span class="keyword">return</span> templateResolver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿæˆæ¨¡æ¿å¼•æ“å¹¶ä¸ºæ¨¡æ¿å¼•æ“æ³¨å…¥æ¨¡æ¿è§£æå™¨</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SpringTemplateEngine <span class="title function_">templateEngine</span><span class="params">(ITemplateResolver templateResolver)</span> &#123;</span><br><span class="line">        <span class="type">SpringTemplateEngine</span> <span class="variable">templateEngine</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SpringTemplateEngine</span>();</span><br><span class="line">        templateEngine.setTemplateResolver(templateResolver);</span><br><span class="line">        <span class="keyword">return</span> templateEngine;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿæˆè§†å›¾è§£æå™¨å¹¶æœªè§£æå™¨æ³¨å…¥æ¨¡æ¿å¼•æ“</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ViewResolver <span class="title function_">viewResolver</span><span class="params">(SpringTemplateEngine templateEngine)</span> &#123;</span><br><span class="line">        <span class="type">ThymeleafViewResolver</span> <span class="variable">viewResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThymeleafViewResolver</span>();</span><br><span class="line">        viewResolver.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        viewResolver.setTemplateEngine(templateEngine);</span><br><span class="line">        <span class="keyword">return</span> viewResolver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•åŠŸèƒ½"><a class="markdownIt-Anchor" href="#æµ‹è¯•åŠŸèƒ½"></a> æµ‹è¯•åŠŸèƒ½</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">index</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="springmvc-æ‰§è¡Œæµç¨‹"><a class="markdownIt-Anchor" href="#springmvc-æ‰§è¡Œæµç¨‹"></a> SpringMVC æ‰§è¡Œæµç¨‹</h1><h3 id="springmvc-å¸¸ç”¨ç»„ä»¶"><a class="markdownIt-Anchor" href="#springmvc-å¸¸ç”¨ç»„ä»¶"></a> SpringMVC å¸¸ç”¨ç»„ä»¶</h3><ul><li>DispatcherServletï¼š<strong>å‰ç«¯æ§åˆ¶å™¨</strong>ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›</li></ul><p>ä½œç”¨ï¼šç»Ÿä¸€å¤„ç†è¯·æ±‚å’Œå“åº”ï¼Œæ•´ä¸ªæµç¨‹æ§åˆ¶çš„ä¸­å¿ƒï¼Œç”±å®ƒè°ƒç”¨å…¶å®ƒç»„ä»¶å¤„ç†ç”¨æˆ·çš„è¯·æ±‚</p><ul><li>HandlerMappingï¼š<strong>å¤„ç†å™¨æ˜ å°„å™¨</strong>ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›</li></ul><p>ä½œç”¨ï¼šæ ¹æ®è¯·æ±‚çš„ urlã€method ç­‰ä¿¡æ¯æŸ¥æ‰¾ Handlerï¼Œå³æ§åˆ¶å™¨æ–¹æ³•</p><ul><li>Handlerï¼š<strong>å¤„ç†å™¨</strong>ï¼Œéœ€è¦å·¥ç¨‹å¸ˆå¼€å‘</li></ul><p>ä½œç”¨ï¼šåœ¨ DispatcherServlet çš„æ§åˆ¶ä¸‹ Handler å¯¹å…·ä½“çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œå¤„ç†</p><ul><li>HandlerAdapterï¼š<strong>å¤„ç†å™¨é€‚é…å™¨</strong>ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›</li></ul><p>ä½œç”¨ï¼šé€šè¿‡ HandlerAdapter å¯¹å¤„ç†å™¨ï¼ˆæ§åˆ¶å™¨æ–¹æ³•ï¼‰è¿›è¡Œæ‰§è¡Œ</p><ul><li>ViewResolverï¼š<strong>è§†å›¾è§£æå™¨</strong>ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›</li></ul><p>ä½œç”¨ï¼šè¿›è¡Œè§†å›¾è§£æï¼Œå¾—åˆ°ç›¸åº”çš„è§†å›¾ï¼Œä¾‹å¦‚ï¼šThymeleafViewã€InternalResourceViewã€RedirectView</p><ul><li>Viewï¼š<strong>è§†å›¾</strong></li></ul><p>ä½œç”¨ï¼šå°†æ¨¡å‹æ•°æ®é€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·</p><h3 id="dispatcherservlet-åˆå§‹åŒ–è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#dispatcherservlet-åˆå§‹åŒ–è¿‡ç¨‹"></a> DispatcherServlet åˆå§‹åŒ–è¿‡ç¨‹</h3><p>DispatcherServlet æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª Servletï¼Œæ‰€ä»¥å¤©ç„¶çš„éµå¾ª Servlet çš„ç”Ÿå‘½å‘¨æœŸã€‚æ‰€ä»¥å®è§‚ä¸Šæ˜¯ Servlet ç”Ÿå‘½å‘¨æœŸæ¥è¿›è¡Œè°ƒåº¦ã€‚</p><p><img src="https://unpkg.com/serms-assets@1.0.6/Spring/img005.png" alt="" /></p><h5 id="aåˆå§‹åŒ–-webapplicationcontext"><a class="markdownIt-Anchor" href="#aåˆå§‹åŒ–-webapplicationcontext"></a> a&gt;åˆå§‹åŒ– WebApplicationContext</h5><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.FrameworkServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> WebApplicationContext <span class="title function_">initWebApplicationContext</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">WebApplicationContext</span> <span class="variable">rootContext</span> <span class="operator">=</span></span><br><span class="line">        WebApplicationContextUtils.getWebApplicationContext(getServletContext());</span><br><span class="line">    <span class="type">WebApplicationContext</span> <span class="variable">wac</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.webApplicationContext != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// A context instance was injected at construction time -&gt; use it</span></span><br><span class="line">        wac = <span class="built_in">this</span>.webApplicationContext;</span><br><span class="line">        <span class="keyword">if</span> (wac <span class="keyword">instanceof</span> ConfigurableWebApplicationContext) &#123;</span><br><span class="line">            <span class="type">ConfigurableWebApplicationContext</span> <span class="variable">cwac</span> <span class="operator">=</span> (ConfigurableWebApplicationContext) wac;</span><br><span class="line">            <span class="keyword">if</span> (!cwac.isActive()) &#123;</span><br><span class="line">                <span class="comment">// The context has not yet been refreshed -&gt; provide services such as</span></span><br><span class="line">                <span class="comment">// setting the parent context, setting the application context id, etc</span></span><br><span class="line">                <span class="keyword">if</span> (cwac.getParent() == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="comment">// The context instance was injected without an explicit parent -&gt; set</span></span><br><span class="line">                    <span class="comment">// the root application context (if any; may be null) as the parent</span></span><br><span class="line">                    cwac.setParent(rootContext);</span><br><span class="line">                &#125;</span><br><span class="line">                configureAndRefreshWebApplicationContext(cwac);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (wac == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// No context instance was injected at construction time -&gt; see if one</span></span><br><span class="line">        <span class="comment">// has been registered in the servlet context. If one exists, it is assumed</span></span><br><span class="line">        <span class="comment">// that the parent context (if any) has already been set and that the</span></span><br><span class="line">        <span class="comment">// user has performed any initialization such as setting the context id</span></span><br><span class="line">        wac = findWebApplicationContext();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (wac == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// No context instance is defined for this servlet -&gt; create a local one</span></span><br><span class="line">        <span class="comment">// åˆ›å»ºWebApplicationContext</span></span><br><span class="line">        wac = createWebApplicationContext(rootContext);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.refreshEventReceived) &#123;</span><br><span class="line">        <span class="comment">// Either the context is not a ConfigurableApplicationContext with refresh</span></span><br><span class="line">        <span class="comment">// support or the context injected at construction time had already been</span></span><br><span class="line">        <span class="comment">// refreshed -&gt; trigger initial onRefresh manually here.</span></span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="built_in">this</span>.onRefreshMonitor) &#123;</span><br><span class="line">            <span class="comment">// åˆ·æ–°WebApplicationContext</span></span><br><span class="line">            onRefresh(wac);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.publishContext) &#123;</span><br><span class="line">        <span class="comment">// Publish the context as a servlet context attribute.</span></span><br><span class="line">        <span class="comment">// å°†IOCå®¹å™¨åœ¨åº”ç”¨åŸŸå…±äº«</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">attrName</span> <span class="operator">=</span> getServletContextAttributeName();</span><br><span class="line">        getServletContext().setAttribute(attrName, wac);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wac;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="båˆ›å»º-webapplicationcontext"><a class="markdownIt-Anchor" href="#båˆ›å»º-webapplicationcontext"></a> b&gt;åˆ›å»º WebApplicationContext</h5><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.FrameworkServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> WebApplicationContext <span class="title function_">createWebApplicationContext</span><span class="params">(<span class="meta">@Nullable</span> ApplicationContext parent)</span> &#123;</span><br><span class="line">    Class&lt;?&gt; contextClass = getContextClass();</span><br><span class="line">    <span class="keyword">if</span> (!ConfigurableWebApplicationContext.class.isAssignableFrom(contextClass)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ApplicationContextException</span>(</span><br><span class="line">            <span class="string">&quot;Fatal initialization error in servlet with name &#x27;&quot;</span> + getServletName() +</span><br><span class="line">            <span class="string">&quot;&#x27;: custom WebApplicationContext class [&quot;</span> + contextClass.getName() +</span><br><span class="line">            <span class="string">&quot;] is not of type ConfigurableWebApplicationContext&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é€šè¿‡åå°„åˆ›å»º IOC å®¹å™¨å¯¹è±¡</span></span><br><span class="line">    <span class="type">ConfigurableWebApplicationContext</span> <span class="variable">wac</span> <span class="operator">=</span></span><br><span class="line">        (ConfigurableWebApplicationContext) BeanUtils.instantiateClass(contextClass);</span><br><span class="line"></span><br><span class="line">    wac.setEnvironment(getEnvironment());</span><br><span class="line">    <span class="comment">// è®¾ç½®çˆ¶å®¹å™¨</span></span><br><span class="line">    wac.setParent(parent);</span><br><span class="line">    <span class="type">String</span> <span class="variable">configLocation</span> <span class="operator">=</span> getContextConfigLocation();</span><br><span class="line">    <span class="keyword">if</span> (configLocation != <span class="literal">null</span>) &#123;</span><br><span class="line">        wac.setConfigLocation(configLocation);</span><br><span class="line">    &#125;</span><br><span class="line">    configureAndRefreshWebApplicationContext(wac);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wac;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="cdispatcherservlet-åˆå§‹åŒ–ç­–ç•¥"><a class="markdownIt-Anchor" href="#cdispatcherservlet-åˆå§‹åŒ–ç­–ç•¥"></a> c&gt;DispatcherServlet åˆå§‹åŒ–ç­–ç•¥</h5><p>FrameworkServlet åˆ›å»º WebApplicationContext åï¼Œåˆ·æ–°å®¹å™¨ï¼Œè°ƒç”¨ onRefresh(wac)ï¼Œæ­¤æ–¹æ³•åœ¨ DispatcherServlet ä¸­è¿›è¡Œäº†é‡å†™ï¼Œè°ƒç”¨äº† initStrategies(context)æ–¹æ³•ï¼Œåˆå§‹åŒ–ç­–ç•¥ï¼Œå³åˆå§‹åŒ– DispatcherServlet çš„å„ä¸ªç»„ä»¶</p><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.DispatcherServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">initStrategies</span><span class="params">(ApplicationContext context)</span> &#123;</span><br><span class="line">   initMultipartResolver(context);</span><br><span class="line">   initLocaleResolver(context);</span><br><span class="line">   initThemeResolver(context);</span><br><span class="line">   initHandlerMappings(context);</span><br><span class="line">   initHandlerAdapters(context);</span><br><span class="line">   initHandlerExceptionResolvers(context);</span><br><span class="line">   initRequestToViewNameTranslator(context);</span><br><span class="line">   initViewResolvers(context);</span><br><span class="line">   initFlashMapManager(context);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="dispatcherservlet-è°ƒç”¨ç»„ä»¶å¤„ç†è¯·æ±‚"><a class="markdownIt-Anchor" href="#dispatcherservlet-è°ƒç”¨ç»„ä»¶å¤„ç†è¯·æ±‚"></a> DispatcherServlet è°ƒç”¨ç»„ä»¶å¤„ç†è¯·æ±‚</h3><h5 id="aprocessrequest"><a class="markdownIt-Anchor" href="#aprocessrequest"></a> a&gt;processRequest()</h5><p>FrameworkServlet é‡å†™ HttpServlet ä¸­çš„ service()å’Œ doXxx()ï¼Œè¿™äº›æ–¹æ³•ä¸­è°ƒç”¨äº† processRequest(request, response)</p><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.FrameworkServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">processRequest</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">    <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="type">Throwable</span> <span class="variable">failureCause</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">LocaleContext</span> <span class="variable">previousLocaleContext</span> <span class="operator">=</span> LocaleContextHolder.getLocaleContext();</span><br><span class="line">    <span class="type">LocaleContext</span> <span class="variable">localeContext</span> <span class="operator">=</span> buildLocaleContext(request);</span><br><span class="line"></span><br><span class="line">    <span class="type">RequestAttributes</span> <span class="variable">previousAttributes</span> <span class="operator">=</span> RequestContextHolder.getRequestAttributes();</span><br><span class="line">    <span class="type">ServletRequestAttributes</span> <span class="variable">requestAttributes</span> <span class="operator">=</span> buildRequestAttributes(request, response, previousAttributes);</span><br><span class="line"></span><br><span class="line">    <span class="type">WebAsyncManager</span> <span class="variable">asyncManager</span> <span class="operator">=</span> WebAsyncUtils.getAsyncManager(request);</span><br><span class="line">    asyncManager.registerCallableInterceptor(FrameworkServlet.class.getName(), <span class="keyword">new</span> <span class="title class_">RequestBindingInterceptor</span>());</span><br><span class="line"></span><br><span class="line">    initContextHolders(request, localeContext, requestAttributes);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">// æ‰§è¡ŒæœåŠ¡ï¼ŒdoService()æ˜¯ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œåœ¨DispatcherServletä¸­è¿›è¡Œäº†é‡å†™</span></span><br><span class="line">        doService(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (ServletException | IOException ex) &#123;</span><br><span class="line">        failureCause = ex;</span><br><span class="line">        <span class="keyword">throw</span> ex;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">        failureCause = ex;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NestedServletException</span>(<span class="string">&quot;Request processing failed&quot;</span>, ex);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">finally</span> &#123;</span><br><span class="line">        resetContextHolders(request, previousLocaleContext, previousAttributes);</span><br><span class="line">        <span class="keyword">if</span> (requestAttributes != <span class="literal">null</span>) &#123;</span><br><span class="line">            requestAttributes.requestCompleted();</span><br><span class="line">        &#125;</span><br><span class="line">        logResult(request, response, failureCause, asyncManager);</span><br><span class="line">        publishRequestHandledEvent(request, response, startTime, failureCause);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="bdoservice"><a class="markdownIt-Anchor" href="#bdoservice"></a> b&gt;doService()</h5><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.DispatcherServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doService</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    logRequest(request);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Keep a snapshot of the request attributes in case of an include,</span></span><br><span class="line">    <span class="comment">// to be able to restore the original attributes after the include.</span></span><br><span class="line">    Map&lt;String, Object&gt; attributesSnapshot = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (WebUtils.isIncludeRequest(request)) &#123;</span><br><span class="line">        attributesSnapshot = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        Enumeration&lt;?&gt; attrNames = request.getAttributeNames();</span><br><span class="line">        <span class="keyword">while</span> (attrNames.hasMoreElements()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">attrName</span> <span class="operator">=</span> (String) attrNames.nextElement();</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.cleanupAfterInclude || attrName.startsWith(DEFAULT_STRATEGIES_PREFIX)) &#123;</span><br><span class="line">                attributesSnapshot.put(attrName, request.getAttribute(attrName));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Make framework objects available to handlers and view objects.</span></span><br><span class="line">    request.setAttribute(WEB_APPLICATION_CONTEXT_ATTRIBUTE, getWebApplicationContext());</span><br><span class="line">    request.setAttribute(LOCALE_RESOLVER_ATTRIBUTE, <span class="built_in">this</span>.localeResolver);</span><br><span class="line">    request.setAttribute(THEME_RESOLVER_ATTRIBUTE, <span class="built_in">this</span>.themeResolver);</span><br><span class="line">    request.setAttribute(THEME_SOURCE_ATTRIBUTE, getThemeSource());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.flashMapManager != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">FlashMap</span> <span class="variable">inputFlashMap</span> <span class="operator">=</span> <span class="built_in">this</span>.flashMapManager.retrieveAndUpdate(request, response);</span><br><span class="line">        <span class="keyword">if</span> (inputFlashMap != <span class="literal">null</span>) &#123;</span><br><span class="line">            request.setAttribute(INPUT_FLASH_MAP_ATTRIBUTE, Collections.unmodifiableMap(inputFlashMap));</span><br><span class="line">        &#125;</span><br><span class="line">        request.setAttribute(OUTPUT_FLASH_MAP_ATTRIBUTE, <span class="keyword">new</span> <span class="title class_">FlashMap</span>());</span><br><span class="line">        request.setAttribute(FLASH_MAP_MANAGER_ATTRIBUTE, <span class="built_in">this</span>.flashMapManager);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">RequestPath</span> <span class="variable">requestPath</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.parseRequestPath &amp;&amp; !ServletRequestPathUtils.hasParsedRequestPath(request)) &#123;</span><br><span class="line">        requestPath = ServletRequestPathUtils.parseAndCache(request);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// å¤„ç†è¯·æ±‚å’Œå“åº”</span></span><br><span class="line">        doDispatch(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) &#123;</span><br><span class="line">            <span class="comment">// Restore the original attribute snapshot, in case of an include.</span></span><br><span class="line">            <span class="keyword">if</span> (attributesSnapshot != <span class="literal">null</span>) &#123;</span><br><span class="line">                restoreAttributesAfterInclude(request, attributesSnapshot);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (requestPath != <span class="literal">null</span>) &#123;</span><br><span class="line">            ServletRequestPathUtils.clearParsedRequestPath(request);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="cdodispatch"><a class="markdownIt-Anchor" href="#cdodispatch"></a> c&gt;doDispatch()</h5><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.DispatcherServlet</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doDispatch</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">HttpServletRequest</span> <span class="variable">processedRequest</span> <span class="operator">=</span> request;</span><br><span class="line">    <span class="type">HandlerExecutionChain</span> <span class="variable">mappedHandler</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">multipartRequestParsed</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">WebAsyncManager</span> <span class="variable">asyncManager</span> <span class="operator">=</span> WebAsyncUtils.getAsyncManager(request);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Exception</span> <span class="variable">dispatchException</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            processedRequest = checkMultipart(request);</span><br><span class="line">            multipartRequestParsed = (processedRequest != request);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Determine handler for the current request.</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">            mappedHandlerï¼šè°ƒç”¨é“¾</span></span><br><span class="line"><span class="comment">                åŒ…å«handlerã€interceptorListã€interceptorIndex</span></span><br><span class="line"><span class="comment">            handlerï¼šæµè§ˆå™¨å‘é€çš„è¯·æ±‚æ‰€åŒ¹é…çš„æ§åˆ¶å™¨æ–¹æ³•</span></span><br><span class="line"><span class="comment">            interceptorListï¼šå¤„ç†æ§åˆ¶å™¨æ–¹æ³•çš„æ‰€æœ‰æ‹¦æˆªå™¨é›†åˆ</span></span><br><span class="line"><span class="comment">            interceptorIndexï¼šæ‹¦æˆªå™¨ç´¢å¼•ï¼Œæ§åˆ¶æ‹¦æˆªå™¨afterCompletion()çš„æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            mappedHandler = getHandler(processedRequest);</span><br><span class="line">            <span class="keyword">if</span> (mappedHandler == <span class="literal">null</span>) &#123;</span><br><span class="line">                noHandlerFound(processedRequest, response);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Determine handler adapter for the current request.</span></span><br><span class="line">           <span class="comment">// é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•åˆ›å»ºç›¸åº”çš„å¤„ç†å™¨é€‚é…å™¨ï¼Œè°ƒç”¨æ‰€å¯¹åº”çš„æ§åˆ¶å™¨æ–¹æ³•</span></span><br><span class="line">            <span class="type">HandlerAdapter</span> <span class="variable">ha</span> <span class="operator">=</span> getHandlerAdapter(mappedHandler.getHandler());</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Process last-modified header, if supported by the handler.</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> request.getMethod();</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">isGet</span> <span class="operator">=</span> <span class="string">&quot;GET&quot;</span>.equals(method);</span><br><span class="line">            <span class="keyword">if</span> (isGet || <span class="string">&quot;HEAD&quot;</span>.equals(method)) &#123;</span><br><span class="line">                <span class="type">long</span> <span class="variable">lastModified</span> <span class="operator">=</span> ha.getLastModified(request, mappedHandler.getHandler());</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">new</span> <span class="title class_">ServletWebRequest</span>(request, response).checkNotModified(lastModified) &amp;&amp; isGet) &#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è°ƒç”¨æ‹¦æˆªå™¨çš„preHandle()</span></span><br><span class="line">            <span class="keyword">if</span> (!mappedHandler.applyPreHandle(processedRequest, response)) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Actually invoke the handler.</span></span><br><span class="line">            <span class="comment">// ç”±å¤„ç†å™¨é€‚é…å™¨è°ƒç”¨å…·ä½“çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œæœ€ç»ˆè·å¾—ModelAndViewå¯¹è±¡</span></span><br><span class="line">            mv = ha.handle(processedRequest, response, mappedHandler.getHandler());</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (asyncManager.isConcurrentHandlingStarted()) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            applyDefaultViewName(processedRequest, mv);</span><br><span class="line">            <span class="comment">// è°ƒç”¨æ‹¦æˆªå™¨çš„postHandle()</span></span><br><span class="line">            mappedHandler.applyPostHandle(processedRequest, response, mv);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">            dispatchException = ex;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Throwable err) &#123;</span><br><span class="line">            <span class="comment">// As of 4.3, we&#x27;re processing Errors thrown from handler methods as well,</span></span><br><span class="line">            <span class="comment">// making them available for @ExceptionHandler methods and other scenarios.</span></span><br><span class="line">            dispatchException = <span class="keyword">new</span> <span class="title class_">NestedServletException</span>(<span class="string">&quot;Handler dispatch failed&quot;</span>, err);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åç»­å¤„ç†ï¼šå¤„ç†æ¨¡å‹æ•°æ®å’Œæ¸²æŸ“è§†å›¾</span></span><br><span class="line">        processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">        triggerAfterCompletion(processedRequest, response, mappedHandler, ex);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Throwable err) &#123;</span><br><span class="line">        triggerAfterCompletion(processedRequest, response, mappedHandler,</span><br><span class="line">                               <span class="keyword">new</span> <span class="title class_">NestedServletException</span>(<span class="string">&quot;Handler processing failed&quot;</span>, err));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (asyncManager.isConcurrentHandlingStarted()) &#123;</span><br><span class="line">            <span class="comment">// Instead of postHandle and afterCompletion</span></span><br><span class="line">            <span class="keyword">if</span> (mappedHandler != <span class="literal">null</span>) &#123;</span><br><span class="line">                mappedHandler.applyAfterConcurrentHandlingStarted(processedRequest, response);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// Clean up any resources used by a multipart request.</span></span><br><span class="line">            <span class="keyword">if</span> (multipartRequestParsed) &#123;</span><br><span class="line">                cleanupMultipart(processedRequest);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="dprocessdispatchresult"><a class="markdownIt-Anchor" href="#dprocessdispatchresult"></a> d&gt;processDispatchResult()</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">processDispatchResult</span><span class="params">(HttpServletRequest request, HttpServletResponse response,</span></span><br><span class="line"><span class="params">                                   <span class="meta">@Nullable</span> HandlerExecutionChain mappedHandler, <span class="meta">@Nullable</span> ModelAndView mv,</span></span><br><span class="line"><span class="params">                                   <span class="meta">@Nullable</span> Exception exception)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">errorView</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (exception != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (exception <span class="keyword">instanceof</span> ModelAndViewDefiningException) &#123;</span><br><span class="line">            logger.debug(<span class="string">&quot;ModelAndViewDefiningException encountered&quot;</span>, exception);</span><br><span class="line">            mv = ((ModelAndViewDefiningException) exception).getModelAndView();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">handler</span> <span class="operator">=</span> (mappedHandler != <span class="literal">null</span> ? mappedHandler.getHandler() : <span class="literal">null</span>);</span><br><span class="line">            mv = processHandlerException(request, response, handler, exception);</span><br><span class="line">            errorView = (mv != <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Did the handler return a view to render?</span></span><br><span class="line">    <span class="keyword">if</span> (mv != <span class="literal">null</span> &amp;&amp; !mv.wasCleared()) &#123;</span><br><span class="line">        <span class="comment">// å¤„ç†æ¨¡å‹æ•°æ®å’Œæ¸²æŸ“è§†å›¾</span></span><br><span class="line">        render(mv, request, response);</span><br><span class="line">        <span class="keyword">if</span> (errorView) &#123;</span><br><span class="line">            WebUtils.clearErrorRequestAttributes(request);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (logger.isTraceEnabled()) &#123;</span><br><span class="line">            logger.trace(<span class="string">&quot;No view rendering, null ModelAndView returned.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) &#123;</span><br><span class="line">        <span class="comment">// Concurrent handling started during a forward</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (mappedHandler != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// Exception (if any) is already handled..</span></span><br><span class="line">        <span class="comment">// è°ƒç”¨æ‹¦æˆªå™¨çš„afterCompletion()</span></span><br><span class="line">        mappedHandler.triggerAfterCompletion(request, response, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="springmvc-çš„æ‰§è¡Œæµç¨‹"><a class="markdownIt-Anchor" href="#springmvc-çš„æ‰§è¡Œæµç¨‹"></a> SpringMVC çš„æ‰§è¡Œæµç¨‹</h3><ol><li><p>ç”¨æˆ·å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè¯·æ±‚è¢« SpringMVC å‰ç«¯æ§åˆ¶å™¨ DispatcherServlet æ•è·ã€‚</p></li><li><p>DispatcherServlet å¯¹è¯·æ±‚ URL è¿›è¡Œè§£æï¼Œå¾—åˆ°è¯·æ±‚èµ„æºæ ‡è¯†ç¬¦ï¼ˆURIï¼‰ï¼Œåˆ¤æ–­è¯·æ±‚ URI å¯¹åº”çš„æ˜ å°„ï¼š</p></li></ol><p>a) ä¸å­˜åœ¨</p><p>i. å†åˆ¤æ–­æ˜¯å¦é…ç½®äº† mvc:default-servlet-handler</p><p>ii. å¦‚æœæ²¡é…ç½®ï¼Œåˆ™æ§åˆ¶å°æŠ¥æ˜ å°„æŸ¥æ‰¾ä¸åˆ°ï¼Œå®¢æˆ·ç«¯å±•ç¤º 404 é”™è¯¯</p><p><img src="https://unpkg.com/serms-assets@1.0.6/Spring/img006.png" alt="" /></p><p><img src="https://unpkg.com/serms-assets@1.0.6/Spring/img007.png" alt="" /></p><p>iii. å¦‚æœæœ‰é…ç½®ï¼Œåˆ™è®¿é—®ç›®æ ‡èµ„æºï¼ˆä¸€èˆ¬ä¸ºé™æ€èµ„æºï¼Œå¦‚ï¼šJS,CSS,HTMLï¼‰ï¼Œæ‰¾ä¸åˆ°å®¢æˆ·ç«¯ä¹Ÿä¼šå±•ç¤º 404 é”™è¯¯</p><p><img src="https://unpkg.com/serms-assets@1.0.6/Spring/img008.png" alt="" /></p><p><img src="https://unpkg.com/serms-assets@1.0.6/Spring/img009.png" alt="" /></p><p>b) å­˜åœ¨åˆ™æ‰§è¡Œä¸‹é¢çš„æµç¨‹</p><ol><li><p>æ ¹æ®è¯¥ URIï¼Œè°ƒç”¨ HandlerMapping è·å¾—è¯¥ Handler é…ç½®çš„æ‰€æœ‰ç›¸å…³çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ Handler å¯¹è±¡ä»¥åŠ Handler å¯¹è±¡å¯¹åº”çš„æ‹¦æˆªå™¨ï¼‰ï¼Œæœ€åä»¥ HandlerExecutionChain æ‰§è¡Œé“¾å¯¹è±¡çš„å½¢å¼è¿”å›ã€‚</p></li><li><p>DispatcherServlet æ ¹æ®è·å¾—çš„ Handlerï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ HandlerAdapterã€‚</p></li><li><p>å¦‚æœæˆåŠŸè·å¾— HandlerAdapterï¼Œæ­¤æ—¶å°†å¼€å§‹æ‰§è¡Œæ‹¦æˆªå™¨çš„ preHandler(â€¦)æ–¹æ³•ã€æ­£å‘ã€‘</p></li><li><p>æå– Request ä¸­çš„æ¨¡å‹æ•°æ®ï¼Œå¡«å…… Handler å…¥å‚ï¼Œå¼€å§‹æ‰§è¡Œ Handlerï¼ˆController)æ–¹æ³•ï¼Œå¤„ç†è¯·æ±‚ã€‚åœ¨å¡«å…… Handler çš„å…¥å‚è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä½ çš„é…ç½®ï¼ŒSpring å°†å¸®ä½ åšä¸€äº›é¢å¤–çš„å·¥ä½œï¼š</p></li></ol><p>a) HttpMessageConveterï¼š å°†è¯·æ±‚æ¶ˆæ¯ï¼ˆå¦‚ Jsonã€xml ç­‰æ•°æ®ï¼‰è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ï¼Œå°†å¯¹è±¡è½¬æ¢ä¸ºæŒ‡å®šçš„å“åº”ä¿¡æ¯</p><p>b) æ•°æ®è½¬æ¢ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®è½¬æ¢ã€‚å¦‚ String è½¬æ¢æˆ Integerã€Double ç­‰</p><p>c) æ•°æ®æ ¼å¼åŒ–ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®æ ¼å¼åŒ–ã€‚ å¦‚å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ ¼å¼åŒ–æ•°å­—æˆ–æ ¼å¼åŒ–æ—¥æœŸç­‰</p><p>d) æ•°æ®éªŒè¯ï¼š éªŒè¯æ•°æ®çš„æœ‰æ•ˆæ€§ï¼ˆé•¿åº¦ã€æ ¼å¼ç­‰ï¼‰ï¼ŒéªŒè¯ç»“æœå­˜å‚¨åˆ° BindingResult æˆ– Error ä¸­</p><ol start="7"><li><p>Handler æ‰§è¡Œå®Œæˆåï¼Œå‘ DispatcherServlet è¿”å›ä¸€ä¸ª ModelAndView å¯¹è±¡ã€‚</p></li><li><p>æ­¤æ—¶å°†å¼€å§‹æ‰§è¡Œæ‹¦æˆªå™¨çš„ postHandle(â€¦)æ–¹æ³•ã€é€†å‘ã€‘ã€‚</p></li><li><p>æ ¹æ®è¿”å›çš„ ModelAndViewï¼ˆæ­¤æ—¶ä¼šåˆ¤æ–­æ˜¯å¦å­˜åœ¨å¼‚å¸¸ï¼šå¦‚æœå­˜åœ¨å¼‚å¸¸ï¼Œåˆ™æ‰§è¡Œ HandlerExceptionResolver è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼‰é€‰æ‹©ä¸€ä¸ªé€‚åˆçš„ ViewResolver è¿›è¡Œè§†å›¾è§£æï¼Œæ ¹æ® Model å’Œ Viewï¼Œæ¥æ¸²æŸ“è§†å›¾ã€‚</p></li><li><p>æ¸²æŸ“è§†å›¾å®Œæ¯•æ‰§è¡Œæ‹¦æˆªå™¨çš„ afterCompletion(â€¦)æ–¹æ³•ã€é€†å‘ã€‘ã€‚</p></li><li><p>å°†æ¸²æŸ“ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
          <category> ç¼–ç¨‹ç¬”è®° </category>
          
          <category> Java </category>
          
          <category> SpringMVCç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> ç¼–ç¨‹ç¬”è®° </tag>
            
            <tag> MVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mybatisæ³¨è§£å¼€å‘</title>
      <link href="/posts/6e9321d6/"/>
      <url>/posts/6e9321d6/</url>
      
        <content type="html"><![CDATA[<h2 id="mybatis-çš„å¸¸ç”¨æ³¨è§£"><a class="markdownIt-Anchor" href="#mybatis-çš„å¸¸ç”¨æ³¨è§£"></a> mybatis çš„å¸¸ç”¨æ³¨è§£</h2><table><thead><tr><th style="text-align:center">æ³¨è§£</th><th style="text-align:center">è¯´æ˜<br/></th></tr></thead><tbody><tr><td style="text-align:center">@Insert</td><td style="text-align:center">å®ç°æ–°å¢<br/></td></tr><tr><td style="text-align:center">@Delete</td><td style="text-align:center">å®ç°åˆ é™¤<br/></td></tr><tr><td style="text-align:center">@Update</td><td style="text-align:center">å®ç°æ›´æ–°<br/></td></tr><tr><td style="text-align:center">@Select</td><td style="text-align:center">å®ç°æŸ¥è¯¢<br/></td></tr><tr><td style="text-align:center">@Result</td><td style="text-align:center">å®ç°ç»“æœé›†å°è£…<br/></td></tr><tr><td style="text-align:center">@Results</td><td style="text-align:center">å¯ä»¥ä¸@Result ä¸€èµ·ä½¿ç”¨ï¼Œå°è£…å¤šä¸ªç»“æœé›†<br/></td></tr><tr><td style="text-align:center">@ResultMap</td><td style="text-align:center">å®ç°å¼•ç”¨@Results å®šä¹‰çš„å°è£…<br/></td></tr><tr><td style="text-align:center">@One</td><td style="text-align:center">å®ç°ä¸€å¯¹ä¸€ç»“æœé›†å°è£…<br/></td></tr><tr><td style="text-align:center">@Many</td><td style="text-align:center">å®ç°ä¸€å¯¹å¤šç»“æœé›†å°è£…<br/></td></tr><tr><td style="text-align:center">@SelectProvider</td><td style="text-align:center">å®ç°åŠ¨æ€ SQL æ˜ å°„<br/></td></tr><tr><td style="text-align:center">@CacheNamespace</td><td style="text-align:center">å®ç°æ³¨è§£äºŒçº§ç¼“å­˜çš„ä½¿ç”¨<br/></td></tr></tbody></table><hr /><h2 id="ä½¿ç”¨-mybatis-æ³¨è§£å®ç°åŸºæœ¬-crud"><a class="markdownIt-Anchor" href="#ä½¿ç”¨-mybatis-æ³¨è§£å®ç°åŸºæœ¬-crud"></a> ä½¿ç”¨ Mybatis æ³¨è§£å®ç°åŸºæœ¬ CRUD</h2><h3 id="é¡¹ç›®ç›®å½•ç»“æ„"><a class="markdownIt-Anchor" href="#é¡¹ç›®ç›®å½•ç»“æ„"></a> é¡¹ç›®ç›®å½•ç»“æ„</h3><p><img src="https://img-blog.csdnimg.cn/20210217022346823.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg4MzkxNw==,size_16,color_FFFFFF,t_70" alt="" /></p><h3 id="ç¼–å†™å®ä½“ç±»"><a class="markdownIt-Anchor" href="#ç¼–å†™å®ä½“ç±»"></a> ç¼–å†™å®ä½“ç±»</h3><p><strong>Userï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keafmd.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Keafmd</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: User</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: Userå®ä½“ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-02-16 20:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSex</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSex</span><span class="params">(String sex)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getBirthday</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBirthday</span><span class="params">(Date birthday)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">            <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">            <span class="string">&quot;, username=&#x27;&quot;</span> + username + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&quot;, address=&#x27;&quot;</span> + address + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&quot;, sex=&#x27;&quot;</span> + sex + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&quot;, birthday=&quot;</span> + birthday +</span><br><span class="line">            <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ³¨è§£æ–¹å¼å¼€å‘æŒä¹…å±‚æ¥å£"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ³¨è§£æ–¹å¼å¼€å‘æŒä¹…å±‚æ¥å£"></a> ä½¿ç”¨æ³¨è§£æ–¹å¼å¼€å‘æŒä¹…å±‚æ¥å£</h3><p><strong>IUserDaoï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keafmd.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.keafmd.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Delete;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Insert;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Update;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Keafmd</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: IUserDao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-02-16 20:30</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åœ¨mybatisä¸­é’ˆå¯¹CRUDä¸€å…±æœ‰å››ä¸ªæ³¨è§£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Select</span> <span class="doctag">@Insert</span> <span class="doctag">@Update</span> <span class="doctag">@Delete</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿å­˜ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into user(username,address,sex,birthday)values(#&#123;username&#125;,#&#123;address&#125;,#&#123;sex&#125;,#&#123;birthday&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">saveUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Update(&quot;update user set username=#&#123;username&#125;,sex=#&#123;sex&#125;,birthday=#&#123;birthday&#125;,address=#&#123;address&#125; where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">updateUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userId</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from user where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteUser</span><span class="params">(Integer userId)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    User <span class="title function_">findById</span><span class="params">(Integer userId)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç”¨æˆ·åç§°æ¨¡ç³ŠæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//@Select(&quot;select * from user where username like #&#123;username&#125;&quot;) //å ä½ç¬¦</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where username like &#x27;%$&#123;value&#125;%&#x27;&quot;)</span>  <span class="comment">//å­—ç¬¦ä¸²æ‹¼æ¥</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findByName</span><span class="params">(String username)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æ€»æ•°é‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select count(*) from user&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">findTotal</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="tip home"><p>é€šè¿‡æ³¨è§£æ–¹å¼ï¼Œå°±ä¸éœ€è¦å†å»ç¼–å†™ UserDao.xml æ˜ å°„æ–‡ä»¶äº†ã€‚</p></div><h3 id="ç¼–å†™-sqlmapconfigxml-é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#ç¼–å†™-sqlmapconfigxml-é…ç½®æ–‡ä»¶"></a> ç¼–å†™ SqlMapConfig.xml é…ç½®æ–‡ä»¶</h3><p><strong>SqlMapConfig.xmlï¼š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">    <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">    <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;jdbcConfig.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®åˆ«å--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.keafmd.domain&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®ç¯å¢ƒ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;mysql&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æŒ‡å®šå¸¦æœ‰æ³¨è§£çš„daoæ¥å£æ‰€åœ¨ä½ç½®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.keafmd.dao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™æµ‹è¯•ä»£ç "><a class="markdownIt-Anchor" href="#ç¼–å†™æµ‹è¯•ä»£ç "></a> ç¼–å†™æµ‹è¯•ä»£ç </h3><p><strong>AnnotationCRUDTestï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keafmd.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.keafmd.dao.IUserDao;</span><br><span class="line"><span class="keyword">import</span> com.keafmd.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.After;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Keafmd</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: AnnotationCRUDTest</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: æ³¨è§£å¼€å‘CRUDæµ‹è¯•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-02-16 21:05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationCRUDTest</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> InputStream in;</span><br><span class="line">    <span class="keyword">private</span> SqlSessionFactory factory;</span><br><span class="line">    <span class="keyword">private</span> SqlSession session;</span><br><span class="line">    <span class="keyword">private</span> IUserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        in = Resources.getResourceAsStream(<span class="string">&quot;SqlMapConfig.xml&quot;</span>);</span><br><span class="line">        factory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(in);</span><br><span class="line">        session = factory.openSession();</span><br><span class="line">        userDao = session.getMapper(IUserDao.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destory</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        session.commit();</span><br><span class="line">        session.close();</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSave</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setUsername(<span class="string">&quot;mybatis annotation&quot;</span>);</span><br><span class="line">        user.setAddress(<span class="string">&quot;åŒ—äº¬&quot;</span>);</span><br><span class="line"></span><br><span class="line">        userDao.saveUser(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setId(<span class="number">55</span>);</span><br><span class="line">        user.setUsername(<span class="string">&quot;mybatis annotation&quot;</span>);</span><br><span class="line">        user.setAddress(<span class="string">&quot;åŒ—äº¬&quot;</span>);</span><br><span class="line">        user.setSex(<span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">        user.setBirthday(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line"></span><br><span class="line">        userDao.updateUser(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span>&#123;</span><br><span class="line">        userDao.deleteUser(<span class="number">54</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindOne</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.findById(<span class="number">55</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindByName</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//List&lt;User&gt; users = userDao.findByName(&quot;%Keafmd%&quot;);</span></span><br><span class="line">        List&lt;User&gt; users = userDao.findByName(<span class="string">&quot;Keafmd&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindTotal</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> userDao.findTotal();</span><br><span class="line">        System.out.println(total);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ³¨è§£å®ç°å¤æ‚å…³ç³»æ˜ å°„å¼€å‘"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ³¨è§£å®ç°å¤æ‚å…³ç³»æ˜ å°„å¼€å‘"></a> ä½¿ç”¨æ³¨è§£å®ç°å¤æ‚å…³ç³»æ˜ å°„å¼€å‘</h3><div class="tip "><p>å®ç°å¤æ‚å…³ç³»æ˜ å°„ä¹‹å‰æˆ‘ä»¬å¯ä»¥åœ¨æ˜ å°„æ–‡ä»¶ä¸­é€šè¿‡é…ç½®<code>&lt;resultMap&gt;</code>æ¥å®ç°ï¼Œåœ¨ä½¿ç”¨æ³¨è§£å¼€å‘æ—¶æˆ‘ä»¬éœ€è¦å€ŸåŠ©@Results æ³¨è§£ï¼Œ@Result æ³¨è§£ï¼Œ@One æ³¨è§£ï¼Œ@Many æ³¨è§£ã€‚</p></div><h3 id="å¤æ‚å…³ç³»æ˜ å°„çš„æ³¨è§£è¯´æ˜"><a class="markdownIt-Anchor" href="#å¤æ‚å…³ç³»æ˜ å°„çš„æ³¨è§£è¯´æ˜"></a> å¤æ‚å…³ç³»æ˜ å°„çš„æ³¨è§£è¯´æ˜</h3><blockquote><p><strong>@Results æ³¨è§£<br />ä»£æ›¿çš„æ˜¯æ ‡ç­¾<code>&lt;resultMap&gt;</code><br />è¯¥æ³¨è§£ä¸­å¯ä»¥ä½¿ç”¨å•ä¸ª@Result æ³¨è§£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨@Result é›†åˆ<br />@Resultsï¼ˆ{@Resultï¼ˆï¼‰ï¼Œ@Resultï¼ˆï¼‰}ï¼‰æˆ–@Resultsï¼ˆ@Resultï¼ˆï¼‰ï¼‰</strong></p></blockquote><blockquote><p><strong>@Resutl æ³¨è§£<br />ä»£æ›¿äº†<code>&lt;id&gt;</code> æ ‡ç­¾å’Œ<code>&lt;result&gt;</code>æ ‡ç­¾<br />@Result ä¸­çš„å±æ€§ä»‹ç»ï¼š</strong></p></blockquote><table><thead><tr><th>@Result ä¸­çš„å±æ€§</th><th>ä»‹ç»</th></tr></thead><tbody><tr><td>id</td><td>æ˜¯å¦æ˜¯ä¸»é”®å­—æ®µ</td></tr><tr><td>column</td><td>æ•°æ®åº“çš„åˆ—å</td></tr><tr><td>property</td><td>éœ€è¦è£…é…çš„å±æ€§å</td></tr><tr><td>one</td><td>éœ€è¦ä½¿ç”¨çš„@One æ³¨è§£ï¼ˆ@Resultï¼ˆone=@Oneï¼‰ï¼ˆï¼‰ï¼‰ï¼‰</td></tr><tr><td>many</td><td>éœ€è¦ä½¿ç”¨çš„@Many æ³¨è§£ï¼ˆ@Resultï¼ˆmany=@manyï¼‰ï¼ˆï¼‰ï¼‰ï¼‰</td></tr></tbody></table><blockquote><p>@One æ³¨è§£ï¼ˆä¸€å¯¹ä¸€ï¼‰<br />ä»£æ›¿äº†<assocation>æ ‡ç­¾ï¼Œæ˜¯å¤šè¡¨æŸ¥è¯¢çš„å…³é”®ï¼Œåœ¨æ³¨è§£ä¸­ç”¨æ¥æŒ‡å®šå­æŸ¥è¯¢è¿”å›å•ä¸€å¯¹è±¡ã€‚<br />@One æ³¨è§£å±æ€§ä»‹ç»ï¼š<br />select æŒ‡å®šç”¨æ¥å¤šè¡¨æŸ¥è¯¢çš„ sqlmapper<br />fetchType ä¼šè¦†ç›–å…¨å±€çš„é…ç½®å‚æ•° lazyLoadingEnabledã€‚<br />ä½¿ç”¨æ ¼å¼ï¼š@Result(column=&quot; â€œ,property=â€&quot;,one=@One(select=&quot;&quot;))</p></blockquote><blockquote><p>@Many æ³¨è§£ï¼ˆå¤šå¯¹ä¸€ï¼‰<br />ä»£æ›¿äº†<collection>æ ‡ç­¾,æ˜¯æ˜¯å¤šè¡¨æŸ¥è¯¢çš„å…³é”®ï¼Œåœ¨æ³¨è§£ä¸­ç”¨æ¥æŒ‡å®šå­æŸ¥è¯¢è¿”å›å¯¹è±¡é›†åˆã€‚<br />æ³¨æ„ï¼šèšé›†å…ƒç´ ç”¨æ¥å¤„ç†â€œä¸€å¯¹å¤šâ€çš„å…³ç³»ã€‚éœ€è¦æŒ‡å®šæ˜ å°„çš„ Java å®ä½“ç±»çš„å±æ€§ï¼Œå±æ€§çš„ javaTypeï¼ˆä¸€èˆ¬ä¸º ArrayListï¼‰ä½†æ˜¯æ³¨è§£ä¸­å¯ä»¥ä¸å®šä¹‰ã€‚<br />ä½¿ç”¨æ ¼å¼ï¼š@Result(property=&quot;&quot;,column=&quot;&quot;,many=@Many(select=&quot;&quot;))</p></blockquote><h2 id="é¡¹ç›®ç›®å½•"><a class="markdownIt-Anchor" href="#é¡¹ç›®ç›®å½•"></a> é¡¹ç›®ç›®å½•</h2><p><img src="https://img-blog.csdnimg.cn/20210217024602241.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg4MzkxNw==,size_16,color_FFFFFF,t_70" alt="" /></p><h2 id="ä½¿ç”¨æ³¨è§£å®ç°ä¸€å¯¹ä¸€å¤æ‚å…³ç³»æ˜ å°„åŠç«‹å³åŠ è½½"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ³¨è§£å®ç°ä¸€å¯¹ä¸€å¤æ‚å…³ç³»æ˜ å°„åŠç«‹å³åŠ è½½"></a> ä½¿ç”¨æ³¨è§£å®ç°ä¸€å¯¹ä¸€å¤æ‚å…³ç³»æ˜ å°„åŠç«‹å³åŠ è½½</h2><div class="tip "><p><strong>éœ€æ±‚ï¼šåŠ è½½è´¦æˆ·ä¿¡æ¯æ—¶å¹¶ä¸”åŠ è½½è¯¥è´¦æˆ·çš„ç”¨æˆ·ä¿¡æ¯ï¼Œæ ¹æ®æƒ…å†µå¯å®ç°ç«‹å³åŠ è½½ã€‚ï¼ˆæ³¨è§£æ–¹å¼å®ç°ï¼‰</strong></p></div><h3 id="æ·»åŠ -user-å®ä½“ç±»åŠ-account-å®ä½“ç±»"><a class="markdownIt-Anchor" href="#æ·»åŠ -user-å®ä½“ç±»åŠ-account-å®ä½“ç±»"></a> æ·»åŠ  User å®ä½“ç±»åŠ Account å®ä½“ç±»</h3><p><strong>Userï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keafmd.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Keafmd</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: User</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: Userå®ä½“ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-02-16 20:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer userId;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String userAddress;</span><br><span class="line">    <span class="keyword">private</span> String userSex;</span><br><span class="line">    <span class="keyword">private</span> Date userBirthday;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getUserId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserId</span><span class="params">(Integer userId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userId = userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUserName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserName</span><span class="params">(String userName)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUserAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userAddress;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserAddress</span><span class="params">(String userAddress)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userAddress = userAddress;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUserSex</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userSex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserSex</span><span class="params">(String userSex)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userSex = userSex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getUserBirthday</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userBirthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserBirthday</span><span class="params">(Date userBirthday)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userBirthday = userBirthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">            <span class="string">&quot;userId=&quot;</span> + userId +</span><br><span class="line">            <span class="string">&quot;, userName=&#x27;&quot;</span> + userName + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&quot;, userAddress=&#x27;&quot;</span> + userAddress + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&quot;, userSex=&#x27;&quot;</span> + userSex + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&quot;, userBirthday=&quot;</span> + userBirthday +</span><br><span class="line">            <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>Accountï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keafmd.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Keafmd</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: Account</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: è´¦æˆ·å®ä½“ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-02-16 22:51</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> Integer uid;</span><br><span class="line">    <span class="keyword">private</span> Double money;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¤šå¯¹ä¸€ï¼ˆmybatisä¸­ç§°ä¹‹ä¸ºä¸€å¯¹ä¸€ï¼‰çš„æ˜ å°„ï¼Œä¸€ä¸ªè´¦æˆ·åªèƒ½å±äºä¸€ä¸ªç”¨æˆ· *</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.user = user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getUid</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> uid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUid</span><span class="params">(Integer uid)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.uid = uid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getMoney</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMoney</span><span class="params">(Double money)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.money = money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Account&#123;&quot;</span> +</span><br><span class="line">            <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">            <span class="string">&quot;, uid=&quot;</span> + uid +</span><br><span class="line">            <span class="string">&quot;, money=&quot;</span> + money +</span><br><span class="line">            <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ è´¦æˆ·çš„æŒä¹…å±‚æ¥å£å¹¶ä½¿ç”¨æ³¨è§£é…ç½®"><a class="markdownIt-Anchor" href="#æ·»åŠ è´¦æˆ·çš„æŒä¹…å±‚æ¥å£å¹¶ä½¿ç”¨æ³¨è§£é…ç½®"></a> æ·»åŠ è´¦æˆ·çš„æŒä¹…å±‚æ¥å£å¹¶ä½¿ç”¨æ³¨è§£é…ç½®</h3><p><strong>IAccountDaoï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keafmd.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.keafmd.domain.Account;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.One;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Result;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Results;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.mapping.FetchType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Keafmd</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: IAccountDao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2021-02-16 22:54</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IAccountDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æ‰€æœ‰è´¦æˆ·ï¼Œå¹¶ä¸”è·å–æ¯ä¸ªè´¦æˆ·ä¸‹çš„ç”¨æˆ·ä¿¡æ¯,ä¸€å¯¹ä¸€</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from account&quot;)</span></span><br><span class="line">    <span class="meta">@Results(id=&quot;accountMap&quot;,value = &#123;</span></span><br><span class="line"><span class="meta">        @Result(id = true,column = &quot;id&quot;,property = &quot;id&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;uid&quot;,property = &quot;uid&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;money&quot;,property = &quot;money&quot;),</span></span><br><span class="line"><span class="meta">        @Result(property = &quot;user&quot;,column = &quot;uid&quot;,one=@One(select=&quot;com.keafmd.dao.IUserDao.findById&quot;,fetchType= FetchType.EAGER))</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    List&lt;Account&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ ç”¨æˆ·çš„æŒä¹…å±‚æ¥å£å¹¶ä½¿ç”¨æ³¨è§£é…ç½®"><a class="markdownIt-Anchor" href="#æ·»åŠ ç”¨æˆ·çš„æŒä¹…å±‚æ¥å£å¹¶ä½¿ç”¨æ³¨è§£é…ç½®"></a> æ·»åŠ ç”¨æˆ·çš„æŒä¹…å±‚æ¥å£å¹¶ä½¿ç”¨æ³¨è§£é…ç½®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keafmd.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.keafmd.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.mapping.FetchType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Keafmd</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: IUserDao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-02-16 20:30</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åœ¨mybatisä¸­é’ˆå¯¹CRUDä¸€å…±æœ‰å››ä¸ªæ³¨è§£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Select</span> <span class="doctag">@Insert</span> <span class="doctag">@Update</span> <span class="doctag">@Delete</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line">    <span class="meta">@Results(id=&quot;userMap&quot;,value=&#123;</span></span><br><span class="line"><span class="meta">        @Result(id = true,column = &quot;id&quot;,property = &quot;userId&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;id&quot;,property = &quot;userId&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;username&quot;,property = &quot;userName&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;sex&quot;,property = &quot;userSex&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;birthday&quot;,property = &quot;userBirthday&quot;)</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="comment">//@ResultMap(value=&#123;&quot;userMap&quot;&#125;)</span></span><br><span class="line">    <span class="meta">@ResultMap(&quot;userMap&quot;)</span></span><br><span class="line">    User <span class="title function_">findById</span><span class="params">(Integer userId)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç”¨æˆ·åç§°æ¨¡ç³ŠæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where username like #&#123;username&#125;&quot;)</span> <span class="comment">//å ä½ç¬¦</span></span><br><span class="line">    <span class="meta">@ResultMap(&quot;userMap&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findByName</span><span class="params">(String username)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•ä¸€å¯¹ä¸€å…³è”åŠç«‹å³åŠ è½½"><a class="markdownIt-Anchor" href="#æµ‹è¯•ä¸€å¯¹ä¸€å…³è”åŠç«‹å³åŠ è½½"></a> æµ‹è¯•ä¸€å¯¹ä¸€å…³è”åŠç«‹å³åŠ è½½</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keafmd.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.keafmd.dao.IAccountDao;</span><br><span class="line"><span class="keyword">import</span> com.keafmd.dao.IUserDao;</span><br><span class="line"><span class="keyword">import</span> com.keafmd.domain.Account;</span><br><span class="line"><span class="keyword">import</span> com.keafmd.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.After;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Keafmd</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: AnnotationCRUDTest</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: æ³¨è§£å¼€å‘CRUDæµ‹è¯•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-02-16 21:05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountTest</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> InputStream in;</span><br><span class="line">    <span class="keyword">private</span> SqlSessionFactory factory;</span><br><span class="line">    <span class="keyword">private</span> SqlSession session;</span><br><span class="line">    <span class="keyword">private</span> IAccountDao accountDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        in = Resources.getResourceAsStream(<span class="string">&quot;SqlMapConfig.xml&quot;</span>);</span><br><span class="line">        factory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(in);</span><br><span class="line">        session = factory.openSession();</span><br><span class="line">        accountDao = session.getMapper(IAccountDao.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destory</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        session.commit();</span><br><span class="line">        session.close();</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Account&gt; accounts = accountDao.findAll();</span><br><span class="line">        <span class="keyword">for</span> (Account account : accounts) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;-----æ¯ä¸ªè´¦æˆ·ä¿¡æ¯-----&quot;</span>);</span><br><span class="line">            System.out.println(account);</span><br><span class="line">            System.out.println(account.getUser());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>è¿è¡Œç»“æœï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">2021-02-17 03:04:39,939 163    [           main] DEBUG ansaction.jdbc.JdbcTransaction  - Opening JDBC Connection</span><br><span class="line">2021-02-17 03:04:40,190 414    [           main] DEBUG source.pooled.PooledDataSource  - Created connection 1176735295.</span><br><span class="line">2021-02-17 03:04:40,190 414    [           main] DEBUG ansaction.jdbc.JdbcTransaction  - Setting autocommit to false on JDBC Connection [com.mysql.jdbc.JDBC4Connection@46238e3f]</span><br><span class="line">2021-02-17 03:04:40,195 419    [           main] DEBUG keafmd.dao.IAccountDao.findAll  - ==&gt;  Preparing: select * from account</span><br><span class="line">2021-02-17 03:04:40,226 450    [           main] DEBUG keafmd.dao.IAccountDao.findAll  - ==&gt; Parameters:</span><br><span class="line">2021-02-17 03:04:40,267 491    [           main] DEBUG m.keafmd.dao.IUserDao.findById  - ====&gt;  Preparing: select * from user where id=?</span><br><span class="line">2021-02-17 03:04:40,268 492    [           main] DEBUG m.keafmd.dao.IUserDao.findById  - ====&gt; Parameters: 41(Integer)</span><br><span class="line">2021-02-17 03:04:40,270 494    [           main] DEBUG m.keafmd.dao.IUserDao.findById  - &lt;====      Total: 1</span><br><span class="line">2021-02-17 03:04:40,271 495    [           main] DEBUG m.keafmd.dao.IUserDao.findById  - ====&gt;  Preparing: select * from user where id=?</span><br><span class="line">2021-02-17 03:04:40,271 495    [           main] DEBUG m.keafmd.dao.IUserDao.findById  - ====&gt; Parameters: 45(Integer)</span><br><span class="line">2021-02-17 03:04:40,272 496    [           main] DEBUG m.keafmd.dao.IUserDao.findById  - &lt;====      Total: 1</span><br><span class="line">2021-02-17 03:04:40,273 497    [           main] DEBUG keafmd.dao.IAccountDao.findAll  - &lt;==      Total: 3</span><br><span class="line">-----æ¯ä¸ªè´¦æˆ·ä¿¡æ¯-----</span><br><span class="line">Account&#123;id=1, uid=41, money=1000.0&#125;</span><br><span class="line">User&#123;userId=41, userName=&#x27;update user clear cache&#x27;, userAddress=&#x27;null&#x27;, userSex=&#x27;ç”·&#x27;, userBirthday=Tue Feb 27 17:47:08 CST 2018&#125;</span><br><span class="line">-----æ¯ä¸ªè´¦æˆ·ä¿¡æ¯-----</span><br><span class="line">Account&#123;id=2, uid=45, money=1000.0&#125;</span><br><span class="line">User&#123;userId=45, userName=&#x27;æ–°ä¸€&#x27;, userAddress=&#x27;null&#x27;, userSex=&#x27;ç”·&#x27;, userBirthday=Sun Mar 04 12:04:06 CST 2018&#125;</span><br><span class="line">-----æ¯ä¸ªè´¦æˆ·ä¿¡æ¯-----</span><br><span class="line">Account&#123;id=3, uid=41, money=2000.0&#125;</span><br><span class="line">User&#123;userId=41, userName=&#x27;update user clear cache&#x27;, userAddress=&#x27;null&#x27;, userSex=&#x27;ç”·&#x27;, userBirthday=Tue Feb 27 17:47:08 CST 2018&#125;</span><br><span class="line">2021-02-17 03:04:40,274 498    [           main] DEBUG ansaction.jdbc.JdbcTransaction  - Resetting autocommit to true on JDBC Connection [com.mysql.jdbc.JDBC4Connection@46238e3f]</span><br><span class="line">2021-02-17 03:04:40,274 498    [           main] DEBUG ansaction.jdbc.JdbcTransaction  - Closing JDBC Connection [com.mysql.jdbc.JDBC4Connection@46238e3f]</span><br><span class="line">2021-02-17 03:04:40,274 498    [           main] DEBUG source.pooled.PooledDataSource  - Returned connection 1176735295 to pool.</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨æ³¨è§£å®ç°ä¸€å¯¹å¤šå¤æ‚å…³ç³»æ˜ å°„åŠå»¶è¿ŸåŠ è½½"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ³¨è§£å®ç°ä¸€å¯¹å¤šå¤æ‚å…³ç³»æ˜ å°„åŠå»¶è¿ŸåŠ è½½"></a> ä½¿ç”¨æ³¨è§£å®ç°ä¸€å¯¹å¤šå¤æ‚å…³ç³»æ˜ å°„åŠå»¶è¿ŸåŠ è½½</h2><blockquote><p><strong>éœ€æ±‚ï¼šæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æ—¶ï¼Œä¹Ÿè¦æŸ¥è¯¢ä»–çš„è´¦æˆ·åˆ—è¡¨ã€‚ä½¿ç”¨æ³¨è§£æ–¹å¼å®ç°ã€‚<br />åˆ†æï¼šä¸€ä¸ªç”¨æˆ·å…·æœ‰å¤šä¸ªè´¦æˆ·ä¿¡æ¯ï¼Œæ‰€ä»¥å½¢æˆäº†ç”¨æˆ·(User)ä¸è´¦æˆ·(Account)ä¹‹é—´çš„ä¸€å¯¹å¤šå…³ç³»ã€‚</strong></p></blockquote><h3 id="user-å®ä½“ç±»åŠ å…¥-listaccount"><a class="markdownIt-Anchor" href="#user-å®ä½“ç±»åŠ å…¥-listaccount"></a> User å®ä½“ç±»åŠ å…¥ List<code>&lt;Account&gt;</code></h3><p><strong>Userï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keafmd.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Keafmd</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: User</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: Userå®ä½“ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2021-02-16 20:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer userId;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String userAddress;</span><br><span class="line">    <span class="keyword">private</span> String userSex;</span><br><span class="line">    <span class="keyword">private</span> Date userBirthday;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸€å¯¹å¤šå…³ç³»æ˜ å°„ï¼šä¸€ä¸ªç”¨æˆ·å¯¹åº”å¤šä¸ªè´¦æˆ·</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Account&gt; accounts;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Account&gt; <span class="title function_">getAccounts</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> accounts;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAccounts</span><span class="params">(List&lt;Account&gt; accounts)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.accounts = accounts;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getUserId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserId</span><span class="params">(Integer userId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userId = userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUserName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserName</span><span class="params">(String userName)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUserAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userAddress;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserAddress</span><span class="params">(String userAddress)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userAddress = userAddress;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUserSex</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userSex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserSex</span><span class="params">(String userSex)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userSex = userSex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getUserBirthday</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userBirthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserBirthday</span><span class="params">(Date userBirthday)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userBirthday = userBirthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">            <span class="string">&quot;userId=&quot;</span> + userId +</span><br><span class="line">            <span class="string">&quot;, userName=&#x27;&quot;</span> + userName + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&quot;, userAddress=&#x27;&quot;</span> + userAddress + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&quot;, userSex=&#x27;&quot;</span> + userSex + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&quot;, userBirthday=&quot;</span> + userBirthday +</span><br><span class="line">            <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™ç”¨æˆ·çš„æŒä¹…å±‚æ¥å£å¹¶ä½¿ç”¨æ³¨è§£é…ç½®"><a class="markdownIt-Anchor" href="#ç¼–å†™ç”¨æˆ·çš„æŒä¹…å±‚æ¥å£å¹¶ä½¿ç”¨æ³¨è§£é…ç½®"></a> ç¼–å†™ç”¨æˆ·çš„æŒä¹…å±‚æ¥å£å¹¶ä½¿ç”¨æ³¨è§£é…ç½®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keafmd.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.keafmd.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.mapping.FetchType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Keafmd</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: IUserDao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2021-02-16 20:30</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åœ¨mybatisä¸­é’ˆå¯¹CRUDä¸€å…±æœ‰å››ä¸ªæ³¨è§£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Select</span> <span class="doctag">@Insert</span> <span class="doctag">@Update</span> <span class="doctag">@Delete</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line">    <span class="meta">@Results(id=&quot;userMap&quot;,value=&#123;</span></span><br><span class="line"><span class="meta">        @Result(id = true,column = &quot;id&quot;,property = &quot;userId&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;id&quot;,property = &quot;userId&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;username&quot;,property = &quot;userName&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;sex&quot;,property = &quot;userSex&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;birthday&quot;,property = &quot;userBirthday&quot;),</span></span><br><span class="line"><span class="meta">        @Result(property = &quot;accounts&quot; ,column = &quot;id&quot;,</span></span><br><span class="line"><span class="meta">                many = @Many(select = &quot;com.keafmd.dao.IAccountDao.findAccountByUid&quot;,</span></span><br><span class="line"><span class="meta">                             fetchType = FetchType.LAZY))</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="comment">//@ResultMap(value=&#123;&quot;userMap&quot;&#125;)</span></span><br><span class="line">    <span class="meta">@ResultMap(&quot;userMap&quot;)</span></span><br><span class="line">    User <span class="title function_">findById</span><span class="params">(Integer userId)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç”¨æˆ·åç§°æ¨¡ç³ŠæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where username like #&#123;username&#125;&quot;)</span> <span class="comment">//å ä½ç¬¦</span></span><br><span class="line">    <span class="meta">@ResultMap(&quot;userMap&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findByName</span><span class="params">(String username)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™è´¦æˆ·çš„æŒä¹…å±‚æ¥å£å¹¶ä½¿ç”¨æ³¨è§£é…ç½®"><a class="markdownIt-Anchor" href="#ç¼–å†™è´¦æˆ·çš„æŒä¹…å±‚æ¥å£å¹¶ä½¿ç”¨æ³¨è§£é…ç½®"></a> ç¼–å†™è´¦æˆ·çš„æŒä¹…å±‚æ¥å£å¹¶ä½¿ç”¨æ³¨è§£é…ç½®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keafmd.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.keafmd.domain.Account;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.One;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Result;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Results;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.mapping.FetchType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Keafmd</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: IAccountDao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2021-02-16 22:54</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IAccountDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æ‰€æœ‰è´¦æˆ·ï¼Œå¹¶ä¸”è·å–æ¯ä¸ªè´¦æˆ·ä¸‹çš„ç”¨æˆ·ä¿¡æ¯,ä¸€å¯¹ä¸€ ï¼Œ* è¿™é‡Œç”¨ä¸åˆ°è¿™ä¸ªfindAll()</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from account&quot;)</span></span><br><span class="line">    <span class="meta">@Results(id=&quot;accountMap&quot;,value = &#123;</span></span><br><span class="line"><span class="meta">        @Result(id = true,column = &quot;id&quot;,property = &quot;id&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;uid&quot;,property = &quot;uid&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;money&quot;,property = &quot;money&quot;),</span></span><br><span class="line"><span class="meta">        @Result(property = &quot;user&quot;,column = &quot;uid&quot;,one=@One(select=&quot;com.keafmd.dao.IUserDao.findById&quot;,fetchType= FetchType.EAGER))</span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    List&lt;Account&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢è´¦æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from account where uid = #&#123;userId&#125;&quot;)</span></span><br><span class="line">    List&lt;Account&gt; <span class="title function_">findAccountByUid</span><span class="params">(Integer userId)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™æµ‹è¯•ä»£ç -2"><a class="markdownIt-Anchor" href="#ç¼–å†™æµ‹è¯•ä»£ç -2"></a> ç¼–å†™æµ‹è¯•ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keafmd.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.keafmd.dao.IUserDao;</span><br><span class="line"><span class="keyword">import</span> com.keafmd.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.After;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Keafmd</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: AnnotationCRUDTest</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: æ³¨è§£å¼€å‘CRUDæµ‹è¯•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2021-02-16 21:05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserTest</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> InputStream in;</span><br><span class="line">    <span class="keyword">private</span> SqlSessionFactory factory;</span><br><span class="line">    <span class="keyword">private</span> SqlSession session;</span><br><span class="line">    <span class="keyword">private</span> IUserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        in = Resources.getResourceAsStream(<span class="string">&quot;SqlMapConfig.xml&quot;</span>);</span><br><span class="line">        factory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(in);</span><br><span class="line">        session = factory.openSession();</span><br><span class="line">        userDao = session.getMapper(IUserDao.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destory</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        session.commit();</span><br><span class="line">        session.close();</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindAll</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;User&gt; users = userDao.findAll();</span><br><span class="line">        <span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;-----æ¯ä¸ªç”¨æˆ·çš„ä¿¡æ¯&quot;</span>);</span><br><span class="line">            System.out.println(user);</span><br><span class="line">            System.out.println(user.getAccounts());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>è¿è¡Œ testFindAll()çš„ç»“æœï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">2021-02-17 03:14:19,655 378    [           main] DEBUG ansaction.jdbc.JdbcTransaction  - Opening JDBC Connection</span><br><span class="line">2021-02-17 03:14:20,124 847    [           main] DEBUG source.pooled.PooledDataSource  - Created connection 1176735295.</span><br><span class="line">2021-02-17 03:14:20,124 847    [           main] DEBUG ansaction.jdbc.JdbcTransaction  - Setting autocommit to false on JDBC Connection [com.mysql.jdbc.JDBC4Connection@46238e3f]</span><br><span class="line">2021-02-17 03:14:20,135 858    [           main] DEBUG om.keafmd.dao.IUserDao.findAll  - ==&gt;  Preparing: select * from user</span><br><span class="line">2021-02-17 03:14:20,183 906    [           main] DEBUG om.keafmd.dao.IUserDao.findAll  - ==&gt; Parameters:</span><br><span class="line">2021-02-17 03:14:20,471 1194   [           main] DEBUG om.keafmd.dao.IUserDao.findAll  - &lt;==      Total: 9</span><br><span class="line">-----æ¯ä¸ªç”¨æˆ·çš„ä¿¡æ¯</span><br><span class="line">2021-02-17 03:14:20,473 1196   [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt;  Preparing: select * from account where uid = ?</span><br><span class="line">2021-02-17 03:14:20,474 1197   [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt; Parameters: 41(Integer)</span><br><span class="line">2021-02-17 03:14:20,475 1198   [           main] DEBUG o.IAccountDao.findAccountByUid  - &lt;==      Total: 2</span><br><span class="line">User&#123;userId=41, userName=&#x27;update user clear cache&#x27;, userAddress=&#x27;null&#x27;, userSex=&#x27;ç”·&#x27;, userBirthday=Tue Feb 27 17:47:08 CST 2018&#125;</span><br><span class="line">[Account&#123;id=1, uid=41, money=1000.0&#125;, Account&#123;id=3, uid=41, money=2000.0&#125;]</span><br><span class="line">-----æ¯ä¸ªç”¨æˆ·çš„ä¿¡æ¯</span><br><span class="line">2021-02-17 03:14:20,476 1199   [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt;  Preparing: select * from account where uid = ?</span><br><span class="line">2021-02-17 03:14:20,476 1199   [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt; Parameters: 42(Integer)</span><br><span class="line">2021-02-17 03:14:20,477 1200   [           main] DEBUG o.IAccountDao.findAccountByUid  - &lt;==      Total: 0</span><br><span class="line">User&#123;userId=42, userName=&#x27;update&#x27;, userAddress=&#x27;null&#x27;, userSex=&#x27;ç”·&#x27;, userBirthday=Mon Feb 08 19:37:31 CST 2021&#125;</span><br><span class="line">[]</span><br><span class="line">-----æ¯ä¸ªç”¨æˆ·çš„ä¿¡æ¯</span><br><span class="line">2021-02-17 03:14:20,479 1202   [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt;  Preparing: select * from account where uid = ?</span><br><span class="line">2021-02-17 03:14:20,480 1203   [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt; Parameters: 43(Integer)</span><br><span class="line">2021-02-17 03:14:20,481 1204   [           main] DEBUG o.IAccountDao.findAccountByUid  - &lt;==      Total: 0</span><br><span class="line">User&#123;userId=43, userName=&#x27;å°äºŒç‹&#x27;, userAddress=&#x27;null&#x27;, userSex=&#x27;å¥³&#x27;, userBirthday=Sun Mar 04 11:34:34 CST 2018&#125;</span><br><span class="line">[]</span><br><span class="line">-----æ¯ä¸ªç”¨æˆ·çš„ä¿¡æ¯</span><br><span class="line">2021-02-17 03:14:20,481 1204   [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt;  Preparing: select * from account where uid = ?</span><br><span class="line">2021-02-17 03:14:20,482 1205   [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt; Parameters: 45(Integer)</span><br><span class="line">2021-02-17 03:14:20,483 1206   [           main] DEBUG o.IAccountDao.findAccountByUid  - &lt;==      Total: 1</span><br><span class="line">User&#123;userId=45, userName=&#x27;æ–°ä¸€&#x27;, userAddress=&#x27;null&#x27;, userSex=&#x27;ç”·&#x27;, userBirthday=Sun Mar 04 12:04:06 CST 2018&#125;</span><br><span class="line">[Account&#123;id=2, uid=45, money=1000.0&#125;]</span><br><span class="line">-----æ¯ä¸ªç”¨æˆ·çš„ä¿¡æ¯</span><br><span class="line">2021-02-17 03:14:20,484 1207   [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt;  Preparing: select * from account where uid = ?</span><br><span class="line">2021-02-17 03:14:20,484 1207   [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt; Parameters: 50(Integer)</span><br><span class="line">2021-02-17 03:14:20,484 1207   [           main] DEBUG o.IAccountDao.findAccountByUid  - &lt;==      Total: 0</span><br><span class="line">User&#123;userId=50, userName=&#x27;Keafmd&#x27;, userAddress=&#x27;null&#x27;, userSex=&#x27;ç”·&#x27;, userBirthday=Mon Feb 08 15:44:01 CST 2021&#125;</span><br><span class="line">[]</span><br><span class="line">-----æ¯ä¸ªç”¨æˆ·çš„ä¿¡æ¯</span><br><span class="line">2021-02-17 03:14:20,485 1208   [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt;  Preparing: select * from account where uid = ?</span><br><span class="line">2021-02-17 03:14:20,485 1208   [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt; Parameters: 51(Integer)</span><br><span class="line">2021-02-17 03:14:20,486 1209   [           main] DEBUG o.IAccountDao.findAccountByUid  - &lt;==      Total: 0</span><br><span class="line">User&#123;userId=51, userName=&#x27;update DAO&#x27;, userAddress=&#x27;null&#x27;, userSex=&#x27;ç”·&#x27;, userBirthday=Tue Feb 09 11:31:38 CST 2021&#125;</span><br><span class="line">[]</span><br><span class="line">-----æ¯ä¸ªç”¨æˆ·çš„ä¿¡æ¯</span><br><span class="line">2021-02-17 03:14:20,488 1211   [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt;  Preparing: select * from account where uid = ?</span><br><span class="line">2021-02-17 03:14:20,489 1212   [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt; Parameters: 52(Integer)</span><br><span class="line">2021-02-17 03:14:20,491 1214   [           main] DEBUG o.IAccountDao.findAccountByUid  - &lt;==      Total: 0</span><br><span class="line">User&#123;userId=52, userName=&#x27;Keafmd DAO&#x27;, userAddress=&#x27;null&#x27;, userSex=&#x27;ç”·&#x27;, userBirthday=Tue Feb 09 11:29:41 CST 2021&#125;</span><br><span class="line">[]</span><br><span class="line">-----æ¯ä¸ªç”¨æˆ·çš„ä¿¡æ¯</span><br><span class="line">2021-02-17 03:14:20,491 1214   [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt;  Preparing: select * from account where uid = ?</span><br><span class="line">2021-02-17 03:14:20,492 1215   [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt; Parameters: 53(Integer)</span><br><span class="line">2021-02-17 03:14:20,493 1216   [           main] DEBUG o.IAccountDao.findAccountByUid  - &lt;==      Total: 0</span><br><span class="line">User&#123;userId=53, userName=&#x27;Keafmd laset insertid 1&#x27;, userAddress=&#x27;null&#x27;, userSex=&#x27;ç”·&#x27;, userBirthday=Fri Feb 12 20:53:46 CST 2021&#125;</span><br><span class="line">[]</span><br><span class="line">-----æ¯ä¸ªç”¨æˆ·çš„ä¿¡æ¯</span><br><span class="line">2021-02-17 03:14:20,493 1216   [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt;  Preparing: select * from account where uid = ?</span><br><span class="line">2021-02-17 03:14:20,493 1216   [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt; Parameters: 55(Integer)</span><br><span class="line">2021-02-17 03:14:20,494 1217   [           main] DEBUG o.IAccountDao.findAccountByUid  - &lt;==      Total: 0</span><br><span class="line">User&#123;userId=55, userName=&#x27;mybatis annotation&#x27;, userAddress=&#x27;null&#x27;, userSex=&#x27;ç”·&#x27;, userBirthday=Tue Feb 16 22:15:36 CST 2021&#125;</span><br><span class="line">[]</span><br><span class="line">2021-02-17 03:14:20,495 1218   [           main] DEBUG ansaction.jdbc.JdbcTransaction  - Resetting autocommit to true on JDBC Connection [com.mysql.jdbc.JDBC4Connection@46238e3f]</span><br><span class="line">2021-02-17 03:14:20,495 1218   [           main] DEBUG ansaction.jdbc.JdbcTransaction  - Closing JDBC Connection [com.mysql.jdbc.JDBC4Connection@46238e3f]</span><br><span class="line">2021-02-17 03:14:20,495 1218   [           main] DEBUG source.pooled.PooledDataSource  - Returned connection 1176735295 to pool.</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p><strong>å¯ä»¥çœ‹å‡ºæ¥å»¶è¿ŸåŠ è½½ï¼Œåœ¨æ¯æ¬¡åŠ è½½æ¯ä¸ªç”¨æˆ·æ—¶éƒ½ä¼šæŸ¥è¯¢ä¸€æ¬¡ã€‚</strong></p></blockquote><p><strong>ä¿®æ”¹æµ‹è¯•ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindAll</span><span class="params">()</span>&#123;</span><br><span class="line">    List&lt;User&gt; users = userDao.findAll();</span><br><span class="line">    <span class="comment">/*for (User user : users) &#123;</span></span><br><span class="line"><span class="comment">        System.out.println(&quot;-----æ¯ä¸ªç”¨æˆ·çš„ä¿¡æ¯&quot;);</span></span><br><span class="line"><span class="comment">        System.out.println(user);</span></span><br><span class="line"><span class="comment">        System.out.println(user.getAccounts());</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¿è¡Œç»“æœï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">2021-02-17 03:17:26,203 166    [           main] DEBUG ansaction.jdbc.JdbcTransaction  - Opening JDBC Connection</span><br><span class="line">2021-02-17 03:17:26,500 463    [           main] DEBUG source.pooled.PooledDataSource  - Created connection 1176735295.</span><br><span class="line">2021-02-17 03:17:26,500 463    [           main] DEBUG ansaction.jdbc.JdbcTransaction  - Setting autocommit to false on JDBC Connection [com.mysql.jdbc.JDBC4Connection@46238e3f]</span><br><span class="line">2021-02-17 03:17:26,505 468    [           main] DEBUG om.keafmd.dao.IUserDao.findAll  - ==&gt;  Preparing: select * from user</span><br><span class="line">2021-02-17 03:17:26,540 503    [           main] DEBUG om.keafmd.dao.IUserDao.findAll  - ==&gt; Parameters:</span><br><span class="line">2021-02-17 03:17:26,613 576    [           main] DEBUG om.keafmd.dao.IUserDao.findAll  - &lt;==      Total: 9</span><br><span class="line">2021-02-17 03:17:26,614 577    [           main] DEBUG ansaction.jdbc.JdbcTransaction  - Resetting autocommit to true on JDBC Connection [com.mysql.jdbc.JDBC4Connection@46238e3f]</span><br><span class="line">2021-02-17 03:17:26,614 577    [           main] DEBUG ansaction.jdbc.JdbcTransaction  - Closing JDBC Connection [com.mysql.jdbc.JDBC4Connection@46238e3f]</span><br><span class="line">2021-02-17 03:17:26,614 577    [           main] DEBUG source.pooled.PooledDataSource  - Returned connection 1176735295 to pool.</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p><strong>è¿™æ ·é€šè¿‡å¯¹æ¯”å°±å¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹å‡ºæ¥å»¶è¿ŸåŠ è½½çš„æ•ˆæœã€‚</strong></p></blockquote><h2 id="å›é¡¾ä¸‹ä¸€çº§ç¼“å­˜"><a class="markdownIt-Anchor" href="#å›é¡¾ä¸‹ä¸€çº§ç¼“å­˜"></a> å›é¡¾ä¸‹ä¸€çº§ç¼“å­˜</h2><p><strong>è¿è¡Œä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindOne</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.findById(<span class="number">55</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line"></span><br><span class="line">    <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> userDao.findById(<span class="number">55</span>);</span><br><span class="line">    System.out.println(user2);</span><br><span class="line"></span><br><span class="line">    System.out.println(user==user2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">2021-02-17 03:26:22,736 164    [           main] DEBUG ansaction.jdbc.JdbcTransaction  - Opening JDBC Connection</span><br><span class="line">2021-02-17 03:26:22,970 398    [           main] DEBUG source.pooled.PooledDataSource  - Created connection 85445963.</span><br><span class="line">2021-02-17 03:26:22,971 399    [           main] DEBUG ansaction.jdbc.JdbcTransaction  - Setting autocommit to false on JDBC Connection [com.mysql.jdbc.JDBC4Connection@517cd4b]</span><br><span class="line">2021-02-17 03:26:22,975 403    [           main] DEBUG m.keafmd.dao.IUserDao.findById  - ==&gt;  Preparing: select * from user where id=?</span><br><span class="line">2021-02-17 03:26:23,001 429    [           main] DEBUG m.keafmd.dao.IUserDao.findById  - ==&gt; Parameters: 55(Integer)</span><br><span class="line">2021-02-17 03:26:23,054 482    [           main] DEBUG m.keafmd.dao.IUserDao.findById  - &lt;==      Total: 1</span><br><span class="line">2021-02-17 03:26:23,055 483    [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt;  Preparing: select * from account where uid = ?</span><br><span class="line">2021-02-17 03:26:23,055 483    [           main] DEBUG o.IAccountDao.findAccountByUid  - ==&gt; Parameters: 55(Integer)</span><br><span class="line">2021-02-17 03:26:23,056 484    [           main] DEBUG o.IAccountDao.findAccountByUid  - &lt;==      Total: 0</span><br><span class="line">User&#123;userId=55, userName=&#x27;mybatis annotation&#x27;, userAddress=&#x27;null&#x27;, userSex=&#x27;ç”·&#x27;, userBirthday=Tue Feb 16 22:15:36 CST 2021&#125;</span><br><span class="line">User&#123;userId=55, userName=&#x27;mybatis annotation&#x27;, userAddress=&#x27;null&#x27;, userSex=&#x27;ç”·&#x27;, userBirthday=Tue Feb 16 22:15:36 CST 2021&#125;</span><br><span class="line">true</span><br><span class="line">2021-02-17 03:26:23,056 484    [           main] DEBUG ansaction.jdbc.JdbcTransaction  - Resetting autocommit to true on JDBC Connection [com.mysql.jdbc.JDBC4Connection@517cd4b]</span><br><span class="line">2021-02-17 03:26:23,056 484    [           main] DEBUG ansaction.jdbc.JdbcTransaction  - Closing JDBC Connection [com.mysql.jdbc.JDBC4Connection@517cd4b]</span><br><span class="line">2021-02-17 03:26:23,057 485    [           main] DEBUG source.pooled.PooledDataSource  - Returned connection 85445963 to pool.</span><br></pre></td></tr></table></figure><h2 id="mybatis-åŸºäºæ³¨è§£çš„äºŒçº§ç¼“å­˜"><a class="markdownIt-Anchor" href="#mybatis-åŸºäºæ³¨è§£çš„äºŒçº§ç¼“å­˜"></a> mybatis åŸºäºæ³¨è§£çš„äºŒçº§ç¼“å­˜</h2><h3 id="åœ¨-sqlmapconfigxml-ä¸­å¼€å¯äºŒçº§ç¼“å­˜æ”¯æŒ"><a class="markdownIt-Anchor" href="#åœ¨-sqlmapconfigxml-ä¸­å¼€å¯äºŒçº§ç¼“å­˜æ”¯æŒ"></a> åœ¨ SqlMapConfig.xml ä¸­å¼€å¯äºŒçº§ç¼“å­˜æ”¯æŒ</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®å¼€å¯äºŒçº§ç¼“å­˜--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="åœ¨æŒä¹…å±‚æ¥å£ä¸­ä½¿ç”¨æ³¨è§£é…ç½®äºŒçº§ç¼“å­˜"><a class="markdownIt-Anchor" href="#åœ¨æŒä¹…å±‚æ¥å£ä¸­ä½¿ç”¨æ³¨è§£é…ç½®äºŒçº§ç¼“å­˜"></a> åœ¨æŒä¹…å±‚æ¥å£ä¸­ä½¿ç”¨æ³¨è§£é…ç½®äºŒçº§ç¼“å­˜</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keafmd.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.keafmd.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.mapping.FetchType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Keafmd</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: IUserDao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2021-02-16 20:30</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åœ¨mybatisä¸­é’ˆå¯¹CRUDä¸€å…±æœ‰å››ä¸ªæ³¨è§£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Select</span> <span class="doctag">@Insert</span> <span class="doctag">@Update</span> <span class="doctag">@Delete</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@CacheNamespace(blocking = true)</span> <span class="comment">//mybatis åŸºäºæ³¨è§£æ–¹å¼å®ç°é…ç½®äºŒçº§ç¼“å­˜ *è¿™é‡Œ*</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line">    <span class="meta">@Results(id=&quot;userMap&quot;,value=&#123;</span></span><br><span class="line"><span class="meta">        @Result(id = true,column = &quot;id&quot;,property = &quot;userId&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;id&quot;,property = &quot;userId&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;username&quot;,property = &quot;userName&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;sex&quot;,property = &quot;userSex&quot;),</span></span><br><span class="line"><span class="meta">        @Result(column = &quot;birthday&quot;,property = &quot;userBirthday&quot;),</span></span><br><span class="line"><span class="meta">        @Result(property = &quot;accounts&quot; ,column = &quot;id&quot;,</span></span><br><span class="line"><span class="meta">                many = @Many(select = &quot;com.keafmd.dao.IAccountDao.findAccountByUid&quot;,</span></span><br><span class="line"><span class="meta">                             fetchType = FetchType.LAZY))</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">    &#125;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="comment">//@ResultMap(value=&#123;&quot;userMap&quot;&#125;)</span></span><br><span class="line">    <span class="meta">@ResultMap(&quot;userMap&quot;)</span></span><br><span class="line">    User <span class="title function_">findById</span><span class="params">(Integer userId)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç”¨æˆ·åç§°æ¨¡ç³ŠæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where username like #&#123;username&#125;&quot;)</span> <span class="comment">//å ä½ç¬¦</span></span><br><span class="line">    <span class="meta">@ResultMap(&quot;userMap&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findByName</span><span class="params">(String username)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç¼–å†™æµ‹è¯•äºŒçº§ç¼“å­˜çš„æµ‹è¯•ç±»"><a class="markdownIt-Anchor" href="#ç¼–å†™æµ‹è¯•äºŒçº§ç¼“å­˜çš„æµ‹è¯•ç±»"></a> ç¼–å†™æµ‹è¯•äºŒçº§ç¼“å­˜çš„æµ‹è¯•ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.keafmd.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.keafmd.dao.IUserDao;</span><br><span class="line"><span class="keyword">import</span> com.keafmd.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.After;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Keafmd</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span>: SecondLevelCatchTest</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>: äºŒçº§ç¼“å­˜æµ‹è¯•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>: 2022-02-16 23:37</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecondLevelCatchTest</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> InputStream in;</span><br><span class="line">    <span class="keyword">private</span> SqlSessionFactory factory;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        in = Resources.getResourceAsStream(<span class="string">&quot;SqlMapConfig.xml&quot;</span>);</span><br><span class="line">        factory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(in);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destory</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindOne</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> factory.openSession();</span><br><span class="line">        <span class="type">IUserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> session.getMapper(IUserDao.class);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.findById(<span class="number">55</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line"></span><br><span class="line">        session.close();<span class="comment">//é‡Šæ”¾ä¸€çº§ç¼“å­˜</span></span><br><span class="line"></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">session1</span> <span class="operator">=</span> factory.openSession();<span class="comment">//å†æ¬¡æ‰“å¼€session</span></span><br><span class="line">        <span class="type">IUserDao</span> <span class="variable">userDao1</span> <span class="operator">=</span> session1.getMapper(IUserDao.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> userDao1.findById(<span class="number">55</span>);</span><br><span class="line">        System.out.println(user2);</span><br><span class="line"></span><br><span class="line">        System.out.println(user==user2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ä¸å¼€å¯äºŒçº§ç¼“å­˜é…ç½®çš„è¿è¡Œç»“æœï¼š</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">119</span> <span class="number">320</span>    [           <span class="type">main</span>] DEBUG ansaction.jdbc.JdbcTransaction  - Opening JDBC Connection</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">509</span> <span class="number">710</span>    [           <span class="type">main</span>] DEBUG source.pooled.PooledDataSource  - Created connection <span class="number">85445963</span>.</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">510</span> <span class="number">711</span>    [           <span class="type">main</span>] DEBUG ansaction.jdbc.JdbcTransaction  - Setting autocommit to false on JDBC Connection [<span class="type">com.mysql.jdbc.JDBC4Connection</span>@<span class="number">517</span><span class="type">cd4b</span>]</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">514</span> <span class="number">715</span>    [           <span class="type">main</span>] DEBUG m.keafmd.dao.IUserDao.findById  - ==&gt;  Preparing: <span class="built_in">select</span> * from user <span class="built_in">where</span> id=?</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">551</span> <span class="number">752</span>    [           <span class="type">main</span>] DEBUG m.keafmd.dao.IUserDao.findById  - ==&gt; Parameters: <span class="number">55</span>(Integer)</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">633</span> <span class="number">834</span>    [           <span class="type">main</span>] DEBUG m.keafmd.dao.IUserDao.findById  - &lt;==      Total: <span class="number">1</span></span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">634</span> <span class="number">835</span>    [           <span class="type">main</span>] DEBUG o.IAccountDao.findAccountByUid  - ==&gt;  Preparing: <span class="built_in">select</span> * from account <span class="built_in">where</span> uid = ?</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">634</span> <span class="number">835</span>    [           <span class="type">main</span>] DEBUG o.IAccountDao.findAccountByUid  - ==&gt; Parameters: <span class="number">55</span>(Integer)</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">635</span> <span class="number">836</span>    [           <span class="type">main</span>] DEBUG o.IAccountDao.findAccountByUid  - &lt;==      Total: <span class="number">0</span></span><br><span class="line">User&#123;userId=<span class="number">55</span>, userName=<span class="string">&#x27;mybatis annotation&#x27;</span>, userAddress=<span class="string">&#x27;null&#x27;</span>, userSex=<span class="string">&#x27;ç”·&#x27;</span>, userBirthday=Tue Feb <span class="number">16</span> <span class="number">22</span>:<span class="number">15</span>:<span class="number">36</span> CST <span class="number">2021</span>&#125;</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">635</span> <span class="number">836</span>    [           <span class="type">main</span>] DEBUG ansaction.jdbc.JdbcTransaction  - Resetting autocommit to true on JDBC Connection [<span class="type">com.mysql.jdbc.JDBC4Connection</span>@<span class="number">517</span><span class="type">cd4b</span>]</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">636</span> <span class="number">837</span>    [           <span class="type">main</span>] DEBUG ansaction.jdbc.JdbcTransaction  - Closing JDBC Connection [<span class="type">com.mysql.jdbc.JDBC4Connection</span>@<span class="number">517</span><span class="type">cd4b</span>]</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">636</span> <span class="number">837</span>    [           <span class="type">main</span>] DEBUG source.pooled.PooledDataSource  - Returned connection <span class="number">85445963</span> to pool.</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">636</span> <span class="number">837</span>    [           <span class="type">main</span>] DEBUG ansaction.jdbc.JdbcTransaction  - Opening JDBC Connection</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">636</span> <span class="number">837</span>    [           <span class="type">main</span>] DEBUG source.pooled.PooledDataSource  - Checked out connection <span class="number">85445963</span> from pool.</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">636</span> <span class="number">837</span>    [           <span class="type">main</span>] DEBUG ansaction.jdbc.JdbcTransaction  - Setting autocommit to false on JDBC Connection [<span class="type">com.mysql.jdbc.JDBC4Connection</span>@<span class="number">517</span><span class="type">cd4b</span>]</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">636</span> <span class="number">837</span>    [           <span class="type">main</span>] DEBUG m.keafmd.dao.IUserDao.findById  - ==&gt;  Preparing: <span class="built_in">select</span> * from user <span class="built_in">where</span> id=?</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">637</span> <span class="number">838</span>    [           <span class="type">main</span>] DEBUG m.keafmd.dao.IUserDao.findById  - ==&gt; Parameters: <span class="number">55</span>(Integer)</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">639</span> <span class="number">840</span>    [           <span class="type">main</span>] DEBUG m.keafmd.dao.IUserDao.findById  - &lt;==      Total: <span class="number">1</span></span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">641</span> <span class="number">842</span>    [           <span class="type">main</span>] DEBUG o.IAccountDao.findAccountByUid  - ==&gt;  Preparing: <span class="built_in">select</span> * from account <span class="built_in">where</span> uid = ?</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">641</span> <span class="number">842</span>    [           <span class="type">main</span>] DEBUG o.IAccountDao.findAccountByUid  - ==&gt; Parameters: <span class="number">55</span>(Integer)</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">31</span>:<span class="number">32</span>,<span class="number">642</span> <span class="number">843</span>    [           <span class="type">main</span>] DEBUG o.IAccountDao.findAccountByUid  - &lt;==      Total: <span class="number">0</span></span><br><span class="line">User&#123;userId=<span class="number">55</span>, userName=<span class="string">&#x27;mybatis annotation&#x27;</span>, userAddress=<span class="string">&#x27;null&#x27;</span>, userSex=<span class="string">&#x27;ç”·&#x27;</span>, userBirthday=Tue Feb <span class="number">16</span> <span class="number">22</span>:<span class="number">15</span>:<span class="number">36</span> CST <span class="number">2021</span>&#125;</span><br><span class="line">false</span><br><span class="line"></span><br><span class="line"><span class="keyword">Process</span> finished with <span class="keyword">exit</span> code <span class="number">0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>å¼€å¯äºŒçº§ç¼“å­˜é…ç½®çš„è¿è¡Œç»“æœï¼š</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">29</span>:<span class="number">23</span>,<span class="number">197</span> <span class="number">373</span>    [           <span class="type">main</span>] DEBUG ansaction.jdbc.JdbcTransaction  - Opening JDBC Connection</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">29</span>:<span class="number">23</span>,<span class="number">605</span> <span class="number">781</span>    [           <span class="type">main</span>] DEBUG source.pooled.PooledDataSource  - Created connection <span class="number">500179317</span>.</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">29</span>:<span class="number">23</span>,<span class="number">606</span> <span class="number">782</span>    [           <span class="type">main</span>] DEBUG ansaction.jdbc.JdbcTransaction  - Setting autocommit to false on JDBC Connection [<span class="type">com.mysql.jdbc.JDBC4Connection</span>@<span class="number">1</span><span class="type">dd02175</span>]</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">29</span>:<span class="number">23</span>,<span class="number">617</span> <span class="number">793</span>    [           <span class="type">main</span>] DEBUG m.keafmd.dao.IUserDao.findById  - ==&gt;  Preparing: <span class="built_in">select</span> * from user <span class="built_in">where</span> id=?</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">29</span>:<span class="number">23</span>,<span class="number">668</span> <span class="number">844</span>    [           <span class="type">main</span>] DEBUG m.keafmd.dao.IUserDao.findById  - ==&gt; Parameters: <span class="number">55</span>(Integer)</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">29</span>:<span class="number">23</span>,<span class="number">777</span> <span class="number">953</span>    [           <span class="type">main</span>] DEBUG m.keafmd.dao.IUserDao.findById  - &lt;==      Total: <span class="number">1</span></span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">29</span>:<span class="number">23</span>,<span class="number">781</span> <span class="number">957</span>    [           <span class="type">main</span>] DEBUG o.IAccountDao.findAccountByUid  - ==&gt;  Preparing: <span class="built_in">select</span> * from account <span class="built_in">where</span> uid = ?</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">29</span>:<span class="number">23</span>,<span class="number">782</span> <span class="number">958</span>    [           <span class="type">main</span>] DEBUG o.IAccountDao.findAccountByUid  - ==&gt; Parameters: <span class="number">55</span>(Integer)</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">29</span>:<span class="number">23</span>,<span class="number">782</span> <span class="number">958</span>    [           <span class="type">main</span>] DEBUG o.IAccountDao.findAccountByUid  - &lt;==      Total: <span class="number">0</span></span><br><span class="line">User&#123;userId=<span class="number">55</span>, userName=<span class="string">&#x27;mybatis annotation&#x27;</span>, userAddress=<span class="string">&#x27;null&#x27;</span>, userSex=<span class="string">&#x27;ç”·&#x27;</span>, userBirthday=Tue Feb <span class="number">16</span> <span class="number">22</span>:<span class="number">15</span>:<span class="number">36</span> CST <span class="number">2021</span>&#125;</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">29</span>:<span class="number">23</span>,<span class="number">790</span> <span class="number">966</span>    [           <span class="type">main</span>] DEBUG ansaction.jdbc.JdbcTransaction  - Resetting autocommit to true on JDBC Connection [<span class="type">com.mysql.jdbc.JDBC4Connection</span>@<span class="number">1</span><span class="type">dd02175</span>]</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">29</span>:<span class="number">23</span>,<span class="number">791</span> <span class="number">967</span>    [           <span class="type">main</span>] DEBUG ansaction.jdbc.JdbcTransaction  - Closing JDBC Connection [<span class="type">com.mysql.jdbc.JDBC4Connection</span>@<span class="number">1</span><span class="type">dd02175</span>]</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">29</span>:<span class="number">23</span>,<span class="number">791</span> <span class="number">967</span>    [           <span class="type">main</span>] DEBUG source.pooled.PooledDataSource  - Returned connection <span class="number">500179317</span> to pool.</span><br><span class="line"><span class="number">2021</span><span class="literal">-02-17</span> <span class="number">03</span>:<span class="number">29</span>:<span class="number">23</span>,<span class="number">800</span> <span class="number">976</span>    [           <span class="type">main</span>] DEBUG        com.keafmd.dao.IUserDao  - Cache Hit Ratio [<span class="type">com.keafmd.dao.IUserDao</span>]: <span class="number">0.5</span></span><br><span class="line">User&#123;userId=<span class="number">55</span>, userName=<span class="string">&#x27;mybatis annotation&#x27;</span>, userAddress=<span class="string">&#x27;null&#x27;</span>, userSex=<span class="string">&#x27;ç”·&#x27;</span>, userBirthday=Tue Feb <span class="number">16</span> <span class="number">22</span>:<span class="number">15</span>:<span class="number">36</span> CST <span class="number">2021</span>&#125;</span><br><span class="line">false</span><br><span class="line"></span><br><span class="line"><span class="keyword">Process</span> finished with <span class="keyword">exit</span> code <span class="number">0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p><strong>æ•ˆæœå¾ˆæ˜æ˜¾ï¼Œå¼€å¯ä½¿ç”¨äºŒçº§ç¼“å­˜æ—¶ç¬¬äºŒæ¬¡å¹¶æ²¡æœ‰å‘èµ·æŸ¥è¯¢ï¼Œè¯æ˜ä½¿ç”¨çš„å°±æ˜¯äºŒçº§ç¼“å­˜ã€‚</strong></p></blockquote><blockquote><p><strong>ä»¥ä¸Šå°±æ˜¯ Mybatis æ³¨è§£å¼€å‘ï¼ˆè¶…è¯¦ç»†ï¼‰çš„å…¨éƒ¨å†…å®¹ã€‚</strong></p><p><strong>çœ‹å®Œå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ„Ÿè°¢èµåŠ©æ”¯æŒï¼</strong></p><p><img src="https://img-blog.csdnimg.cn/20210115230629703.gif#pic_center" alt="" /></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Mybatis </category>
          
          <category> æ³¨è§£å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å•é¡¹é“¾è¡¨</title>
      <link href="/posts/e72b5a3a/"/>
      <url>/posts/e72b5a3a/</url>
      
        <content type="html"><![CDATA[<h2 id="å•å‘é“¾è¡¨"><a class="markdownIt-Anchor" href="#å•å‘é“¾è¡¨"></a> å•å‘é“¾è¡¨</h2><h3 id="é“¾è¡¨linked-listä»‹ç»"><a class="markdownIt-Anchor" href="#é“¾è¡¨linked-listä»‹ç»"></a> é“¾è¡¨(Linked  List)ä»‹ç»</h3><blockquote><p>é“¾è¡¨åœ¨å†…å­˜ä¸­çš„å­˜å‚¨<br /><img src="https://nyimapicture.oss-cn-beijing.aliyuncs.com/img/20200617221622.png" alt="" /></p><p><strong>ç‰¹ç‚¹</strong></p><ul><li>é“¾è¡¨æ˜¯ä»¥èŠ‚ç‚¹çš„æ–¹å¼æ¥å­˜å‚¨,<strong>æ˜¯é“¾å¼å­˜å‚¨</strong></li><li>æ¯ä¸ªèŠ‚ç‚¹åŒ…å« data åŸŸ å’Œ next åŸŸã€‚nextåŸŸç”¨æ¥æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</li><li>é“¾è¡¨çš„å„ä¸ªèŠ‚ç‚¹ä¸ä¸€å®šæ˜¯è¿ç»­å­˜å‚¨çš„</li><li>é“¾è¡¨åˆ†<strong>å¸¦å¤´èŠ‚ç‚¹çš„é“¾è¡¨</strong>å’Œ<strong>æ²¡æœ‰å¤´èŠ‚ç‚¹çš„é“¾è¡¨</strong>ï¼Œæ ¹æ®å®é™…çš„éœ€æ±‚æ¥ç¡®å®š</li></ul><p>å¸¦å¤´ç»“ç‚¹çš„å•åˆ—è¡¨<strong>é€»è¾‘ç¤ºæ„å›¾</strong></p><p><img src="https://img-blog.csdn.net/20160928205306919?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /></p><p><img src="https://nyimapicture.oss-cn-beijing.aliyuncs.com/img/20200617221632.png" alt="" /></p></blockquote><h3 id="å•å‘é“¾è¡¨çš„ä¼˜ç¼ºç‚¹"><a class="markdownIt-Anchor" href="#å•å‘é“¾è¡¨çš„ä¼˜ç¼ºç‚¹"></a> å•å‘é“¾è¡¨çš„ä¼˜ç¼ºç‚¹</h3><blockquote><p>å’Œæ™®é€šçš„çº¿æ€§ç»“æ„ï¼ˆå¦‚æ•°ç»„ï¼‰ç›¸æ¯”ï¼Œé“¾è¡¨ç»“æ„æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š<br />ï¼ˆ1ï¼‰å•ä¸ªç»“ç‚¹åˆ›å»ºéå¸¸çµæ´»ï¼Œæ™®é€šçš„çº¿æ€§å†…å­˜é€šå¸¸åœ¨åˆ›å»ºçš„æ—¶å€™å°±éœ€è¦è®¾å®šæ•°æ®çš„å¤§å°<br />ï¼ˆ2ï¼‰ç»“ç‚¹çš„åˆ é™¤ã€æ’å…¥éå¸¸æ–¹ä¾¿ï¼Œä¸éœ€è¦åƒçº¿æ€§ç»“æ„é‚£æ ·ç§»åŠ¨å‰©ä¸‹çš„æ•°æ®<br />ï¼ˆ3ï¼‰ç»“ç‚¹çš„è®¿é—®æ–¹ä¾¿ï¼Œå¯ä»¥é€šè¿‡å¾ªç¯æˆ–è€…é€’å½’çš„æ–¹æ³•è®¿é—®åˆ°ä»»æ„æ•°æ®ï¼Œä½†æ˜¯å¹³å‡çš„è®¿é—®æ•ˆç‡ä½äºçº¿æ€§è¡¨</p></blockquote><h3 id="å®ç°æ€è·¯å®ç°é“¾è¡¨çš„å¢åˆ æ”¹æŸ¥"><a class="markdownIt-Anchor" href="#å®ç°æ€è·¯å®ç°é“¾è¡¨çš„å¢åˆ æ”¹æŸ¥"></a> å®ç°æ€è·¯(å®ç°é“¾è¡¨çš„å¢åˆ æ”¹æŸ¥)</h3><h4 id="åˆ›å»ºæ·»åŠ "><a class="markdownIt-Anchor" href="#åˆ›å»ºæ·»åŠ "></a> <strong>åˆ›å»ºï¼ˆæ·»åŠ ï¼‰</strong></h4><blockquote><ul><li>å…ˆåˆ›å»ºä¸€ä¸ªHeadå¤´èŠ‚ç‚¹ï¼Œè¡¨ç¤ºå•é“¾è¡¨çš„å¤´</li><li>åé¢æˆ‘ä»¬æ¯æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±æ”¾åœ¨é“¾è¡¨çš„æœ€å</li></ul></blockquote><h4 id="éå†"><a class="markdownIt-Anchor" href="#éå†"></a> <strong>éå†</strong></h4><blockquote><p>é€šè¿‡ä¸€ä¸ªè¾…åŠ©å˜é‡ï¼Œæ¥éå†æ•´ä¸ªé“¾è¡¨</p></blockquote><h4 id="æœ‰åºæ’å…¥"><a class="markdownIt-Anchor" href="#æœ‰åºæ’å…¥"></a> <strong>æœ‰åºæ’å…¥</strong></h4><blockquote><ul><li>å…ˆéå†é“¾è¡¨ï¼Œæ‰¾åˆ°åº”è¯¥æ’å…¥çš„ä½ç½®</li><li>è¦æ’å…¥çš„èŠ‚ç‚¹çš„nextæŒ‡å‘æ’å…¥ä½ç½®çš„åä¸€ä¸ªèŠ‚ç‚¹</li><li>æ’å…¥ä½ç½®çš„å‰ä¸€ä¸ªèŠ‚ç‚¹çš„nextæŒ‡å‘è¦æ’å…¥èŠ‚ç‚¹</li><li>æ’å…¥å‰è¦åˆ¤æ–­æ˜¯å¦åœ¨é˜Ÿå°¾æ’å…¥</li></ul></blockquote><h4 id="æ ¹æ®æŸä¸ªå±æ€§èŠ‚ç‚¹ä¿®æ”¹å€¼"><a class="markdownIt-Anchor" href="#æ ¹æ®æŸä¸ªå±æ€§èŠ‚ç‚¹ä¿®æ”¹å€¼"></a> <strong>æ ¹æ®æŸä¸ªå±æ€§èŠ‚ç‚¹ä¿®æ”¹å€¼</strong></h4><blockquote><ul><li>å…ˆéå†èŠ‚ç‚¹ï¼Œæ‰¾åˆ°ä¿®æ”¹çš„ä½ç½®</li><li>å¦‚æœæœªæ‰¾åˆ°ä¿®æ”¹èŠ‚ç‚¹ï¼Œåˆ™ä¸ä¿®æ”¹</li></ul></blockquote><h4 id="åˆ é™¤æŸä¸ªèŠ‚ç‚¹"><a class="markdownIt-Anchor" href="#åˆ é™¤æŸä¸ªèŠ‚ç‚¹"></a> <strong>åˆ é™¤æŸä¸ªèŠ‚ç‚¹</strong></h4><blockquote><ul><li>å…ˆéå†èŠ‚ç‚¹ï¼Œæ‰¾åˆ°è¦åˆ é™¤èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹</li><li>è¿›è¡Œåˆ é™¤æ“ä½œ</li></ul></blockquote><h4 id="æ±‚å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹çš„ä¿¡æ¯"><a class="markdownIt-Anchor" href="#æ±‚å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹çš„ä¿¡æ¯"></a> <strong>æ±‚å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹çš„ä¿¡æ¯</strong></h4><blockquote><ul><li>éå†é“¾è¡¨ï¼Œæ±‚å‡ºé“¾è¡¨çš„<strong>æœ‰æ•ˆé•¿åº¦</strong>lengthï¼ˆä¸ç®—å¤´ç»“ç‚¹ï¼‰</li><li>éå†é“¾è¡¨åˆ°ç¬¬length-nçš„èŠ‚ç‚¹</li></ul></blockquote><h4 id="ç¿»è½¬é“¾è¡¨"><a class="markdownIt-Anchor" href="#ç¿»è½¬é“¾è¡¨"></a> <strong>ç¿»è½¬é“¾è¡¨</strong></h4><p><img src="https://nyimapicture.oss-cn-beijing.aliyuncs.com/img/20200616112143.png" alt="" /></p><blockquote><ul><li><p>åˆ›å»ºä¸€ä¸ªæ–°çš„å¤´ç»“ç‚¹ï¼Œä½œä¸ºæ–°é“¾è¡¨çš„å¤´</p></li><li><p>ä»å¤´éå†æ—§é“¾è¡¨ï¼Œå°†éå†åˆ°çš„èŠ‚ç‚¹æ’å…¥æ–°é“¾è¡¨çš„å¤´ç»“ç‚¹ä¹‹å</p></li><li><p>æ³¨æ„éœ€è¦ç”¨åˆ°</p></li></ul><p>ä¸¤ä¸ªæš‚å­˜èŠ‚ç‚¹</p><ul><li>ä¸€ä¸ªç”¨æ¥ä¿å­˜æ­£åœ¨éå†çš„èŠ‚ç‚¹</li><li>ä¸€ä¸ªç”¨æ¥ä¿å­˜æ­£åœ¨éå†èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</li></ul></blockquote><p><img src="https://nyimapicture.oss-cn-beijing.aliyuncs.com/img/20200616142843.png" alt="img" /></p><p><img src="https://nyimapicture.oss-cn-beijing.aliyuncs.com/img/20200616142931.png" alt="img" /></p><p><img src="https://nyimapicture.oss-cn-beijing.aliyuncs.com/img/20200616142248.png" alt="img" /></p><p><img src="https://nyimapicture.oss-cn-beijing.aliyuncs.com/img/20200617221646.png" alt="img" /></p><h4 id="é€†åºæ‰“å°"><a class="markdownIt-Anchor" href="#é€†åºæ‰“å°"></a> <strong>é€†åºæ‰“å°</strong></h4><blockquote><ul><li>éå†é“¾è¡¨ï¼Œå°†éå†åˆ°çš„èŠ‚ç‚¹å…¥æ ˆ</li><li>éå†å®Œåï¼Œè¿›è¡Œå‡ºæ ˆæ“ä½œï¼Œ<strong>åŒæ—¶æ‰“å°å‡ºæ ˆå…ƒç´ </strong></li></ul></blockquote><h3 id="ä»£ç "><a class="markdownIt-Anchor" href="#ä»£ç "></a> <strong>ä»£ç </strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo1</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">LinkedList</span> <span class="variable">linkedList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinkedList</span>();</span><br><span class="line">linkedList.traverseNode();</span><br><span class="line">System.out.println();</span><br><span class="line"><span class="comment">//åˆ›å»ºå­¦ç”ŸèŠ‚ç‚¹ï¼Œå¹¶æ’å…¥é“¾è¡¨</span></span><br><span class="line"><span class="type">StudentNode</span> <span class="variable">student1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StudentNode</span>(<span class="number">1</span>, <span class="string">&quot;Nyima&quot;</span>);</span><br><span class="line"><span class="type">StudentNode</span> <span class="variable">student3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StudentNode</span>(<span class="number">3</span>, <span class="string">&quot;Lulu&quot;</span>);</span><br><span class="line">linkedList.addNode(student1);</span><br><span class="line">linkedList.addNode(student3);</span><br><span class="line">linkedList.traverseNode();</span><br><span class="line">System.out.println();</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‰idå¤§å°æ’å…¥</span></span><br><span class="line">System.out.println(<span class="string">&quot;æœ‰åºæ’å…¥&quot;</span>);</span><br><span class="line"><span class="type">StudentNode</span> <span class="variable">student2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StudentNode</span>(<span class="number">0</span>, <span class="string">&quot;Wenwen&quot;</span>);</span><br><span class="line">linkedList.addByOrder(student2);</span><br><span class="line">linkedList.traverseNode();</span><br><span class="line">System.out.println();</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‰idä¿®æ”¹å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line">System.out.println(<span class="string">&quot;ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯&quot;</span>);</span><br><span class="line">student2 = <span class="keyword">new</span> <span class="title class_">StudentNode</span>(<span class="number">1</span>, <span class="string">&quot;Hulu&quot;</span>);</span><br><span class="line">linkedList.changeNode(student2);</span><br><span class="line">linkedList.traverseNode();</span><br><span class="line">System.out.println();</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ¹æ®idåˆ é™¤å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line">System.out.println(<span class="string">&quot;åˆ é™¤å­¦ç”Ÿä¿¡æ¯&quot;</span>);</span><br><span class="line">student2 = <span class="keyword">new</span> <span class="title class_">StudentNode</span>(<span class="number">1</span>, <span class="string">&quot;Hulu&quot;</span>);</span><br><span class="line">linkedList.deleteNode(student2);</span><br><span class="line">linkedList.traverseNode();</span><br><span class="line">System.out.println();</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å¾—å€’æ•°ç¬¬å‡ ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">System.out.println(<span class="string">&quot;è·å¾—å€’æ•°èŠ‚ç‚¹&quot;</span>);</span><br><span class="line">System.out.println(linkedList.getStuByRec(<span class="number">2</span>));</span><br><span class="line">System.out.println();</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¿»è½¬é“¾è¡¨</span></span><br><span class="line">System.out.println(<span class="string">&quot;ç¿»è½¬é“¾è¡¨&quot;</span>);</span><br><span class="line"><span class="type">LinkedList</span> <span class="variable">newLinkedList</span> <span class="operator">=</span> linkedList.reverseList();</span><br><span class="line">newLinkedList.traverseNode();</span><br><span class="line">System.out.println();</span><br><span class="line"></span><br><span class="line"><span class="comment">//å€’å™éå†é“¾è¡¨</span></span><br><span class="line">System.out.println(<span class="string">&quot;å€’åºéå†é“¾è¡¨&quot;</span>);</span><br><span class="line">newLinkedList.reverseTraverse();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ›å»ºé“¾è¡¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LinkedList</span> &#123;</span><br><span class="line"><span class="comment">//å¤´èŠ‚ç‚¹ï¼Œé˜²æ­¢è¢«ä¿®æ”¹ï¼Œè®¾ç½®ä¸ºç§æœ‰çš„</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">StudentNode</span> <span class="variable">head</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StudentNode</span>(<span class="number">0</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ·»åŠ èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> node è¦æ·»åŠ çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addNode</span><span class="params">(StudentNode node)</span> &#123;</span><br><span class="line"><span class="comment">//å› ä¸ºå¤´èŠ‚ç‚¹ä¸èƒ½è¢«ä¿®æ”¹ï¼Œæ‰€ä»¥åˆ›å»ºä¸€ä¸ªè¾…åŠ©èŠ‚ç‚¹</span></span><br><span class="line"><span class="type">StudentNode</span> <span class="variable">temp</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="comment">//æ‰¾åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="comment">//tempæ˜¯å°¾èŠ‚ç‚¹å°±åœæ­¢å¾ªç¯</span></span><br><span class="line"><span class="keyword">if</span>(temp.next == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¸æ˜¯å°¾ç»“ç‚¹å°±å‘åç§»åŠ¨</span></span><br><span class="line">temp = temp.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç°åœ¨tempæ˜¯å°¾èŠ‚ç‚¹äº†ï¼Œå†æ¬¡æ’å…¥</span></span><br><span class="line">temp.next = node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * éå†é“¾è¡¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">traverseNode</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;å¼€å§‹éå†é“¾è¡¨&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>(head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é“¾è¡¨ä¸ºç©º&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ›å»ºè¾…åŠ©èŠ‚ç‚¹</span></span><br><span class="line"><span class="type">StudentNode</span> <span class="variable">temp</span> <span class="operator">=</span> head.next;</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="comment">//éå†å®Œæˆå°±åœæ­¢å¾ªç¯</span></span><br><span class="line"><span class="keyword">if</span>(temp == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(temp);</span><br><span class="line">temp = temp.next;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŒ‰idé¡ºåºæ’å…¥èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> node</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addByOrder</span><span class="params">(StudentNode node)</span> &#123;</span><br><span class="line"><span class="comment">//å¦‚æœæ²¡æœ‰é¦–èŠ‚ç‚¹ï¼Œå°±ç›´æ¥æ’å…¥</span></span><br><span class="line"><span class="keyword">if</span>(head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">head.next = node;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¾…åŠ©èŠ‚ç‚¹ï¼Œç”¨äºæ‰¾åˆ°æ’å…¥ä½ç½®å’Œæ’å…¥æ“ä½œ</span></span><br><span class="line"><span class="type">StudentNode</span> <span class="variable">temp</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="comment">//èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å­˜åœ¨ï¼Œä¸”å®ƒçš„idå°äºè¦æ’å…¥èŠ‚ç‚¹çš„idï¼Œå°±ç»§ç»­ä¸‹ç§»</span></span><br><span class="line"><span class="keyword">while</span> (temp.next!=<span class="literal">null</span> &amp;&amp; temp.next.id &lt; node.id) &#123;</span><br><span class="line">temp = temp.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¦‚æœtempçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œè¯¥æ“ä½œ</span></span><br><span class="line"><span class="comment">//ä¸”æ’å…¥æ“ä½œï¼Œé¡ºåºä¸èƒ½æ¢</span></span><br><span class="line"><span class="keyword">if</span>(temp.next != <span class="literal">null</span>) &#123;</span><br><span class="line">node.next = temp.next;</span><br><span class="line">&#125;</span><br><span class="line">temp.next = node;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®idæ¥ä¿®æ”¹èŠ‚ç‚¹ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> node ä¿®æ”¹ä¿¡æ¯çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">changeNode</span><span class="params">(StudentNode node)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(head == <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é“¾è¡¨ä¸ºç©ºï¼Œè¯·å…ˆåŠ å…¥è¯¥å­¦ç”Ÿä¿¡æ¯&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">StudentNode</span> <span class="variable">temp</span> <span class="operator">=</span> head;</span><br><span class="line"><span class="comment">//éå†é“¾è¡¨ï¼Œæ‰¾åˆ°è¦ä¿®æ”¹çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">while</span> (temp.next!= <span class="literal">null</span> &amp;&amp; temp.id != node.id) &#123;</span><br><span class="line">temp = temp.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¦‚æœtempå·²ç»æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ¤æ–­idæ˜¯å¦ç›¸ç­‰</span></span><br><span class="line"><span class="keyword">if</span>(temp.id != node.id) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æœªæ‰¾åˆ°è¯¥å­¦ç”Ÿçš„ä¿¡æ¯ï¼Œè¯·å…ˆåˆ›å»ºè¯¥å­¦ç”Ÿçš„ä¿¡æ¯&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line">temp.name = node.name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®idåˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> node è¦åˆ é™¤çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteNode</span><span class="params">(StudentNode node)</span> &#123;</span><br><span class="line"> <span class="keyword">if</span>(head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é“¾è¡¨ä¸ºç©º&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="type">StudentNode</span> <span class="variable">temp</span> <span class="operator">=</span> head.next;</span><br><span class="line"> <span class="comment">//éå†é“¾è¡¨ï¼Œæ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹</span></span><br><span class="line"> <span class="keyword">if</span>(temp.next!=<span class="literal">null</span> &amp;&amp; temp.next.id!=node.id) &#123;</span><br><span class="line"> temp = temp.next;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="comment">//åˆ¤æ–­æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„æ˜¯å¦è¦åˆ é™¤çš„èŠ‚ç‚¹</span></span><br><span class="line"> <span class="keyword">if</span>(temp.next.id != node.id) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;è¯·å…ˆæ’å…¥è¯¥å­¦ç”Ÿä¿¡æ¯&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="comment">//åˆ é™¤è¯¥èŠ‚ç‚¹</span></span><br><span class="line"> temp.next = temp.next.next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¾—åˆ°å€’æ•°çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index å€’æ•°ç¬¬å‡ ä¸ªæ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> StudentNode <span class="title function_">getStuByRec</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(head.next == <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é“¾è¡¨ä¸ºç©º!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">StudentNode</span> <span class="variable">temp</span> <span class="operator">=</span> head.next;</span><br><span class="line"><span class="comment">//ç”¨æˆ·è®°å½•é“¾è¡¨é•¿åº¦ï¼Œå› ä¸ºhead.nextä¸ä¸ºç©ºï¼Œæ­¤æ—¶å·²ç»æœ‰ä¸€ä¸ªèŠ‚ç‚¹äº†</span></span><br><span class="line"><span class="comment">//æ‰€ä»¥lengthåˆå§‹åŒ–ä¸º1</span></span><br><span class="line"><span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(temp.next != <span class="literal">null</span>) &#123;</span><br><span class="line">temp = temp.next;</span><br><span class="line">length++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(length &lt; index) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;é“¾è¡¨è¶Šç•Œ&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">temp = head.next;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i&lt;length-index; i++) &#123;</span><br><span class="line">temp = temp.next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¿»è½¬é“¾è¡¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> åè½¬åçš„é“¾è¡¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> LinkedList <span class="title function_">reverseList</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//é“¾è¡¨ä¸ºç©ºæˆ–è€…åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ— éœ€ç¿»è½¬</span></span><br><span class="line"><span class="keyword">if</span>(head.next == <span class="literal">null</span> || head.next.next == <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ— éœ€ç¿»è½¬&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">LinkedList</span> <span class="variable">newLinkedList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinkedList</span>();</span><br><span class="line"><span class="comment">//ç»™æ–°é“¾è¡¨åˆ›å»ºæ–°çš„å¤´ç»“ç‚¹</span></span><br><span class="line">newLinkedList.head = <span class="keyword">new</span> <span class="title class_">StudentNode</span>(<span class="number">0</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="comment">//ç”¨äºä¿å­˜æ­£åœ¨éå†çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="type">StudentNode</span> <span class="variable">temp</span> <span class="operator">=</span> head.next;</span><br><span class="line"><span class="comment">//ç”¨äºä¿å­˜æ­£åœ¨éå†èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"><span class="type">StudentNode</span> <span class="variable">nextNode</span> <span class="operator">=</span> temp.next;</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line"><span class="comment">//æ’å…¥æ–°é“¾è¡¨</span></span><br><span class="line">temp.next = newLinkedList.head.next;</span><br><span class="line">newLinkedList.head.next = temp;</span><br><span class="line"><span class="comment">//ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">temp = nextNode;</span><br><span class="line">nextNode = nextNode.next;</span><br><span class="line"><span class="keyword">if</span>(temp.next == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="comment">//æ’å…¥æœ€åä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">temp.next = newLinkedList.head.next;</span><br><span class="line">newLinkedList.head.next = temp;</span><br><span class="line">head.next = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">return</span> newLinkedList;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">reverseTraverse</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(head == <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é“¾è¡¨ä¸ºç©º&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">StudentNode</span> <span class="variable">temp</span> <span class="operator">=</span> head.next;</span><br><span class="line"><span class="comment">//åˆ›å»ºæ ˆï¼Œç”¨äºå­˜æ”¾éå†åˆ°çš„èŠ‚ç‚¹</span></span><br><span class="line">Stack&lt;StudentNode&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">while</span>(temp != <span class="literal">null</span>) &#123;</span><br><span class="line">stack.push(temp);</span><br><span class="line">temp = temp.next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">System.out.println(stack.pop());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®šä¹‰èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StudentNode</span> &#123;</span><br><span class="line"><span class="type">int</span> id;</span><br><span class="line">String name;</span><br><span class="line"><span class="comment">//ç”¨äºä¿å­˜ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€</span></span><br><span class="line">StudentNode next;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">StudentNode</span><span class="params">(<span class="type">int</span> id, String name)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.id = id;</span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;StudentNode&#123;&quot;</span> +</span><br><span class="line"><span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line"><span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line"><span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»“æœ"><a class="markdownIt-Anchor" href="#ç»“æœ"></a> ç»“æœ</h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">å¼€å§‹éå†é“¾è¡¨</span><br><span class="line">é“¾è¡¨ä¸ºç©º</span><br><span class="line"></span><br><span class="line">å¼€å§‹éå†é“¾è¡¨</span><br><span class="line">StudentNode&#123;id=1, name=&#x27;Nyima&#x27;&#125;</span><br><span class="line">StudentNode&#123;id=3, name=&#x27;Lulu&#x27;&#125;</span><br><span class="line"></span><br><span class="line">æœ‰åºæ’å…¥</span><br><span class="line">å¼€å§‹éå†é“¾è¡¨</span><br><span class="line">StudentNode&#123;id=0, name=&#x27;Wenwen&#x27;&#125;</span><br><span class="line">StudentNode&#123;id=1, name=&#x27;Nyima&#x27;&#125;</span><br><span class="line">StudentNode&#123;id=3, name=&#x27;Lulu&#x27;&#125;</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">å¼€å§‹éå†é“¾è¡¨</span><br><span class="line">StudentNode&#123;id=0, name=&#x27;Wenwen&#x27;&#125;</span><br><span class="line">StudentNode&#123;id=1, name=&#x27;Hulu&#x27;&#125;</span><br><span class="line">StudentNode&#123;id=3, name=&#x27;Lulu&#x27;&#125;</span><br><span class="line"></span><br><span class="line">åˆ é™¤å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">å¼€å§‹éå†é“¾è¡¨</span><br><span class="line">StudentNode&#123;id=0, name=&#x27;Wenwen&#x27;&#125;</span><br><span class="line">StudentNode&#123;id=3, name=&#x27;Lulu&#x27;&#125;</span><br><span class="line"></span><br><span class="line">è·å¾—å€’æ•°èŠ‚ç‚¹</span><br><span class="line">StudentNode&#123;id=0, name=&#x27;Wenwen&#x27;&#125;</span><br><span class="line"></span><br><span class="line">ç¿»è½¬é“¾è¡¨</span><br><span class="line">å¼€å§‹éå†é“¾è¡¨</span><br><span class="line">StudentNode&#123;id=3, name=&#x27;Lulu&#x27;&#125;</span><br><span class="line">StudentNode&#123;id=0, name=&#x27;Wenwen&#x27;&#125;</span><br><span class="line"></span><br><span class="line">å€’åºéå†é“¾è¡¨</span><br><span class="line">StudentNode&#123;id=0, name=&#x27;Wenwen&#x27;&#125;</span><br><span class="line">StudentNode&#123;id=3, name=&#x27;Lulu&#x27;&#125;</span><br></pre></td></tr></table></figure><h2 id="åŒå‘é“¾è¡¨"><a class="markdownIt-Anchor" href="#åŒå‘é“¾è¡¨"></a> åŒå‘é“¾è¡¨</h2><p><img src="https://nyimapicture.oss-cn-beijing.aliyuncs.com/img/20200616170404.png" alt="img" /></p><h3 id="å®ç°æ€è·¯"><a class="markdownIt-Anchor" href="#å®ç°æ€è·¯"></a> å®ç°æ€è·¯</h3><h3 id="éå†-2"><a class="markdownIt-Anchor" href="#éå†-2"></a> <strong>éå†</strong></h3><ul><li>å’Œå•å‘é“¾è¡¨çš„éå†ç›¸åŒï¼Œéœ€è¦ä¸€ä¸ªè¾…åŠ©èŠ‚ç‚¹æ¥ä¿å­˜å½“å‰æ­£åœ¨éå†çš„èŠ‚ç‚¹</li></ul><h3 id="æ·»åŠ "><a class="markdownIt-Anchor" href="#æ·»åŠ "></a> <strong>æ·»åŠ </strong></h3><ul><li>åŒå‘é“¾è¡¨å¤šå‡ºäº†ä¸€ä¸ªfrnotï¼Œæ‰€ä»¥åœ¨æ·»åŠ æ—¶ï¼Œè¦è®©æ–°å¢èŠ‚ç‚¹çš„frontæŒ‡å‘é“¾è¡¨å°¾èŠ‚ç‚¹</li></ul><h3 id="ä¿®æ”¹"><a class="markdownIt-Anchor" href="#ä¿®æ”¹"></a> <strong>ä¿®æ”¹</strong></h3><ul><li>å’Œå•å‘é“¾è¡¨çš„ä¿®æ”¹ç›¸åŒ</li></ul><h3 id="åˆ é™¤"><a class="markdownIt-Anchor" href="#åˆ é™¤"></a> <strong>åˆ é™¤</strong></h3><ul><li>ä½¿ç”¨tempæ¥ä¿å­˜è¦åˆ é™¤çš„èŠ‚ç‚¹</li><li>temp.pre.nextæŒ‡å‘temp.next</li><li>temp.nextæŒ‡å‘temp.pre</li></ul><h3 id="ä»£ç -2"><a class="markdownIt-Anchor" href="#ä»£ç -2"></a> <strong>ä»£ç </strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">BidirectionalList</span> <span class="variable">bidirectionalList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BidirectionalList</span>();</span><br><span class="line">        bidirectionalList.addNode(<span class="keyword">new</span> <span class="title class_">PersonNode</span>(<span class="number">1</span>, <span class="string">&quot;Nyima&quot;</span>));</span><br><span class="line">        bidirectionalList.addNode(<span class="keyword">new</span> <span class="title class_">PersonNode</span>(<span class="number">2</span>, <span class="string">&quot;Lulu&quot;</span>));</span><br><span class="line">        bidirectionalList.traverseNode();</span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ä¿®æ”¹èŠ‚ç‚¹ä¿¡æ¯&quot;</span>);</span><br><span class="line">        bidirectionalList.changeNode(<span class="keyword">new</span> <span class="title class_">PersonNode</span>(<span class="number">2</span>, <span class="string">&quot;Wenwen&quot;</span>));</span><br><span class="line">        bidirectionalList.traverseNode();</span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤èŠ‚ç‚¹&quot;</span>);</span><br><span class="line">        bidirectionalList.deleteNode(<span class="keyword">new</span> <span class="title class_">PersonNode</span>(<span class="number">1</span>, <span class="string">&quot;Nyima&quot;</span>));</span><br><span class="line">        bidirectionalList.traverseNode();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BidirectionalList</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">PersonNode</span> <span class="variable">head</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PersonNode</span>(-<span class="number">1</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * åˆ¤æ–­åŒå‘é“¾è¡¨æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> åˆ¤ç©ºç»“æœ</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> head.next == <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * æ·»åŠ å°†è¯¶ç‚¹</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> node è¦è¢«æ·»åŠ çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addNode</span><span class="params">(PersonNode node)</span> &#123;</span><br><span class="line">        <span class="type">PersonNode</span> <span class="variable">temp</span> <span class="operator">=</span> head;</span><br><span class="line">        <span class="keyword">if</span>(temp.next != <span class="literal">null</span>) &#123;</span><br><span class="line">            temp = temp.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ’å…¥åœ¨æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„åé¢</span></span><br><span class="line">        temp.next = node;</span><br><span class="line">        node.front = temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">traverseNode</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;éå†é“¾è¡¨&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;é“¾è¡¨ä¸ºç©º&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">PersonNode</span> <span class="variable">temp</span> <span class="operator">=</span> head.next;</span><br><span class="line">        <span class="keyword">while</span>(temp != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.println(temp);</span><br><span class="line">            temp = temp.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * ä¿®æ”¹èŠ‚ç‚¹ä¿¡æ¯</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> node è¦ä¿®æ”¹çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">changeNode</span><span class="params">(PersonNode node)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;é“¾è¡¨ä¸ºç©º&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">PersonNode</span> <span class="variable">temp</span> <span class="operator">=</span> head.next;</span><br><span class="line">        <span class="comment">//ç”¨äºåˆ¤å®šæ˜¯å¦åšäº†ä¿®æ”¹</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">while</span> (temp != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(temp.id == node.id) &#123;</span><br><span class="line">                <span class="comment">//åŒ¹é…åˆ°èŠ‚ç‚¹ï¼Œæ›¿æ¢èŠ‚ç‚¹</span></span><br><span class="line">                temp.front.next = node;</span><br><span class="line">                node.next = temp.next;</span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            temp = temp.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!flag) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æœªåŒ¹é…åˆ°æ”¹äººä¿¡æ¯&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * åˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> node è¦åˆ é™¤çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteNode</span><span class="params">(PersonNode node)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty())&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;é“¾è¡¨ä¸ºç©º&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">PersonNode</span> <span class="variable">temp</span> <span class="operator">=</span> head.next;</span><br><span class="line">        <span class="comment">//æŸ¥çœ‹æ˜¯å¦åˆ é™¤æˆåŠŸ</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">while</span>(temp != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(temp.id == node.id) &#123;</span><br><span class="line">                temp.front.next = temp.next;</span><br><span class="line">                temp.next = <span class="literal">null</span>;</span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            temp = temp.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!flag) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æœªæ‰¾åˆ°è¯¥èŠ‚ç‚¹&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PersonNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="comment">//æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    PersonNode next;</span><br><span class="line">    <span class="comment">//æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    PersonNode front;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PersonNode</span><span class="params">(<span class="type">int</span> id, String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;PersonNode&#123;&quot;</span> +</span><br><span class="line">            <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">            <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¾“å‡º"><a class="markdownIt-Anchor" href="#è¾“å‡º"></a> <strong>è¾“å‡º</strong></h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">éå†é“¾è¡¨</span><br><span class="line">PersonNode&#123;id=1, name=&#x27;Nyima&#x27;&#125;</span><br><span class="line">PersonNode&#123;id=2, name=&#x27;Lulu&#x27;&#125;</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹èŠ‚ç‚¹ä¿¡æ¯</span><br><span class="line">éå†é“¾è¡¨</span><br><span class="line">PersonNode&#123;id=1, name=&#x27;Nyima&#x27;&#125;</span><br><span class="line">PersonNode&#123;id=2, name=&#x27;Wenwen&#x27;&#125;</span><br><span class="line"></span><br><span class="line">åˆ é™¤èŠ‚ç‚¹</span><br><span class="line">éå†é“¾è¡¨</span><br><span class="line">PersonNode&#123;id=2, name=&#x27;Wenwen&#x27;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æˆ‘çš„åšå®¢å³å°†åŒæ­¥è‡³è…¾è®¯äº‘+ç¤¾åŒºï¼Œé‚€è¯·å¤§å®¶ä¸€åŒå…¥é©»ï¼š<a href="https://cloud.tencent.com/developer/support-plan?invite_code=39jvp4pqpw2ss">https://cloud.tencent.com/developer/support-plan?invite_code=39jvp4pqpw2ss</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
          <category> é“¾è¡¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾ªç¯é˜Ÿåˆ—</title>
      <link href="/posts/b66774c1/"/>
      <url>/posts/b66774c1/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>å¾ªç¯é˜Ÿåˆ—</strong>æ˜¯ é˜Ÿåˆ—çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ã€‚é¦–å…ˆä»‹ç»é˜Ÿåˆ—ï¼Œç„¶åå¼•ç”³å‡ºå¾ªç¯é˜Ÿåˆ—ã€‚<br />é˜Ÿåˆ—åˆç§°ä¸ºâ€œå…ˆè¿›å…ˆå‡ºâ€<strong>FIFO</strong>çº¿æ€§è¡¨<br />é™å®šæ’å…¥æ“ä½œåªèƒ½åœ¨é˜Ÿå°¾è¿›è¡Œï¼Œè€Œåˆ é™¤æ“ä½œåªèƒ½åœ¨é˜Ÿé¦–è¿›è¡Œ<br />é˜Ÿåˆ—ä¹Ÿå¯ä»¥é‡‡ç”¨<strong>é¡ºåºå­˜å‚¨ç»“æ„æˆ–é“¾è¡¨ç»“æ„</strong>æ¥å®ç°ï¼Œåˆ†åˆ«ç§°ä¸ºé¡ºåºé˜Ÿåˆ—å’Œé“¾é˜Ÿåˆ—</p><p><strong>é˜Ÿåˆ—çš„é¡ºåºè¡¨ç¤ºâ€”é¡ºåºé˜Ÿåˆ—</strong></p><p>ç”¨ä¸€ç»„è¿ç»­çš„<strong>å­˜å‚¨å•å…ƒ</strong>ä¾æ¬¡å­˜æ”¾ä»é˜Ÿé¦–åˆ°é˜Ÿå°¾çš„å…ƒç´ ï¼Œé™„è®¾ä¸¤ä¸ªæŒ‡é’ˆ head å’Œ tail åˆ†åˆ«æŒ‡å‘é˜Ÿé¦–å…ƒç´ å’Œé˜Ÿå°¾å…ƒç´ çš„ä½ç½®ï¼Œ<br />(æœ‰çš„åœ°æ–¹ç”¨ front å’Œ rear è¡¨ç¤º)</p><p><img src="https://unpkg.com/serms-assets@1.0.6/queue/SouthEast.png" alt="img" /></p><p><strong>å½“ head = tail = 0 æ—¶è¡¨ç¤ºç©ºé˜Ÿåˆ—</strong></p><p><img src="https://unpkg.com/serms-assets@1.0.6/queue/01.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" /></p><p><strong>å½“æ’å…¥æ–°å…ƒç´ åˆ°é˜Ÿå°¾æ—¶ï¼Œtail åŠ  1</strong></p><p><img src="https://unpkg.com/serms-assets@1.0.6/queue/02.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" /></p><p><strong>å½“åˆ é™¤é˜Ÿé¦–å…ƒç´ æ—¶ï¼Œhead åŠ  1ï¼Œä¸Šå›¾å¦‚æœæŠŠ C ä¹Ÿåˆ æ‰ï¼Œé‚£ä¹ˆå°± head = tail äº†</strong></p><p><strong>tail å§‹ç»ˆæŒ‡å‘é˜Ÿåˆ—å…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®</strong></p><p>å¯¹åº”çš„æ“ä½œï¼š<br />é˜Ÿç©ºï¼šhead=tail<br />æ±‚é˜Ÿé•¿ï¼štail - head<br />å…¥é˜Ÿï¼šæ–°å…ƒç´ æŒ‰ tail æŒ‡ç¤ºä½ç½®åŠ å…¥ï¼Œå†å°†é˜Ÿå°¾æŒ‡é’ˆåŠ  1 ï¼Œå³ tail = tail + 1<br />å‡ºé˜Ÿï¼šå°† head æŒ‡ç¤ºçš„å…ƒç´ å–å‡ºï¼Œå†å°†é˜Ÿå¤´æŒ‡é’ˆåŠ  1ï¼Œå³ head = head + 1</p><p><img src="https://unpkg.com/serms-assets@1.0.6/queue/03.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" /></p><p><strong>ä¸‹é¢å¼•å…¥å¾ªç¯é˜Ÿåˆ—</strong></p><p><img src="https://unpkg.com/serms-assets@1.0.6/queue/04.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" /></p><p><img src="https://unpkg.com/serms-assets@1.0.6/queue/05.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" /></p><p><strong>å…¥é˜Ÿï¼Œtail æŒ‡é’ˆå˜åŒ–ï¼š</strong> &gt;<strong>tail ï¼ ï¼ˆtail ï¼‹ 1ï¼‰ï¼…maxsize</strong></p><p><img src="https://unpkg.com/serms-assets@1.0.6/queue/06.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" /></p><p><strong>å‡ºé˜Ÿï¼Œhead æŒ‡é’ˆå˜åŒ–ï¼š</strong> &gt;<strong>head ï¼ï¼ˆ head ï¼‹ 1ï¼‰ï¼…maxsize</strong></p><p>åˆ é™¤æ•°æ® Cï¼Œé˜Ÿåˆ—ä¸ºç©º</p><p><img src="https://unpkg.com/serms-assets@1.0.6/queue/07.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" /></p><p>ä¾æ¬¡æ’å…¥æ•°æ® D,E,F,G,H,I,J,K<br />é˜Ÿåˆ—æ»¡ï¼šhead = tail</p><p><img src="https://unpkg.com/serms-assets@1.0.6/queue/08.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" /></p><p>é˜Ÿæ»¡å’Œé˜Ÿç©ºæ—¶ï¼Œå‡æœ‰ head=tail<br />å› æ­¤ï¼Œåªå‡­ head=tail è¿˜æ— æ³•åŒºåˆ†æ˜¯æ»¡è¿˜æ˜¯ç©ºã€‚</p><p>å¦‚ä½•åˆ¤å®šé˜Ÿåˆ—æ»¡è¿˜æ˜¯ç©ºï¼Ÿ</p><p>æ–¹æ³• 1ï¼š<br />ç”¨ä¸€ä¸ªè®¡æ•°å˜é‡æ¥è®°è½½é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°<br />åˆå§‹åŒ–é˜Ÿåˆ—æ—¶ c=0;<br />å½“å…¥é˜Ÿæ—¶ï¼Œè®¡æ•°å˜é‡ï¼‹ 1ï¼ˆ c=c+1 ï¼‰<br />å½“å‡ºé˜Ÿæ—¶ï¼Œè®¡æ•°å˜é‡ï¼1 ï¼ˆc=c-1ï¼‰<br />å½“è®¡æ•°å˜é‡ï¼ maxsize æ—¶ï¼Œé˜Ÿæ»¡<br />å½“è®¡æ•°å˜é‡ï¼ 0 æ—¶ï¼Œé˜Ÿç©º</p><p>æ–¹æ³• 2ï¼š<br />ç‰ºç‰²ä¸€ä¸ªå…ƒç´ ç©ºé—´ï¼Œæ¥åŒºåˆ«é˜Ÿç©ºæˆ–é˜Ÿæ»¡ã€‚<br />å…¥é˜Ÿå‰ï¼Œå…ˆåˆ¤ Q.rear+1 æ˜¯å¦ç­‰äº Q.frontï¼Œ<br />è‹¥æ˜¯åˆ™ä¸ºé˜Ÿæ»¡ã€‚<br />è€Œå½“ Q.front=Q.rear æ—¶ï¼Œä¸ºé˜Ÿç©ºã€‚<br />ä¸Šå›¾ä¸­ï¼šå½“æ•°æ® J å…¥é˜Ÿåï¼Œå°±è®¤ä¸ºé˜Ÿå·²æ»¡ï¼Œ<br />è€Œå½“æ•°æ® K å†è¦å…¥é˜Ÿæ—¶ï¼Œå°±æ‹’ç»å…¥é˜Ÿã€‚</p><p>å½“é˜Ÿåˆ—å·²ç»æ»¡äº†ï¼Œå¦‚æœå…è®¸è¦†ç›–ä¹‹å‰çš„æ•°æ®ï¼š<br /><img src="https://unpkg.com/serms-assets@1.0.6/queue/09.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" /></p><p>é˜Ÿåˆ—å·²ç»æ»¡äº†ä¹‹åï¼Œ<br />ç»§ç»­æ’å…¥æ•°æ® L,M,Nï¼Œ<br />ä¹‹å‰çš„æ•°æ® D,E,F è¢«è¦†ç›–<br />æ­¤æ—¶ï¼Œé˜Ÿåˆ—å·²ç»æ»¡äº†ï¼Œ<br />æœ€æ–°çš„æ•°æ®æ˜¯ï¼šG,H,Iï¼ŒJï¼ŒK,L,M,N</p><p>åœ¨ç¨‹åºä¸­ï¼Œå–é˜Ÿåˆ—çš„æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœæ£€æµ‹åˆ° é˜Ÿåˆ—æ»¡äº†ï¼Œ<br />æ­¤æ—¶ï¼Œéœ€è¦ä¸€æ¬¡æ€§å–å‡ºé˜Ÿåˆ—ä¸­çš„æ•°æ®ï¼Œä¸€æ¬¡æ€§å–å‡ºæ•°æ®çš„æ—¶å€™ï¼Œä¸ç”¨ç®¡ head æŒ‡é’ˆï¼Œç›´æ¥æŒ‰ç…§ tail æŒ‡é’ˆæŒ‡å‘çš„ä½ç½®å¼€å§‹å–æ•°æ®ï¼Œç›´åˆ°å¾ªç¯å–åˆ° tail-1 ä½ç½®åœæ­¢ã€‚æœ€ç»ˆå–å‡ºçš„æ•°æ®çš„ä¸ªæ•°æ˜¯ é˜Ÿåˆ—çš„é•¿åº¦ maxsize<br />å–å‡ºä¹‹åï¼Œå¯ä»¥å¯¹é˜Ÿåˆ—æŒ‡é’ˆ head å’Œ tail åˆå§‹åŒ–ä¸º 0ï¼Œéœ€è¦å°†é˜Ÿåˆ—æ»¡æ•´ä¸ªæ ‡å¿—è®¾ç½®ä¸º False.</p><p>å½“åº”è¯¥ç”¨åœºæ™¯å¦‚ä¸‹çš„æ—¶å€™ï¼š</p><ol><li>æ•°æ®æ˜¯ä¸€æ¡ä¸€æ¡çš„è¿›å…¥é˜Ÿåˆ—çš„</li><li>é˜Ÿåˆ—ä¸­çš„æ•°æ®æ˜¯ä¸€æ¬¡æ€§è¯»å–çš„<br />ä¸€æ¬¡æ€§è¯»å–å‡ºé˜Ÿåˆ—ä¸­çš„æ‰€æœ‰æ•°æ®çš„æ–¹å¼ï¼š<br />å› ä¸ºå…è®¸è¦†ç›–ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š<br />å½“é˜Ÿåˆ—æ»¡äº†ä¹‹åï¼Œ<br />éœ€è¦æ ¹æ® tail,ä» tail æ‰€åœ¨ä½ç½®çš„æ•°æ®ï¼Œç»•ä¸€åœˆåˆ° tail-1 ä½ç½®æ‰€åœ¨çš„æ•°æ®ï¼Œéƒ½æŒ‰ç…§é¡ºåºå–å‡ºæ¥ï¼Œè¿™äº›æ•°æ®æ˜¯æŒ‰ç…§é¡ºåºï¼Œæœ€æ–°çš„æ•°æ®ã€‚<br />å½“é˜Ÿåˆ—æ²¡æœ‰æ»¡çš„æ—¶å€™ï¼Œ<br />é˜Ÿåˆ—ä¸­æ‰€æœ‰çš„æ•°æ®æ˜¯ Head åˆ° tail ä¹‹é—´çš„æ‰€æœ‰æ•°æ®ã€‚</li></ol><p><strong>è¿™é‡Œé‡‡ç”¨æ–¹å¼ 2 æ¥è¿›è¡Œä»£ç æ¼”ç¤º</strong></p><p>å‚è€ƒä»£ç ï¼š</p><p>åˆ†æ:</p><ol><li>å½“é˜Ÿåˆ—æ»¡æ—¶,æ¡ä»¶æ˜¯(rear + 1) % maxSize = front</li><li>é˜Ÿåˆ—ä¸ºç©ºçš„æ¡ä»¶: rear == front</li><li>é˜Ÿåˆ—æœ‰æ•ˆæ•°æ®ä¸ªæ•°:(rear + maxSize - front) % maxSize</li></ol></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> SerMs</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2022/3/20 18:39</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CircleArrayQueueDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æµ‹è¯•æ•°ç»„æ¨¡æ‹Ÿç¯å½¢é˜Ÿåˆ—çš„æ¡ˆä¾‹~~~~~&quot;</span>);</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—</span></span><br><span class="line">        <span class="type">CircleArray</span> <span class="variable">circleArray</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CircleArray</span>(<span class="number">4</span>); <span class="comment">//è¯´æ˜è®¾ç½®4.å…¶é˜Ÿåˆ—çš„æœ‰æ•ˆæ•°æ®æœ€å¤§æ˜¯3</span></span><br><span class="line">        <span class="type">char</span> <span class="variable">key</span> <span class="operator">=</span> <span class="string">&#x27; &#x27;</span>; <span class="comment">//æ¥æ”¶ç”¨æˆ·è¾“å…¥</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">loop</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">//è¾“å‡ºä¸€ä¸ªèœå•</span></span><br><span class="line">        <span class="keyword">while</span> (loop) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;s(show): æ˜¾ç¤ºé˜Ÿåˆ—&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;e(exit): æ¨å‡ºé˜Ÿåˆ—&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;a(add): æ·»åŠ æ•°æ®åˆ°é˜Ÿåˆ—&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;g(get): ä»é˜Ÿåˆ—å–å‡ºæ•°æ®&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;h(head): æŸ¥çœ‹é˜Ÿåˆ—å¤´çš„æ•°æ®&quot;</span>);</span><br><span class="line">            key = scanner.next().charAt(<span class="number">0</span>); <span class="comment">//æ¥æ”¶ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line">            <span class="keyword">switch</span> (key) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        circleArray.showQueue();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                        System.out.println(e.getMessage());</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>:</span><br><span class="line">                    System.out.println(<span class="string">&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•°&quot;</span>);</span><br><span class="line">                    <span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">                    circleArray.addQueue(value);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;g&#x27;</span>: <span class="comment">//å–å‡ºæ•°æ®</span></span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> circleArray.getQueue();</span><br><span class="line">                        System.out.printf(<span class="string">&quot;å–å‡ºçš„æ•°æ®æ˜¯: %d\n&quot;</span>, res);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                        System.out.println(e.getMessage());</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;h&#x27;</span>:</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> circleArray.headQueue();</span><br><span class="line">                        System.out.printf(<span class="string">&quot;é˜Ÿåˆ—å¤´æ•°æ®æ˜¯:%d\n&quot;</span>, res);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                        System.out.println(e.getMessage());</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;e&#x27;</span>:</span><br><span class="line">                    scanner.close();</span><br><span class="line">                    loop = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;é€€å‡ºé˜Ÿåˆ—~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CircleArray</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> maxSize;  <span class="comment">//è¡¨ç¤ºæ•°ç»„çš„æœ€å¤§å®¹é‡</span></span><br><span class="line">    <span class="comment">//frontçš„åˆå§‹å€¼=0 ä¹Ÿå°±æ˜¯è¯´arr[front]å°±æ˜¯é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> front;  <span class="comment">//é˜Ÿåˆ—å¤´</span></span><br><span class="line">    <span class="comment">//rearçš„åˆå§‹å€¼=0 rearæŒ‡å‘é˜Ÿåˆ—çš„æœ€åä¸€ä¸ªå…ƒç´ çš„åä¸€ä¸ªä½ç½®,å› ä¸ºå¸Œæœ›ç©ºå‡ºä¸€ä¸ªç©ºé—´ä½œä¸ºçº¦å®š</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> rear;   <span class="comment">//é˜Ÿåˆ—å°¾</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] arr; <span class="comment">//è¯¥æ•°ç»„ç”¨äºå­˜æ”¾æ•°æ®,æ¨¡æ‹Ÿé˜Ÿåˆ—</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºé˜Ÿåˆ—æ„é€ å™¨</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CircleArray</span><span class="params">(<span class="type">int</span> arrMaxSize)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.maxSize = arrMaxSize;</span><br><span class="line">        <span class="built_in">this</span>.arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="built_in">this</span>.maxSize];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦æ»¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (rear + <span class="number">1</span>) % maxSize == front;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">return</span> <span class="variable">rear</span> <span class="operator">=</span>= front;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ·»åŠ æ•°æ®åˆ°é˜Ÿåˆ—</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addQueue</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isFull()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;é˜Ÿåˆ—æ»¡,ä¸èƒ½åŠ å…¥æ•°æ®~~~&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ç›´æ¥å°†æ•°æ®åŠ å…¥</span></span><br><span class="line">        arr[rear] = n;</span><br><span class="line">        <span class="comment">//å°†rearåç§»,å¿…é¡»è€ƒè™‘å–æ¨¡</span></span><br><span class="line">        rear = (rear + <span class="number">1</span>) % maxSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–é˜Ÿåˆ—çš„æ•°æ®,å‡ºé˜Ÿåˆ—</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getQueue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;é˜Ÿåˆ—ä¸ºç©º,ä¸èƒ½è·å–æ•°æ®&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åˆ†æå‡ºfrontæ˜¯æŒ‡å‘é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="comment">//1.å…ˆæŠŠfrontå¯¹åº”çš„å€¼ä¿å­˜åˆ°ä¸´æ—¶å˜é‡</span></span><br><span class="line">        <span class="comment">//2.å°†frontåç§» è€ƒè™‘å–æ¨¡</span></span><br><span class="line">        <span class="comment">//3.å°†ä¸´æ—¶ä¿å­˜çš„å˜é‡è¿”å›</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> arr[front];</span><br><span class="line">        front = (front + <span class="number">1</span>) % maxSize;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ˜¾ç¤ºæ‰€æœ‰æ•°æ®</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showQueue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//éå†</span></span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;é˜Ÿåˆ—ä¸ºç©º,ä¸èƒ½è·å–æ•°æ®&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ€è·¯:ä»frontå¼€å§‹éå†,éå†å¤šå°‘ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> front; i &lt; front + size(); i++) &#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;arr[%d] = %d\n&quot;</span>, i % maxSize, arr[i % maxSize]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ±‚å‡ºå½“å‰é˜Ÿåˆ—æœ‰æ•ˆæ•°æ®çš„ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (rear + maxSize - front) % maxSize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ˜¾ç¤ºé˜Ÿåˆ—å¤´æ•°æ®,ä¸æ˜¯å–å‡ºæ•°æ®</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">headQueue</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;é˜Ÿåˆ—ä¸ºç©º,æ²¡æœ‰æ•°æ®~~~~&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr[front];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
          <category> å¾ªç¯é˜Ÿåˆ— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OJ1024</title>
      <link href="/posts/9b97716e/"/>
      <url>/posts/9b97716e/</url>
      
        <content type="html"><![CDATA[<p>ps:<code>ç®—æ³•æ‰“å¡ç¬¬ä¸€å¤©</code></p><h2 id="é‡‘å¸"><a class="markdownIt-Anchor" href="#é‡‘å¸"></a> é‡‘å¸</h2><blockquote><h3 id="æè¿°"><a class="markdownIt-Anchor" href="#æè¿°"></a> æè¿°</h3><p>å›½ç‹å°†é‡‘å¸ä½œä¸ºå·¥èµ„ï¼Œå‘æ”¾ç»™å¿ è¯šçš„éª‘å£«ã€‚ç¬¬ä¸€å¤©ï¼Œéª‘å£«æ”¶åˆ°ä¸€æšé‡‘å¸ï¼›ä¹‹åä¸¤å¤©ï¼ˆç¬¬äºŒå¤©å’Œç¬¬ä¸‰å¤©ï¼‰ï¼Œæ¯å¤©æ”¶åˆ°ä¸¤æšé‡‘å¸ï¼›ä¹‹åä¸‰å¤©ï¼ˆç¬¬å››ã€äº”ã€å…­å¤©ï¼‰ï¼Œæ¯å¤©æ”¶åˆ°ä¸‰æšé‡‘å¸ï¼›ä¹‹åå››å¤©ï¼ˆç¬¬ä¸ƒã€å…«ã€ä¹ã€åå¤©ï¼‰ï¼Œæ¯å¤©æ”¶åˆ°å››æšé‡‘å¸â€¦â€¦ï¼›è¿™ç§å·¥èµ„å‘æ”¾æ¨¡å¼ä¼šä¸€ç›´è¿™æ ·å»¶ç»­ä¸‹å»ï¼šå½“è¿ç»­ N å¤©æ¯å¤©æ”¶åˆ° N æšé‡‘å¸åï¼Œéª‘å£«ä¼šåœ¨ä¹‹åçš„è¿ç»­ N+1 å¤©é‡Œï¼Œæ¯å¤©æ”¶åˆ° N+1 æšé‡‘å¸ã€‚</p><p>è¯·è®¡ç®—åœ¨å‰ K å¤©é‡Œï¼Œéª‘å£«ä¸€å…±è·å¾—äº†å¤šå°‘é‡‘å¸ã€‚</p><h3 id="è¾“å…¥"><a class="markdownIt-Anchor" href="#è¾“å…¥"></a> è¾“å…¥</h3><p>è¾“å…¥åªæœ‰ 1 è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ­£æ•´æ•° Kï¼Œè¡¨ç¤ºå‘æ”¾é‡‘å¸çš„å¤©æ•°ã€‚</p><h3 id="è¾“å‡º"><a class="markdownIt-Anchor" href="#è¾“å‡º"></a> è¾“å‡º</h3><p>è¾“å‡ºæ–‡ä»¶åªæœ‰ 1 è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå³éª‘å£«æ”¶åˆ°çš„é‡‘å¸æ•°ã€‚</p><p><img src="https://unpkg.com/serms-assets@1.0.6/oj/image-20220317235542863.png" alt="" /></p></blockquote><h2 id="åˆ†æ"><a class="markdownIt-Anchor" href="#åˆ†æ"></a> åˆ†æ</h2><blockquote><p>éª‘å£«æ”¶çš„é‡‘å¸æ•°å†™æˆä»¥ä¸‹å½¢å¼ï¼Œæ›´å®¹æ˜“æƒ³åˆ°è§£é¢˜æ–¹æ³•<br />ä»¥å‰ 10 å¤©ï¼ˆåŒ…æ‹¬ç¬¬ 10 å¤©ï¼‰æ”¶åˆ°çš„é‡‘å¸æ•°ä¸ºä¾‹ï¼Œåˆ™æ”¶åˆ°çš„é‡‘å¸æ•°ä¸ºï¼š<br />1 ï¼ˆç¬¬ä¸€å¤©ï¼‰<br />2 2 ï¼ˆç¬¬äºŒã€ä¸‰å¤©ï¼‰<br />3 3 3 ï¼ˆç¬¬å››ã€äº”ã€å…­å¤©ï¼‰<br />4 4 4 4 ï¼ˆç¬¬ä¸ƒã€å…«ã€ä¹ã€åå¤©ï¼‰<br />è‹¥æƒ³æ‰“å°ä¸Šé¢çš„è¿™ä¸ªæ•°å­—ä¸‰è§’å½¢çš„è¯ï¼Œåªéœ€ä¸¤ä¸ª for å¾ªç¯å³å¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;i&lt;=<span class="number">4</span>; i++) &#123;</span><br><span class="line">   <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= i; j++) &#123;</span><br><span class="line">       System.out.println(i);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç±»æ¯”è¿™æ®µä»£ç ï¼Œå†…å±‚ for å¾ªç¯å¯ä»¥ä»£è¡¨å¤©æ•°ï¼Œé‚£åªéœ€ä¿®æ”¹å¾ªç¯ç»ˆæ­¢çš„æ¡ä»¶ï¼Œå½“å¤©æ•° day==k æ—¶ï¼Œç»ˆæ­¢å¾ªç¯å³å¯ã€‚<br />è¯¥é¢˜è§£å†³ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Author</span> SerMs</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Date</span> 2022/3/17 23:15</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main1024</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">       <span class="type">int</span> <span class="variable">day</span> <span class="operator">=</span> sc.nextInt(), days = <span class="number">0</span>, sum = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;; i++) &#123;</span><br><span class="line">           <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= i; j++) &#123;</span><br><span class="line">               days++;</span><br><span class="line">               sum += i;</span><br><span class="line">               <span class="keyword">if</span> (day==days)&#123;</span><br><span class="line">                   System.out.println(sum);</span><br><span class="line">                   <span class="keyword">return</span>;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote>]]></content>
      
      
      <categories>
          
          <category> OJ </category>
          
          <category> HNKJZYXY_OJ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HNKJZYXY_OJ </tag>
            
            <tag> OJ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Aopè¯¦ç»†ä»‹ç»</title>
      <link href="/posts/9dadefec/"/>
      <url>/posts/9dadefec/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯-aop"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯-aop"></a> ä»€ä¹ˆæ˜¯ AOP</h2><blockquote><p>â€‹ <a href="https://baike.baidu.com/item/AOP/1332219?fr=aladdin">AOP</a>ï¼ˆAspect-OrientedProgrammingï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ï¼Œå¯ä»¥è¯´æ˜¯ OOPï¼ˆObject-Oriented Programingï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰çš„è¡¥å……å’Œå®Œå–„ã€‚OOP å¼•å…¥å°è£…ã€ç»§æ‰¿å’Œå¤šæ€æ€§ç­‰æ¦‚å¿µæ¥å»ºç«‹ä¸€ç§å¯¹è±¡å±‚æ¬¡ç»“æ„ï¼Œç”¨ä»¥æ¨¡æ‹Ÿå…¬å…±è¡Œä¸ºçš„ä¸€ä¸ªé›†åˆã€‚å½“æˆ‘ä»¬éœ€è¦ä¸ºåˆ†æ•£çš„å¯¹è±¡å¼•å…¥å…¬å…±è¡Œä¸ºçš„æ—¶å€™ï¼ŒOOP åˆ™æ˜¾å¾—æ— èƒ½ä¸ºåŠ›ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒOOP å…è®¸ä½ å®šä¹‰ä»ä¸Šåˆ°ä¸‹çš„å…³ç³»ï¼Œä½†å¹¶ä¸é€‚åˆå®šä¹‰ä»å·¦åˆ°å³çš„å…³ç³»ã€‚ä¾‹å¦‚æ—¥å¿—åŠŸèƒ½ã€‚æ—¥å¿—ä»£ç å¾€å¾€æ°´å¹³åœ°æ•£å¸ƒåœ¨æ‰€æœ‰å¯¹è±¡å±‚æ¬¡ä¸­ï¼Œè€Œä¸å®ƒæ‰€æ•£å¸ƒåˆ°çš„å¯¹è±¡çš„æ ¸å¿ƒåŠŸèƒ½æ¯«æ— å…³ç³»ã€‚å¯¹äºå…¶ä»–ç±»å‹çš„ä»£ç ï¼Œå¦‚å®‰å…¨æ€§ã€å¼‚å¸¸å¤„ç†å’Œé€æ˜çš„æŒç»­æ€§ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™ç§æ•£å¸ƒåœ¨å„å¤„çš„æ— å…³çš„ä»£ç è¢«ç§°ä¸ºæ¨ªåˆ‡ï¼ˆcross-cuttingï¼‰ä»£ç ï¼Œåœ¨ OOP è®¾è®¡ä¸­ï¼Œå®ƒå¯¼è‡´äº†å¤§é‡ä»£ç çš„é‡å¤ï¼Œè€Œä¸åˆ©äºå„ä¸ªæ¨¡å—çš„é‡ç”¨ã€‚</p><p>â€‹ è€Œ AOP æŠ€æœ¯åˆ™æ°æ°ç›¸åï¼Œå®ƒåˆ©ç”¨ä¸€ç§ç§°ä¸ºâ€œæ¨ªåˆ‡â€çš„æŠ€æœ¯ï¼Œå‰–è§£å¼€å°è£…çš„å¯¹è±¡å†…éƒ¨ï¼Œå¹¶å°†é‚£äº›å½±å“äº†å¤šä¸ªç±»çš„å…¬å…±è¡Œä¸ºå°è£…åˆ°ä¸€ä¸ªå¯é‡ç”¨æ¨¡å—ï¼Œå¹¶å°†å…¶åä¸ºâ€œAspectâ€ï¼Œå³æ–¹é¢ã€‚æ‰€è°“â€œæ–¹é¢â€ï¼Œç®€å•åœ°è¯´ï¼Œå°±æ˜¯å°†é‚£äº›ä¸ä¸šåŠ¡æ— å…³ï¼Œå´ä¸ºä¸šåŠ¡æ¨¡å—æ‰€å…±åŒè°ƒç”¨çš„é€»è¾‘æˆ–è´£ä»»å°è£…èµ·æ¥ï¼Œä¾¿äºå‡å°‘ç³»ç»Ÿçš„é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—é—´çš„è€¦åˆåº¦ï¼Œå¹¶æœ‰åˆ©äºæœªæ¥çš„å¯æ“ä½œæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚AOP ä»£è¡¨çš„æ˜¯ä¸€ä¸ªæ¨ªå‘çš„å…³ç³»ï¼Œå¦‚æœè¯´â€œå¯¹è±¡â€æ˜¯ä¸€ä¸ªç©ºå¿ƒçš„åœ†æŸ±ä½“ï¼Œå…¶ä¸­å°è£…çš„æ˜¯å¯¹è±¡çš„å±æ€§å’Œè¡Œä¸ºï¼›é‚£ä¹ˆé¢å‘æ–¹é¢ç¼–ç¨‹çš„æ–¹æ³•ï¼Œå°±ä»¿ä½›ä¸€æŠŠåˆ©åˆƒï¼Œå°†è¿™äº›ç©ºå¿ƒåœ†æŸ±ä½“å‰–å¼€ï¼Œä»¥è·å¾—å…¶å†…éƒ¨çš„æ¶ˆæ¯ã€‚è€Œå‰–å¼€çš„åˆ‡é¢ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„â€œæ–¹é¢â€äº†ã€‚ç„¶åå®ƒåˆä»¥å·§å¤ºå¤©åŠŸçš„å¦™æ‰‹å°†è¿™äº›å‰–å¼€çš„åˆ‡é¢å¤åŸï¼Œä¸ç•™ç—•è¿¹ã€‚</p></blockquote><hr /><h2 id="aop-çš„åŸºæœ¬æ¦‚å¿µ"><a class="markdownIt-Anchor" href="#aop-çš„åŸºæœ¬æ¦‚å¿µ"></a> AOP çš„åŸºæœ¬æ¦‚å¿µ</h2><blockquote><ul><li>(1)Aspect(åˆ‡é¢):é€šå¸¸æ˜¯ä¸€ä¸ªç±»ï¼Œé‡Œé¢å¯ä»¥å®šä¹‰åˆ‡å…¥ç‚¹å’Œé€šçŸ¥</li><li>(2)JointPoint(è¿æ¥ç‚¹):ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­æ˜ç¡®çš„ç‚¹ï¼Œä¸€èˆ¬æ˜¯æ–¹æ³•çš„è°ƒç”¨</li><li>(3)Advice(é€šçŸ¥):AOP åœ¨ç‰¹å®šçš„åˆ‡å…¥ç‚¹ä¸Šæ‰§è¡Œçš„å¢å¼ºå¤„ç†ï¼Œæœ‰ before,after,afterReturning,afterThrowing,around</li><li>(4)Pointcut(åˆ‡å…¥ç‚¹):å°±æ˜¯å¸¦æœ‰é€šçŸ¥çš„è¿æ¥ç‚¹ï¼Œåœ¨ç¨‹åºä¸­ä¸»è¦ä½“ç°ä¸ºä¹¦å†™åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</li><li>(5)AOP ä»£ç†ï¼šAOP æ¡†æ¶åˆ›å»ºçš„å¯¹è±¡ï¼Œä»£ç†å°±æ˜¯ç›®æ ‡å¯¹è±¡çš„åŠ å¼ºã€‚Spring ä¸­çš„ AOP ä»£ç†å¯ä»¥ä½¿ JDK åŠ¨æ€ä»£ç†ï¼Œä¹Ÿå¯ä»¥æ˜¯ CGLIB ä»£ç†ï¼Œå‰è€…åŸºäºæ¥å£ï¼Œåè€…åŸºäºå­ç±»</li></ul></blockquote><p><strong>é€šçŸ¥æ–¹æ³•:</strong></p><blockquote><ol><li>å‰ç½®é€šçŸ¥:åœ¨æˆ‘ä»¬æ‰§è¡Œç›®æ ‡æ–¹æ³•ä¹‹å‰è¿è¡Œ(<strong>@Before</strong>)</li><li>åç½®é€šçŸ¥:åœ¨æˆ‘ä»¬ç›®æ ‡æ–¹æ³•è¿è¡Œç»“æŸä¹‹å ,ä¸ç®¡æœ‰æ²¡æœ‰å¼‚å¸¸****(@After)****</li><li>è¿”å›é€šçŸ¥:åœ¨æˆ‘ä»¬çš„ç›®æ ‡æ–¹æ³•æ­£å¸¸è¿”å›å€¼åè¿è¡Œ****(@AfterReturning)****</li><li>å¼‚å¸¸é€šçŸ¥:åœ¨æˆ‘ä»¬çš„ç›®æ ‡æ–¹æ³•å‡ºç°å¼‚å¸¸åè¿è¡Œ****(@AfterThrowing)****</li><li>ç¯ç»•é€šçŸ¥:åŠ¨æ€ä»£ç†, éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ joinPoint.procced()(å…¶å®å°±æ˜¯æ‰§è¡Œæˆ‘ä»¬çš„ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰ç›¸å½“äºå‰ç½®é€šçŸ¥, æ‰§è¡Œä¹‹åå°±ç›¸å½“äºæˆ‘ä»¬åç½®é€šçŸ¥**(@Around)**</li></ol></blockquote><hr /><h2 id="spring-aop"><a class="markdownIt-Anchor" href="#spring-aop"></a> Spring AOP</h2><blockquote><p>â€‹ Spring ä¸­çš„ AOP ä»£ç†è¿˜æ˜¯ç¦»ä¸å¼€ Spring çš„ IOC å®¹å™¨ï¼Œä»£ç†çš„ç”Ÿæˆï¼Œç®¡ç†åŠå…¶ä¾èµ–å…³ç³»éƒ½æ˜¯ç”± IOC å®¹å™¨è´Ÿè´£ï¼ŒSpring é»˜è®¤ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œåœ¨éœ€è¦ä»£ç†ç±»è€Œä¸æ˜¯ä»£ç†æ¥å£çš„æ—¶å€™ï¼ŒSpring ä¼šè‡ªåŠ¨åˆ‡æ¢ä¸ºä½¿ç”¨ CGLIB ä»£ç†ï¼Œä¸è¿‡ç°åœ¨çš„é¡¹ç›®éƒ½æ˜¯é¢å‘æ¥å£ç¼–ç¨‹ï¼Œæ‰€ä»¥ JDK åŠ¨æ€ä»£ç†ç›¸å¯¹æ¥è¯´ç”¨çš„è¿˜æ˜¯å¤šä¸€äº›ã€‚</p></blockquote><h3 id="advice-çš„ç±»å‹"><a class="markdownIt-Anchor" href="#advice-çš„ç±»å‹"></a> advice çš„ç±»å‹</h3><blockquote><ul><li>before advice, åœ¨ join point å‰è¢«æ‰§è¡Œçš„ advice. è™½ç„¶ before advice æ˜¯åœ¨ join point å‰è¢«æ‰§è¡Œ, ä½†æ˜¯å®ƒå¹¶ä¸èƒ½å¤Ÿé˜»æ­¢ join point çš„æ‰§è¡Œ, é™¤éå‘ç”Ÿäº†å¼‚å¸¸(å³æˆ‘ä»¬åœ¨ before advice ä»£ç ä¸­, ä¸èƒ½äººä¸ºåœ°å†³å®šæ˜¯å¦ç»§ç»­æ‰§è¡Œ join point ä¸­çš„ä»£ç )</li><li>after return advice, åœ¨ä¸€ä¸ª join point æ­£å¸¸è¿”å›åæ‰§è¡Œçš„ advice</li><li>after throwing advice, å½“ä¸€ä¸ª join point æŠ›å‡ºå¼‚å¸¸åæ‰§è¡Œçš„ advice</li><li>after(final) advice, æ— è®ºä¸€ä¸ª join point æ˜¯æ­£å¸¸é€€å‡ºè¿˜æ˜¯å‘ç”Ÿäº†å¼‚å¸¸, éƒ½ä¼šè¢«æ‰§è¡Œçš„ advice.</li><li>around advice, åœ¨ join point å‰å’Œ joint point é€€å‡ºåéƒ½æ‰§è¡Œçš„ advice. è¿™ä¸ªæ˜¯æœ€å¸¸ç”¨çš„ advice</li></ul></blockquote><h3 id="å…³äº-aop-proxy"><a class="markdownIt-Anchor" href="#å…³äº-aop-proxy"></a> å…³äº AOP Proxy</h3><p>Spring AOP é»˜è®¤ä½¿ç”¨æ ‡å‡†çš„ JDK åŠ¨æ€ä»£ç†(dynamic proxy)æŠ€æœ¯æ¥å®ç° AOP ä»£ç†, é€šè¿‡å®ƒ, æˆ‘ä»¬å¯ä»¥ä¸ºä»»æ„çš„æ¥å£å®ç°ä»£ç†. <code>å¦‚æœéœ€è¦ä¸ºä¸€ä¸ªç±»å®ç°ä»£ç†, é‚£ä¹ˆå¯ä»¥ä½¿ç”¨ CGLIB ä»£ç†.</code> å½“ä¸€ä¸ªä¸šåŠ¡é€»è¾‘å¯¹è±¡æ²¡æœ‰å®ç°æ¥å£æ—¶, é‚£ä¹ˆ Spring AOP å°±é»˜è®¤ä½¿ç”¨ CGLIB æ¥ä½œä¸º AOP ä»£ç†äº†. å³å¦‚æœæˆ‘ä»¬éœ€è¦ä¸ºä¸€ä¸ªæ–¹æ³•ç»‡å…¥ advice, ä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä¸æ˜¯ä¸€ä¸ªæ¥å£æ‰€æä¾›çš„æ–¹æ³•, åˆ™æ­¤æ—¶ Spring AOP ä¼šä½¿ç”¨ CGLIB æ¥å®ç°åŠ¨æ€ä»£ç†. é‰´äºæ­¤, Spring AOP å»ºè®®åŸºäºæ¥å£ç¼–ç¨‹, å¯¹æ¥å£è¿›è¡Œ AOP è€Œä¸æ˜¯ç±».</p><h3 id=""><a class="markdownIt-Anchor" href="#"></a> <a href="https://dunwu.github.io/spring-tutorial/core/spring-aop.html#%E5%BD%BB%E5%BA%95%E7%90%86%E8%A7%A3-aspect-join-point-point-cut-advice">#</a>å½»åº•ç†è§£ aspect, join point, point cut, advice</h3><p>çœ‹å®Œäº†ä¸Šé¢çš„ç†è®ºéƒ¨åˆ†çŸ¥è¯†, æˆ‘ç›¸ä¿¡è¿˜æ˜¯ä¼šæœ‰ä¸å°‘æœ‹å‹æ„Ÿè§‰åˆ° AOP çš„æ¦‚å¿µè¿˜æ˜¯å¾ˆæ¨¡ç³Š, å¯¹ AOP ä¸­çš„å„ç§æ¦‚å¿µç†è§£çš„è¿˜ä¸æ˜¯å¾ˆé€å½». å…¶å®è¿™å¾ˆæ­£å¸¸, å› ä¸º AOP ä¸­çš„æ¦‚å¿µæ˜¯åœ¨æ˜¯å¤ªå¤šäº†, æˆ‘å½“æ—¶ä¹Ÿæ˜¯èŠ±äº†è€å¤§åŠ²æ‰æ¢³ç†æ¸…æ¥šçš„. ä¸‹é¢æˆ‘ä»¥ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥æ¯”å–»ä¸€ä¸‹ AOP ä¸­ aspect, jointpoint, pointcut ä¸ advice ä¹‹é—´çš„å…³ç³».</p><p>è®©æˆ‘ä»¬æ¥å‡è®¾ä¸€ä¸‹, ä»å‰æœ‰ä¸€ä¸ªå«çˆªå“‡çš„å°å¿åŸ, åœ¨ä¸€ä¸ªæœˆé»‘é£é«˜çš„æ™šä¸Š, è¿™ä¸ªå¿åŸä¸­å‘ç”Ÿäº†å‘½æ¡ˆ. ä½œæ¡ˆçš„å‡¶æ‰‹ååˆ†ç‹¡çŒ¾, ç°åœºæ²¡æœ‰ç•™ä¸‹ä»€ä¹ˆæœ‰ä»·å€¼çš„çº¿ç´¢. ä¸è¿‡ä¸‡å¹¸çš„æ˜¯, åˆšä»éš”å£å›æ¥çš„è€ç‹æ°å¥½åœ¨è¿™æ—¶å€™æ— æ„ä¸­å‘ç°äº†å‡¶æ‰‹è¡Œå‡¶çš„è¿‡ç¨‹, ä½†æ˜¯ç”±äºå¤©è‰²å·²æ™š, åŠ ä¸Šå‡¶æ‰‹è’™ç€é¢, è€ç‹å¹¶æ²¡æœ‰çœ‹æ¸…å‡¶æ‰‹çš„é¢ç›®, åªçŸ¥é“å‡¶æ‰‹æ˜¯ä¸ªç”·æ€§, èº«é«˜çº¦ä¸ƒå°ºäº”å¯¸. çˆªå“‡å¿çš„å¿ä»¤æ ¹æ®è€ç‹çš„æè¿°, å¯¹å®ˆé—¨çš„å£«å…µä¸‹å‘½ä»¤è¯´: å‡¡æ˜¯å‘ç°æœ‰èº«é«˜ä¸ƒå°ºäº”å¯¸çš„ç”·æ€§, éƒ½è¦æŠ“è¿‡æ¥å®¡é—®. å£«å…µå½“ç„¶ä¸æ•¢è¿èƒŒå¿ä»¤çš„å‘½ä»¤, åªå¥½æŠŠè¿›å‡ºåŸçš„æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„äººéƒ½æŠ“äº†èµ·æ¥.</p><p>æ¥è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä¸Šé¢çš„ä¸€ä¸ªå°æ•…äº‹å’Œ AOP åˆ°åº•æœ‰ä»€ä¹ˆå¯¹åº”å…³ç³». é¦–å…ˆæˆ‘ä»¬çŸ¥é“, åœ¨ Spring AOP ä¸­ join point æŒ‡ä»£çš„æ˜¯æ‰€æœ‰æ–¹æ³•çš„æ‰§è¡Œç‚¹, è€Œ point cut æ˜¯ä¸€ä¸ªæè¿°ä¿¡æ¯, å®ƒä¿®é¥°çš„æ˜¯ join point, é€šè¿‡ point cut, æˆ‘ä»¬å°±å¯ä»¥ç¡®å®šå“ªäº› join point å¯ä»¥è¢«ç»‡å…¥ Advice. å¯¹åº”åˆ°æˆ‘ä»¬åœ¨ä¸Šé¢ä¸¾çš„ä¾‹å­, æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªç®€å•çš„ç±»æ¯”, join point å°±ç›¸å½“äº <strong>çˆªå“‡çš„å°å¿åŸé‡Œçš„ç™¾å§“</strong>, point cut å°±ç›¸å½“äº <strong>è€ç‹æ‰€åšçš„æŒ‡æ§, å³å‡¶æ‰‹æ˜¯ä¸ªç”·æ€§, èº«é«˜çº¦ä¸ƒå°ºäº”å¯¸</strong>, è€Œ advice åˆ™æ˜¯æ–½åŠ åœ¨ç¬¦åˆè€ç‹æ‰€æè¿°çš„å«Œç–‘äººçš„åŠ¨ä½œ: <strong>æŠ“è¿‡æ¥å®¡é—®</strong>. ä¸ºä»€ä¹ˆå¯ä»¥è¿™æ ·ç±»æ¯”å‘¢?</p><ul><li>join point --&gt; çˆªå“‡çš„å°å¿åŸé‡Œçš„ç™¾å§“: å› ä¸ºæ ¹æ®å®šä¹‰, join point æ˜¯æ‰€æœ‰å¯èƒ½è¢«ç»‡å…¥ advice çš„å€™é€‰çš„ç‚¹, åœ¨ Spring AOP ä¸­, åˆ™å¯ä»¥è®¤ä¸ºæ‰€æœ‰æ–¹æ³•æ‰§è¡Œç‚¹éƒ½æ˜¯ join point. è€Œåœ¨æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ä¸­, å‘½æ¡ˆå‘ç”Ÿåœ¨å°å¿åŸä¸­, æŒ‰ç†è¯´åœ¨æ­¤å¿åŸä¸­çš„æ‰€æœ‰äººéƒ½æœ‰å¯èƒ½æ˜¯å«Œç–‘äºº.</li><li>point cut --&gt; ç”·æ€§, èº«é«˜çº¦ä¸ƒå°ºäº”å¯¸: æˆ‘ä»¬çŸ¥é“, æ‰€æœ‰çš„æ–¹æ³•(joint point) éƒ½å¯ä»¥ç»‡å…¥ advice, ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸å¸Œæœ›åœ¨æ‰€æœ‰æ–¹æ³•ä¸Šéƒ½ç»‡å…¥ advice, è€Œ pointcut çš„ä½œç”¨å°±æ˜¯æä¾›ä¸€ç»„è§„åˆ™æ¥åŒ¹é… joinpoint, ç»™æ»¡è¶³è§„åˆ™çš„ joinpoint æ·»åŠ  advice. åŒç†, å¯¹äºå¿ä»¤æ¥è¯´, ä»–å†æ˜åº¸, ä¹ŸçŸ¥é“ä¸èƒ½æŠŠå¿åŸä¸­çš„æ‰€æœ‰ç™¾å§“éƒ½æŠ“èµ·æ¥å®¡é—®, è€Œæ˜¯æ ¹æ®<code>å‡¶æ‰‹æ˜¯ä¸ªç”·æ€§, èº«é«˜çº¦ä¸ƒå°ºäº”å¯¸</code>, æŠŠç¬¦åˆæ¡ä»¶çš„äººæŠ“èµ·æ¥. åœ¨è¿™é‡Œ<code>å‡¶æ‰‹æ˜¯ä¸ªç”·æ€§, èº«é«˜çº¦ä¸ƒå°ºäº”å¯¸</code> å°±æ˜¯ä¸€ä¸ªä¿®é¥°è°“è¯­, å®ƒé™å®šäº†å‡¶æ‰‹çš„èŒƒå›´, æ»¡è¶³æ­¤ä¿®é¥°è§„åˆ™çš„ç™¾å§“éƒ½æ˜¯å«Œç–‘äºº, éƒ½éœ€è¦æŠ“èµ·æ¥å®¡é—®.</li><li>advice --&gt; æŠ“è¿‡æ¥å®¡é—®, advice æ˜¯ä¸€ä¸ªåŠ¨ä½œ, å³ä¸€æ®µ Java ä»£ç , è¿™æ®µ Java ä»£ç æ˜¯ä½œç”¨äº point cut æ‰€é™å®šçš„é‚£äº› join point ä¸Šçš„. åŒç†, å¯¹æ¯”åˆ°æˆ‘ä»¬çš„ä¾‹å­ä¸­, <code>æŠ“è¿‡æ¥å®¡é—®</code> è¿™ä¸ªåŠ¨ä½œå°±æ˜¯å¯¹ä½œç”¨äºé‚£äº›æ»¡è¶³ <code>ç”·æ€§, èº«é«˜çº¦ä¸ƒå°ºäº”å¯¸</code> çš„<code>çˆªå“‡çš„å°å¿åŸé‡Œçš„ç™¾å§“</code>.</li><li>aspect: aspect æ˜¯ point cut ä¸ advice çš„ç»„åˆ, å› æ­¤åœ¨è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥ç±»æ¯”: <strong>â€œæ ¹æ®è€ç‹çš„çº¿ç´¢, å‡¡æ˜¯å‘ç°æœ‰èº«é«˜ä¸ƒå°ºäº”å¯¸çš„ç”·æ€§, éƒ½è¦æŠ“è¿‡æ¥å®¡é—®â€</strong> è¿™ä¸€æ•´ä¸ªåŠ¨ä½œå¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ª aspect.</li></ul><p>æˆ–åˆ™æˆ‘ä»¬ä¹Ÿå¯ä»¥ä»è¯­æ³•çš„è§’åº¦æ¥ç®€å•ç±»æ¯”ä¸€ä¸‹. æˆ‘ä»¬åœ¨å­¦è‹±è¯­æ—¶, ç»å¸¸ä¼šæ¥è§¦ä»€ä¹ˆ <code>å®šè¯­</code>, <code>è¢«åŠ¨å¥</code> ä¹‹ç±»çš„æ¦‚å¿µ, é‚£ä¹ˆå¯ä»¥åšä¸€ä¸ªä¸ä¸¥è°¨çš„ç±»æ¯”, å³ <code>joinpoint</code> å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ª <code>å®¾è¯­</code>, è€Œ <code>pointcut</code> åˆ™å¯ä»¥ç±»æ¯”ä¸ºä¿®é¥° <code>joinpoint</code> çš„å®šè¯­, é‚£ä¹ˆæ•´ä¸ª <code>aspect</code> å°±å¯ä»¥æè¿°ä¸º: <code>æ»¡è¶³ pointcut è§„åˆ™çš„ joinpoint ä¼šè¢«æ·»åŠ ç›¸åº”çš„ advice æ“ä½œ.</code></p><hr /><h2 id="aspectj-æ”¯æŒ"><a class="markdownIt-Anchor" href="#aspectj-æ”¯æŒ"></a> @AspectJ æ”¯æŒ</h2><p><strong><code>@AspectJ</code></strong> æ˜¯ä¸€ç§ä½¿ç”¨ Java æ³¨è§£æ¥å®ç° AOP çš„ç¼–ç é£æ ¼ã€‚</p><p>@AspectJ é£æ ¼çš„ AOP æ˜¯ AspectJ Project åœ¨ AspectJ 5 ä¸­å¼•å…¥çš„, å¹¶ä¸” Spring ä¹Ÿæ”¯æŒ @AspectJ çš„ AOP é£æ ¼.</p><h3 id="ä½¿èƒ½-aspectj-æ”¯æŒ"><a class="markdownIt-Anchor" href="#ä½¿èƒ½-aspectj-æ”¯æŒ"></a> ä½¿èƒ½ @AspectJ æ”¯æŒ</h3><p>@AspectJ å¯ä»¥ä»¥ XML çš„æ–¹å¼æˆ–ä»¥æ³¨è§£çš„æ–¹å¼æ¥ä½¿èƒ½, å¹¶ä¸”ä¸è®ºä»¥å“ªç§æ–¹å¼ä½¿èƒ½@ASpectJ, æˆ‘ä»¬éƒ½å¿…é¡»ä¿è¯ aspectjweaver.jar åœ¨ classpath ä¸­.</p><h4 id="ä½¿ç”¨-java-configuration-æ–¹å¼ä½¿èƒ½aspectj"><a class="markdownIt-Anchor" href="#ä½¿ç”¨-java-configuration-æ–¹å¼ä½¿èƒ½aspectj"></a> ä½¿ç”¨ Java Configuration æ–¹å¼ä½¿èƒ½@AspectJ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨-xml-æ–¹å¼ä½¿èƒ½aspectj"><a class="markdownIt-Anchor" href="#ä½¿ç”¨-xml-æ–¹å¼ä½¿èƒ½aspectj"></a> ä½¿ç”¨ XML æ–¹å¼ä½¿èƒ½@AspectJ</h4><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;aop:aspectj-autoproxy/&gt;</span><br></pre></td></tr></table></figure><h3 id="å®šä¹‰-aspectåˆ‡é¢"><a class="markdownIt-Anchor" href="#å®šä¹‰-aspectåˆ‡é¢"></a> å®šä¹‰ aspect(åˆ‡é¢)</h3><p>å½“ä½¿ç”¨æ³¨è§£ <strong>@Aspect</strong> æ ‡æ³¨ä¸€ä¸ª Bean å, é‚£ä¹ˆ Spring æ¡†æ¶ä¼šè‡ªåŠ¨æ”¶é›†è¿™äº› Bean, å¹¶æ·»åŠ åˆ° Spring AOP ä¸­, ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line">æ³¨æ„, ä»…ä»…ä½¿ç”¨<span class="meta">@Aspect</span> æ³¨è§£, å¹¶ä¸èƒ½å°†ä¸€ä¸ª Java å¯¹è±¡è½¬æ¢ä¸º Bean, å› æ­¤æˆ‘ä»¬è¿˜éœ€è¦ä½¿ç”¨ç±»ä¼¼ <span class="meta">@Component</span> ä¹‹ç±»çš„æ³¨è§£.` `æ³¨æ„, å¦‚æœä¸€ä¸ª ç±»è¢«<span class="meta">@Aspect</span> æ ‡æ³¨, åˆ™è¿™ä¸ªç±»å°±ä¸èƒ½æ˜¯å…¶ä»– aspect çš„ **advised object** äº†, å› ä¸ºä½¿ç”¨ <span class="meta">@Aspect</span> å, è¿™ä¸ªç±»å°±ä¼šè¢«æ’é™¤åœ¨ auto-proxying æœºåˆ¶ä¹‹å¤–.</span><br></pre></td></tr></table></figure><h3 id="å£°æ˜-pointcut"><a class="markdownIt-Anchor" href="#å£°æ˜-pointcut"></a> å£°æ˜ pointcut</h3><p>ä¸€ä¸ª pointcut çš„å£°æ˜ç”±ä¸¤éƒ¨åˆ†ç»„æˆ:</p><ul><li>ä¸€ä¸ªæ–¹æ³•ç­¾å, åŒ…æ‹¬æ–¹æ³•åå’Œç›¸å…³å‚æ•°</li><li>ä¸€ä¸ª pointcut è¡¨è¾¾å¼, ç”¨æ¥æŒ‡å®šå“ªäº›æ–¹æ³•æ‰§è¡Œæ˜¯æˆ‘ä»¬æ„Ÿå…´è¶£çš„(å³å› æ­¤å¯ä»¥ç»‡å…¥ advice).</li></ul><p>åœ¨@AspectJ é£æ ¼çš„ AOP ä¸­, æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ–¹æ³•æ¥æè¿° pointcut, å³:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut(&quot;execution(* com.xys.service.UserService.*(..))&quot;)</span> <span class="comment">// åˆ‡ç‚¹è¡¨è¾¾å¼</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dataAccessOperation</span><span class="params">()</span> &#123;&#125; <span class="comment">// åˆ‡ç‚¹å‰é¢</span></span><br></pre></td></tr></table></figure><p><code>è¿™ä¸ªæ–¹æ³•å¿…é¡»æ— è¿”å›å€¼.</code> <code>è¿™ä¸ªæ–¹æ³•æœ¬èº«å°±æ˜¯ pointcut signature, pointcut è¡¨è¾¾å¼ä½¿ç”¨@Pointcut æ³¨è§£æŒ‡å®š.</code> ä¸Šé¢æˆ‘ä»¬ç®€å•åœ°å®šä¹‰äº†ä¸€ä¸ª pointcut, è¿™ä¸ª pointcut æ‰€æè¿°çš„æ˜¯: åŒ¹é…æ‰€æœ‰åœ¨åŒ… <strong>com.xys.service.UserService</strong> ä¸‹çš„æ‰€æœ‰æ–¹æ³•çš„æ‰§è¡Œ.</p><h4 id="åˆ‡ç‚¹æ ‡å¿—ç¬¦designator"><a class="markdownIt-Anchor" href="#åˆ‡ç‚¹æ ‡å¿—ç¬¦designator"></a> åˆ‡ç‚¹æ ‡å¿—ç¬¦(designator)</h4><p>AspectJ5 çš„åˆ‡ç‚¹è¡¨è¾¾å¼ç”±æ ‡å¿—ç¬¦(designator)å’Œæ“ä½œå‚æ•°ç»„æˆ. å¦‚ â€œexecution(* greetTo(â€¦))â€ çš„åˆ‡ç‚¹è¡¨è¾¾å¼, <strong>execution</strong> å°±æ˜¯ æ ‡å¿—ç¬¦, è€Œåœ†æ‹¬å·é‡Œçš„ *****greetTo(â€¦) å°±æ˜¯æ“ä½œå‚æ•°</p><h5 id="execution"><a class="markdownIt-Anchor" href="#execution"></a> execution</h5><p>åŒ¹é… join point çš„æ‰§è¡Œ, ä¾‹å¦‚ â€œexecution(* hello(â€¦))â€ è¡¨ç¤ºåŒ¹é…æ‰€æœ‰ç›®æ ‡ç±»ä¸­çš„ hello() æ–¹æ³•. è¿™ä¸ªæ˜¯æœ€åŸºæœ¬çš„ pointcut æ ‡å¿—ç¬¦.</p><h5 id="within"><a class="markdownIt-Anchor" href="#within"></a> within</h5><p>åŒ¹é…ç‰¹å®šåŒ…ä¸‹çš„æ‰€æœ‰ join point, ä¾‹å¦‚ <code>within(com.xys.*)</code> è¡¨ç¤º com.xys åŒ…ä¸­çš„æ‰€æœ‰è¿æ¥ç‚¹, å³åŒ…ä¸­çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•. è€Œ<code>within(com.xys.service.*Service)</code> è¡¨ç¤ºåœ¨ com.xys.service åŒ…ä¸­æ‰€æœ‰ä»¥ Service ç»“å°¾çš„ç±»çš„æ‰€æœ‰çš„è¿æ¥ç‚¹.</p><h5 id="this-ä¸-target"><a class="markdownIt-Anchor" href="#this-ä¸-target"></a> this ä¸ target</h5><p>this çš„ä½œç”¨æ˜¯åŒ¹é…ä¸€ä¸ª bean, è¿™ä¸ª bean(Spring AOP proxy) æ˜¯ä¸€ä¸ªç»™å®šç±»å‹çš„å®ä¾‹(instance of). è€Œ target åŒ¹é…çš„æ˜¯ä¸€ä¸ªç›®æ ‡å¯¹è±¡(target object, å³éœ€è¦ç»‡å…¥ advice çš„åŸå§‹çš„ç±»), æ­¤å¯¹è±¡æ˜¯ä¸€ä¸ªç»™å®šç±»å‹çš„å®ä¾‹(instance of).</p><h5 id="bean"><a class="markdownIt-Anchor" href="#bean"></a> bean</h5><p>åŒ¹é… bean åå­—ä¸ºæŒ‡å®šå€¼çš„ bean ä¸‹çš„æ‰€æœ‰æ–¹æ³•, ä¾‹å¦‚:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bean(*Service) // åŒ¹é…åå­—åç¼€ä¸º Service çš„ bean ä¸‹çš„æ‰€æœ‰æ–¹æ³•</span><br><span class="line">bean(myService) // åŒ¹é…åå­—ä¸º myService çš„ bean ä¸‹çš„æ‰€æœ‰æ–¹æ³•</span><br></pre></td></tr></table></figure><h5 id="args"><a class="markdownIt-Anchor" href="#args"></a> args</h5><p>åŒ¹é…å‚æ•°æ»¡è¶³è¦æ±‚çš„çš„æ–¹æ³•. ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut(&quot;within(com.xys.demo2.*)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pointcut2</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Before(value = &quot;pointcut2()  &amp;&amp;  args(name)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    logger.info(<span class="string">&quot;---page: &#123;&#125;---&quot;</span>, name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NormalService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(getClass());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">someMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;---NormalService: someMethod invoked---&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;---NormalService: test invoked---&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æœåŠ¡ä¸€åˆ‡æ­£å¸¸&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ NormalService.test æ‰§è¡Œæ—¶, åˆ™ advice <code>doSomething</code> å°±ä¼šæ‰§è¡Œ, test æ–¹æ³•çš„å‚æ•° name å°±ä¼šä¼ é€’åˆ° <code>doSomething</code> ä¸­.</p><p>å¸¸ç”¨ä¾‹å­:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒ¹é…åªæœ‰ä¸€ä¸ªå‚æ•° name çš„æ–¹æ³•</span></span><br><span class="line"><span class="meta">@Before(value = &quot;aspectMethod()  &amp;&amp;  args(name)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">(String name)</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¹é…ç¬¬ä¸€ä¸ªå‚æ•°ä¸º name çš„æ–¹æ³•</span></span><br><span class="line"><span class="meta">@Before(value = &quot;aspectMethod()  &amp;&amp;  args(name, ..)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">(String name)</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¹é…ç¬¬äºŒä¸ªå‚æ•°ä¸º name çš„æ–¹æ³•</span></span><br><span class="line">Before(value = <span class="string">&quot;aspectMethod()  &amp;&amp;  args(*, name, ..)&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">(String name)</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="annotation"><a class="markdownIt-Anchor" href="#annotation"></a> @annotation</h5><p>åŒ¹é…ç”±æŒ‡å®šæ³¨è§£æ‰€æ ‡æ³¨çš„æ–¹æ³•, ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut(&quot;@annotation(com.xys.demo1.AuthChecker)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pointcut</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ™åŒ¹é…ç”±æ³¨è§£ <code>AuthChecker</code> æ‰€æ ‡æ³¨çš„æ–¹æ³•.</p><h4 id="å¸¸è§çš„åˆ‡ç‚¹è¡¨è¾¾å¼"><a class="markdownIt-Anchor" href="#å¸¸è§çš„åˆ‡ç‚¹è¡¨è¾¾å¼"></a> å¸¸è§çš„åˆ‡ç‚¹è¡¨è¾¾å¼</h4><h5 id="åŒ¹é…æ–¹æ³•ç­¾å"><a class="markdownIt-Anchor" href="#åŒ¹é…æ–¹æ³•ç­¾å"></a> åŒ¹é…æ–¹æ³•ç­¾å</h5><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// åŒ¹é…æŒ‡å®šåŒ…ä¸­çš„æ‰€æœ‰çš„æ–¹æ³•</span><br><span class="line">execution(* com.xys.service.*(..))</span><br><span class="line"></span><br><span class="line">// åŒ¹é…å½“å‰åŒ…ä¸­çš„æŒ‡å®šç±»çš„æ‰€æœ‰æ–¹æ³•</span><br><span class="line">execution(* UserService.*(..))</span><br><span class="line"></span><br><span class="line">// åŒ¹é…æŒ‡å®šåŒ…ä¸­çš„æ‰€æœ‰ public æ–¹æ³•</span><br><span class="line">execution(public * com.xys.service.*(..))</span><br><span class="line"></span><br><span class="line">// åŒ¹é…æŒ‡å®šåŒ…ä¸­çš„æ‰€æœ‰ public æ–¹æ³•, å¹¶ä¸”è¿”å›å€¼æ˜¯ int ç±»å‹çš„æ–¹æ³•</span><br><span class="line">execution(public int com.xys.service.*(..))</span><br><span class="line"></span><br><span class="line">// åŒ¹é…æŒ‡å®šåŒ…ä¸­çš„æ‰€æœ‰ public æ–¹æ³•, å¹¶ä¸”ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ String, è¿”å›å€¼æ˜¯ int ç±»å‹çš„æ–¹æ³•</span><br><span class="line">execution(public int com.xys.service.*(String name, ..))</span><br></pre></td></tr></table></figure><h5 id="åŒ¹é…ç±»å‹ç­¾å"><a class="markdownIt-Anchor" href="#åŒ¹é…ç±»å‹ç­¾å"></a> åŒ¹é…ç±»å‹ç­¾å</h5><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// åŒ¹é…æŒ‡å®šåŒ…ä¸­çš„æ‰€æœ‰çš„æ–¹æ³•, ä½†ä¸åŒ…æ‹¬å­åŒ…</span><br><span class="line">within(com.xys.service.*)</span><br><span class="line"></span><br><span class="line">// åŒ¹é…æŒ‡å®šåŒ…ä¸­çš„æ‰€æœ‰çš„æ–¹æ³•, åŒ…æ‹¬å­åŒ…</span><br><span class="line">within(com.xys.service..*)</span><br><span class="line"></span><br><span class="line">// åŒ¹é…å½“å‰åŒ…ä¸­çš„æŒ‡å®šç±»ä¸­çš„æ–¹æ³•</span><br><span class="line">within(UserService)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// åŒ¹é…ä¸€ä¸ªæ¥å£çš„æ‰€æœ‰å®ç°ç±»ä¸­çš„å®ç°çš„æ–¹æ³•</span><br><span class="line">within(UserDao+)</span><br></pre></td></tr></table></figure><h5 id="åŒ¹é…-bean-åå­—"><a class="markdownIt-Anchor" href="#åŒ¹é…-bean-åå­—"></a> åŒ¹é… Bean åå­—</h5><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// åŒ¹é…ä»¥æŒ‡å®šåå­—ç»“å°¾çš„ Bean ä¸­çš„æ‰€æœ‰æ–¹æ³•</span><br><span class="line">bean(*Service)</span><br></pre></td></tr></table></figure><h5 id="åˆ‡ç‚¹è¡¨è¾¾å¼ç»„åˆ"><a class="markdownIt-Anchor" href="#åˆ‡ç‚¹è¡¨è¾¾å¼ç»„åˆ"></a> åˆ‡ç‚¹è¡¨è¾¾å¼ç»„åˆ</h5><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// åŒ¹é…ä»¥ Service æˆ– ServiceImpl ç»“å°¾çš„ bean</span><br><span class="line">bean(*Service || *ServiceImpl)</span><br><span class="line"></span><br><span class="line">// åŒ¹é…åå­—ä»¥ Service ç»“å°¾, å¹¶ä¸”åœ¨åŒ… com.xys.service ä¸­çš„ bean</span><br><span class="line">bean(*Service) &amp;&amp; within(com.xys.service.*)</span><br></pre></td></tr></table></figure><h3 id="å£°æ˜-advice"><a class="markdownIt-Anchor" href="#å£°æ˜-advice"></a> å£°æ˜ advice</h3><p>advice æ˜¯å’Œä¸€ä¸ª pointcut è¡¨è¾¾å¼å…³è”åœ¨ä¸€èµ·çš„, å¹¶ä¸”ä¼šåœ¨åŒ¹é…çš„ join point çš„æ–¹æ³•æ‰§è¡Œçš„å‰/å/å‘¨å›´ è¿è¡Œ. <code>pointcut è¡¨è¾¾å¼å¯ä»¥æ˜¯ç®€å•çš„ä¸€ä¸ª pointcut åå­—çš„å¼•ç”¨, æˆ–è€…æ˜¯å®Œæ•´çš„ pointcut è¡¨è¾¾å¼</code>. ä¸‹é¢æˆ‘ä»¬ä»¥å‡ ä¸ªç®€å•çš„ advice ä¸ºä¾‹å­, æ¥çœ‹ä¸€ä¸‹ä¸€ä¸ª advice æ˜¯å¦‚ä½•å£°æ˜çš„.</p><h4 id="before-advice"><a class="markdownIt-Anchor" href="#before-advice"></a> Before advice</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xiongyongshun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@created</span> 16/9/9 13:13</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeforeAspectTest</span> &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰ä¸€ä¸ª Pointcut, ä½¿ç”¨ åˆ‡ç‚¹è¡¨è¾¾å¼å‡½æ•° æ¥æè¿°å¯¹å“ªäº› Join point ä½¿ç”¨ advise.</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.xys.service.UserService.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dataAccessOperation</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdviseDefine</span> &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰ advise</span></span><br><span class="line">    <span class="meta">@Before(&quot;com.xys.aspect.PointcutDefine.dataAccessOperation()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doBeforeAccessCheck</span><span class="params">(JoinPoint joinPoint)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;*****Before advise, method: &quot;</span> + joinPoint.getSignature().toShortString() + <span class="string">&quot; *****&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œ, <strong>@Before</strong> å¼•ç”¨äº†ä¸€ä¸ª pointcut, å³ â€œcom.xys.aspect.PointcutDefine.dataAccessOperation()â€ æ˜¯ä¸€ä¸ª pointcut çš„åå­—. å¦‚æœæˆ‘ä»¬åœ¨ advice åœ¨å†…ç½® pointcut, åˆ™å¯ä»¥:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdviseDefine</span> &#123;</span><br><span class="line">    <span class="comment">// å°† pointcut å’Œ advice åŒæ—¶å®šä¹‰</span></span><br><span class="line">    <span class="meta">@Before(&quot;within(com.xys.service..*)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doAccessCheck</span><span class="params">(JoinPoint joinPoint)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;*****doAccessCheck, Before advise, method: &quot;</span> + joinPoint.getSignature().toShortString() + <span class="string">&quot; *****&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="around-advice"><a class="markdownIt-Anchor" href="#around-advice"></a> around advice</h4><p>around advice æ¯”è¾ƒç‰¹åˆ«, å®ƒå¯ä»¥åœ¨ä¸€ä¸ªæ–¹æ³•çš„ä¹‹å‰ä¹‹å‰å’Œä¹‹åæ·»åŠ ä¸åŒçš„æ“ä½œ, å¹¶ä¸”ç”šè‡³å¯ä»¥å†³å®šä½•æ—¶, å¦‚ä½•, æ˜¯å¦è°ƒç”¨åŒ¹é…åˆ°çš„æ–¹æ³•.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdviseDefine</span> &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰ advise</span></span><br><span class="line">    <span class="meta">@Around(&quot;com.xys.aspect.PointcutDefine.dataAccessOperation()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">doAroundAccessCheck</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="type">StopWatch</span> <span class="variable">stopWatch</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StopWatch</span>();</span><br><span class="line">        stopWatch.start();</span><br><span class="line">        <span class="comment">// å¼€å§‹</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">retVal</span> <span class="operator">=</span> pjp.proceed();</span><br><span class="line">        stopWatch.stop();</span><br><span class="line">        <span class="comment">// ç»“æŸ</span></span><br><span class="line">        System.out.println(<span class="string">&quot;invoke method: &quot;</span> + pjp.getSignature().getName() + <span class="string">&quot;, elapsed time: &quot;</span> + stopWatch.getTotalTimeMillis());</span><br><span class="line">        <span class="keyword">return</span> retVal;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>around advice å’Œå‰é¢çš„ before advice å·®ä¸å¤š, åªæ˜¯æˆ‘ä»¬æŠŠæ³¨è§£ <strong>@Before</strong> æ”¹ä¸ºäº† <strong>@Around</strong> äº†.</p><hr /><h2 id="åŸºäºæ³¨è§£çš„-aop-é…ç½®æ–¹å¼"><a class="markdownIt-Anchor" href="#åŸºäºæ³¨è§£çš„-aop-é…ç½®æ–¹å¼"></a> åŸºäºæ³¨è§£çš„ AOP é…ç½®æ–¹å¼</h2><p><strong>åˆ‡é¢ç±»ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.enjoy.cap10.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.After;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterReturning;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterThrowing;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Pointcut;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Around;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ—¥å¿—åˆ‡é¢ç±»</span></span><br><span class="line"><span class="meta">@Aspect</span><span class="comment">//ä»€ä¹ˆè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªåˆ‡é¢ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogAspects</span> &#123;</span><br><span class="line">    <span class="comment">//@Pointcutå£°æ˜åˆ‡å…¥ç‚¹</span></span><br><span class="line"><span class="meta">@Pointcut(&quot;execution(public int com.enjoy.cap10.aop.Calculator.*(..))&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pointCut</span><span class="params">()</span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//@beforeä»£è¡¨åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰åˆ‡å…¥, å¹¶æŒ‡å®šåœ¨å“ªä¸ªæ–¹æ³•å‰åˆ‡å…¥</span></span><br><span class="line"><span class="meta">@Before(&quot;pointCut()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logStart</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é™¤æ³•è¿è¡Œ....å‚æ•°åˆ—è¡¨æ˜¯:&#123;&#125;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@After(&quot;pointCut()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logEnd</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é™¤æ³•ç»“æŸ......&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@AfterReturning(&quot;pointCut()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logReturn</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;é™¤æ³•æ­£å¸¸è¿”å›......è¿è¡Œç»“æœæ˜¯:&#123;&#125;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@AfterThrowing(&quot;pointCut()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logException</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;è¿è¡Œå¼‚å¸¸......å¼‚å¸¸ä¿¡æ¯æ˜¯:&#123;&#125;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Around(&quot;pointCut()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">Around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;@Arount:æ‰§è¡Œç›®æ ‡æ–¹æ³•ä¹‹å‰...&quot;</span>);</span><br><span class="line"><span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> proceedingJoinPoint.proceed();<span class="comment">//ç›¸å½“äºå¼€å§‹è°ƒdivåœ°</span></span><br><span class="line">System.out.println(<span class="string">&quot;@Arount:æ‰§è¡Œç›®æ ‡æ–¹æ³•ä¹‹å...&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç›®æ ‡æ–¹æ³•ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.enjoy.cap10.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Calculator</span> &#123;</span><br><span class="line"><span class="comment">//ä¸šåŠ¡é€»è¾‘æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">div</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;--------&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> i/j;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é…ç½®ç±»ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.enjoy.cap10.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.EnableAspectJAutoProxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.enjoy.cap10.aop.Calculator;</span><br><span class="line"><span class="keyword">import</span> com.enjoy.cap10.aop.LogAspects;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cap10MainConfig</span> &#123;</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Calculator <span class="title function_">calculator</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Calculator</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> LogAspects <span class="title function_">logAspects</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LogAspects</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æµ‹è¯•ç±»ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cap10Test</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">AnnotationConfigApplicationContext</span> <span class="variable">app</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(Cap10MainConfig.class);</span><br><span class="line"><span class="type">Calculator</span> <span class="variable">c</span> <span class="operator">=</span> app.getBean(Calculator.class);</span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> c.div(<span class="number">4</span>, <span class="number">3</span>);</span><br><span class="line">System.out.println(result);</span><br><span class="line">app.close();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç»“æœï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Arount:æ‰§è¡Œç›®æ ‡æ–¹æ³•ä¹‹å‰...</span><br><span class="line">é™¤æ³•è¿è¡Œ....å‚æ•°åˆ—è¡¨æ˜¯:&#123;&#125;</span><br><span class="line">--------</span><br><span class="line">@Arount:æ‰§è¡Œç›®æ ‡æ–¹æ³•ä¹‹å...</span><br><span class="line">é™¤æ³•ç»“æŸ......</span><br><span class="line">é™¤æ³•æ­£å¸¸è¿”å›......è¿è¡Œç»“æœæ˜¯:&#123;&#125;</span><br><span class="line">1</span><br></pre></td></tr></table></figure><hr /><h2 id="aop-æºç èµæ"><a class="markdownIt-Anchor" href="#aop-æºç èµæ"></a> AOP æºç èµæ</h2><blockquote><p>åœ¨è¿™ä¸ªæ³¨è§£æ¯”è¾ƒæµè¡Œçš„å¹´ä»£é‡Œ,å½“æˆ‘ä»¬æƒ³è¦ä½¿ç”¨ spring çš„æŸäº›åŠŸèƒ½æ—¶åªéœ€è¦åŠ ä¸Šä¸€è¡Œä»£ç å°±å¯ä»¥äº†,æ¯”å¦‚:</p><ul><li>@EnableAspectJAutoProxy å¼€å¯ AOP</li><li>@EnableTransactionManagement å¼€å¯ spring äº‹åŠ¡ç®¡ç†,</li><li>@EnableCaching å¼€å¯ spring ç¼“å­˜</li><li>@EnableWebMvc å¼€å¯ webMvc</li></ul><p>å¯¹äºæˆ‘ä»¬ä½¿ç”¨è€…è€Œè¨€ååˆ†ç®€å•ä¾¿åˆ©,ç„¶è€Œ,å…¶èƒŒåæ‰€åšçš„äº‹,å´è¿œè¿œæ¯”ä¸€ä¸ªæ³¨è§£å¤æ‚çš„å¤šäº†,æœ¬ç¯‡åªæ˜¯ç®€ç•¥çš„ä»‹ç»ä¸€ä¸‹@EnableAspectJAutoProxy èƒŒåæ‰€å‘ç”Ÿçš„é‚£äº›äº‹,äº†è§£å…¶å·¥ä½œåŸç†,æ‰èƒ½æ›´å¥½çš„è¿ç”¨,å¹¶ä»ä¸­é¢†ç•¥å¤§å¸ˆçš„æ™ºæ…§.</p></blockquote><p>åºŸè¯ä¸å¤šè¯´,å…ˆæ¥çœ‹ä¸€ä¸‹æºç :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Import(AspectJAutoProxyRegistrar.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableAspectJAutoProxy &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Indicate whether subclass-based (CGLIB) proxies are to be created as opposed</span></span><br><span class="line"><span class="comment">     * to standard Java interface-based proxies. The default is &#123;<span class="doctag">@code</span> false&#125;.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">proxyTargetClass</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Indicate that the proxy should be exposed by the AOP framework as a &#123;<span class="doctag">@code</span> ThreadLocal&#125;</span></span><br><span class="line"><span class="comment">     * for retrieval via the &#123;<span class="doctag">@link</span> org.springframework.aop.framework.AopContext&#125; class.</span></span><br><span class="line"><span class="comment">     * Off by default, i.e. no guarantees that &#123;<span class="doctag">@code</span> AopContext&#125; access will work.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@since</span> 4.3.1</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">exposeProxy</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è‹±æ–‡æ³¨è§£å·²ç»å¾ˆè¯¦ç»†äº†,è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ä¸¤ä¸ªå‚æ•°,ä¸€ä¸ªæ˜¯æ§åˆ¶ aop çš„å…·ä½“å®ç°æ–¹å¼,ä¸º true çš„è¯ä½¿ç”¨ cglib,ä¸º false çš„è¯ä½¿ç”¨ java çš„ Proxy,é»˜è®¤ä¸º false,ç¬¬äºŒä¸ªå‚æ•°æ§åˆ¶ä»£ç†çš„æš´éœ²æ–¹å¼,è§£å†³å†…éƒ¨è°ƒç”¨ä¸èƒ½ä½¿ç”¨ä»£ç†çš„åœºæ™¯ï¼Œé»˜è®¤ä¸º false.</p><p>è¿™é‡Œæ ¸å¿ƒæ˜¯@Import(AspectJAutoProxyRegistrar.class);åœ¨ AspectJAutoProxyRegistrar é‡Œ,æ ¸å¿ƒçš„åœ°æ–¹æ˜¯</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AopConfigUtils.registerAspectJAnnotationAutoProxyCreatorIfNecessary(registry);</span><br></pre></td></tr></table></figure><blockquote><p>ä¸€ä¸ª AOP çš„å·¥å…·ç±»,è¿™ä¸ªå·¥å…·ç±»çš„ä¸»è¦ä½œç”¨æ˜¯æŠŠ AnnotationAwareAspectJAutoProxyCreator è¿™ä¸ªç±»å®šä¹‰ä¸º BeanDefinition æ”¾åˆ° spring å®¹å™¨ä¸­,è¿™æ˜¯é€šè¿‡å®ç° ImportBeanDefinitionRegistrar æ¥å£æ¥è£…è½½çš„,å…·ä½“è£…è½½è¿‡ç¨‹ä¸æ˜¯æœ¬ç¯‡çš„é‡ç‚¹,è¿™é‡Œå°±ä¸èµ˜è¿°,æˆ‘ä»¬é‡ç‚¹çœ‹ AnnotationAwareAspectJAutoProxyCreator è¿™ä¸ªç±».</p><p>é¦–å…ˆçœ‹çœ‹è¿™ä¸ªç±»å›¾:</p><p><img src="https://unpkg.com/serms-assets@1.0.6/Spring/20190415091218213.png" alt="" /></p><p><strong>ä»ç±»å›¾æ˜¯å¯ä»¥å¤§è‡´äº†è§£ AnnotationAwareAspectJAutoProxyCreator è¿™ä¸ªç±»çš„åŠŸèƒ½.å®ƒå®ç°äº†ä¸€ç³»åˆ— Aware çš„æ¥å£,åœ¨ Bean è£…è½½çš„æ—¶å€™è·å– BeanFactory(Bean å®¹å™¨),Bean çš„ ClassLoader,è¿˜å®ç°äº† order æ¥å£,ç»§æ‰¿äº† PorxyConfig,ProxyConfig ä¸­ä¸»è¦å°è£…äº†ä»£ç†çš„é€šç”¨å¤„ç†é€»è¾‘,æ¯”å¦‚è®¾ç½®ç›®æ ‡ç±»,è®¾ç½®ä½¿ç”¨ cglib è¿˜æ˜¯ java proxy ç­‰ä¸€äº›åŸºç¡€é…ç½®.</strong></p><p>è€Œèƒ½å¤Ÿè®©è¿™ä¸ªç±»å‚ä¸åˆ° bean åˆå§‹åŒ–åŠŸèƒ½,å¹¶ä¸º bean æ·»åŠ ä»£ç†åŠŸèƒ½çš„è¿˜æ˜¯å› ä¸ºå®ƒå®ç°äº† BeanPostProcessor è¿™ä¸ªæ¥å£.è¿™ä¸ªæ¥å£çš„ postProcessAfterInitialization æ–¹æ³•ä¼šåœ¨ bean åˆå§‹åŒ–ç»“æŸå(èµ‹å€¼å®Œæˆ)è¢«è°ƒç”¨*ã€‚*</p><p>è¿™é‡Œå…ˆçœ‹ä¸€ä¸‹æœ€é¡¶éƒ¨çš„æŠ½è±¡ç±»:AbstractAutoProxyCreator,è¿™ä¸ªæŠ½è±¡ç±»ä¸»è¦æŠ½è±¡äº†å®ç°ä»£ç†çš„é€»è¾‘:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸»è¦çœ‹è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨beanåˆå§‹åŒ–ä¹‹åå¯¹ç”Ÿäº§å‡ºçš„beanè¿›è¡ŒåŒ…è£…</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line"><span class="keyword">if</span> (bean != <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="type">Object</span> <span class="variable">cacheKey</span> <span class="operator">=</span> getCacheKey(bean.getClass(), beanName);</span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">this</span>.earlyProxyReferences.contains(cacheKey)) &#123;</span><br><span class="line"><span class="keyword">return</span> wrapIfNecessary(bean, beanName, cacheKey);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// wrapIfNecessary</span></span><br><span class="line"><span class="keyword">protected</span> Object <span class="title function_">wrapIfNecessary</span><span class="params">(Object bean, String beanName, Object cacheKey)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (beanName != <span class="literal">null</span> &amp;&amp; <span class="built_in">this</span>.targetSourcedBeans.contains(beanName)) &#123;</span><br><span class="line"><span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (Boolean.FALSE.equals(<span class="built_in">this</span>.advisedBeans.get(cacheKey))) &#123;</span><br><span class="line"><span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (isInfrastructureClass(bean.getClass()) || shouldSkip(bean.getClass(), beanName)) &#123;</span><br><span class="line"><span class="built_in">this</span>.advisedBeans.put(cacheKey, Boolean.FALSE);</span><br><span class="line"><span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create proxy if we have advice.</span></span><br><span class="line">        <span class="comment">// æ„æ€å°±æ˜¯å¦‚æœè¯¥ç±»æœ‰adviceåˆ™åˆ›å»ºproxyï¼Œ</span></span><br><span class="line">Object[] specificInterceptors = getAdvicesAndAdvisorsForBean(bean.getClass(), beanName, <span class="literal">null</span>);</span><br><span class="line"><span class="keyword">if</span> (specificInterceptors != DO_NOT_PROXY) &#123;</span><br><span class="line"><span class="built_in">this</span>.advisedBeans.put(cacheKey, Boolean.TRUE);</span><br><span class="line">            <span class="comment">// 1.é€šè¿‡æ–¹æ³•åä¹Ÿèƒ½ç®€å•çŒœæµ‹åˆ°ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯æŠŠbeanåŒ…è£…ä¸ºproxyçš„ä¸»è¦æ–¹æ³•ï¼Œ</span></span><br><span class="line"><span class="type">Object</span> <span class="variable">proxy</span> <span class="operator">=</span> createProxy(</span><br><span class="line">bean.getClass(), beanName, specificInterceptors, <span class="keyword">new</span> <span class="title class_">SingletonTargetSource</span>(bean));</span><br><span class="line"><span class="built_in">this</span>.proxyTypes.put(cacheKey, proxy.getClass());</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2.è¿”å›è¯¥proxyä»£æ›¿åŸæ¥çš„bean</span></span><br><span class="line"><span class="keyword">return</span> proxy;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">this</span>.advisedBeans.put(cacheKey, Boolean.FALSE);</span><br><span class="line"><span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote><h3 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“ï¼š</h3><ul><li><strong>1ï¼‰å°† AnnotationAwareAspectJAutoProxyCreator æ³¨å†Œåˆ° Spring å®¹å™¨ä¸­</strong></li><li><strong>2ï¼‰AnnotationAwareAspectJAutoProxyCreator ç±»çš„ postProcessAfterInitialization()æ–¹æ³•å°†æ‰€æœ‰æœ‰ advice çš„ bean é‡æ–°åŒ…è£…æˆ proxy</strong></li></ul><hr /><h2 id="åˆ›å»º-proxy-è¿‡ç¨‹åˆ†æ"><a class="markdownIt-Anchor" href="#åˆ›å»º-proxy-è¿‡ç¨‹åˆ†æ"></a> åˆ›å»º proxy è¿‡ç¨‹åˆ†æ</h2><p>â€‹ é€šè¿‡ä¹‹å‰çš„ä»£ç ç»“æ„åˆ†æï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œæ‰€æœ‰çš„ bean åœ¨è¿”å›ç»™ç”¨æˆ·ä½¿ç”¨ä¹‹å‰éƒ½éœ€è¦ç»è¿‡ AnnotationAwareAspectJAutoProxyCreator ç±»çš„ postProcessAfterInitialization()æ–¹æ³•ï¼Œè€Œè¯¥æ–¹æ³•çš„ä¸»è¦ä½œç”¨ä¹Ÿå°±æ˜¯å°†æ‰€æœ‰æ‹¥æœ‰ advice çš„ bean é‡æ–°åŒ…è£…ä¸º proxyï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥ä¸‹æ¥ç›´æ¥åˆ†æè¿™ä¸ªåŒ…è£…ä¸º proxy çš„æ–¹æ³•å³å¯ï¼Œçœ‹ä¸€ä¸‹ bean å¦‚ä½•è¢«åŒ…è£…ä¸º proxyï¼Œproxy åœ¨è¢«è°ƒç”¨æ–¹æ³•æ—¶ï¼Œæ˜¯å…·ä½“å¦‚ä½•æ‰§è¡Œçš„</p><p><strong>ä»¥ä¸‹æ˜¯ AbstractAutoProxyCreator.wrapIfNecessary(Object bean, String beanName, Object cacheKey)ä¸­çš„ createProxy()ä»£ç ç‰‡æ®µåˆ†æ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> Object <span class="title function_">createProxy</span><span class="params">(</span></span><br><span class="line"><span class="params">Class&lt;?&gt; beanClass, String beanName, Object[] specificInterceptors, TargetSource targetSource)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">this</span>.beanFactory <span class="keyword">instanceof</span> ConfigurableListableBeanFactory) &#123;</span><br><span class="line">AutoProxyUtils.exposeTargetClass((ConfigurableListableBeanFactory) <span class="built_in">this</span>.beanFactory, beanName, beanClass);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.åˆ›å»ºproxyFactoryï¼Œproxyçš„ç”Ÿäº§ä¸»è¦å°±æ˜¯åœ¨proxyFactoryåšçš„</span></span><br><span class="line"><span class="type">ProxyFactory</span> <span class="variable">proxyFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProxyFactory</span>();</span><br><span class="line">proxyFactory.copyFrom(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!proxyFactory.isProxyTargetClass()) &#123;</span><br><span class="line"><span class="keyword">if</span> (shouldProxyTargetClass(beanClass, beanName)) &#123;</span><br><span class="line">proxyFactory.setProxyTargetClass(<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">evaluateProxyInterfaces(beanClass, proxyFactory);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.å°†å½“å‰beané€‚åˆçš„adviceï¼Œé‡æ–°å°è£…ä¸‹ï¼Œå°è£…ä¸ºAdvisorç±»ï¼Œç„¶åæ·»åŠ åˆ°ProxyFactoryä¸­</span></span><br><span class="line">Advisor[] advisors = buildAdvisors(beanName, specificInterceptors);</span><br><span class="line"><span class="keyword">for</span> (Advisor advisor : advisors) &#123;</span><br><span class="line">proxyFactory.addAdvisor(advisor);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">proxyFactory.setTargetSource(targetSource);</span><br><span class="line">customizeProxyFactory(proxyFactory);</span><br><span class="line"></span><br><span class="line">proxyFactory.setFrozen(<span class="built_in">this</span>.freezeProxy);</span><br><span class="line"><span class="keyword">if</span> (advisorsPreFiltered()) &#123;</span><br><span class="line">proxyFactory.setPreFiltered(<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.è°ƒç”¨getProxyè·å–beanå¯¹åº”çš„proxy</span></span><br><span class="line"><span class="keyword">return</span> proxyFactory.getProxy(getProxyClassLoader());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>TargetSource ä¸­å­˜æ”¾è¢«ä»£ç†çš„å¯¹è±¡,è¿™æ®µä»£ç ä¸»è¦æ˜¯ä¸ºäº†æ„å»º ProxyFactory,å°†é…ç½®ä¿¡æ¯(æ˜¯å¦ä½¿ç”¨ java proxy,æ˜¯å¦ threadlocal ç­‰),ç›®æ ‡ç±»,åˆ‡é¢,ä¼ å…¥ ProxyFactory ä¸­</p></blockquote><h3 id="åˆ›å»ºä½•ç§ç±»å‹çš„-proxyjdkproxy-è¿˜æ˜¯-cglibproxy"><a class="markdownIt-Anchor" href="#åˆ›å»ºä½•ç§ç±»å‹çš„-proxyjdkproxy-è¿˜æ˜¯-cglibproxy"></a> <strong>åˆ›å»ºä½•ç§ç±»å‹çš„ Proxyï¼ŸJDKProxy è¿˜æ˜¯ CGLIBProxyï¼Ÿ</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// getProxy()æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">getProxy</span><span class="params">(ClassLoader classLoader)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> createAopProxy().getProxy(classLoader);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// createAopProxy()æ–¹æ³•å°±æ˜¯å†³å®šç©¶ç«Ÿåˆ›å»ºä½•ç§ç±»å‹çš„proxy</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">synchronized</span> AopProxy <span class="title function_">createAopProxy</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">this</span>.active) &#123;</span><br><span class="line">activate();</span><br><span class="line">&#125;</span><br><span class="line">        <span class="comment">// å…³é”®æ–¹æ³•createAopProxy()</span></span><br><span class="line"><span class="keyword">return</span> getAopProxyFactory().createAopProxy(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// createAopProxy()</span></span><br><span class="line"><span class="keyword">public</span> AopProxy <span class="title function_">createAopProxy</span><span class="params">(AdvisedSupport config)</span> <span class="keyword">throws</span> AopConfigException &#123;</span><br><span class="line">        <span class="comment">// 1.config.isOptimize()æ˜¯å¦ä½¿ç”¨ä¼˜åŒ–çš„ä»£ç†ç­–ç•¥ï¼Œç›®å‰ä½¿ç”¨ä¸CGLIB</span></span><br><span class="line">        <span class="comment">// config.isProxyTargetClass() æ˜¯å¦ç›®æ ‡ç±»æœ¬èº«è¢«ä»£ç†è€Œä¸æ˜¯ç›®æ ‡ç±»çš„æ¥å£</span></span><br><span class="line">        <span class="comment">// hasNoUserSuppliedProxyInterfaces()æ˜¯å¦å­˜åœ¨ä»£ç†æ¥å£</span></span><br><span class="line"><span class="keyword">if</span> (config.isOptimize() || config.isProxyTargetClass() || hasNoUserSuppliedProxyInterfaces(config)) &#123;</span><br><span class="line">Class&lt;?&gt; targetClass = config.getTargetClass();</span><br><span class="line"><span class="keyword">if</span> (targetClass == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AopConfigException</span>(<span class="string">&quot;TargetSource cannot determine target class: &quot;</span> +</span><br><span class="line"><span class="string">&quot;Either an interface or a target is required for proxy creation.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 2.å¦‚æœç›®æ ‡ç±»æ˜¯æ¥å£æˆ–è€…æ˜¯ä»£ç†ç±»ï¼Œåˆ™ç›´æ¥ä½¿ç”¨JDKproxy</span></span><br><span class="line"><span class="keyword">if</span> (targetClass.isInterface() || Proxy.isProxyClass(targetClass)) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JdkDynamicAopProxy</span>(config);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3.å…¶ä»–æƒ…å†µåˆ™ä½¿ç”¨CGLIBproxy</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ObjenesisCglibAopProxy</span>(config);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JdkDynamicAopProxy</span>(config);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="getproxyæ–¹æ³•"><a class="markdownIt-Anchor" href="#getproxyæ–¹æ³•"></a> <strong>getProxy()æ–¹æ³•</strong></h3><blockquote><p>ç”±ä¸Šé¢å¯çŸ¥ï¼Œé€šè¿‡ createAopProxy()æ–¹æ³•æ¥ç¡®å®šå…·ä½“ä½¿ç”¨ä½•ç§ç±»å‹çš„ Proxyï¼Œé’ˆå¯¹äºè¯¥ç¤ºä¾‹ï¼Œæˆ‘ä»¬å…·ä½“ä½¿ç”¨çš„ä¸º JdkDynamicAopProxyï¼Œä¸‹é¢æ¥çœ‹ä¸‹ JdkDynamicAopProxy.getProxy()æ–¹æ³•</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">JdkDynamicAopProxy</span> <span class="keyword">implements</span> <span class="title class_">AopProxy</span>, InvocationHandler, Serializable<span class="comment">// JdkDynamicAopProxyç±»ç»“æ„ï¼Œç”±æ­¤å¯çŸ¥ï¼Œå…¶å®ç°äº†InvocationHandlerï¼Œåˆ™å¿…å®šæœ‰invokeæ–¹æ³•ï¼Œæ¥è¢«è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·è°ƒç”¨beanç›¸å…³æ–¹æ³•æ—¶ï¼Œæ­¤invoke()è¢«çœŸæ­£è°ƒç”¨</span></span><br><span class="line">    <span class="comment">// getProxy()</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getProxy</span><span class="params">(ClassLoader classLoader)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class="line">logger.debug(<span class="string">&quot;Creating JDK dynamic proxy: target source is &quot;</span> + <span class="built_in">this</span>.advised.getTargetSource());</span><br><span class="line">&#125;</span><br><span class="line">Class&lt;?&gt;[] proxiedInterfaces = AopProxyUtils.completeProxiedInterfaces(<span class="built_in">this</span>.advised, <span class="literal">true</span>);</span><br><span class="line">findDefinedEqualsAndHashCodeMethods(proxiedInterfaces);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// JDK proxy åŠ¨æ€ä»£ç†çš„æ ‡å‡†ç”¨æ³•</span></span><br><span class="line"><span class="keyword">return</span> Proxy.newProxyInstance(classLoader, proxiedInterfaces, <span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="invokeæ–¹æ³•"><a class="markdownIt-Anchor" href="#invokeæ–¹æ³•"></a> <strong>invoke()æ–¹æ³•</strong></h3><blockquote><p>ä»¥ä¸Šçš„ä»£ç æ¨¡å¼å¯ä»¥å¾ˆæ˜ç¡®çš„çœ‹å‡ºæ¥ï¼Œä½¿ç”¨äº† JDK åŠ¨æ€ä»£ç†æ¨¡å¼ï¼ŒçœŸæ­£çš„æ–¹æ³•æ‰§è¡Œåœ¨ invoke()æ–¹æ³•é‡Œï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹è¯¥æ–¹æ³•ï¼Œæ¥çœ‹ä¸‹ bean æ–¹æ³•å¦‚ä½•è¢«ä»£ç†æ‰§è¡Œçš„</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">MethodInvocation invocation;</span><br><span class="line"><span class="type">Object</span> <span class="variable">oldProxy</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">setProxyContext</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">TargetSource</span> <span class="variable">targetSource</span> <span class="operator">=</span> <span class="built_in">this</span>.advised.targetSource;</span><br><span class="line">Class&lt;?&gt; targetClass = <span class="literal">null</span>;</span><br><span class="line"><span class="type">Object</span> <span class="variable">target</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">           <span class="comment">// 1.ä»¥ä¸‹çš„å‡ ä¸ªåˆ¤æ–­ï¼Œä¸»è¦æ˜¯ä¸ºäº†åˆ¤æ–­methodæ˜¯å¦ä¸ºequalsã€hashCodeç­‰Objectçš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">this</span>.equalsDefined &amp;&amp; AopUtils.isEqualsMethod(method)) &#123;</span><br><span class="line"><span class="comment">// The target does not implement the equals(Object) method itself.</span></span><br><span class="line"><span class="keyword">return</span> equals(args[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (!<span class="built_in">this</span>.hashCodeDefined &amp;&amp; AopUtils.isHashCodeMethod(method)) &#123;</span><br><span class="line"><span class="comment">// The target does not implement the hashCode() method itself.</span></span><br><span class="line"><span class="keyword">return</span> hashCode();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (method.getDeclaringClass() == DecoratingProxy.class) &#123;</span><br><span class="line"><span class="comment">// There is only getDecoratedClass() declared -&gt; dispatch to proxy config.</span></span><br><span class="line"><span class="keyword">return</span> AopProxyUtils.ultimateTargetClass(<span class="built_in">this</span>.advised);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (!<span class="built_in">this</span>.advised.opaque &amp;&amp; method.getDeclaringClass().isInterface() &amp;&amp;</span><br><span class="line">method.getDeclaringClass().isAssignableFrom(Advised.class)) &#123;</span><br><span class="line"><span class="comment">// Service invocations on ProxyConfig with the proxy config...</span></span><br><span class="line"><span class="keyword">return</span> AopUtils.invokeJoinpointUsingReflection(<span class="built_in">this</span>.advised, method, args);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Object retVal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">this</span>.advised.exposeProxy) &#123;</span><br><span class="line"><span class="comment">// Make invocation available if necessary.</span></span><br><span class="line">oldProxy = AopContext.setCurrentProxy(proxy);</span><br><span class="line">setProxyContext = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// May be null. Get as late as possible to minimize the time we &quot;own&quot; the target,</span></span><br><span class="line"><span class="comment">// in case it comes from a pool.</span></span><br><span class="line">target = targetSource.getTarget();</span><br><span class="line"><span class="keyword">if</span> (target != <span class="literal">null</span>) &#123;</span><br><span class="line">targetClass = target.getClass();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.è·å–å½“å‰beanè¢«æ‹¦æˆªæ–¹æ³•é“¾è¡¨</span></span><br><span class="line">List&lt;Object&gt; chain = <span class="built_in">this</span>.advised.getInterceptorsAndDynamicInterceptionAdvice(method, targetClass);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.å¦‚æœä¸ºç©ºï¼Œåˆ™ç›´æ¥è°ƒç”¨targetçš„method</span></span><br><span class="line"><span class="keyword">if</span> (chain.isEmpty()) &#123;</span><br><span class="line">Object[] argsToUse = AopProxyUtils.adaptArgumentsIfNecessary(method, args);</span><br><span class="line">retVal = AopUtils.invokeJoinpointUsingReflection(target, method, argsToUse);</span><br><span class="line">&#125;</span><br><span class="line">           <span class="comment">// 4.ä¸ä¸ºç©ºï¼Œåˆ™é€ä¸€è°ƒç”¨chainä¸­çš„æ¯ä¸€ä¸ªæ‹¦æˆªæ–¹æ³•çš„proceed</span></span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// We need to create a method invocation...</span></span><br><span class="line">invocation = <span class="keyword">new</span> <span class="title class_">ReflectiveMethodInvocation</span>(proxy, target, method, args, targetClass, chain);</span><br><span class="line"><span class="comment">// Proceed to the joinpoint through the interceptor chain.</span></span><br><span class="line">retVal = invocation.proceed();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="keyword">return</span> retVal;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ‹¦æˆªæ–¹æ³•çœŸæ­£è¢«æ‰§è¡Œè°ƒç”¨-invocationproceed"><a class="markdownIt-Anchor" href="#æ‹¦æˆªæ–¹æ³•çœŸæ­£è¢«æ‰§è¡Œè°ƒç”¨-invocationproceed"></a> <strong>æ‹¦æˆªæ–¹æ³•çœŸæ­£è¢«æ‰§è¡Œè°ƒç”¨ invocation.proceed()</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">proceed</span><span class="params">()</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line"><span class="comment">//We start with an index of -1 and increment early.</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">this</span>.currentInterceptorIndex == <span class="built_in">this</span>.interceptorsAndDynamicMethodMatchers.size() - <span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> invokeJoinpoint();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">Object</span> <span class="variable">interceptorOrInterceptionAdvice</span> <span class="operator">=</span></span><br><span class="line"><span class="built_in">this</span>.interceptorsAndDynamicMethodMatchers.get(++<span class="built_in">this</span>.currentInterceptorIndex);</span><br><span class="line"><span class="keyword">if</span> (interceptorOrInterceptionAdvice <span class="keyword">instanceof</span> InterceptorAndDynamicMethodMatcher) &#123;</span><br><span class="line"><span class="comment">// Evaluate dynamic method matcher here: static part will already have</span></span><br><span class="line"><span class="comment">// been evaluated and found to match.</span></span><br><span class="line"><span class="type">InterceptorAndDynamicMethodMatcher</span> <span class="variable">dm</span> <span class="operator">=</span></span><br><span class="line">(InterceptorAndDynamicMethodMatcher) interceptorOrInterceptionAdvice;</span><br><span class="line"><span class="keyword">if</span> (dm.methodMatcher.matches(<span class="built_in">this</span>.method, <span class="built_in">this</span>.targetClass, <span class="built_in">this</span>.arguments)) &#123;</span><br><span class="line"><span class="keyword">return</span> dm.interceptor.invoke(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// Dynamic matching failed.</span></span><br><span class="line"><span class="comment">// Skip this interceptor and invoke the next in the chain.</span></span><br><span class="line"><span class="keyword">return</span> proceed();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// It&#x27;s an interceptor, so we just invoke it: The pointcut will have</span></span><br><span class="line"><span class="comment">// been evaluated statically before this object was constructed.</span></span><br><span class="line"><span class="keyword">return</span> ((MethodInterceptor) interceptorOrInterceptionAdvice).invoke(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ€»ç»“ 4ï¼šä¾æ¬¡éå†æ‹¦æˆªå™¨é“¾çš„æ¯ä¸ªå…ƒç´ ï¼Œç„¶åè°ƒç”¨å…¶å®ç°ï¼Œå°†çœŸæ­£è°ƒç”¨å·¥ä½œå§”æ‰˜ç»™å„ä¸ªå¢å¼ºå™¨</p></blockquote><h3 id="æ€»ç»“-2"><a class="markdownIt-Anchor" href="#æ€»ç»“-2"></a> <strong>æ€»ç»“ï¼š</strong></h3><p>çºµè§‚ä»¥ä¸Šè¿‡ç¨‹å¯çŸ¥ï¼šå®é™…å°±æ˜¯ä¸º bean åˆ›å»ºä¸€ä¸ª proxyï¼ŒJDKproxy æˆ–è€… CGLIBproxyï¼Œç„¶ååœ¨è°ƒç”¨ bean çš„æ–¹æ³•æ—¶ï¼Œä¼šé€šè¿‡ proxy æ¥è°ƒç”¨ bean æ–¹æ³•</p><p>é‡ç‚¹è¿‡ç¨‹å¯åˆ†ä¸ºï¼š</p><p><strong>1ï¼‰å°† AnnotationAwareAspectJAutoProxyCreator æ³¨å†Œåˆ° Spring å®¹å™¨ä¸­</strong></p><p><strong>2ï¼‰AnnotationAwareAspectJAutoProxyCreator ç±»çš„ postProcessAfterInitialization()æ–¹æ³•å°†æ‰€æœ‰æœ‰ advice çš„ bean é‡æ–°åŒ…è£…æˆ proxy</strong></p><p><strong>3ï¼‰è°ƒç”¨ bean æ–¹æ³•æ—¶é€šè¿‡ proxy æ¥è°ƒç”¨ï¼Œproxy ä¾æ¬¡è°ƒç”¨å¢å¼ºå™¨çš„ç›¸å…³æ–¹æ³•ï¼Œæ¥å®ç°æ–¹æ³•åˆ‡å…¥</strong></p><p><img src="https://unpkg.com/serms-assets@1.0.6/Spring/20190415112857658.png" alt="" /></p>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
          <category> Java </category>
          
          <category> SpringAopä»‹ç» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring5æ³¨è§£</title>
      <link href="/posts/b6dbc3f5/"/>
      <url>/posts/b6dbc3f5/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h2><blockquote><p>æœ€è¿‘åœ¨çœ‹ B ç«™é¢œç¾¤è€å¸ˆçš„è¯¾ç¨‹ï¼ŒJavaweb&gt;spring&gt;springMVC&gt;mybatis&gt;spring é«˜çº§ï¼Œä¸€è·¯èµ°æ¥ï¼Œè·Œè·Œæ’æ’ï¼Œå‘ç° spring ä¹Ÿä¸è¿‡å°”å°”ï¼Œè¯´ç™½äº†ï¼Œspring å°±æ˜¯æƒ³å°½åŠæ³•å°† new åšçš„æ›´ç®€å•ï¼Œæ›´å®Œç¾ï¼Œæ›´å¯é…ç½®ã€‚</p><p>Spring çš„ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½æ˜¯ IOCï¼Œå°±æ˜¯å°† Bean åˆå§‹åŒ–åŠ è½½åˆ°å®¹å™¨ä¸­ï¼ŒBean æ˜¯å¦‚ä½•åŠ è½½åˆ°å®¹å™¨çš„ï¼Œå¯ä»¥ä½¿ç”¨ Spring æ³¨è§£æ–¹å¼æˆ–è€… Spring XML é…ç½®æ–¹å¼ã€‚</p><p>Spring æ³¨è§£æ–¹å¼å‡å°‘äº†é…ç½®æ–‡ä»¶å†…å®¹ï¼Œæ›´åŠ ä¾¿äºç®¡ç†ï¼Œå¹¶ä¸”ä½¿ç”¨æ³¨è§£å¯ä»¥å¤§å¤§æé«˜äº†å¼€å‘æ•ˆç‡ï¼</p><p>æ³¨è§£æœ¬èº«æ˜¯æ²¡æœ‰åŠŸèƒ½çš„ï¼Œå’Œ xml ä¸€æ ·ï¼Œæ³¨è§£å’Œ xml éƒ½æ˜¯ä¸€ç§å…ƒæ•°æ®ï¼Œå…ƒæ•°æ®å³è§£é‡Šæ•°æ®çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„é…ç½®ã€‚</p></blockquote><h3 id="xml-å’Œæ³¨è§£çš„æœ€ä½³å®è·µ"><a class="markdownIt-Anchor" href="#xml-å’Œæ³¨è§£çš„æœ€ä½³å®è·µ"></a> xml å’Œæ³¨è§£çš„æœ€ä½³å®è·µï¼š</h3><blockquote><ul><li>xml ç”¨æ¥ç®¡ç† beanï¼›</li><li>æ³¨è§£åªè´Ÿè´£å®Œæˆå±æ€§çš„æ³¨å…¥ï¼›</li></ul></blockquote><h3 id="ä½¿ç”¨æ³¨è§£å”¯ä¸€éœ€è¦æ³¨æ„çš„å°±æ˜¯å¿…é¡»å¼€å¯æ³¨è§£çš„æ”¯æŒ"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ³¨è§£å”¯ä¸€éœ€è¦æ³¨æ„çš„å°±æ˜¯å¿…é¡»å¼€å¯æ³¨è§£çš„æ”¯æŒ"></a> ä½¿ç”¨æ³¨è§£å”¯ä¸€éœ€è¦æ³¨æ„çš„å°±æ˜¯ï¼Œå¿…é¡»å¼€å¯æ³¨è§£çš„æ”¯æŒï¼š</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//æ‰«ææŒ‡å®šåŒ…ä¸‹çš„å…¨éƒ¨çš„æ ‡æœ‰@Componentçš„ç±»ï¼Œå¹¶æ³¨å†Œæˆbean.</span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.guo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br></pre></td></tr></table></figure><hr /><h2 id="spring-çš„å¸¸ç”¨æ³¨è§£"><a class="markdownIt-Anchor" href="#spring-çš„å¸¸ç”¨æ³¨è§£"></a> Spring çš„å¸¸ç”¨æ³¨è§£</h2><h3 id="ç»™å®¹å™¨ä¸­æ³¨å…¥ç»„ä»¶"><a class="markdownIt-Anchor" href="#ç»™å®¹å™¨ä¸­æ³¨å…¥ç»„ä»¶"></a> ç»™å®¹å™¨ä¸­æ³¨å…¥ç»„ä»¶</h3><blockquote><p>åŒ…æ‰«æ+ç»„ä»¶æ ‡æ³¨æ³¨è§£</p><p>@<strong>Component</strong>ï¼šæ³›æŒ‡å„ç§ç»„ä»¶</p><p>@<strong>Controller</strong>ã€@<strong>Service</strong>ã€@<strong>Repository</strong>éƒ½å¯ä»¥ç§°ä¸º@<strong>Component</strong>ã€‚</p><p>@<strong>Controller</strong>ï¼šæ§åˆ¶å±‚</p><p>@<strong>Service</strong>ï¼šä¸šåŠ¡å±‚</p><p>@<strong>Repository</strong>ï¼šæ•°æ®è®¿é—®å±‚</p><p>@<strong>Bean</strong>: å¯¼å…¥ç¬¬ä¸‰æ–¹åŒ…é‡Œé¢çš„æ³¨è§£</p><p>@<strong>Import</strong>(è¦å¯¼å…¥åˆ°å®¹å™¨ä¸­çš„ç»„ä»¶)ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import(&#123;Color.class, MyImportSelector.class, MyImportBeanDefinitionRegistrar.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainConfig2</span> &#123;</span><br><span class="line"><span class="meta">@Scope(&quot;prototype&quot;)</span></span><br><span class="line"><span class="meta">@Bean(&quot;person&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Person <span class="title function_">person</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æˆ‘æ˜¯Person&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;ç´ å°æš–&quot;</span>,<span class="number">25</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>@<strong>ImportSelector</strong>ï¼šè¿”å›éœ€è¦å¯¼å…¥çš„ç»„ä»¶çš„å…¨ç±»åæ•°ç»„ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyImportBeanDefinitionRegistrar</span> <span class="keyword">implements</span> <span class="title class_">ImportBeanDefinitionRegistrar</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * AnnotationMetadataï¼šå½“å‰ç±»çš„æ³¨è§£ä¿¡æ¯</span></span><br><span class="line"><span class="comment">    * BeanDefinitionRegistryï¼šBeanDefinitionæ³¨å†Œç±»</span></span><br><span class="line"><span class="comment">    * æŠŠæ‰€æœ‰éœ€è¦æ·»åŠ åˆ°å®¹å™¨ä¸­çš„beanï¼Œè°ƒç”¨BeanDefinitionRegistry.registerBeanDefinitionæ‰‹åŠ¨æ³¨å…¥</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">registerBeanDefinitions</span><span class="params">(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">definition</span> <span class="operator">=</span> registry.containsBeanDefinition(<span class="string">&quot;com.atguigu.bean.Red&quot;</span>);</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">definition2</span> <span class="operator">=</span> registry.containsBeanDefinition(<span class="string">&quot;com.atguigu.bean.Blue&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(definition &amp;&amp; definition2)&#123;</span><br><span class="line">            <span class="comment">//æŒ‡å®šbeanå®šä¹‰ä¿¡æ¯ï¼ˆbeançš„ç±»å‹ï¼Œbeançš„scopeï¼‰</span></span><br><span class="line">            <span class="type">RootBeanDefinition</span> <span class="variable">rootBeanDefinition</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RootBeanDefinition</span>(RainBow.class);</span><br><span class="line">            <span class="comment">//æ³¨å†Œä¸€ä¸ªbeanï¼ŒæŒ‡å®šbeanå</span></span><br><span class="line">            registry.registerBeanDefinition(<span class="string">&quot;rainBow&quot;</span>,rootBeanDefinition);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ spring æä¾›çš„<strong>FactoryBean</strong>ï¼ˆå·¥å‚ Beanï¼‰</p><ul><li>é»˜è®¤è·å–åˆ°çš„æ˜¯å·¥å‚<strong>Bean</strong>è°ƒç”¨<strong>getObject</strong>åˆ›å»ºçš„å¯¹è±¡</li><li>è¦è·å–å·¥å‚<strong>Bean</strong>æœ¬èº«ï¼Œéœ€è¦åœ¨ id å‰é¢åŠ ä¸€ä¸ª&amp;</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> ColorFactoryBean <span class="title function_">colorFactoryBean</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ColorFactoryBean</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªspringå®šä¹‰çš„FactoryBean</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ColorFactoryBean</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;Color&gt; &#123;</span><br><span class="line">    <span class="comment">//è¿”å›ä¸€ä¸ªColorå¯¹è±¡ï¼Œå¹¶å°†Coloræ·»åŠ åˆ°å®¹å™¨ä¸­</span></span><br><span class="line">    <span class="keyword">public</span> Color <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ColorFactoryBean,getObject()&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Color</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> Color.class;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSingleton</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote><h3 id="æ³¨å…¥-bean-çš„æ³¨è§£"><a class="markdownIt-Anchor" href="#æ³¨å…¥-bean-çš„æ³¨è§£"></a> æ³¨å…¥ bean çš„æ³¨è§£</h3><blockquote><p>@<strong>Autowired</strong>ï¼šç”± bean æä¾›</p><ul><li>@Autowired å¯ä»¥ä½œç”¨åœ¨å˜é‡ã€setter æ–¹æ³•ã€æ„é€ å‡½æ•°ä¸Šï¼›</li><li>æœ‰ä¸ªå±æ€§ä¸º requiredï¼Œå¯ä»¥é…ç½®ä¸º falseï¼›</li></ul><p>@<strong>Inject</strong>ï¼šç”± JSR-330 æä¾›</p><ul><li>@Inject ç”¨æ³•å’Œ@Autowired ä¸€æ ·ã€‚</li></ul><p>@<strong>Resource</strong>ï¼šç”± JSR-250 æä¾›</p><p>@<strong>Autowired</strong>ã€@<strong>Inject</strong>æ˜¯é»˜è®¤æŒ‰ç…§ç±»å‹åŒ¹é…çš„ï¼Œ@<strong>Resource</strong>æ˜¯æŒ‰ç…§åç§°åŒ¹é…çš„ï¼Œ@<strong>Autowired</strong>å¦‚æœéœ€è¦æŒ‰ç…§åç§°åŒ¹é…éœ€è¦å’Œ@<strong>Qualifier</strong>ä¸€èµ·ä½¿ç”¨ï¼Œ@Inject å’Œ@Name ä¸€èµ·ä½¿ç”¨ã€‚</p><p>@<strong>Primary</strong></p><p>è®©<strong>spring</strong>è¿›è¡Œè‡ªåŠ¨è£…é…çš„æ—¶å€™ï¼Œé»˜è®¤ä½¿ç”¨é¦–é€‰çš„<strong>bean</strong>ï¼Œå’Œ@<strong>Qualifier</strong>ä¸€ä¸ªæ•ˆæœã€‚</p></blockquote><h3 id="jsonignore"><a class="markdownIt-Anchor" href="#jsonignore"></a> @JsonIgnore</h3><blockquote><ol><li>ä½œç”¨: åœ¨ json åºåˆ—åŒ–æ—¶å°† java bean ä¸­çš„ä¸€äº›å±æ€§å¿½ç•¥æ‰ï¼Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–éƒ½å—å½±å“ã€‚</li><li>ä½¿ç”¨æ–¹æ³•: ä¸€èˆ¬æ ‡è®°åœ¨å±æ€§æˆ–è€…æ–¹æ³•ä¸Šï¼Œè¿”å›çš„ json æ•°æ®å³ä¸åŒ…å«è¯¥å±æ€§ã€‚</li><li>æ³¨è§£å¤±æ•ˆ:å¦‚æœæ³¨è§£å¤±æ•ˆï¼Œå¯èƒ½æ˜¯å› ä¸ºä½ ä½¿ç”¨çš„æ˜¯ fastJsonï¼Œå°è¯•ä½¿ç”¨å¯¹åº”çš„æ³¨è§£æ¥å¿½ç•¥å­—æ®µï¼Œæ³¨è§£ä¸ºï¼š@JSONField(serialize = false)ï¼Œä½¿ç”¨æ–¹æ³•ä¸€æ ·ã€‚</li></ol></blockquote><h3 id="åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"><a class="markdownIt-Anchor" href="#åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•"></a> åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•</h3><blockquote><ol><li>é€šè¿‡@Bean(initMethod=â€œinitâ€,destoryMethod=â€œdestoryâ€)æ–¹æ³•</li><li>é€šè¿‡ bean å®ç° InitializingBean æ¥å®šä¹‰åˆå§‹åŒ–é€»è¾‘ï¼ŒDisposableBean å®šä¹‰é”€æ¯é€»è¾‘</li><li>å¯ä»¥ä½¿ç”¨ JSR250ï¼š@PostConstructï¼šåˆå§‹åŒ–æ–¹æ³•ï¼›@PreDestoryï¼šé”€æ¯æ–¹æ³•ã€‚</li><li>BeanPostProcessorï¼šbean çš„åç½®å¤„ç†å™¨ï¼Œåœ¨ bean åˆå§‹åŒ–å‰åè¿›è¡Œä¸€äº›å¤„ç†å·¥ä½œ</li><li>postProcessBeforeInitializationï¼šåœ¨åˆå§‹åŒ–ä¹‹å‰å·¥ä½œï¼›</li><li>postProcessAfterInitializationï¼šåœ¨åˆå§‹åŒ–å·¥ä½œä¹‹åå·¥ä½œï¼›</li></ol></blockquote><p>Java é…ç½®ç±»ç›¸å…³æ³¨è§£</p><blockquote><p>@<strong>Configuration</strong></p><p>å£°æ˜å½“å‰ç±»ä¸ºé…ç½®ç±»ï¼›</p><p>@<strong>Bean</strong></p><p>æ³¨è§£åœ¨æ–¹æ³•ä¸Šï¼Œå£°æ˜å½“å‰æ–¹æ³•çš„è¿”å›å€¼ä¸ºä¸€ä¸ª beanï¼Œæ›¿ä»£ xml ä¸­çš„æ–¹å¼ï¼›</p><p>@<strong>ComponentScan</strong></p><p>ç”¨äºå¯¹<strong>Component</strong>è¿›è¡Œæ‰«æï¼›</p></blockquote><h3 id="åˆ‡é¢aopç›¸å…³æ³¨è§£"><a class="markdownIt-Anchor" href="#åˆ‡é¢aopç›¸å…³æ³¨è§£"></a> åˆ‡é¢ï¼ˆAOPï¼‰<strong>ç›¸å…³æ³¨è§£</strong></h3><blockquote><p><a href="https://ser-mingshao.github.io/post/a528d135">Spring AOP è¯¦ç»†ä»‹ç»</a></p><p>Spring æ”¯æŒ<strong>AspectJ</strong>çš„æ³¨è§£å¼åˆ‡é¢ç¼–ç¨‹ã€‚</p><p>@<strong>Aspect</strong> å£°æ˜ä¸€ä¸ªåˆ‡é¢</p><p>@<strong>After</strong> åœ¨æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œï¼ˆæ–¹æ³•ä¸Šï¼‰</p><p>@<strong>Before</strong> åœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼ˆæ–¹æ³•ä¸Šï¼‰</p><p>@<strong>Around</strong> åœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰ä¸ä¹‹åæ‰§è¡Œï¼ˆæ–¹æ³•ä¸Šï¼‰</p><p>@<strong>PointCut</strong> å£°æ˜åˆ‡ç‚¹</p><p>åœ¨ java é…ç½®ç±»ä¸­ä½¿ç”¨@<strong>EnableAspectJAutoProxy</strong>æ³¨è§£å¼€å¯<strong>Spring</strong>å¯¹<strong>AspectJ</strong>ä»£ç†çš„æ”¯æŒ</p></blockquote><p>@Bean çš„å±æ€§æ”¯æŒ</p><blockquote><p>@<strong>Scope</strong>è®¾ç½®ç±»å‹åŒ…æ‹¬ï¼š</p><p>è®¾ç½® Spring å®¹å™¨å¦‚ä½•æ–°å»º Bean å®ä¾‹ï¼ˆæ–¹æ³•ä¸Šï¼Œå¾—æœ‰@<strong>Bean</strong>ï¼‰</p><p>â‘  <strong>Singleton</strong></p><p>ï¼ˆå•ä¾‹,ä¸€ä¸ª Spring å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ª bean å®ä¾‹ï¼Œé»˜è®¤æ¨¡å¼ï¼‰,</p><p>â‘¡ <strong>Protetype</strong></p><p>ï¼ˆæ¯æ¬¡è°ƒç”¨æ–°å»ºä¸€ä¸ª beanï¼‰,</p><p>â‘¢ <strong>Request</strong></p><p>ï¼ˆweb é¡¹ç›®ä¸­ï¼Œç»™æ¯ä¸ª http request æ–°å»ºä¸€ä¸ª beanï¼‰,</p><p>â‘£ <strong>Session</strong></p><p>ï¼ˆweb é¡¹ç›®ä¸­ï¼Œç»™æ¯ä¸ª http session æ–°å»ºä¸€ä¸ª beanï¼‰,</p><p>â‘¤ <strong>GlobalSession</strong></p><p>ï¼ˆç»™æ¯ä¸€ä¸ª global http session æ–°å»ºä¸€ä¸ª Bean å®ä¾‹ï¼‰</p></blockquote><h3 id="value-æ³¨è§£"><a class="markdownIt-Anchor" href="#value-æ³¨è§£"></a> @Value æ³¨è§£</h3><blockquote><p>æ”¯æŒå¦‚ä¸‹æ–¹å¼çš„æ³¨å…¥ï¼š</p><ul><li>æ³¨å…¥æ™®é€šå­—ç¬¦</li><li>æ³¨å…¥æ“ä½œç³»ç»Ÿå±æ€§</li><li>æ³¨å…¥è¡¨è¾¾å¼ç»“æœ</li><li>æ³¨å…¥å…¶å®ƒ bean å±æ€§</li><li>æ³¨å…¥æ–‡ä»¶èµ„æº</li><li>æ³¨å…¥ç½‘ç«™èµ„æº</li><li>æ³¨å…¥é…ç½®æ–‡ä»¶</li></ul><p>@<strong>Value</strong>ä¸‰ç§æƒ…å†µçš„ç”¨æ³•ã€‚</p><ol><li>${}æ˜¯å»æ‰¾å¤–éƒ¨é…ç½®çš„å‚æ•°ï¼Œå°†å€¼èµ‹è¿‡æ¥</li><li>#{}æ˜¯ SpEL è¡¨è¾¾å¼ï¼Œå»å¯»æ‰¾å¯¹åº”å˜é‡çš„å†…å®¹</li><li>#{}ç›´æ¥å†™å­—ç¬¦ä¸²å°±æ˜¯å°†å­—ç¬¦ä¸²çš„å€¼æ³¨å…¥è¿›å»</li></ol></blockquote><h3 id="ç¯å¢ƒåˆ‡æ¢"><a class="markdownIt-Anchor" href="#ç¯å¢ƒåˆ‡æ¢"></a> ç¯å¢ƒåˆ‡æ¢</h3><blockquote><p>@<strong>Profile</strong></p><p>æŒ‡å®šç»„ä»¶åœ¨å“ªä¸ªç¯å¢ƒçš„æƒ…å†µä¸‹æ‰èƒ½è¢«æ³¨å†Œåˆ°å®¹å™¨ä¸­ï¼Œä¸æŒ‡å®šï¼Œä»»ä½•ç¯å¢ƒä¸‹éƒ½èƒ½æ³¨å†Œè¿™ä¸ªç»„ä»¶ã€‚</p><p>@<strong>Conditional</strong></p><p>é€šè¿‡å®ç° Condition æ¥å£ï¼Œå¹¶é‡å†™ matches æ–¹æ³•ï¼Œä»è€Œå†³å®šè¯¥ bean æ˜¯å¦è¢«å®ä¾‹åŒ–ã€‚</p></blockquote><h3 id="å¼‚æ­¥ç›¸å…³"><a class="markdownIt-Anchor" href="#å¼‚æ­¥ç›¸å…³"></a> å¼‚æ­¥ç›¸å…³</h3><blockquote><p>@<strong>EnableAsync</strong></p><p>é…ç½®ç±»ä¸­é€šè¿‡æ­¤æ³¨è§£å¼€å¯å¯¹å¼‚æ­¥ä»»åŠ¡çš„æ”¯æŒï¼›</p><p>@<strong>Async</strong></p><p>åœ¨å®é™…æ‰§è¡Œçš„ bean æ–¹æ³•ä½¿ç”¨è¯¥æ³¨è§£æ¥å£°æ˜å…¶æ˜¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼ˆæ–¹æ³•ä¸Šæˆ–ç±»ä¸Šæ‰€æœ‰çš„æ–¹æ³•éƒ½å°†å¼‚æ­¥ï¼Œéœ€è¦@EnableAsync å¼€å¯å¼‚æ­¥ä»»åŠ¡ï¼‰</p></blockquote><h3 id="å®šæ—¶ä»»åŠ¡ç›¸å…³"><a class="markdownIt-Anchor" href="#å®šæ—¶ä»»åŠ¡ç›¸å…³"></a> å®šæ—¶ä»»åŠ¡ç›¸å…³</h3><blockquote><p>@<strong>EnableScheduling</strong></p><p>åœ¨é…ç½®ç±»ä¸Šä½¿ç”¨ï¼Œå¼€å¯è®¡åˆ’ä»»åŠ¡çš„æ”¯æŒï¼ˆç±»ä¸Šï¼‰</p><p>@<strong>Scheduled</strong></p><p>æ¥ç”³æ˜è¿™æ˜¯ä¸€ä¸ªä»»åŠ¡ï¼ŒåŒ…æ‹¬ cron,fixDelay,fixRate ç­‰ç±»å‹ï¼ˆæ–¹æ³•ä¸Šï¼Œéœ€å…ˆå¼€å¯è®¡åˆ’ä»»åŠ¡çš„æ”¯æŒï¼‰</p></blockquote><h2 id="springmvc-å¸¸ç”¨æ³¨è§£"><a class="markdownIt-Anchor" href="#springmvc-å¸¸ç”¨æ³¨è§£"></a> SpringMVC å¸¸ç”¨æ³¨è§£</h2><blockquote><h3 id="1-enablewebmvc"><a class="markdownIt-Anchor" href="#1-enablewebmvc"></a> 1ã€@EnableWebMvc</h3><p>åœ¨é…ç½®ç±»ä¸­å¼€å¯ Web MVC çš„é…ç½®æ”¯æŒã€‚</p><h3 id="2-controller"><a class="markdownIt-Anchor" href="#2-controller"></a> 2ã€@Controller</h3><p>3ã€@RequestMapping<br />ç”¨äºæ˜ å°„ web è¯·æ±‚ï¼ŒåŒ…æ‹¬è®¿é—®è·¯å¾„å’Œå‚æ•°ã€‚</p><h3 id="4-responsebody"><a class="markdownIt-Anchor" href="#4-responsebody"></a> 4ã€@ResponseBody</h3><p>æ”¯æŒå°†è¿”å›å€¼æ”¾åˆ° response å†…ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªé¡µé¢ï¼Œé€šå¸¸ç”¨æˆ·è¿”å› json æ•°æ®ã€‚</p><h3 id="5-requestbody"><a class="markdownIt-Anchor" href="#5-requestbody"></a> 5ã€@RequestBody</h3><p>å…è®¸ request çš„å‚æ•°åœ¨ request ä½“ä¸­ï¼Œè€Œä¸æ˜¯åœ¨ç›´æ¥è¿æ¥çš„åœ°å€åé¢ã€‚ï¼ˆæ”¾åœ¨å‚æ•°å‰ï¼‰</p><h3 id="6-pathvariable"><a class="markdownIt-Anchor" href="#6-pathvariable"></a> 6ã€@PathVariable</h3><p>ç”¨äºæ¥æ”¶è·¯å¾„å‚æ•°ï¼Œæ¯”å¦‚@RequestMapping(â€œ/hello/{name}â€)å£°æ˜çš„è·¯å¾„ï¼Œå°†æ³¨è§£æ”¾åœ¨å‚æ•°å‰ï¼Œå³å¯è·å–è¯¥å€¼ï¼Œé€šå¸¸ä½œä¸º Restful çš„æ¥å£å®ç°æ–¹æ³•ã€‚</p><h3 id="7-restcontroller"><a class="markdownIt-Anchor" href="#7-restcontroller"></a> 7ã€@RestController</h3><p>è¯¥æ³¨è§£ä¸ºä¸€ä¸ªç»„åˆæ³¨è§£ï¼Œç›¸å½“äº@Controller å’Œ@ResponseBody çš„ç»„åˆï¼Œæ³¨è§£åœ¨ç±»ä¸Šï¼Œæ„å‘³ç€ï¼Œè¯¥ Controller çš„æ‰€æœ‰æ–¹æ³•éƒ½é»˜è®¤åŠ ä¸Šäº†@ResponseBodyã€‚</p><h3 id="8-controlleradvice"><a class="markdownIt-Anchor" href="#8-controlleradvice"></a> 8ã€@ControllerAdvice</h3><p>å…¨å±€å¼‚å¸¸å¤„ç†<br />å…¨å±€æ•°æ®ç»‘å®š<br />å…¨å±€æ•°æ®é¢„å¤„ç†</p><h3 id="9-exceptionhandler"><a class="markdownIt-Anchor" href="#9-exceptionhandler"></a> 9ã€@ExceptionHandler</h3><p>ç”¨äºå…¨å±€å¤„ç†æ§åˆ¶å™¨é‡Œçš„å¼‚å¸¸ã€‚</p><h3 id="10-initbinder"><a class="markdownIt-Anchor" href="#10-initbinder"></a> 10ã€@InitBinder</h3><p>ç”¨æ¥è®¾ç½® WebDataBinderï¼ŒWebDataBinder ç”¨æ¥è‡ªåŠ¨ç»‘å®šå‰å°è¯·æ±‚å‚æ•°åˆ° Model ä¸­ã€‚</p><h3 id="11-modelattribute"><a class="markdownIt-Anchor" href="#11-modelattribute"></a> 11ã€@ModelAttribute</h3><p>ï¼ˆ1ï¼‰@ModelAttribute æ³¨é‡Šæ–¹æ³•</p><p>å¦‚æœæŠŠ@ModelAttribute æ”¾åœ¨æ–¹æ³•çš„æ³¨è§£ä¸Šæ—¶ï¼Œä»£è¡¨çš„æ˜¯ï¼šè¯¥ Controller çš„æ‰€æœ‰æ–¹æ³•åœ¨è°ƒç”¨å‰ï¼Œå…ˆæ‰§è¡Œæ­¤@ModelAttribute æ–¹æ³•ã€‚å¯ä»¥æŠŠè¿™ä¸ª@ModelAttribute ç‰¹æ€§ï¼Œåº”ç”¨åœ¨ BaseController å½“ä¸­ï¼Œæ‰€æœ‰çš„ Controller ç»§æ‰¿ BaseControllerï¼Œå³å¯å®ç°åœ¨è°ƒç”¨ Controller æ—¶ï¼Œå…ˆæ‰§è¡Œ@ModelAttribute æ–¹æ³•ã€‚æ¯”å¦‚æƒé™çš„éªŒè¯ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨ Interceptorï¼‰ç­‰ã€‚</p><p>ï¼ˆ2ï¼‰@ModelAttribute æ³¨é‡Šä¸€ä¸ªæ–¹æ³•çš„å‚æ•°</p><p>å½“ä½œä¸ºæ–¹æ³•çš„å‚æ•°ä½¿ç”¨ï¼ŒæŒ‡ç¤ºçš„å‚æ•°åº”è¯¥ä»æ¨¡å‹ä¸­æ£€ç´¢ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œå®ƒåº”è¯¥é¦–å…ˆå®ä¾‹åŒ–ï¼Œç„¶åæ·»åŠ åˆ°æ¨¡å‹ä¸­ï¼Œä¸€æ—¦å‡ºç°åœ¨æ¨¡å‹ä¸­ï¼Œå‚æ•°å­—æ®µåº”è¯¥ä»å…·æœ‰åŒ¹é…åç§°çš„æ‰€æœ‰è¯·æ±‚å‚æ•°ä¸­å¡«å……ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
          <category> Springæ³¨è§£ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> Springæ³¨è§£ </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringDiå››ç§ä¾èµ–æ³¨å…¥æ–¹å¼</title>
      <link href="/posts/7a5d2d7e/"/>
      <url>/posts/7a5d2d7e/</url>
      
        <content type="html"><![CDATA[<p><img src="https://unpkg.com/serms-assets/Spring/20200712213350.png" alt="" /></p><h2 id="springdiä¾èµ–æ³¨å…¥"><a class="markdownIt-Anchor" href="#springdiä¾èµ–æ³¨å…¥"></a> SpringDIï¼ˆä¾èµ–æ³¨å…¥ï¼‰</h2><hr /><h3 id="di-æ¦‚è¿°"><a class="markdownIt-Anchor" href="#di-æ¦‚è¿°"></a> DI æ¦‚è¿°</h3><blockquote><h3 id="dependency-injectionå³ä¸ºä¾èµ–æ³¨å…¥ç®€ç§°-di"><a class="markdownIt-Anchor" href="#dependency-injectionå³ä¸ºä¾èµ–æ³¨å…¥ç®€ç§°-di"></a> <code>Dependency Injection</code><strong>å³ä¸ºä¾èµ–æ³¨å…¥ï¼Œç®€ç§° DI</strong> ã€‚</h3><p>ç®€å•æ¥è¯´ï¼Œåœ¨ Spring åˆ›å»ºå¯¹è±¡çš„åŒæ—¶ï¼Œä¸ºå…¶å±æ€§èµ‹å€¼ï¼Œç§°ä¹‹ä¸ºä¾èµ–æ³¨å…¥ã€‚</p><p>å½¢è±¡æ¥è¯´ï¼Œç»„ä»¶ä¹‹é—´ä¾èµ–å…³ç³»ç”±å®¹å™¨åœ¨è¿è¡ŒæœŸå†³å®šçš„ï¼Œå³ç”±å®¹å™¨åŠ¨æ€çš„å°†æŸä¸ªä¾èµ–å…³ç³»æ³¨å…¥åˆ°ç»„ä»¶ä¹‹ä¸­ã€‚</p></blockquote><h3 id="ä»€ä¹ˆæ˜¯-di"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯-di"></a> ä»€ä¹ˆæ˜¯ DI</h3><h4 id="äº†è§£-di-çš„æ€æƒ³"><a class="markdownIt-Anchor" href="#äº†è§£-di-çš„æ€æƒ³"></a> äº†è§£ DI çš„æ€æƒ³</h4><blockquote><p>ç®€å•äº†è§£äº† DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰ï¼Œåœ¨çœ‹ä¾èµ–æ³¨å…¥è¿™ä¸ªè¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†ä¾èµ–æ³¨å…¥ä»¥ IOCï¼ˆæ§åˆ¶åè½¬ï¼‰çš„å½¢å¼æ‹†åˆ†å®ƒã€‚</p><p>é¡¾åæ€ä¹‰ï¼Œä¾èµ–æ³¨å…¥æ˜¯ç”±â€œä¾èµ–â€å’Œâ€œæ³¨å…¥â€ä¸¤ä¸ªè¯æ±‡ç»„åˆè€Œæˆï¼Œé‚£ä¹ˆæˆ‘ä»¬å†ä¸€æ¬¡é¡ºè—¤æ‘¸ç“œï¼Œåˆ†åˆ«åˆ†æè¿™ä¸¤ä¸ªè¯è¯­!</p></blockquote><h4 id="ä¾èµ–"><a class="markdownIt-Anchor" href="#ä¾èµ–"></a> ä¾èµ–</h4><blockquote><p>ä¾èµ–ä¸€è¯ï¼Œå¯ä»¥æ‹†åˆ†æˆå¾ˆå¤šå…ƒç´ ã€‚æ¯”å¦‚è¯´ï¼Œè¾¾æˆä¾èµ–æ¡ä»¶å¿…é¡»æ˜¯<strong>ä¸¤ä¸ªå¯¹è±¡</strong> ï¼Œ<strong>è°ä¾èµ–è°</strong> ï¼Œ<strong>æŸä¸€ä¸ªå¯¹è±¡ä¾èµ–å¦ä¸€ä¸ªå¯¹è±¡çš„ä»€ä¹ˆ</strong> ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™å‡ ä¸ªæ¡ä»¶åˆ—ä¸¾å‡ºè¿™å‡ ç§æƒ…å†µï¼š</p><ol><li>å…³äºè°ä¾èµ–ä¸è°ï¼Œå½“ç„¶æ˜¯åº”ç”¨ç¨‹åºä¾èµ–äº IOC å®¹å™¨ã€‚å› ä¸ºåº”ç”¨ç¨‹åºä¾èµ–äº IOC å®¹å™¨æä¾›çš„å¯¹è±¡æ‰€éœ€å¤–éƒ¨èµ„æºï¼Œæ‰€ä»¥å°±äº§ç”Ÿäº†è¿™ç§ä¾èµ–å…³ç³»ã€‚ï¼ˆå¯ä»¥ç†è§£ä¸ºå…¥å£ï¼Œè™½ç„¶ä¸æ˜¯è¿™ä¹ˆä¸¥è°¨å§ï¼ï¼‰</li></ol></blockquote><h4 id="æ³¨å…¥"><a class="markdownIt-Anchor" href="#æ³¨å…¥"></a> æ³¨å…¥</h4><blockquote><p>æ³¨å…¥ä¸€æ¬¡ï¼Œå¯ä»¥ä¹Ÿå¯ä»¥æ‹†åˆ†æˆå¾ˆå¤šå…ƒç´ ã€‚æ¯”å¦‚è¯´ï¼Œæ³¨å…¥å¯ä»¥åˆ†è§£æˆ<strong>è°æ³¨å…¥è°</strong> ï¼Œ<strong>æ³¨å…¥äº†ä»€ä¹ˆ</strong> ã€‚è¿™é‡Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®è¿™ä¸¤ä¸ªæ¡ä»¶æ¥åˆ—ä¸¾å‡ºè¿™å‡ ç§æƒ…å†µï¼š</p><ol><li>å…³äºè°æ³¨å…¥è°ï¼Œèº«ä¸ºå®¹å™¨çš„ IOC è‚¯å®šæ˜¯è¢«æ³¨å…¥çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å°†æ‰€éœ€è¦çš„å¯¹è±¡æ³¨å…¥åˆ° IOC å®¹å™¨ä¸­ã€‚è‡³äºæ³¨å…¥äº†ä»€ä¹ˆï¼Œå¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯æˆ‘ä»¬é¡¹ç›®ä¸­æ‰€éœ€è¦çš„å¯¹è±¡ã€èµ„æºã€æ•°æ®ç­‰ç­‰ã€‚ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦å¤–éƒ¨çš„èµ„æºæ—¢å¯ä»¥æ³¨å…¥åˆ° IOC å®¹å™¨ä¸­ï¼Œå¹¶ç”± IOC å®¹å™¨æ¥å®ç°æ³¨å…¥å¯¹è±¡çš„æ§åˆ¶åè½¬ï¼</li><li>IOC çš„æ˜¯åœ¨ç³»ç»Ÿè¿è¡Œä¸­ï¼ŒåŠ¨æ€çš„å‘æŸä¸ªå¯¹è±¡æä¾›å®ƒæ‰€éœ€è¦çš„å…¶ä»–å¯¹è±¡ã€‚è¿™ä¸€ç‚¹æ˜¯é€šè¿‡ DIï¼ˆDependency Injectionï¼Œä¾èµ–æ³¨å…¥ï¼‰æ¥å®ç°çš„ã€‚</li></ol></blockquote><h3 id="æ³¨å…¥æ–¹å¼"><a class="markdownIt-Anchor" href="#æ³¨å…¥æ–¹å¼"></a> æ³¨å…¥æ–¹å¼</h3><h4 id="setter-æ–¹æ³•æ³¨å…¥"><a class="markdownIt-Anchor" href="#setter-æ–¹æ³•æ³¨å…¥"></a> Setter æ–¹æ³•æ³¨å…¥</h4><blockquote><p>Setter æ–¹æ³•æ³¨å…¥ï¼Œå®ƒåªéœ€è¦æä¾›å¯¹åº”çš„ Setter æ–¹æ³•æ¥å£å®ç°æ³¨å…¥ï¼Œç”±äº JavaBean ä¸€èˆ¬éƒ½å®ç°äº† Setter æ–¹æ³•ï¼Œæ‰€ä»¥ Setter æ–¹æ³•æ³¨å…¥ä¹Ÿæˆä¸ºäº†æˆ‘ä»¬å¸¸ç”¨çš„æ³¨å…¥æ–¹æ³•ä¹‹ä¸€ã€‚</p></blockquote><h5 id="å®šä¹‰-javabean"><a class="markdownIt-Anchor" href="#å®šä¹‰-javabean"></a> å®šä¹‰ JavaBean</h5><blockquote><p>å®šä¹‰ä¸€ä¸ª JavaBean å¹¶èµ‹äºˆå…¶ Setter æ–¹æ³•</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span>Â com.mylifes1110.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span>Â java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span>Â lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span>Â lombok.Data;</span><br><span class="line"><span class="keyword">import</span>Â lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Lombok@Dataæ³¨è§£æä¾›äº†Setteræ–¹æ³•</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span>Â <span class="keyword">class</span>Â <span class="title class_">User</span>Â &#123;</span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â IntegerÂ Â Â Â Â Â Â Â Â Â Â Â Â id;</span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â StringÂ Â Â Â Â Â Â Â Â Â Â Â Â Â password;</span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â StringÂ Â Â Â Â Â Â Â Â Â Â Â Â Â sex;</span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â IntegerÂ Â Â Â Â Â Â Â Â Â Â Â Â age;</span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â DateÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â bornDate;</span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â String[]Â Â Â Â Â Â Â Â Â Â Â Â hobbys;</span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â Set&lt;String&gt;Â Â Â Â Â Â Â Â Â phones;</span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â List&lt;String&gt;Â Â Â Â Â Â Â Â names;</span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â Map&lt;String,Â String&gt;Â countries;</span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â PropertiesÂ Â Â Â Â Â Â Â Â Â files;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ³¨å…¥å„ç§æ•°æ®ç±»å‹"><a class="markdownIt-Anchor" href="#æ³¨å…¥å„ç§æ•°æ®ç±»å‹"></a> æ³¨å…¥å„ç§æ•°æ®ç±»å‹</h5><blockquote><p>æ³¨æ„ï¼šSpring åº•å±‚å¯¹ Date æ—¥æœŸç±»å‹åšäº†å¤„ç†ï¼Œé»˜è®¤å¤„ç†æ ¼å¼ä¸ºâ€œyyyy/MM/ddâ€</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span>Â <span class="attr">id</span>=<span class="string">&quot;User&quot;</span>Â <span class="attr">class</span>=<span class="string">&quot;com.mylifes1110.bean.User&quot;</span>&gt;</span></span><br><span class="line">Â Â Â Â <span class="comment">&lt;!--æ³¨å…¥åŸºæœ¬æ•°æ®ç±»å‹--&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">property</span>Â <span class="attr">name</span>=<span class="string">&quot;id&quot;</span>Â <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">property</span>Â <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>Â <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">property</span>Â <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span>Â <span class="attr">value</span>=<span class="string">&quot;male&quot;</span>/&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">property</span>Â <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>Â <span class="attr">value</span>=<span class="string">&quot;18&quot;</span>/&gt;</span></span><br><span class="line">Â Â Â Â <span class="comment">&lt;!--æ³¨å…¥æ—¥æœŸç±»å‹--&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">property</span>Â <span class="attr">name</span>=<span class="string">&quot;bornDate&quot;</span>Â <span class="attr">value</span>=<span class="string">&quot;1999/09/09&quot;</span>/&gt;</span></span><br><span class="line">Â Â Â Â <span class="comment">&lt;!--æ³¨å…¥æ•°ç»„ç±»å‹--&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">property</span>Â <span class="attr">name</span>=<span class="string">&quot;hobbys&quot;</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">value</span>&gt;</span>Run<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">value</span>&gt;</span>Jump<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">value</span>&gt;</span>Climb<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">Â Â Â Â <span class="comment">&lt;!--æ³¨å…¥Listé›†åˆç±»å‹--&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">property</span>Â <span class="attr">name</span>=<span class="string">&quot;names&quot;</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">value</span>&gt;</span>Ziph<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">value</span>&gt;</span>Join<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">value</span>&gt;</span>Marry<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">Â Â Â Â <span class="comment">&lt;!--æ³¨å…¥Seté›†åˆç±»å‹--&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">property</span>Â <span class="attr">name</span>=<span class="string">&quot;phones&quot;</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">value</span>&gt;</span>110<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">value</span>&gt;</span>119<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">value</span>&gt;</span>120<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">Â Â Â Â <span class="comment">&lt;!--æ³¨å…¥Propertiesç±»å‹--&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">property</span>Â <span class="attr">name</span>=<span class="string">&quot;files&quot;</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">prop</span>Â <span class="attr">key</span>=<span class="string">&quot;first&quot;</span>&gt;</span>One<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">prop</span>Â <span class="attr">key</span>=<span class="string">&quot;second&quot;</span>&gt;</span>Two<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">prop</span>Â <span class="attr">key</span>=<span class="string">&quot;third&quot;</span>&gt;</span>Three<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">Â Â Â Â <span class="comment">&lt;!--æ³¨å…¥Mapé›†åˆç±»å‹--&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">property</span>Â <span class="attr">name</span>=<span class="string">&quot;countries&quot;</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">entry</span>Â <span class="attr">key</span>=<span class="string">&quot;CHINA&quot;</span>Â <span class="attr">value</span>=<span class="string">&quot;ä¸­å›½&quot;</span>/&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">entry</span>Â <span class="attr">key</span>=<span class="string">&quot;USA&quot;</span>Â <span class="attr">value</span>=<span class="string">&quot;ç¾å›½&quot;</span>/&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="tag">&lt;<span class="name">entry</span>Â <span class="attr">key</span>=<span class="string">&quot;UK&quot;</span>Â <span class="attr">value</span>=<span class="string">&quot;è‹±å›½&quot;</span>/&gt;</span></span><br><span class="line">Â Â Â Â Â Â Â Â <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="æ³¨å…¥è‡ªå»ºç±»å‹æ•°æ®"><a class="markdownIt-Anchor" href="#æ³¨å…¥è‡ªå»ºç±»å‹æ•°æ®"></a> æ³¨å…¥è‡ªå»ºç±»å‹æ•°æ®</h5><blockquote><p>å°† Service å±‚éœ€è¦ä¸€ä¸ª Dao å±‚å®ç°ç±»å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ³¨å…¥æ–¹å¼æ¥å®ç°å¯¹ Service å±‚å’Œ Dao å±‚çš„å¯¹è±¡å…³è”</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span>Â <span class="attr">id</span>=<span class="string">&quot;UserDao&quot;</span>Â <span class="attr">class</span>=<span class="string">&quot;com.mylifes1110.dao.impl.UserDaoImpl&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span>Â <span class="attr">id</span>=<span class="string">&quot;UserService&quot;</span>Â <span class="attr">class</span>=<span class="string">&quot;com.mylifes1110.service.impl.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">property</span>Â <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span>Â <span class="attr">ref</span>=<span class="string">&quot;UserDao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>å°†åˆ›å»ºçš„ Bean å¯¹è±¡æ³¨å…¥åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œæ¯”å¦‚ä¸€ä¸ª JavaBean å¯¹è±¡ä¸­ä½œä¸ºäº†å¦ä¸€ä¸ª JavaBean å¯¹è±¡çš„å±æ€§</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ¬¡è¦bean,è¢«ä½œä¸ºå±æ€§--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span>Â <span class="attr">id</span>=<span class="string">&quot;address&quot;</span>Â <span class="attr">class</span>=<span class="string">&quot;com.mylifes1110.bean.Address&quot;</span>&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">property</span>Â <span class="attr">name</span>=<span class="string">&quot;position&quot;</span>Â <span class="attr">value</span>=<span class="string">&quot;ä¸Šæµ·å¸‚&quot;</span>Â /&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">property</span>Â <span class="attr">name</span>=<span class="string">&quot;zipCode&quot;</span>Â <span class="attr">value</span>=<span class="string">&quot;100001&quot;</span>Â /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--ä¸»è¦bean,æ“ä½œçš„ä¸»ä½“--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span>Â <span class="attr">id</span>=<span class="string">&quot;user&quot;</span>Â <span class="attr">class</span>=<span class="string">&quot;com.mylifes1110.bean.User&quot;</span>&gt;</span></span><br><span class="line">Â Â Â Â <span class="comment">&lt;!--addresså±æ€§å¼•ç”¨addresså¯¹è±¡--&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">property</span>Â <span class="attr">name</span>=<span class="string">&quot;address&quot;</span>Â <span class="attr">ref</span>=<span class="string">&quot;address&quot;</span>Â /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ„é€ æ–¹æ³•æ³¨å…¥"><a class="markdownIt-Anchor" href="#æ„é€ æ–¹æ³•æ³¨å…¥"></a> æ„é€ æ–¹æ³•æ³¨å…¥</h4><blockquote><p>åˆ›å»ºå¯¹è±¡æ—¶ï¼ŒSpring å·¥å‚ä¼šé€šè¿‡æ„é€ æ–¹æ³•ä¸ºå¯¹è±¡çš„å±æ€§èµ‹å€¼ã€‚ç”±äºæŸäº›æ¡†æ¶æˆ–è€…é¡¹ç›®ä¸­å¹¶æ²¡æœ‰ä¸º JavaBean æä¾› Setter æ–¹æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨å…¶æ„é€ æ–¹æ³•æ¥æ³¨å…¥ã€‚ä¸è¦å’Œæˆ‘è¯´ï¼Œæ²¡æœ‰æä¾›æ„é€ æ–¹æ³•å“ˆï¼ï¼ˆå¼€ä¸ªç©ç¬‘ï¼ï¼‰</p></blockquote><h5 id="å®šä¹‰-javabean-2"><a class="markdownIt-Anchor" href="#å®šä¹‰-javabean-2"></a> å®šä¹‰ JavaBean</h5><blockquote><p>å®šä¹‰ä¸€ä¸ª JavaBean å¯¹è±¡ï¼Œä¸ºå…¶æä¾›æ„é€ æ–¹æ³•</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>Â <span class="keyword">class</span>Â <span class="title class_">Student</span>Â &#123;</span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â IntegerÂ id;</span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â StringÂ name;</span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â StringÂ sex;</span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â IntegerÂ age;</span><br><span class="line"></span><br><span class="line">Â Â Â Â <span class="comment">//Constructors</span></span><br><span class="line">Â Â Â Â Â Â <span class="keyword">public</span>Â <span class="title function_">Student</span><span class="params">(IntegerÂ idÂ ,Â StringÂ nameÂ ,Â StringÂ sexÂ ,Â IntegerÂ age)</span>&#123;</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â <span class="built_in">this</span>.idÂ =Â id;</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="built_in">this</span>.nameÂ =Â name;</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â <span class="built_in">this</span>.sexÂ =Â sex;</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="built_in">this</span>.ageÂ =Â age;</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ„é€ æ–¹æ³•æ³¨å…¥-2"><a class="markdownIt-Anchor" href="#æ„é€ æ–¹æ³•æ³¨å…¥-2"></a> æ„é€ æ–¹æ³•æ³¨å…¥</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Â <span class="comment">&lt;!--æ„é€ æ³¨å…¥--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span>Â <span class="attr">id</span>=<span class="string">&quot;u3&quot;</span>Â <span class="attr">class</span>=<span class="string">&quot;com.mylifes1110.bean.Student&quot;</span>&gt;</span></span><br><span class="line">Â Â Â Â <span class="comment">&lt;!--Â é™¤æ ‡ç­¾åç§°æœ‰å˜åŒ–,å…¶ä»–å‡å’ŒSetæ³¨å…¥ä¸€è‡´Â --&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">constructor-arg</span>Â <span class="attr">name</span>=<span class="string">&quot;id&quot;</span>Â <span class="attr">value</span>=<span class="string">&quot;1234&quot;</span>Â /&gt;</span>Â </span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">constructor-arg</span>Â <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>Â <span class="attr">value</span>=<span class="string">&quot;tom&quot;</span>Â /&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">constructor-arg</span>Â <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>Â <span class="attr">value</span>=<span class="string">&quot;20&quot;</span>Â /&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">constructor-arg</span>Â <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span>Â <span class="attr">value</span>=<span class="string">&quot;male&quot;</span>Â /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="è‡ªåŠ¨æ³¨å…¥"><a class="markdownIt-Anchor" href="#è‡ªåŠ¨æ³¨å…¥"></a> è‡ªåŠ¨æ³¨å…¥</h4><blockquote><p>ä¸ç”¨åœ¨é…ç½®ä¸­ æŒ‡å®šä¸ºå“ªä¸ªå±æ€§èµ‹å€¼ï¼ŒåŠèµ‹ä»€ä¹ˆå€¼ã€‚ç”± spring è‡ªåŠ¨æ ¹æ®æŸä¸ª â€œåŸåˆ™â€ ï¼Œåœ¨å·¥å‚ä¸­æŸ¥æ‰¾ä¸€ä¸ª beanï¼Œä¸ºå±æ€§æ³¨å…¥å±æ€§å€¼ã€‚</p></blockquote><h5 id="æ³¨å…¥åœºæ™¯"><a class="markdownIt-Anchor" href="#æ³¨å…¥åœºæ™¯"></a> æ³¨å…¥åœºæ™¯</h5><blockquote><p>å°† Dao å±‚å®ç°ç±»å¯¹è±¡æ³¨å…¥åˆ° Service å±‚å¹¶è°ƒç”¨æ–¹æ³•å¾—ä»¥æµ‹è¯•</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span>Â com.mylifes1110.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span>Â com.mylifes1110.bean.User;</span><br><span class="line"><span class="keyword">import</span>Â com.mylifes1110.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span>Â com.mylifes1110.service.UserService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>Â <span class="keyword">class</span>Â <span class="title class_">UserServiceImpl</span>Â <span class="keyword">implements</span>Â <span class="title class_">UserService</span>Â &#123;</span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â UserDaoÂ userDao;</span><br><span class="line"></span><br><span class="line">Â Â Â Â <span class="keyword">public</span>Â <span class="keyword">void</span>Â <span class="title function_">setUserDao</span><span class="params">(UserDaoÂ userDao)</span>Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="built_in">this</span>.userDaoÂ =Â userDao;</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line"></span><br><span class="line">Â Â Â Â <span class="meta">@Override</span></span><br><span class="line">Â Â Â Â <span class="keyword">public</span>Â <span class="type">int</span>Â <span class="title function_">insertUser</span><span class="params">(UserÂ user)</span>Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â System.out.println(<span class="string">&quot;------insertUserÂ andÂ UserService------&quot;</span>);</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="keyword">return</span>Â userDao.insertUser(<span class="literal">null</span>);</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="è‡ªåŠ¨æ³¨å…¥çš„ä¸¤ç§æ–¹å¼"><a class="markdownIt-Anchor" href="#è‡ªåŠ¨æ³¨å…¥çš„ä¸¤ç§æ–¹å¼"></a> è‡ªåŠ¨æ³¨å…¥çš„ä¸¤ç§æ–¹å¼</h5><blockquote><p>åŸºäºåç§°è‡ªåŠ¨æ³¨å…¥å€¼</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span>Â <span class="attr">id</span>=<span class="string">&quot;UserDao&quot;</span>Â <span class="attr">class</span>=<span class="string">&quot;com.mylifes1110.dao.impl.UserDaoImpl&quot;</span>/&gt;</span></span><br><span class="line">Â Â Â Â <span class="comment">&lt;!--ä¸ºUserServiceImplä¸­çš„å±æ€§åŸºäºåç§°è‡ªåŠ¨æ³¨å…¥å€¼--&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">bean</span>Â <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span>Â <span class="attr">class</span>=<span class="string">&quot;com.mylifes1110.service.impl.userServiceImpl&quot;</span>Â <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>åŸºäºç±»å‹è‡ªåŠ¨æ³¨å…¥å€¼ï¼Œæ ¹æ®å®ç°çš„æ¥å£æ¥åˆ¤æ–­å¹¶è‡ªåŠ¨æ³¨å…¥å€¼ï¼Œå¦‚æœå®ç°æ­¤æ¥å£çš„å®ç°ç±»å¤ªå¤šï¼Œå®ƒä¼šåœ¨å¾ˆå¤šå®ç°æ­¤æ¥å£çš„å®ç°ç±»ä¸­é€‰æ‹©åå­—ç›¸åŒçš„å®ç°ç±»è¿›è¡Œæ³¨å…¥ã€‚ï¼ˆç°æ ¹æ®åˆ¤æ–­ï¼Œå¦‚æœä¸æˆåŠŸï¼Œåˆ™æ ¹æ®åç§°æ³¨å…¥ï¼‰</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span>Â <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span>Â <span class="attr">class</span>=<span class="string">&quot;com.mylifes1110.dao.UserDaoImpl&quot;</span>Â /&gt;</span></span><br><span class="line">Â Â Â Â <span class="comment">&lt;!--ä¸ºUserServiceImplä¸­çš„å±æ€§åŸºäºç±»å‹è‡ªåŠ¨æ³¨å…¥å€¼--&gt;</span></span><br><span class="line">Â Â Â Â <span class="tag">&lt;<span class="name">bean</span>Â <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span>Â <span class="attr">class</span>=<span class="string">&quot;com.mylifes1110.service.impl.UserServiceImpl&quot;</span>Â <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ³¨è§£è‡ªåŠ¨æ³¨å…¥"><a class="markdownIt-Anchor" href="#æ³¨è§£è‡ªåŠ¨æ³¨å…¥"></a> æ³¨è§£è‡ªåŠ¨æ³¨å…¥</h4><table><thead><tr><th style="text-align:left">æ³¨è§£åç§°</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">@Autowired</td><td style="text-align:left">åŸºäºç±»å‹è‡ªåŠ¨æ³¨å…¥</td></tr><tr><td style="text-align:left">@Resource</td><td style="text-align:left">åŸºäºåç§°è‡ªåŠ¨æ³¨å…¥</td></tr><tr><td style="text-align:left">@Qualifier(â€œuserDAOâ€)</td><td style="text-align:left">é™å®šè¦è‡ªåŠ¨æ³¨å…¥çš„ bean çš„ idï¼Œä¸€èˆ¬å’Œ@Autowired è”ç”¨</td></tr><tr><td style="text-align:left">@Value</td><td style="text-align:left">æ³¨å…¥ç®€å•ç±»å‹æ•°æ® ï¼ˆjdk8 ç§åŸºæœ¬æ•°æ®ç±»å‹+String ç±»å‹ï¼‰</td></tr></tbody></table><blockquote><p>ä½¿ç”¨åŸºäºç±»å‹è‡ªåŠ¨æ³¨å…¥ï¼Œå°† Dao å±‚æ³¨å…¥åˆ° Service å±‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span>Â <span class="keyword">class</span>Â <span class="title class_">UserServiceImpl</span>Â <span class="keyword">implements</span>Â <span class="title class_">UserService</span>Â &#123;Â Â Â </span><br><span class="line">Â Â Â Â <span class="meta">@Autowired</span>Â <span class="comment">//æ³¨å…¥ç±»å‹ä¸ºUserDaoçš„bean</span></span><br><span class="line">Â Â Â Â <span class="meta">@Qualifier(&quot;userDao&quot;)</span>Â <span class="comment">//å¦‚æœæœ‰å¤šä¸ªç±»å‹ä¸ºUserDaoçš„bean,å¯ä»¥ç”¨æ­¤æ³¨è§£ä»ä¸­æŒ‡å®šä¸€ä¸ª</span></span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â UserDaoÂ userDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨åŸºäºåç§°è‡ªåŠ¨æ³¨å…¥ï¼Œå°† Dao å±‚æ³¨å…¥åˆ° Serivce å±‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span>Â <span class="keyword">class</span>Â <span class="title class_">UserServiceImpl</span>Â <span class="keyword">implements</span>Â <span class="title class_">UserService</span>Â &#123;Â Â Â </span><br><span class="line">Â Â Â Â <span class="meta">@Resource(&quot;userDao&quot;)</span>Â <span class="comment">//æ³¨å…¥id=â€œuserDaoâ€çš„bean</span></span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â UserDaoÂ userDao;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨æ³¨å…¥ç®€å•ç±»å‹æ•°æ®æ³¨è§£æ¥å®Œæˆç®€å•æ³¨å…¥ JavaBean</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span>Â <span class="keyword">class</span>Â <span class="title class_">User</span>&#123;</span><br><span class="line">Â Â Â Â <span class="meta">@Value(&quot;1&quot;)</span>Â Â Â Â <span class="comment">//æ³¨å…¥æ•°å­—</span></span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â IntegerÂ id;</span><br><span class="line">Â Â Â Â <span class="meta">@Value(&quot;Ziph&quot;)</span>Â <span class="comment">//æ³¨å…¥String</span></span><br><span class="line">Â Â Â Â <span class="keyword">private</span>Â StringÂ name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
          <category> å››ç§ä¾èµ–æ³¨å…¥ </category>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring-åŠ¨æ€ä»£ç†å®ç°AOP(è¿›é˜¶)</title>
      <link href="/posts/a528d135/"/>
      <url>/posts/a528d135/</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th style="text-align:center">ç›¸å…³æ¨è</th></tr></thead><tbody><tr><td style="text-align:center"><a href="https://spring.io/">Spring å®˜ç½‘</a></td></tr><tr><td style="text-align:center"><a href="https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/index.html">Spring Framework å®˜æ–¹æ–‡æ¡£</a></td></tr><tr><td style="text-align:center"><a href="https://github.com/spring-projects/spring-framework">spring-framework Github</a></td></tr><tr><td style="text-align:center"><a href="https://serms.top/post/841c624e/">SpringIOC è¯¦è§£</a></td></tr><tr><td style="text-align:center"><a href="https://serms.top/post/9dadefec/">SpringAOP è¯¦è§£</a></td></tr><tr><td style="text-align:center"></td></tr></tbody></table><h2 id="ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†"></a> ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†</h2><blockquote><p>åŠ¨æ€ä»£ç†å…¶å®å°±æ˜¯<code>Java</code>ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥å®ç°ï¼š</p><p><strong>åŠ¨æ€åˆ›å»ºä¸€ç»„æŒ‡å®šçš„æ¥å£çš„å®ç°å¯¹è±¡ï¼ˆåœ¨è¿è¡Œæ—¶ï¼Œåˆ›å»ºå®ç°äº†æŒ‡å®šçš„ä¸€ç»„æ¥å£çš„å¯¹è±¡ï¼‰</strong><br />ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">A</span> &#123;&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">B</span> &#123;&#125;</span><br><span class="line"><span class="comment">//objå¯¹è±¡çš„ç±»å‹å®ç°äº†Aå’ŒBä¸¤ä¸ªæ¥å£</span></span><br><span class="line"><span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> æ–¹æ³•(<span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;A.class, B.class&#125;)</span><br></pre></td></tr></table></figure></blockquote><hr /><h2 id="åŠ¨æ€ä»£ç†åˆä½“éªŒ"><a class="markdownIt-Anchor" href="#åŠ¨æ€ä»£ç†åˆä½“éªŒ"></a> åŠ¨æ€ä»£ç†åˆä½“éªŒ</h2><blockquote><p>æˆ‘ä»¬æ ¹æ®ä¸Šé¢çš„æ€è·¯æ¥ä½“éªŒä¸€ä¸‹ Java ä¸­çš„åŠ¨æ€ä»£ç†å§ï¼Œé¦–å…ˆæˆ‘ä»¬è¦å…ˆå†™ä¸¤ä¸ªæ¥å£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">A</span> &#123;</span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">a</span><span class="params">()</span>;</span><br><span class="line">&#125;<span class="keyword">interface</span> <span class="title class_">B</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">b</span><span class="params">()</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬å°±å…ˆæ¥çœ‹ä¸€ä¸‹åŠ¨æ€ä»£ç†çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">newProxyInstance</span><span class="params">(ClassLoader loader,</span></span><br><span class="line"><span class="params">                                     Class&lt;?&gt;[] interfaces,</span></span><br><span class="line"><span class="params">                                          InvocationHandler h)</span></span><br><span class="line">    ```</span><br><span class="line"></span><br><span class="line">ä¸Šé¢è¿™ä¸ªå°±æ˜¯åŠ¨æ€ä»£ç†ç±»ï¼ˆProxyï¼‰ç±»ä¸­çš„åˆ›å»ºä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œä¸‹é¢ä»‹ç»ä¸€ä¸‹æ–¹æ³•çš„ä¸‰ä¸ªå‚æ•°ï¼š</span><br><span class="line"></span><br><span class="line">+ `ClassLoader loader`ï¼šæ–¹æ³•éœ€è¦åŠ¨æ€ç”Ÿæˆä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»å®ç°äº†Aå’ŒBä¸¤ä¸ªæ¥å£ï¼Œç„¶ååˆ›å»ºè¿™ä¸ªç±»çš„å¯¹è±¡ã€‚éœ€è¦ç”Ÿæˆä¸€ä¸ªç±»ï¼Œè€Œä¸”è¿™ä¸ªç±»ä¹Ÿéœ€è¦åŠ è½½åˆ°æ–¹æ³•åŒºä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ª`ClassLoader`æ¥åŠ è½½è¯¥ç±»</span><br><span class="line">+ `Class&lt;?&gt;[] interfaces`ï¼šæˆ‘ä»¬éœ€è¦ä»£ç†å¯¹è±¡å®ç°çš„æ•°ç»„</span><br><span class="line">+ `InvocationHandler h`ï¼šè°ƒç”¨å¤„ç†å™¨</span><br><span class="line"></span><br><span class="line">è¿™é‡Œä½ å¯èƒ½å¯¹`InvocationHandler`æœ‰ç–‘æƒ‘ï¼Œè¿™é‡Œå…ˆä¹°ä¸ªå…³å­ï¼Œä¸‹é¢é©¬ä¸Šæ­æ™“ã€‚</span><br><span class="line">æˆ‘ä»¬ç°åœ¨å°±ä½¿ç”¨åŠ¨æ€ä»£ç†åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡å§ã€‚</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * ä¸‰ä¸ªå‚æ•°</span></span><br><span class="line"><span class="comment">        * 1ã€ClassLoader</span></span><br><span class="line"><span class="comment">        * æ–¹æ³•éœ€è¦åŠ¨æ€ç”Ÿæˆä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»å®ç°äº†Aå’ŒBä¸¤ä¸ªæ¥å£ï¼Œç„¶ååˆ›å»ºè¿™ä¸ªç±»çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">        * éœ€è¦ç”Ÿæˆä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»ä¹Ÿéœ€è¦åŠ è½½åˆ°æ–¹æ³•åŒºä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªClassLoaderæ¥åŠ è½½è¯¥ç±»</span></span><br><span class="line"><span class="comment">        *</span></span><br><span class="line"><span class="comment">        * 2ã€Class[] interfaces</span></span><br><span class="line"><span class="comment">        * æˆ‘ä»¬éœ€è¦ä»£ç†å¯¹è±¡å®ç°çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">        *</span></span><br><span class="line"><span class="comment">        * 3ã€InvocationHandler</span></span><br><span class="line"><span class="comment">        * è°ƒç”¨å¤„ç†å™¨</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass().getClassLoader();</span><br><span class="line">       <span class="comment">//è¿™é‡Œåˆ›å»ºä¸€ä¸ªç©ºå®ç°çš„è°ƒç”¨å¤„ç†å™¨ã€‚</span></span><br><span class="line">       <span class="type">InvocationHandler</span> <span class="variable">invocationHandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InvocationHandler</span>() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">               <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;;</span><br><span class="line">       <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> Proxy.newProxyInstance(classLoader, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;A.class, B.class&#125;, invocationHandler);</span><br><span class="line">       <span class="comment">//å¼ºè½¬ä¸ºAå’ŒBæ¥å£ç±»å‹ï¼Œè¯´æ˜ç”Ÿæˆçš„ä»£ç†å¯¹è±¡å®ç°äº†Aå’ŒBæ¥å£</span></span><br><span class="line">       <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> (A) obj;</span><br><span class="line">       <span class="type">B</span> <span class="variable">b</span> <span class="operator">=</span> (B) obj;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>ç»è¿‡æµ‹è¯•ä»£ç è¿è¡ŒæˆåŠŸï¼Œè¯´æ˜ç”Ÿæˆçš„ä»£ç†å¯¹è±¡ç¡®å®å®ç°äº† A æ¥å£å’Œ B æ¥å£ï¼Œä½†æ˜¯æˆ‘æƒ³ä½ ä¸€å®šä¼šå¯¹ä»£ç†å¯¹è±¡å¦‚ä½•å®ç°äº† A æ¥å£å’Œ B æ¥å£æ„Ÿå…´è¶£ï¼Œä½ ä¸€å®šæƒ³çŸ¥é“å¦‚æœä½¿ç”¨ä»£ç†å¯¹è±¡è°ƒç”¨ç›¸åº”æ¥å£çš„æ–¹æ³•ä¼šå‘ç”Ÿä»€ä¹ˆæ„Ÿå…´è¶£ï¼Œä¸‹é¢æˆ‘ä»¬ä¸€èµ·æ¥æ¢ç©¶ä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä¸Šé¢ä»£ç çš„åŸºç¡€ä¸ŠåŠ ä¸Šä¸‹é¢çš„ä»£ç </span><br><span class="line">a.a();</span><br><span class="line">b.b();</span><br></pre></td></tr></table></figure><p><img src="https://unpkg.com/serms-assets@1.0.6/Spring/webp.png" alt="" /></p><p>æˆ‘ä»¬å¯ä»¥å‘ç°ä»€ä¹ˆä¹Ÿæ²¡æœ‰å‘ç”Ÿã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ ¹æœ¬æ²¡æœ‰ä¸ºä»£ç†å¯¹è±¡æ·»åŠ å®ç°é€»è¾‘ã€‚å¯æ˜¯å®ç°é€»è¾‘æ·»åŠ åœ¨å“ªé‡Œå‘¢ï¼Ÿå“ˆå“ˆï¼Œå½“ç„¶æ˜¯<code>InvocationHandler</code>ä¸­äº†ã€‚ä¸‹é¢å°±çœ‹ä¸€çœ‹æ·»åŠ äº†å®ç°é€»è¾‘çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * ä¸‰ä¸ªå‚æ•°</span></span><br><span class="line"><span class="comment">        * 1ã€ClassLoader</span></span><br><span class="line"><span class="comment">        * æ–¹æ³•éœ€è¦åŠ¨æ€ç”Ÿæˆä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»å®ç°äº†Aå’ŒBä¸¤ä¸ªæ¥å£ï¼Œç„¶ååˆ›å»ºè¿™ä¸ªç±»çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">        * éœ€è¦ç”Ÿæˆä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»ä¹Ÿéœ€è¦åŠ è½½åˆ°æ–¹æ³•åŒºä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªClassLoaderæ¥åŠ è½½è¯¥ç±»</span></span><br><span class="line"><span class="comment">        *</span></span><br><span class="line"><span class="comment">        * 2ã€Class[] interfaces</span></span><br><span class="line"><span class="comment">        * æˆ‘ä»¬éœ€è¦ä»£ç†å¯¹è±¡å®ç°çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">        *</span></span><br><span class="line"><span class="comment">        * 3ã€InvocationHandler</span></span><br><span class="line"><span class="comment">        * è°ƒç”¨å¤„ç†å™¨</span></span><br><span class="line"><span class="comment">        *</span></span><br><span class="line"><span class="comment">        * ä»£ç†å¯¹è±¡å®ç°çš„æ‰€æœ‰æ¥å£ä¸­çš„æ–¹æ³•ï¼Œå†…å®¹éƒ½æ˜¯è°ƒç”¨InvocationHandlerçš„invoke()æ–¹æ³•</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass().getClassLoader();</span><br><span class="line">    <span class="comment">//è¿™é‡Œåˆ›å»ºä¸€ä¸ªç©ºå®ç°çš„è°ƒç”¨å¤„ç†å™¨ã€‚</span></span><br><span class="line">    <span class="type">InvocationHandler</span> <span class="variable">invocationHandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InvocationHandler</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä½ å¥½ï¼ï¼ï¼ï¼&quot;</span>);<span class="comment">//æ³¨æ„è¿™é‡Œæ·»åŠ äº†ä¸€ç‚¹å°é€»è¾‘</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> Proxy.newProxyInstance(classLoader, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;A.class, B.class&#125;, invocationHandler);</span><br><span class="line">    <span class="comment">//å¼ºè½¬ä¸ºAå’ŒBæ¥å£ç±»å‹ï¼Œè¯´æ˜ç”Ÿæˆçš„ä»£ç†å¯¹è±¡å®ç°äº†Aå’ŒBæ¥å£</span></span><br><span class="line">    <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> (A) obj;</span><br><span class="line">    <span class="type">B</span> <span class="variable">b</span> <span class="operator">=</span> (B) obj;</span><br><span class="line"></span><br><span class="line">   a.a();</span><br><span class="line">    b.b();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆªå›¾å¦‚ä¸‹ï¼š</p><p><img src="https://unpkg.com/serms-assets@1.0.6/Spring/02.png" alt="" /></p><p>è¿™é‡Œæˆ‘ä»¬å‘ç° A æ¥å£å’Œ B æ¥å£çš„å®ç°é€»è¾‘éƒ½æ˜¯è°ƒç”¨äº†<code>invoke</code>è¿™ä¸ªæ–¹æ³•ä¸­çš„é€»è¾‘ï¼Œå…¶å®é™¤äº†è°ƒç”¨ä»£ç†å¯¹è±¡çš„<code>native</code>æ–¹æ³•ï¼Œè°ƒç”¨ä»£ç†å¯¹è±¡çš„å…¶ä»–æ‰€æœ‰æ–¹æ³•æœ¬è´¨éƒ½æ˜¯è°ƒç”¨äº†<code>invoke</code>æ–¹æ³•ï¼Œä¸‹é¢æˆ‘ä»¬å†æ¥çœ‹ç¬¬ä¸‰ä¸ªå®ä¾‹ï¼Œè®©æˆ‘ä»¬å¯¹åŠ¨æ€ä»£ç†æœ‰æ›´æ·±åˆ»çš„è®¤è¯†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * ä¸‰ä¸ªå‚æ•°</span></span><br><span class="line"><span class="comment">        * 1ã€ClassLoader</span></span><br><span class="line"><span class="comment">        * æ–¹æ³•éœ€è¦åŠ¨æ€ç”Ÿæˆä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»å®ç°äº†Aå’ŒBä¸¤ä¸ªæ¥å£ï¼Œç„¶ååˆ›å»ºè¿™ä¸ªç±»çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">        * éœ€è¦ç”Ÿæˆä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»ä¹Ÿéœ€è¦åŠ è½½åˆ°æ–¹æ³•åŒºä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªClassLoaderæ¥åŠ è½½è¯¥ç±»</span></span><br><span class="line"><span class="comment">        *</span></span><br><span class="line"><span class="comment">        * 2ã€Class[] interfaces</span></span><br><span class="line"><span class="comment">        * æˆ‘ä»¬éœ€è¦ä»£ç†å¯¹è±¡å®ç°çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">        *</span></span><br><span class="line"><span class="comment">        * 3ã€InvocationHandler</span></span><br><span class="line"><span class="comment">        * è°ƒç”¨å¤„ç†å™¨</span></span><br><span class="line"><span class="comment">        *</span></span><br><span class="line"><span class="comment">        * ä»£ç†å¯¹è±¡å®ç°çš„æ‰€æœ‰æ¥å£ä¸­çš„æ–¹æ³•ï¼Œå†…å®¹éƒ½æ˜¯è°ƒç”¨InvocationHandlerçš„invoke()æ–¹æ³•</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass().getClassLoader();</span><br><span class="line">    <span class="comment">//è¿™é‡Œåˆ›å»ºä¸€ä¸ªç©ºå®ç°çš„è°ƒç”¨å¤„ç†å™¨ã€‚</span></span><br><span class="line">    <span class="type">InvocationHandler</span> <span class="variable">invocationHandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InvocationHandler</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä½ å¥½ï¼ï¼ï¼ï¼&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Hello&quot;</span>;<span class="comment">//è¿™é‡Œæ”¹ä¸ºè¿”å›&quot;Hello&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> Proxy.newProxyInstance(classLoader, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;A.class, B.class&#125;, invocationHandler);</span><br><span class="line">    <span class="comment">//å¼ºè½¬ä¸ºAå’ŒBæ¥å£ç±»å‹ï¼Œè¯´æ˜ç”Ÿæˆçš„ä»£ç†å¯¹è±¡å®ç°äº†Aå’ŒBæ¥å£</span></span><br><span class="line">    <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> (A) obj;</span><br><span class="line">    <span class="type">B</span> <span class="variable">b</span> <span class="operator">=</span> (B) obj;</span><br><span class="line">    a.toString();<span class="comment">//æ³¨æ„è¿™é‡Œè°ƒç”¨äº†toString()æ–¹æ³•</span></span><br><span class="line">    b.getClass();<span class="comment">//æ³¨æ„è¿™é‡Œè°ƒç”¨äº†getClass()æ–¹æ³•</span></span><br><span class="line">    <span class="comment">//è¿™é‡Œåœ¨Aæ¥å£ä¸­æ·»åŠ äº†ä¸€ä¸ªæ–¹æ³•public Object aaa(String s1, int i);</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">hello</span> <span class="operator">=</span> a.aaa(<span class="string">&quot;Hello&quot;</span>, <span class="number">100</span>);</span><br><span class="line">    System.out.println(obj.getClass());<span class="comment">//è¿™é‡Œçœ‹ä¸€ä¸‹ä»£ç†å¯¹è±¡æ˜¯ä»€ä¹ˆ</span></span><br><span class="line">    System.out.println(hello);<span class="comment">//è¿™é‡Œçœ‹ä¸€ä¸‹è¿”å›å€¼æ˜¯ä»€ä¹ˆ</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://unpkg.com/serms-assets@1.0.6/Spring/03.png" alt="" /></p><p>é€šè¿‡ä»£ç çš„ç»“æœæˆ‘ä»¬å¤§èƒ†çš„çŒœæµ‹ä¸€ä¸‹ï¼Œä»£ç†å¯¹è±¡æ–¹æ³•çš„è¿”å›å€¼å…¶å®å°±æ˜¯<code>invoke</code>æ–¹æ³•çš„è¿”å›å€¼ï¼Œä»£ç†å¯¹è±¡å…¶å®å°±æ˜¯ä½¿ç”¨åå°„æœºåˆ¶å®ç°çš„ä¸€ä¸ªè¿è¡Œæ—¶å¯¹è±¡ã€‚å“ˆå“ˆï¼Œå½“ç„¶è¿™äº›è‚¯å®šä¸æ˜¯çŒœæµ‹äº†ï¼Œå…¶å®ç¡®å®å°±æ˜¯è¿™æ ·ã€‚ä¸‹é¢æ˜¯æ—¶å€™æ€»ç»“ä¸€ä¸‹<code>InvocationHandler</code>çš„<code>invoke</code>æ–¹æ³•äº†ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://unpkg.com/serms-assets@1.0.6/Spring/06.png" alt="" /></p><p>å½“æˆ‘ä»¬è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œå…¶å¯¹åº”å…³ç³»å°±å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚</p></blockquote><hr /><h2 id="åˆæ­¥å®ç°-aop"><a class="markdownIt-Anchor" href="#åˆæ­¥å®ç°-aop"></a> åˆæ­¥å®ç° AOP</h2><blockquote><p>åœ¨æˆ‘ä»¬å¯¹åŠ¨æ€ä»£ç†æœ‰äº†ä¸€å®šçš„è®¤è¯†ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°æœ€åŸºæœ¬ç‰ˆæœ¬çš„ AOP äº†ï¼Œå½“ç„¶ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æ®‹ç¼ºçš„ AOP å®ç°ï¼Œç”šè‡³éƒ½ä¸èƒ½ç§°ä¹‹ä¸º AOP å®ç°ã€‚<br />æˆ‘ä»¬å…ˆå†™ä¸€ä¸ªæ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Created by Yifan Jia on 2018/6/5.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//æœåŠ¡ç”Ÿ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Waiter</span> &#123;</span><br><span class="line">    <span class="comment">//æœåŠ¡æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">server</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åç»™å‡ºè¯¥æ¥å£çš„å®ç°ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Created by Yifan Jia on 2018/6/5.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ManWaiter</span> <span class="keyword">implements</span> <span class="title class_">Waiter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">server</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æœåŠ¡ä¸­&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬å°±é€šè¿‡åŠ¨æ€ä»£ç†æ¥å¯¹ä¸Šé¢çš„<code>ManWaiter</code>è¿›è¡Œå¢å¼ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Created by Yifan Jia on 2018/6/5.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Waiter</span> <span class="variable">waiter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ManWaiter</span>();</span><br><span class="line">        waiter.server();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Waiter</span> <span class="variable">manWaiter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ManWaiter</span>();</span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass().getClassLoader();</span><br><span class="line">        Class[] interfaces = &#123;Waiter.class&#125;;</span><br><span class="line">        <span class="type">InvocationHandler</span> <span class="variable">invocationHandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WaiterInvocationHandler</span>(manWaiter);</span><br><span class="line">        <span class="comment">//å¾—åˆ°ä»£ç†å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡å°±æ˜¯åœ¨ç›®æ ‡å¯¹è±¡çš„åŸºç¡€ä¸Šè¿›è¡Œäº†å¢å¼ºçš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">Waiter</span> <span class="variable">waiter</span> <span class="operator">=</span> (Waiter) Proxy.newProxyInstance(classLoader, interfaces, invocationHandler);</span><br><span class="line">        waiter.server();<span class="comment">//å‰é¢æ·»åŠ â€œä½ å¥½â€ï¼Œåé¢æ·»åŠ â€œå†è§â€</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">WaiterInvocationHandler</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Waiter waiter;</span><br><span class="line"></span><br><span class="line">    WaiterInvocationHandler(Waiter waiter) &#123;</span><br><span class="line">        <span class="built_in">this</span>.waiter = waiter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½ å¥½&quot;</span>);</span><br><span class="line">        waiter.server();<span class="comment">//è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line">        System.out.println(<span class="string">&quot;å†è§&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://unpkg.com/serms-assets@1.0.6/Spring/04.png" alt="" /></p><p>ä½ è‚¯å®šè¦è¯´äº†ï¼Œè¿™ç®—ä»€ä¹ˆ AOPï¼Œå¢å¼ºçš„ä»£ç éƒ½æ˜¯ç¡¬ç¼–ç åˆ°<code>invoke</code>æ–¹æ³•ä¸­çš„ï¼Œå¤§å®¶ç¨å®‰å‹¿èºï¼Œæˆ‘ä»¬ä¸æ˜¯å·²ç»å¯¹éœ€è¦å¢å¼ºçš„å¯¹è±¡åšäº†å¢å¼ºå—ã€‚è¿™é‡Œå¯ä»¥çš„ç›®æ ‡å¯¹è±¡ä¸º<code>manWaiter</code>ï¼Œå¢å¼ºä¸º<code>System.out.println(&quot;ä½ å¥½&quot;);</code>å’Œ<code>System.out.println(&quot;å†è§&quot;);</code>ï¼Œåˆ‡ç‚¹ä¸º<code>server()</code>æ–¹æ³•è°ƒç”¨ã€‚å…¶å®è¿˜æ˜¯å¯ä»¥çœ‹åšä¸€ä¸‹åŸå§‹çš„ AOP çš„ã€‚</p></blockquote><h2 id="å®Œå–„çš„-aop-å®ç°"><a class="markdownIt-Anchor" href="#å®Œå–„çš„-aop-å®ç°"></a> å®Œå–„çš„ AOP å®ç°</h2><blockquote><p>æˆ‘ä»¬ä»åˆæ­¥å®ç°çš„ AOP ä¸­å¯ä»¥å‘ç°å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸èƒ½æŠŠå¢å¼ºçš„é€»è¾‘ç¡¬ç¼–ç åˆ°ä»£ç ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®ç°å¯å˜çš„å¢å¼ºï¼Œä¸‹é¢æˆ‘ä»¬å°±è§£å†³ä¸€ä¸‹è¿™äº›é—®é¢˜ï¼Œæ¥å®ç°ä¸€ä¸ªæ¯”è¾ƒå®Œå–„çš„ AOPã€‚<br />æˆ‘ä»¬ä»ç„¶å¼•ç”¨ä¸Šé¢çš„<code>Waiter</code>æ¥å£å’Œ<code>Manwaiter</code>å®ç°ç±»ã€‚<br />ç„¶åæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªå‰ç½®å¢å¼ºæ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å‰ç½®å¢å¼º</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BeforeAdvice</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†æ·»åŠ ä¸€ä¸ªåç½®å¢å¼ºæ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AfterAdvice</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æŠŠäº§ç”Ÿä»£ç†å¯¹è±¡çš„ä»£ç å°è£…ä¸ºä¸€ä¸ªç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.sun.org.apache.regexp.internal.RE;</span><br><span class="line"><span class="keyword">import</span> org.junit.After;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* ProxFactoryç”¨æ¥ç”Ÿæˆä»£ç†å¯¹è±¡</span></span><br><span class="line"><span class="comment">* å®ƒéœ€è¦æ‰€æœ‰çš„å‚æ•°ï¼šç›®æ ‡å¯¹è±¡ï¼Œå¢å¼ºï¼Œ</span></span><br><span class="line"><span class="comment">* Created by Yifan Jia on 2018/6/5.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 1ã€åˆ›å»ºä»£ç†å·¥å‚</span></span><br><span class="line"><span class="comment">* 2ã€ç»™å·¥å‚è®¾ç½®ç›®æ ‡å¯¹è±¡ã€å‰ç½®å¢å¼ºã€åç½®å¢å¼º</span></span><br><span class="line"><span class="comment">* 3ã€è°ƒç”¨creatProxy()å¾—åˆ°ä»£ç†å¯¹è±¡</span></span><br><span class="line"><span class="comment">* 4ã€æ‰§è¡Œä»£ç†å¯¹è±¡æ–¹æ³•æ—¶ï¼Œå…ˆæ‰§è¡Œå‰ç½®å¢å¼ºï¼Œç„¶åæ˜¯ç›®æ ‡æ–¹æ³•ï¼Œæœ€åæ˜¯åç½®å¢å¼º</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//å…¶å®åœ¨Springä¸­çš„AOPçš„åŠ¨æ€ä»£ç†å®ç°çš„ä¸€ä¸ªç»‡å…¥å™¨ä¹Ÿæ˜¯å«åšProxyFactory</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyFactory</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Object targetObject;<span class="comment">//ç›®æ ‡å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> BeforeAdvice beforeAdvice;<span class="comment">//å‰å€¼å¢å¼º</span></span><br><span class="line">    <span class="keyword">private</span> AfterAdvice afterAdvice;<span class="comment">//åç½®å¢å¼º</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * ç”¨æ¥ç”Ÿæˆä»£ç†å¯¹è±¡</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">creatProxy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * ç»™å‡ºä¸‰ä¸ªå‚æ•°</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass().getClassLoader();</span><br><span class="line">        <span class="comment">//è·å–å½“å‰ç±»å‹æ‰€å®ç°çš„æ‰€æœ‰æ¥å£ç±»å‹</span></span><br><span class="line">        Class[] interfaces = targetObject.getClass().getInterfaces();</span><br><span class="line"></span><br><span class="line">        <span class="type">InvocationHandler</span> <span class="variable">invocationHandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InvocationHandler</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">                <span class="comment">/**</span></span><br><span class="line"><span class="comment">                * åœ¨è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œä¼šæ‰§è¡Œè¿™é‡Œçš„å†…å®¹</span></span><br><span class="line"><span class="comment">                */</span></span><br><span class="line">                <span class="keyword">if</span>(beforeAdvice != <span class="literal">null</span>) &#123;</span><br><span class="line">                    beforeAdvice.before();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(targetObject, args);<span class="comment">//è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„ç›®æ ‡æ–¹æ³•</span></span><br><span class="line">                <span class="comment">//æ‰§è¡Œåç»­å¢å¼º</span></span><br><span class="line">                afterAdvice.after();</span><br><span class="line"></span><br><span class="line">                <span class="comment">//è¿”å›ç›®æ ‡å¯¹è±¡çš„è¿”å›å€¼</span></span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * 2ã€å¾—åˆ°ä»£ç†å¯¹è±¡</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">proxyObject</span> <span class="operator">=</span> Proxy.newProxyInstance(classLoader, interfaces, invocationHandler);</span><br><span class="line">        <span class="keyword">return</span> proxyObject;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">   <span class="comment">//getå’Œsetæ–¹æ³•ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬å°†ç›¸å…³çš„å‚æ•°æ³¨å…¥åˆ°<code>ProxyFactory</code>åå°±å¯ä»¥é€šè¿‡<code>creatProxy()</code>æ–¹æ³•è·å–ä»£ç†å¯¹è±¡äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> demo3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Created by Yifan Jia on 2018/6/5.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo3</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">tset1</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">ProxyFactory</span> <span class="variable">proxyFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProxyFactory</span>();<span class="comment">//åˆ›å»ºå·¥å‚</span></span><br><span class="line">        proxyFactory.setTargetObject(<span class="keyword">new</span> <span class="title class_">ManWaiter</span>());<span class="comment">//è®¾ç½®ç›®æ ‡å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//è®¾ç½®å‰ç½®å¢å¼º</span></span><br><span class="line">        proxyFactory.setBeforeAdvice(<span class="keyword">new</span> <span class="title class_">BeforeAdvice</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;å®¢æˆ·ä½ å¥½&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//è®¾ç½®åç½®å¢å¼º</span></span><br><span class="line">        proxyFactory.setAfterAdvice(<span class="keyword">new</span> <span class="title class_">AfterAdvice</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;å®¢æˆ·å†è§&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="type">Waiter</span> <span class="variable">waiter</span> <span class="operator">=</span> (Waiter) proxyFactory.creatProxy();</span><br><span class="line">        waiter.server();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://unpkg.com/serms-assets@1.0.6/Spring/05.png" alt="" /></p><p>è¿™æ—¶å€™æˆ‘ä»¬å·²ç»å¯ä»¥è‡ªå®šä¹‰ä»»æ„çš„å¢å¼ºé€»è¾‘äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆç¥å¥‡ã€‚</p></blockquote><h2 id="åŠ¨æ€ä»£ç†å®ç°-aop-æ€»ç»“"><a class="markdownIt-Anchor" href="#åŠ¨æ€ä»£ç†å®ç°-aop-æ€»ç»“"></a> åŠ¨æ€ä»£ç†å®ç° AOP æ€»ç»“</h2><blockquote><p>é€šè¿‡ä¸Šé¢çš„å†…å®¹ï¼Œæˆ‘ä»¬å·²ç»é€šè¿‡åŠ¨æ€ä»£ç†å®ç°äº†ä¸€ä¸ªéå¸¸ç®€é™‹çš„ AOPï¼Œè¿™é‡Œçš„ AOP å®ç°è¿˜æ˜¯æœ‰å¾ˆå¤šçš„ä¸è¶³ä¹‹å¤„ã€‚ä¸‹é¢æˆ‘æŠŠ Spring ä¸­çš„<code>ProxyFactory</code>å®ç°è´´å‡ºæ¥ï¼Œå¤§å®¶å¯ä»¥ç ”ç©¶ä¸€ä¸‹ Spring ä¸­çš„<code>ProxyFactory</code>çš„ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Œå¦å¤–ï¼ŒSpring ä¸­è¿˜æœ‰å…¶ä»–çš„åŸºäºåŠ¨æ€ä»£ç†å®ç°çš„ç»‡å…¥å™¨ï¼Œ<code>ProxyFactory</code>åªæ˜¯å…¶ä¸­æœ€åŸºç¡€çš„ç‰ˆæœ¬ï¼Œå¤§å®¶æœ‰å…´è¶£å¯ä»¥ç ”ç©¶ä¸€ä¸‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyFactory</span> <span class="keyword">extends</span> <span class="title class_">ProxyCreatorSupport</span> &#123;</span><br><span class="line">       <span class="keyword">public</span> <span class="title function_">ProxyFactory</span><span class="params">()</span> &#123;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> <span class="title function_">ProxyFactory</span><span class="params">(Object target)</span> &#123;</span><br><span class="line">            Assert.notNull(target, <span class="string">&quot;Target object must not be null&quot;</span>);</span><br><span class="line">            <span class="built_in">this</span>.setInterfaces(ClassUtils.getAllInterfaces(target));</span><br><span class="line">            <span class="built_in">this</span>.setTarget(target);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> <span class="title function_">ProxyFactory</span><span class="params">(Class... proxyInterfaces)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.setInterfaces(proxyInterfaces);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> <span class="title function_">ProxyFactory</span><span class="params">(Class&lt;?&gt; proxyInterface, Interceptor interceptor)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.addInterface(proxyInterface);</span><br><span class="line">            <span class="built_in">this</span>.addAdvice(interceptor);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> <span class="title function_">ProxyFactory</span><span class="params">(Class&lt;?&gt; proxyInterface, TargetSource targetSource)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.addInterface(proxyInterface);</span><br><span class="line">            <span class="built_in">this</span>.setTargetSource(targetSource);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> Object <span class="title function_">getProxy</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.createAopProxy().getProxy();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> Object <span class="title function_">getProxy</span><span class="params">(ClassLoader classLoader)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.createAopProxy().getProxy(classLoader);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">getProxy</span><span class="params">(Class&lt;T&gt; proxyInterface, Interceptor interceptor)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (<span class="keyword">new</span> <span class="title class_">ProxyFactory</span>(proxyInterface, interceptor)).getProxy();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">getProxy</span><span class="params">(Class&lt;T&gt; proxyInterface, TargetSource targetSource)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (<span class="keyword">new</span> <span class="title class_">ProxyFactory</span>(proxyInterface, targetSource)).getProxy();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">getProxy</span><span class="params">(TargetSource targetSource)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(targetSource.getTargetClass() == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Cannot create class proxy for TargetSource with null target class&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">ProxyFactory</span> <span class="variable">proxyFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProxyFactory</span>();</span><br><span class="line">                proxyFactory.setTargetSource(targetSource);</span><br><span class="line">                proxyFactory.setProxyTargetClass(<span class="literal">true</span>);</span><br><span class="line">                <span class="keyword">return</span> proxyFactory.getProxy();</span><br><span class="line">            &#125;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
          <category> Java </category>
          
          <category> SpringAopè¿›é˜¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Navicat Premium15å®‰è£…ä¸æ¿€æ´»(å®Œæ•´æ¿€æ´»ç‰ˆ)</title>
      <link href="/posts/b6bbba88/"/>
      <url>/posts/b6bbba88/</url>
      
        <content type="html"><![CDATA[<h2 id="é¦–å…ˆéœ€è¦åˆ°å®˜ç½‘è¿›è¡Œä¸‹è½½"><a class="markdownIt-Anchor" href="#é¦–å…ˆéœ€è¦åˆ°å®˜ç½‘è¿›è¡Œä¸‹è½½"></a> <strong>é¦–å…ˆéœ€è¦åˆ°å®˜ç½‘è¿›è¡Œä¸‹è½½</strong></h2><hr /><blockquote><p>ç ´è§£å®‰è£…çš„æ˜¯ 15 ç‰ˆæœ¬çš„åˆ«ä¸‹é”™äº†</p><p>å®˜ç½‘ç›®å‰æœ€é«˜ç‰ˆæœ¬æ˜¯<code>V16</code>ç‰ˆæœ¬,å¦‚æœæ‰¾ä¸åˆ° 15 ç‰ˆçš„è¯,å¯¹åº”çš„ä¸‹è½½é“¾æ¥å·²ç»å®‰åˆ©åœ¨ä¸‹é¢äº†</p><p>ä¸‹è½½å®‰è£…çš„æ­¥éª¤å°±ä¸å¤šè¯´äº†,ç›´æ¥ next ä¸‹ä¸€æ­¥ --è·³è¿‡~</p></blockquote><p>Windows10 64bit: <a href="http://download.navicat.com/download/navicat150_premium_cs_x64.exe">http://download.navicat.com/download/navicat150_premium_cs_x64.exe</a></p><hr /><p><em>å…è´£å£°æ˜ï¼šæœ¬äººå­¦ç”Ÿå…šä¸€æšï¼Œæœ¬ç¯‡åšå®¢æ˜¯ä»ç½‘ç»œä¸­æœé›†å€Ÿé‰´æ•´ç†çš„ï¼Œä»…ä¾›ä¸ªäººå­¦ä¹ ä½¿ç”¨ï¼Œæœªç”¨äºå•†ä¸šç”¨é€”ï¼Œå¯¹äºäº§ç”Ÿçš„ä¸€åˆ‡ä¸è‰¯åæœæ¦‚ä¸è´Ÿè´£ï¼Œè¿›æ¥å€Ÿé‰´å­¦ä¹ çš„æœ‹å‹ä¹Ÿä»…ä¾›ä¸ªäººå­¦ä¹ ï¼Œå¦‚æœä¾µå®³äº†æ‚¨çš„æƒç›Šè¯·ç«‹å³è”ç³»åšä¸»ï¼Œåšä¸»ä¼šç«‹å³åˆ é™¤æœ¬æ–‡ï¼Œè°¢è°¢(O ^ ~ ^ O)ã€‚</em></p><hr /><h2 id="navicat-premium15-ç ´è§£è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#navicat-premium15-ç ´è§£è¿‡ç¨‹"></a> <strong>Navicat Premium15 ç ´è§£è¿‡ç¨‹</strong></h2><h3 id="é¦–å…ˆéœ€è¦ä¸‹è½½æ³¨å†Œå·¥å…·"><a class="markdownIt-Anchor" href="#é¦–å…ˆéœ€è¦ä¸‹è½½æ³¨å†Œå·¥å…·"></a> é¦–å…ˆéœ€è¦ä¸‹è½½æ³¨å†Œå·¥å…·</h3><p><img src="https://unpkg.com/serms-assets@1.0.6/Navicat/01.png" alt="" /></p><blockquote><p>æ³¨å†Œå·¥å…·: <a href="https://pan.baidu.com/s/1nsYWtBmnBa4Y25ntK-AQ6A?pwd=yyds">https://pan.baidu.com/s/1nsYWtBmnBa4Y25ntK-AQ6A?pwd=yyds</a></p><p>ç›´æ¥åŒå‡»è¿è¡Œæ³¨å†Œå·¥å…·ï¼ˆæœ¬äººåœ¨æœªæ–­ç½‘æœªå…³é—­é˜²ç«å¢™æƒ…å†µä¸‹æˆåŠŸï¼‰ï¼Œé€‰æ‹©å¯¹åº”çš„ navicat ç‰ˆæœ¬ï¼Œæ­¤å¤„ä¸º v15,ç‚¹å‡» Path é€‰æ‹©åˆšæ‰å®‰è£… navicat ç›®å½•ä¸‹çš„ navicat.exe æ–‡ä»¶</p><p><img src="https://unpkg.com/serms-assets@1.0.6/Navicat/02.png" alt="" /></p><p><img src="https://unpkg.com/serms-assets@1.0.6/Navicat/03png" alt="" /></p><p><strong>å‡ºç°æ­¤ç•Œé¢è¡¨ç¤ºæˆåŠŸ</strong></p></blockquote><p><img src="https://unpkg.com/serms-assets@1.0.6/Navicat/04.png" alt="" /></p><blockquote><p>æ­¤å¤„æœ‰éƒ¨åˆ†æœ‹å‹ååº”è§£å‹æ—¶å·¥å…·ä¼šè¢«è‡ªåŠ¨åˆ é™¤ï¼Œå› ä¸ºå·¥å…·çš„ç‰¹æ®Šæ€§ï¼Œå¯èƒ½ä¼šè¢«é˜²æŠ¤è½¯ä»¶ç›‘æµ‹ä¸ºç—…æ¯’åˆ é™¤</p><p>ä¸ºäº†ä¿é™©èµ·è§å¯å…³é—­ç½‘ç»œå’Œé˜²ç«å¼ºï¼Œè‹¥å®‰è£…äº†å…¶ä»–é˜²æŠ¤è½¯ä»¶å¦‚ç”µè„‘ç®¡å®¶ä¹Ÿè¦ä¸€å¹¶å…³é—­ï¼Œå¹¶å°† windows çš„å®æ—¶ä¿æŠ¤å…³é—­</p></blockquote><p><img src="https://unpkg.com/serms-assets@1.0.6/Navicat/05.png" alt="" /></p><blockquote><p><strong>é€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬å’Œè¯­è¨€ï¼Œè¾“å…¥ Your Name å’Œ Your Organizationï¼ˆå¯éšæ„è¾“å…¥ï¼Œä¹Ÿå¯ä»¥ä¸ä¿®æ”¹ä½¿ç”¨é»˜è®¤çš„ï¼‰,ç‚¹å‡»ç”Ÿæˆæ³¨å†Œç ï¼Œç„¶åè¿è¡Œ Navicat å°†æ³¨å†Œç å¤åˆ¶åˆ°è½¯æ³¨å†Œæ </strong></p></blockquote><p><img src="https://unpkg.com/serms-assets@1.0.6/Navicat/06.png" alt="" /></p><p><img src="https://unpkg.com/serms-assets@1.0.6/Navicat/07.png" alt="" /></p><blockquote><p><strong>ç‚¹å‡»æ¿€æ´»</strong></p><p>æ­¤å¤„éƒ¨åˆ†äººçš„æ¿€æ´»ç åé¢æ˜¾ç¤ºçš„æ˜¯çº¢å‰ï¼Œå¯èƒ½æ˜¯ç”±äºä¸Šé¢æ­¥éª¤æ“ä½œä¸è§„èŒƒ</p><p>æœªæ˜¾ç¤º cracked å°±å¯åŠ¨äº† navicateã€ç‰ˆæœ¬é€‰æ‹©ä¸åŒ¹é…ï¼ŒPatch æœªé€‰æ‹©ç­‰åŸå› ï¼Œå¯åˆ é™¤è½¯ä»¶å’Œå®‰è£…ç›®å½•åé‡æ–°æŒ‰ç…§æ­¥éª¤å®‰è£…</p></blockquote><p><img src="https://unpkg.com/serms-assets@1.0.6/Navicat/08.png" alt="" /></p><p><strong>é€‰æ‹©æ‰‹åŠ¨æ¿€æ´»</strong></p><p><img src="https://unpkg.com/serms-assets@1.0.6/Navicat/09.png" alt="" /></p><p><img src="https://unpkg.com/serms-assets@1.0.6/Navicat/10.png" alt="" /></p><p><strong>å°†è¯·æ±‚ç å¤åˆ¶åˆ°æ³¨å†Œå·¥å…·çš„ Request Code ä¸­ï¼Œç‚¹å‡» Generate</strong></p><p><img src="https://unpkg.com/serms-assets@1.0.6/Navicat/11.png" alt="" /></p><p><strong>è¿”å› activation code å³ä¸ºæˆåŠŸ</strong></p><p><img src="https://unpkg.com/serms-assets@1.0.6/Navicat/12.png" alt="" /></p><p><strong>æ­¤æ—¶æ‰‹åŠ¨æ¿€æ´»é¡µé¢çš„æ¿€æ´»ç ä¼šè¢«è‡ªåŠ¨å¡«å……ï¼Œç‚¹å‡»æ¿€æ´»å³å¯</strong></p><p><img src="https://unpkg.com/serms-assets@1.0.6/Navicat/13.png" alt="" /></p><p>â€‹ <strong>è‡³æ­¤ï¼ŒNavicat Premium15 çš„æ¿€æ´»å·²ç»å®Œæˆ</strong></p><p><strong>è‹¥æ¿€æ´»å¤±è´¥å¯ä»¥å¸è½½ Navicat Premium åˆ é™¤å®‰è£…ç›®å½•åé‡æ–°å°è¯•å‡ æ¬¡</strong></p><p><img src="https://unpkg.com/serms-assets@1.0.6/Navicat/14.png" alt="" /></p><p><img src="https://unpkg.com/serms-assets@1.0.6/Navicat/15.png" alt="" /></p><p><strong>æ¿€æ´»å®Œæˆå°±å¯ä»¥å¼€å§‹ä½¿ç”¨ Navicat äº† (~ v *)</strong></p><p><img src="https://unpkg.com/serms-assets@1.0.6/Navicat/16.png" alt="" /></p>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶åˆé›† </category>
          
          <category> Navicats </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Navicat </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ideaå®‰è£…Ultimateæœ€æ–°ç‰ˆ[ç ´è§£]</title>
      <link href="/posts/bb6ff07f/"/>
      <url>/posts/bb6ff07f/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‰è¨€:</p><p>å‰æ®µæ—¶é—´ç”µè„‘é‡è£…äº†,äºæ˜¯å» Intellij å®˜ç½‘ä¸‹äº†ä¸€ä¸ª IntelliJ IDEA Edu ç‰ˆæœ¬,ä½†æ˜¯ Edu çš„è¿™ä¸ªç‰ˆæœ¬å¥½æƒ³æ²¡æœ‰ Spring config,ç»è¿‡æˆ‘ä¸€ç•ªæŸ¥è¯¢,å‘ç°åªæœ‰ Ultimate ç‰ˆæœ¬æ‰æœ‰â€¦è€Œä¸”ä¸ç®¡æ˜¯ç¤¾åŒºç‰ˆè¿˜æ˜¯ Edu ç‰ˆå¾ˆå¤šåŠŸèƒ½éƒ½æ˜¯ä¸é½å…¨çš„,æ‰€ä»¥ç´¢æ€§å°±å¼„ä¸ªç»ˆæç‰ˆç®—äº†</p><p><img src="https://unpkg.com/serms-assets@1.0.6/pojie/01.png" alt="01" /></p><p>åœ¨ç½‘ä¸Šæ‰¾äº†åŠå¤©å‘ç°å¾ˆå¤šç ´è§£çš„éƒ½ä¸è¡Œ,ä»€ä¹ˆæ³¨å†Œç ,ä»€ä¹ˆç ´è§£å™¨,è€Œä¸”æœ‰çš„å¥—è·¯éƒ½å¥½æ·±â€¦è®©ä½ åŠ å…¬ä¼—å·å›å¤ 6666 é¢†å–ç ´è§£ç â€¦ä¸€æ¬¡å°±ç®—äº†,æ²¡æƒ³åˆ°ä»–æŠŠç ´è§£ç åˆ†ä¸¤æ¬¡,ç¬¬äºŒæ®µç ´è§£ç åœ¨å¦å¤–ä¸€ä¸ªå…¬ä¼—å·,å®³,çœŸæ˜¯ä¸€è¨€éš¾å°½,åé¢ç»ˆäºè¿˜æ˜¯é€šè¿‡ä¸æ‡ˆçš„åŠªåŠ›ç»™ç ´è§£äº†,ä»Šå¤©å°±æŠŠè¿™ä¸ªæ–¹æ³•åˆ†äº«ç»™å¤§å®¶</p><p>ç ´è§£è¿‡ç¨‹:æ˜¯é€šè¿‡å±è”½å®˜æ–¹çš„ç½‘ç»œæ ¡éªŒï¼Œè¾¾åˆ°æ°¸ä¹…æ¿€æ´»çš„ç›®çš„ã€‚äº²æµ‹æœ‰æ•ˆï¼Œæ–¹æ³•ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œä¸‹é¢æ˜¯è¯¦ç»†çš„å›¾æ–‡æ•™ç¨‹</p><p>å£°æ˜ï¼šæœ¬ IntellIj IDEA æ¿€æ´»ç ´è§£æ•™ç¨‹ï¼Œç”¨åˆ°çš„æ¿€æ´»è¡¥ä¸å‡æ¥è‡ªç½‘ç»œï¼Œè¯·å‹¿å•†ç”¨ï¼Œä»…ä¾›ä¸ªäººä½¿ç”¨ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»ä½œè€…åˆ é™¤ã€‚å¤§å®¶å¦‚æœèµ„é‡‘å…è®¸çš„è¯ï¼Œæœ€å¥½è´­ä¹°æ­£ç‰ˆ</p><p>æ•™ç¨‹é€‚ç”¨ 2021.3.2 ç‰ˆæœ¬,æ›´æ–°æ—¥æœŸåœ¨æ–‡æœ¬å¤´éƒ¨,åé¢å¦‚æœå‡ºäº† 3.3 çš„ç‰ˆæœ¬å°±ä¸çŸ¥é“èƒ½ä¸èƒ½é€‚ç”¨äº†,ä½†ç›®å‰æœ€é«˜ç‰ˆæœ¬æ˜¯ 3.2</p></blockquote><hr /><p>idea ç‰ˆæœ¬ç±»åˆ«:</p><table><thead><tr><th style="text-align:center">ç‰ˆæœ¬ç±»åˆ«</th><th style="text-align:center">æ³¨è§£</th></tr></thead><tbody><tr><td style="text-align:center">Ultimate</td><td style="text-align:center">ç»ˆæç‰ˆ</td></tr><tr><td style="text-align:center">Community</td><td style="text-align:center">ç¤¾åŒºç‰ˆ</td></tr><tr><td style="text-align:center">IDEA Edu</td><td style="text-align:center">å­¦ç”Ÿæ•™è‚²ç‰ˆ</td></tr></tbody></table><blockquote><p>ç›®å‰æœ€é«˜ç‰ˆæœ¬æ˜¯ 2021.3.2 çš„ç‰ˆæœ¬</p></blockquote><p><img src="https://unpkg.com/serms-assets@1.0.6/pojie/idea%E7%89%88%E6%9C%AC.png" alt="image-20220310090056430" /></p><hr /><h2 id="1ä¸‹è½½-idea"><a class="markdownIt-Anchor" href="#1ä¸‹è½½-idea"></a> 1.ä¸‹è½½ Idea</h2><blockquote><p>ç›´æ¥å»å®˜æ–¹ä¸‹è½½æœ€æ–°ç‰ˆå°±è¡Œäº†,æ³¨æ„æ˜¯ Ultimate ç‰ˆæœ¬,åˆ«ä¸‹é”™äº†</p><p><img src="https://unpkg.com/serms-assets@1.0.6/pojie/02.png" alt="02" /></p></blockquote><p>å¦‚æœè¿˜åˆ†ä¸æ¸…é‚£ä¸ªæ˜¯ Ultimate ç‰ˆ,å°± <a class="btn-beautify outline blue larger" href="https://www.jetbrains.com/idea/download/download-thanks.html?platform=windows"   title="ç‚¹æˆ‘ä¸‹è½½"><i class="far fa-hand-point-right"></i><span>ç‚¹æˆ‘ä¸‹è½½</span></a></p><p><img src="https://unpkg.com/serms-assets@1.0.6/pojie/image-20220309215122241.png" alt="" /></p><hr /><h2 id="2-ä¸‹è½½æ¿€æ´»ç ´è§£è¡¥ä¸"><a class="markdownIt-Anchor" href="#2-ä¸‹è½½æ¿€æ´»ç ´è§£è¡¥ä¸"></a> 2. ä¸‹è½½æ¿€æ´»ç ´è§£è¡¥ä¸</h2><blockquote><p>ä¸ºäº†æ–¹ä¾¿é€‚ç”¨,æˆ‘æ‰“åŒ…æ”¾åˆ°äº†ç™¾åº¦ç½‘ç›˜é‡Œé¢</p></blockquote><a class="btn-beautify outline blue larger" href="https://pan.baidu.com/s/14ebA6x85epkUECJsigA-2Q?pwd=yyds"   title="ç‚¹æˆ‘ä¸‹è½½è¡¥ä¸"><i class="far fa-hand-point-right"></i><span>ç‚¹æˆ‘ä¸‹è½½è¡¥ä¸</span></a><hr /><h2 id="3è§£å‹"><a class="markdownIt-Anchor" href="#3è§£å‹"></a> 3.è§£å‹</h2><blockquote><p>ä¸‹è½½ä¹‹åè¿›è¡Œè§£å‹ï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹ä¸€ä¸ªç›®å½•ï¼ˆå»ºè®®å°†æ•´ä¸ªç›®å½•ç§»åŠ¨åˆ°ä¸€ä¸ªç¨³å®šçš„åœ°æ–¹ï¼Œä¸ä¼šè¢«è¯¯åˆ çš„ï¼‰<mark class="hl-label blue">ä¸è¦æ”¾åœ¨æœ‰ä¸­æ–‡çš„ç›®å½•ä¸‹</mark> </p></blockquote><p><img src="https://unpkg.com/serms-assets@1.0.6/pojie/03.png" alt="03" /></p><blockquote><p><code>ja-netfilter.jar</code> <mark class="hl-label blue">è¿™ä¸ªæ–‡ä»¶åé¢æ¿€æ´»ç ´è§£IDEAçš„æ—¶å€™è¦ç”¨åˆ°ï¼Œæ³¨æ„ä¸€ä¸‹</mark> </p></blockquote><hr /><h2 id="4-å¼€å§‹ç ´è§£"><a class="markdownIt-Anchor" href="#4-å¼€å§‹ç ´è§£"></a> 4. å¼€å§‹ç ´è§£</h2><h3 id="æ¿€æ´»ä¹‹å‰éœ€è¦å…ˆè¿›å…¥åˆ°-idea-ä¸­"><a class="markdownIt-Anchor" href="#æ¿€æ´»ä¹‹å‰éœ€è¦å…ˆè¿›å…¥åˆ°-idea-ä¸­"></a> æ¿€æ´»ä¹‹å‰éœ€è¦å…ˆè¿›å…¥åˆ° IDEA ä¸­</h3><blockquote><p>å¾ˆå¤šå°ä¼™ä¼´è¯´æ–°ç‰ˆçš„å·²ç»æ²¡æœ‰è¯•ç”¨ 30 å¤©äº†ï¼Œå…¶å®åªè¦æ³¨å†Œä¸ªè´¦å·ç™»å½•æˆæƒä¸€ä¸‹ï¼ŒIDEA å°±ä¼šé€ä½  30 å¤©çš„è¯•ç”¨æ—¶é—´</p><p>æœ‰äº›å°ä¼™ä¼´å¯èƒ½ä¹‹å‰å·²ç»è¯•ç”¨äº† 30 å¤©ï¼Œè¿›ä¸å» IDEA äº†ï¼Œæ²¡å…³ç³» åé¢ä¼šç»™å‡ºè§£å†³åŠæ³•<br />é€‰æ‹© <mark class="hl-label red">`Start trial`</mark> ç„¶åç‚¹å‡»<code>Log In to JetBrains Account</code></p><p><img src="https://unpkg.com/serms-assets@1.0.6/pojie/image-20220310092151939.png" alt="image-20220310092151939" /></p><p>è¿™ä¸ªæ—¶å€™ä¼šè‡ªåŠ¨æ‰“å¼€ä½ çš„æµè§ˆå™¨ï¼Œä½ åªéœ€è¦ç™»å½•ä½ çš„è´¦å·ï¼ˆæ²¡æœ‰çš„è¯å¯ä»¥å»æ³¨å†Œï¼Œæˆ–è€…ä½¿ç”¨ GitHubã€GitLabã€Google è´¦å·ç™»å½•ï¼‰</p></blockquote><h3 id="ç™»å½•ä¹‹åä¼šæç¤ºæˆæƒæˆåŠŸ"><a class="markdownIt-Anchor" href="#ç™»å½•ä¹‹åä¼šæç¤ºæˆæƒæˆåŠŸ"></a> ç™»å½•ä¹‹åï¼Œä¼šæç¤ºæˆæƒæˆåŠŸ</h3><p><img src="https://pic.imgdb.cn/item/61d5aed52ab3f51d918c2df8.jpg" alt="img" /></p><blockquote><p>ä¹‹åï¼Œå›åˆ° IDEA ç•Œé¢ä¸­ï¼Œç‚¹å‡»ä¸‹å›¾ä¸­æ ‡æ³¨çš„<code>Start Trial</code>ï¼Œç„¶åå°±å¯ä»¥å…è´¹è¯•ç”¨ 30 å¤©äº†ã€‚</p><p><img src="https://unpkg.com/serms-assets@1.0.6/pojie/61d5aed52ab3f51d918c2df8.jpg" alt="image-20220310092419734" /></p></blockquote><blockquote><p>ç„¶åéšä¾¿åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œè¿›å…¥åˆ° IDEA ç•Œé¢ä¸­ï¼Œç‚¹å‡»èœå•æ ä¸­çš„<code>Help</code>ï¼Œç„¶åç‚¹å‡»<code>Edit Custom VM Options</code><br />ç„¶ååœ¨æ‰“å¼€çš„ vmoptions æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</p><p><img src="https://unpkg.com/serms-assets@1.0.6/pojie/image-20220309222921ss898.png" alt="image-20220309222921ss898" /></p></blockquote><blockquote><h2 id="é…ç½®-idea-æ¿€æ´»ç ´è§£è¡¥ä¸é‡è¦"><a class="markdownIt-Anchor" href="#é…ç½®-idea-æ¿€æ´»ç ´è§£è¡¥ä¸é‡è¦"></a> é…ç½® IDEA æ¿€æ´»ç ´è§£è¡¥ä¸&gt;&gt;&gt;&gt;é‡è¦</h2><p>åœ¨ä¸Šé¢æ‰“å¼€çš„æ–‡ä»¶ä¸­ï¼Œé…ç½®ä¸‹è½½çš„è¡¥ä¸æ–‡ä»¶ä¸­çš„ <code>ja-netfilter</code> è·¯å¾„<br />è¯­æ³•ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ja-netfilter:[ja-netfilter.jarè·¯å¾„]</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>ä¸¾ä¸ªä¾‹å­:æ¯”å¦‚æˆ‘è§£å‹åˆ°äº† E ç›˜ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://unpkg.com/serms-assets@1.0.6/pojie/image-20220310093046362.png" alt="image-20220310093046362" /></p><p>é‚£æˆ‘é…ç½®çš„å†…å®¹å°±åº”è¯¥æ˜¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-<span class="attr">javaagent</span>:<span class="attr">E</span>:\<span class="title class_">Program</span> <span class="title class_">Files</span>\<span class="title class_">JetBrains</span>\ja-netfilter\\ja-netfilter.<span class="property">jar</span></span><br></pre></td></tr></table></figure><p><img src="https://unpkg.com/serms-assets@1.0.6/pojie/image-20220310093432046.png" alt="image-20220310093432046" /></p><p>é…ç½®å®Œä¹‹åä¿å­˜ï¼ˆctrl + sï¼‰ ï¼Œå…³é—­ IDEAï¼ˆé‡å¯ï¼‰ï¼Œå†æ¬¡æ‰“å¼€ IDEA</p><p>æ‰“å¼€ä¹‹åæˆ‘ä»¬åœ¨æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦æ¿€æ´»æˆåŠŸ:</p><p><img src="https://unpkg.com/serms-assets@1.0.6/pojie/image-20220310093624328.png" alt="image-20220310093624328" /></p><p>å¯ä»¥çœ‹åˆ°æˆ‘å·²ç»æ¿€æ´»åˆ°äº† 9 ä¸‡å¹´,ä¹Ÿä¸çŸ¥é“æˆ‘èƒ½ä¸èƒ½æ´»è¿™ä¹ˆä¹…</p><p>æ€»ç»“ä¸€å¥è¯:ç”¨åˆ°æ­»â€¦</p><p>æœ€åæˆ‘ä»¬åœ¨çœ‹ä¸€ä¸‹,æœ‰æ²¡æœ‰ Spring config:</p><p><img src="https://unpkg.com/serms-assets@1.0.6/pojie/image-20220309222921898.png" alt="image-20220309222921898" /></p><p>å¥½åƒè¿˜å¤šäº†å¾ˆå¤šä¸œè¥¿å‘¢å“ˆå“ˆå“ˆ~</p></blockquote><h2 id="5è¡¥å……"><a class="markdownIt-Anchor" href="#5è¡¥å……"></a> 5.è¡¥å……</h2><p>ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°æˆ‘æ¿€æ´»åˆ°äº† 9 ä¸‡å¹´ï¼Ÿ Licensed çš„åå­—ä¸º NoBugï¼Œå…¶å®è¿™ä¸ªéƒ½å¯ä»¥è‡ªå®šä¹‰çš„ã€‚<br />å¤§å®¶ç›´æ¥æ‰“å¼€ä¸‹è½½çš„ IDEA æ¿€æ´»è¡¥ä¸ä¸­çš„<code>janf_config.txt</code> åœ¨é‡Œé¢ä¿®æ”¹å°±å¯ä»¥å•¦</p><p>æœ€åï¼Œç¥å¤§å®¶éƒ½å¯ä»¥æˆåŠŸçš„æ¿€æ´» IDEA!</p>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶åˆé›† </category>
          
          <category> idea </category>
          
      </categories>
      
      
        <tags>
            
            <tag> idea </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mybatiså­¦ä¹ ç¬”è®°</title>
      <link href="/posts/7fd48667/"/>
      <url>/posts/7fd48667/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€-mybatis-ç®€ä»‹"><a class="markdownIt-Anchor" href="#ä¸€-mybatis-ç®€ä»‹"></a> ä¸€ã€MyBatis ç®€ä»‹</h2><hr /><h3 id="1-mybatis-å†å²"><a class="markdownIt-Anchor" href="#1-mybatis-å†å²"></a> 1. MyBatis å†å²</h3><p>MyBatis æœ€åˆæ˜¯ Apache çš„ä¸€ä¸ªå¼€æºé¡¹ç›® iBatis, 2010 å¹´ 6 æœˆè¿™ä¸ªé¡¹ç›®ç”± Apache Software Foundation è¿ ç§»åˆ°äº† Google Codeã€‚éšç€å¼€å‘å›¢é˜Ÿè½¬æŠ• Google Code æ——ä¸‹ï¼Œ iBatis3.x æ­£å¼æ›´åä¸º MyBatisã€‚ä»£ç äº 2013 å¹´ 11 æœˆè¿ç§»åˆ° Githubã€‚</p><p>iBatis ä¸€è¯æ¥æºäºâ€œinternetâ€å’Œâ€œabatisâ€çš„ç»„åˆï¼Œæ˜¯ä¸€ä¸ªåŸºäº Java çš„æŒä¹…å±‚æ¡†æ¶ã€‚ iBatis æä¾›çš„æŒä¹…å±‚æ¡†æ¶ åŒ…æ‹¬ SQL Maps å’Œ Data Access Objectsï¼ˆDAOï¼‰ã€‚</p><hr /><h3 id="2-mybatis-ç‰¹æ€§"><a class="markdownIt-Anchor" href="#2-mybatis-ç‰¹æ€§"></a> 2. MyBatis ç‰¹æ€§</h3><p>1ï¼‰ MyBatis æ˜¯æ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„çš„ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶</p><p>2ï¼‰ MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†</p><p>3ï¼‰ MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£ç”¨äºé…ç½®å’ŒåŸå§‹æ˜ å°„ï¼Œå°†æ¥å£å’Œ Java çš„ POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šçš„ Java å¯¹è±¡ï¼‰æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•</p><p>4ï¼‰ MyBatis æ˜¯ä¸€ä¸ª åŠè‡ªåŠ¨çš„ ORMï¼ˆObject Relation Mappingï¼‰æ¡†æ¶</p><hr /><h3 id="3-mybatis-ä¸‹è½½"><a class="markdownIt-Anchor" href="#3-mybatis-ä¸‹è½½"></a> 3. MyBatis ä¸‹è½½</h3><blockquote><a class="btn-beautify outline blue larger" href="https://github.com/mybatis/mybatis-3"   title="ç‚¹æˆ‘ä¸‹è½½"><i class="far fa-hand-point-right"></i><span>ç‚¹æˆ‘ä¸‹è½½</span></a></blockquote><hr /><h3 id="4-å’Œå…¶å®ƒæŒä¹…åŒ–å±‚æŠ€æœ¯å¯¹æ¯”"><a class="markdownIt-Anchor" href="#4-å’Œå…¶å®ƒæŒä¹…åŒ–å±‚æŠ€æœ¯å¯¹æ¯”"></a> 4. å’Œå…¶å®ƒæŒä¹…åŒ–å±‚æŠ€æœ¯å¯¹æ¯”</h3><ul><li>JDBC<ul><li>SQL å¤¹æ‚åœ¨ Java ä»£ç ä¸­è€¦åˆåº¦é«˜ï¼Œå¯¼è‡´ç¡¬ç¼–ç å†…ä¼¤</li><li>ç»´æŠ¤ä¸æ˜“ä¸”å®é™…å¼€å‘éœ€æ±‚ä¸­ SQL æœ‰å˜åŒ–ï¼Œé¢‘ç¹ä¿®æ”¹çš„æƒ…å†µå¤šè§</li><li>ä»£ç å†—é•¿ï¼Œå¼€å‘æ•ˆç‡ä½</li></ul></li><li>Hibernate å’Œ JPA<ul><li>æ“ä½œç®€ä¾¿ï¼Œå¼€å‘æ•ˆç‡é«˜</li><li>ç¨‹åºä¸­çš„é•¿éš¾å¤æ‚ SQL éœ€è¦ç»•è¿‡æ¡†æ¶</li><li>å†…éƒ¨è‡ªåŠ¨ç”Ÿäº§çš„ SQLï¼Œä¸å®¹æ˜“åšç‰¹æ®Šä¼˜åŒ–</li><li>åŸºäºå…¨æ˜ å°„çš„å…¨è‡ªåŠ¨æ¡†æ¶ï¼Œå¤§é‡å­—æ®µçš„ POJO è¿›è¡Œéƒ¨åˆ†æ˜ å°„æ—¶æ¯”è¾ƒå›°éš¾</li><li>åå°„æ“ä½œå¤ªå¤šï¼Œå¯¼è‡´æ•°æ®åº“æ€§èƒ½ä¸‹é™</li></ul></li><li>MyBatis<ul><li>è½»é‡çº§ï¼Œæ€§èƒ½å‡ºè‰²</li><li>SQL å’Œ Java ç¼–ç åˆ†å¼€ï¼ŒåŠŸèƒ½è¾¹ç•Œæ¸…æ™°ã€‚Java ä»£ç ä¸“æ³¨ä¸šåŠ¡ã€SQL è¯­å¥ä¸“æ³¨æ•°æ®</li><li>å¼€å‘æ•ˆç‡ç¨é€Šäº HIbernateï¼Œä½†æ˜¯å®Œå…¨èƒ½å¤Ÿæ¥å—</li></ul></li></ul><hr /><h2 id="äºŒ-æ­å»º-mybatis"><a class="markdownIt-Anchor" href="#äºŒ-æ­å»º-mybatis"></a> äºŒã€æ­å»º MyBatis</h2><h3 id="1-å¼€å‘ç¯å¢ƒ"><a class="markdownIt-Anchor" href="#1-å¼€å‘ç¯å¢ƒ"></a> 1. å¼€å‘ç¯å¢ƒ</h3><blockquote><p>IDEï¼šidea 2019.2</p></blockquote><blockquote><p>æ„å»ºå·¥å…·ï¼šmaven 3.5.4</p></blockquote><blockquote><p>MySQL ç‰ˆæœ¬ï¼šMySQL 5.7</p></blockquote><blockquote><p>MyBatis ç‰ˆæœ¬ï¼šMyBatis 3.5.7</p></blockquote><hr /><h3 id="2-åˆ›å»º-maven-å·¥ç¨‹"><a class="markdownIt-Anchor" href="#2-åˆ›å»º-maven-å·¥ç¨‹"></a> 2. åˆ›å»º maven å·¥ç¨‹</h3><p>â€‹ a&gt;æ‰“åŒ…æ–¹å¼ï¼šjar</p><p>â€‹ b&gt;å¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Mybatisæ ¸å¿ƒ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- junitæµ‹è¯• --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- MySQLé©±åŠ¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span>å°†æ¥æ•´åˆSpring ä¹‹å,è¿™ä¸ªé…ç½®æ–‡ä»¶å¯ä»¥çœç•¥ï¼Œæ‰€ä»¥å¤§å®¶æ“ä½œæ—¶å¯ä»¥ç›´æ¥å¤åˆ¶ã€ç²˜è´´, æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸»è¦ç”¨äºé…ç½®è¿æ¥æ•°æ®åº“çš„ç¯å¢ƒä»¥åŠMyBatisçš„å…¨å±€é…ç½®ä¿¡æ¯</span><br></pre></td></tr></table></figure><hr /><h3 id="3-åˆ›å»º-mybatis-çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#3-åˆ›å»º-mybatis-çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a> 3. åˆ›å»º MyBatis çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶</h3><mark class="hl-label mybatis-config.xml,è¿™ä¸ªæ–‡ä»¶åä»…ä»…åªæ˜¯å»ºè®®,å¹¶éå¼ºåˆ¶è¦æ±‚ã€‚å°†æ¥æ•´åˆ">ä¹ æƒ¯ä¸Šå‘½åä¸º</mark> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta"><span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è®¾ç½®è¿æ¥æ•°æ®åº“çš„ç¯å¢ƒ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/MyBatis&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å¼•å…¥æ˜ å°„æ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;mappers/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><hr /><h3 id="4-åˆ›å»º-mapper-æ¥å£"><a class="markdownIt-Anchor" href="#4-åˆ›å»º-mapper-æ¥å£"></a> 4ã€åˆ›å»º mapper æ¥å£</h3><blockquote><p>MyBatis ä¸­çš„ mapper æ¥å£ç›¸å½“äºä»¥å‰çš„ daoã€‚ä½†æ˜¯åŒºåˆ«åœ¨äºï¼Œmapper ä»…ä»…æ˜¯æ¥å£ï¼Œæˆ‘ä»¬ä¸éœ€è¦ æä¾›å®ç°ç±»ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * æ·»åŠ ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insertUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr /><h3 id="5-åˆ›å»º-mybatis-çš„æ˜ å°„æ–‡ä»¶"><a class="markdownIt-Anchor" href="#5-åˆ›å»º-mybatis-çš„æ˜ å°„æ–‡ä»¶"></a> 5ã€åˆ›å»º MyBatis çš„æ˜ å°„æ–‡ä»¶</h3><p>ç›¸å…³æ¦‚å¿µï¼šORMï¼ˆObject Relationship Mappingï¼‰å¯¹è±¡å…³ç³»æ˜ å°„ã€‚</p><ol><li>å¯¹è±¡ï¼šJava çš„å®ä½“ç±»å¯¹è±¡</li><li>å…³ç³»ï¼šå…³ç³»å‹æ•°æ®åº“</li><li>æ˜ å°„ï¼šäºŒè€…ä¹‹é—´çš„å¯¹åº”å…³ç³»</li></ol><table><thead><tr><th>Java æ¦‚å¿µ</th><th>æ•°æ®åº“æ¦‚å¿µ</th></tr></thead><tbody><tr><td>ç±»</td><td>è¡¨</td></tr><tr><td>å±æ€§</td><td>å­—æ®µ/åˆ—</td></tr><tr><td>å¯¹è±¡</td><td>è®°å½•/è¡Œ</td></tr></tbody></table><blockquote><p>1ã€æ˜ å°„æ–‡ä»¶çš„å‘½åè§„åˆ™ï¼š è¡¨æ‰€å¯¹åº”çš„å®ä½“ç±»çš„ç±»å+Mapper.xml ä¾‹å¦‚ï¼šè¡¨ t_userï¼Œæ˜ å°„çš„å®ä½“ç±»ä¸º Userï¼Œæ‰€å¯¹åº”çš„æ˜ å°„æ–‡ä»¶ä¸º UserMapper.xml å› æ­¤ä¸€ä¸ªæ˜ å°„æ–‡ä»¶å¯¹åº”ä¸€ä¸ªå®ä½“ç±»ï¼Œå¯¹åº”ä¸€å¼ è¡¨çš„æ“ä½œ MyBatis æ˜ å°„æ–‡ä»¶ç”¨äºç¼–å†™ SQLï¼Œè®¿é—®ä»¥åŠæ“ä½œè¡¨ä¸­çš„æ•°æ® MyBatis æ˜ å°„æ–‡ä»¶å­˜æ”¾çš„ä½ç½®æ˜¯ src/main/resources/mappers ç›®å½•ä¸‹</p><p>2ã€MyBatis ä¸­å¯ä»¥é¢å‘æ¥å£æ“ä½œæ•°æ®ï¼Œè¦ä¿è¯ä¸¤ä¸ªä¸€è‡´ï¼š a&gt;mapper æ¥å£çš„å…¨ç±»åå’Œæ˜ å°„æ–‡ä»¶çš„å‘½åç©ºé—´ï¼ˆnamespaceï¼‰ä¿æŒä¸€è‡´ b&gt;mapper æ¥å£ä¸­æ–¹æ³•çš„æ–¹æ³•åå’Œæ˜ å°„æ–‡ä»¶ä¸­ç¼–å†™ SQL çš„æ ‡ç­¾çš„ id å±æ€§ä¿æŒä¸€è‡´</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta"><span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.atguigu.mybatis.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--int insertUser();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUser&quot;</span>&gt;</span></span><br><span class="line">insert into t_user values(null,&#x27;å¼ ä¸‰&#x27;,&#x27;123&#x27;,23,&#x27;å¥³&#x27;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><hr /><h3 id="6-é€šè¿‡-junit-æµ‹è¯•åŠŸèƒ½"><a class="markdownIt-Anchor" href="#6-é€šè¿‡-junit-æµ‹è¯•åŠŸèƒ½"></a> 6ã€é€šè¿‡ junit æµ‹è¯•åŠŸèƒ½</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¯»å–MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºSqlSessionFactoryBuilderå¯¹è±¡</span></span><br><span class="line"><span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span></span><br><span class="line"><span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"><span class="comment">//é€šè¿‡æ ¸å¿ƒé…ç½®æ–‡ä»¶æ‰€å¯¹åº”çš„å­—èŠ‚è¾“å…¥æµåˆ›å»ºå·¥å‚ç±»SqlSessionFactoryï¼Œç”Ÿäº§SqlSessionå¯¹è±¡</span></span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(is);</span><br><span class="line"><span class="comment">//åˆ›å»ºSqlSessionå¯¹è±¡ï¼Œæ­¤æ—¶é€šè¿‡SqlSessionå¯¹è±¡æ‰€æ“ä½œçš„sqléƒ½å¿…é¡»æ‰‹åŠ¨æäº¤æˆ–å›æ»šäº‹åŠ¡</span></span><br><span class="line"><span class="comment">//SqlSession sqlSession = sqlSessionFactory.openSession();</span></span><br><span class="line"><span class="comment">//åˆ›å»ºSqlSessionå¯¹è±¡ï¼Œæ­¤æ—¶é€šè¿‡SqlSessionå¯¹è±¡æ‰€æ“ä½œçš„sqléƒ½ä¼šè‡ªåŠ¨æäº¤</span></span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">//é€šè¿‡ä»£ç†æ¨¡å¼åˆ›å»ºUserMapperæ¥å£çš„ä»£ç†å®ç°ç±»å¯¹è±¡</span></span><br><span class="line"><span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line"><span class="comment">//è°ƒç”¨UserMapperæ¥å£ä¸­çš„æ–¹æ³•ï¼Œå°±å¯ä»¥æ ¹æ®UserMapperçš„å…¨ç±»ååŒ¹é…å…ƒç´ æ–‡ä»¶ï¼Œé€šè¿‡è°ƒç”¨çš„æ–¹æ³•ååŒ¹é…</span></span><br><span class="line">æ˜ å°„æ–‡ä»¶ä¸­çš„SQLæ ‡ç­¾ï¼Œå¹¶æ‰§è¡Œæ ‡ç­¾ä¸­çš„SQLè¯­å¥</span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.insertUser();</span><br><span class="line"><span class="comment">//sqlSession.commit();</span></span><br><span class="line">System.out.println(<span class="string">&quot;ç»“æœï¼š&quot;</span>+result);</span><br></pre></td></tr></table></figure><blockquote><ul><li>SqlSessionï¼šä»£è¡¨ Java ç¨‹åºå’Œæ•°æ®åº“ä¹‹é—´çš„ä¼šè¯ã€‚ï¼ˆHttpSession æ˜¯ Java ç¨‹åºå’Œæµè§ˆå™¨ä¹‹é—´çš„ ä¼šè¯ï¼‰</li><li>SqlSessionFactoryï¼šæ˜¯â€œç”Ÿäº§â€SqlSession çš„â€œå·¥å‚â€ã€‚</li><li>å·¥å‚æ¨¡å¼ï¼šå¦‚æœåˆ›å»ºæŸä¸€ä¸ªå¯¹è±¡ï¼Œä½¿ç”¨çš„è¿‡ç¨‹åŸºæœ¬å›ºå®šï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŠŠåˆ›å»ºè¿™ä¸ªå¯¹è±¡çš„ ç›¸å…³ä»£ç å°è£…åˆ°ä¸€ä¸ªâ€œå·¥å‚ç±»â€ä¸­ï¼Œä»¥åéƒ½ä½¿ç”¨è¿™ä¸ªå·¥å‚ç±»æ¥â€œç”Ÿäº§â€æˆ‘ä»¬éœ€è¦çš„å¯¹è±¡ã€‚</li></ul></blockquote><hr /><h3 id="7-åŠ å…¥-log4j-æ—¥å¿—åŠŸèƒ½"><a class="markdownIt-Anchor" href="#7-åŠ å…¥-log4j-æ—¥å¿—åŠŸèƒ½"></a> 7ã€åŠ å…¥ log4j æ—¥å¿—åŠŸèƒ½</h3><h4 id="aåŠ å…¥ä¾èµ–"><a class="markdownIt-Anchor" href="#aåŠ å…¥ä¾èµ–"></a> a&gt;åŠ å…¥ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- log4jæ—¥å¿— --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="båŠ å…¥-log4j-çš„é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#båŠ å…¥-log4j-çš„é…ç½®æ–‡ä»¶"></a> b&gt;åŠ å…¥ log4j çš„é…ç½®æ–‡ä»¶</h4><blockquote><mark class="hl-label default">log4jçš„é…ç½®æ–‡ä»¶åä¸ºlog4j.xmlï¼Œå­˜æ”¾çš„ä½ç½®æ˜¯src/main/resourcesç›®å½•ä¸‹</mark> </blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">log4j</span>:configuration <span class="keyword">SYSTEM</span> <span class="string">&quot;log4j.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">log4j:configuration</span> <span class="attr">xmlns:log4j</span>=<span class="string">&quot;http://jakarta.apache.org/log4j/&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;Encoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;ConversionPattern&quot;</span> <span class="attr">value</span>=<span class="string">&quot;%-5p %d&#123;MM-dd HH:mm:ss,SSS&#125;</span></span></span><br><span class="line"><span class="string"><span class="tag">%m (%F:%L) \n&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;debug&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.apache.ibatis&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;info&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;debug&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">log4j:configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><h3 id="æ—¥å¿—çš„çº§åˆ«"><a class="markdownIt-Anchor" href="#æ—¥å¿—çš„çº§åˆ«"></a> æ—¥å¿—çš„çº§åˆ«</h3><mark class="hl-label ä»å·¦åˆ°å³æ‰“å°çš„å†…å®¹è¶Šæ¥è¶Šè¯¦ç»†">FATAL(è‡´å‘½)>ERROR(é”™è¯¯)>WARN(è­¦å‘Š)>INFO(ä¿¡æ¯)>DEBUG(è°ƒè¯•)</mark> </blockquote><hr /><h2 id="ä¸‰-æ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£"><a class="markdownIt-Anchor" href="#ä¸‰-æ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£"></a> ä¸‰ã€æ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£</h2><blockquote><p>æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­çš„æ ‡ç­¾å¿…é¡»æŒ‰ç…§å›ºå®šçš„é¡ºåºï¼š</p><p><mark>properties?,settings?,typeAliases?,typeHandlers?,objectFactory?,objectWrapperFactory?,reflectorF actory?,plugins?,environments?,databaseIdProvider?,mappers?</mark></p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta"><span class="keyword">PUBLIC</span> <span class="string">&quot;-//MyBatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://MyBatis.org/dtd/MyBatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å¼•å…¥propertiesæ–‡ä»¶ï¼Œæ­¤æ—¶å°±å¯ä»¥$&#123;å±æ€§å&#125;çš„æ–¹å¼è®¿é—®å±æ€§å€¼--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;jdbc.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å°†è¡¨ä¸­å­—æ®µçš„ä¸‹åˆ’çº¿è‡ªåŠ¨è½¬æ¢ä¸ºé©¼å³°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å¼€å¯å»¶è¿ŸåŠ è½½--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadingEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    typeAliasï¼šè®¾ç½®æŸä¸ªå…·ä½“çš„ç±»å‹çš„åˆ«å</span></span><br><span class="line"><span class="comment">    å±æ€§ï¼š</span></span><br><span class="line"><span class="comment">    typeï¼šéœ€è¦è®¾ç½®åˆ«åçš„ç±»å‹çš„å…¨ç±»å</span></span><br><span class="line"><span class="comment">    aliasï¼šè®¾ç½®æ­¤ç±»å‹çš„åˆ«åï¼Œè‹¥ä¸è®¾ç½®æ­¤å±æ€§ï¼Œè¯¥ç±»å‹æ‹¥æœ‰é»˜è®¤çš„åˆ«åï¼Œå³ç±»åä¸”ä¸åŒºåˆ†å¤§å°</span></span><br><span class="line"><span class="comment">    å†™</span></span><br><span class="line"><span class="comment">    è‹¥è®¾ç½®æ­¤å±æ€§ï¼Œæ­¤æ—¶è¯¥ç±»å‹çš„åˆ«ååªèƒ½ä½¿ç”¨aliasæ‰€è®¾ç½®çš„å€¼</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;typeAlias type=&quot;com.atguigu.mybatis.bean.User&quot;&gt;&lt;/typeAlias&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;typeAlias type=&quot;com.atguigu.mybatis.bean.User&quot; alias=&quot;abc&quot;&gt;</span></span><br><span class="line"><span class="comment">    &lt;/typeAlias&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ä»¥åŒ…ä¸ºå•ä½ï¼Œè®¾ç½®æ”¹åŒ…ä¸‹æ‰€æœ‰çš„ç±»å‹éƒ½æ‹¥æœ‰é»˜è®¤çš„åˆ«åï¼Œå³ç±»åä¸”ä¸åŒºåˆ†å¤§å°å†™--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.atguigu.mybatis.bean&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    environmentsï¼šè®¾ç½®å¤šä¸ªè¿æ¥æ•°æ®åº“çš„ç¯å¢ƒ</span></span><br><span class="line"><span class="comment">    å±æ€§ï¼š</span></span><br><span class="line"><span class="comment">    defaultï¼šè®¾ç½®é»˜è®¤ä½¿ç”¨çš„ç¯å¢ƒçš„id</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;mysql_test&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    environmentï¼šè®¾ç½®å…·ä½“çš„è¿æ¥æ•°æ®åº“çš„ç¯å¢ƒä¿¡æ¯</span></span><br><span class="line"><span class="comment">    å±æ€§ï¼š</span></span><br><span class="line"><span class="comment">    idï¼šè®¾ç½®ç¯å¢ƒçš„å”¯ä¸€æ ‡è¯†ï¼Œå¯é€šè¿‡environmentsæ ‡ç­¾ä¸­çš„defaultè®¾ç½®æŸä¸€ä¸ªç¯å¢ƒçš„idï¼Œ</span></span><br><span class="line"><span class="comment">    è¡¨ç¤ºé»˜è®¤ä½¿ç”¨çš„ç¯å¢ƒ</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;mysql_test&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    transactionManagerï¼šè®¾ç½®äº‹åŠ¡ç®¡ç†æ–¹å¼</span></span><br><span class="line"><span class="comment">    å±æ€§ï¼š</span></span><br><span class="line"><span class="comment">    typeï¼šè®¾ç½®äº‹åŠ¡ç®¡ç†æ–¹å¼ï¼Œtype=&quot;JDBC|MANAGED&quot;</span></span><br><span class="line"><span class="comment">    type=&quot;JDBC&quot;ï¼šè®¾ç½®å½“å‰ç¯å¢ƒçš„äº‹åŠ¡ç®¡ç†éƒ½å¿…é¡»æ‰‹åŠ¨å¤„ç†</span></span><br><span class="line"><span class="comment">    type=&quot;MANAGED&quot;ï¼šè®¾ç½®äº‹åŠ¡è¢«ç®¡ç†ï¼Œä¾‹å¦‚springä¸­çš„AOP</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    dataSourceï¼šè®¾ç½®æ•°æ®æº</span></span><br><span class="line"><span class="comment">    å±æ€§ï¼š</span></span><br><span class="line"><span class="comment">    typeï¼šè®¾ç½®æ•°æ®æºçš„ç±»å‹ï¼Œtype=&quot;POOLED|UNPOOLED|JNDI&quot;</span></span><br><span class="line"><span class="comment">    type=&quot;POOLED&quot;ï¼šä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ï¼Œå³ä¼šå°†åˆ›å»ºçš„è¿æ¥è¿›è¡Œç¼“å­˜ï¼Œä¸‹æ¬¡ä½¿ç”¨å¯ä»¥ä»</span></span><br><span class="line"><span class="comment">    ç¼“å­˜ä¸­ç›´æ¥è·å–ï¼Œä¸éœ€è¦é‡æ–°åˆ›å»º</span></span><br><span class="line"><span class="comment">    type=&quot;UNPOOLED&quot;ï¼šä¸ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ï¼Œå³æ¯æ¬¡ä½¿ç”¨è¿æ¥éƒ½éœ€è¦é‡æ–°åˆ›å»º</span></span><br><span class="line"><span class="comment">    type=&quot;JNDI&quot;ï¼šè°ƒç”¨ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®æº</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--è®¾ç½®é©±åŠ¨ç±»çš„å…¨ç±»å--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--è®¾ç½®è¿æ¥æ•°æ®åº“çš„è¿æ¥åœ°å€--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--è®¾ç½®è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·å--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--è®¾ç½®è¿æ¥æ•°æ®åº“çš„å¯†ç --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å¼•å…¥æ˜ å°„æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        ä»¥åŒ…ä¸ºå•ä½ï¼Œå°†åŒ…ä¸‹æ‰€æœ‰çš„æ˜ å°„æ–‡ä»¶å¼•å…¥æ ¸å¿ƒé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment">        æ³¨æ„ï¼šæ­¤æ–¹å¼å¿…é¡»ä¿è¯mapperæ¥å£å’Œmapperæ˜ å°„æ–‡ä»¶å¿…é¡»åœ¨ç›¸åŒçš„åŒ…ä¸‹</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.atguigu.mybatis.mapper&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å››-mybatis-çš„å¢åˆ æ”¹æŸ¥"><a class="markdownIt-Anchor" href="#å››-mybatis-çš„å¢åˆ æ”¹æŸ¥"></a> å››ã€MyBatis çš„å¢åˆ æ”¹æŸ¥</h2><h3 id="1-æ·»åŠ "><a class="markdownIt-Anchor" href="#1-æ·»åŠ "></a> 1ã€æ·»åŠ </h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--int insertUser();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUser&quot;</span>&gt;</span></span><br><span class="line">insert into t_user values(null,&#x27;admin&#x27;,&#x27;123456&#x27;,23,&#x27;ç”·&#x27;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-åˆ é™¤"><a class="markdownIt-Anchor" href="#2-åˆ é™¤"></a> 2ã€åˆ é™¤</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--int deleteUser();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUser&quot;</span>&gt;</span></span><br><span class="line">delete from t_user where id = 7</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-ä¿®æ”¹"><a class="markdownIt-Anchor" href="#3-ä¿®æ”¹"></a> 3ã€ä¿®æ”¹</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--int updateUser();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span>&gt;</span></span><br><span class="line">update t_user set username=&#x27;ybc&#x27;,password=&#x27;123&#x27; where id = 6</span><br><span class="line">&lt;/update</span><br></pre></td></tr></table></figure><h3 id="4-æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡"><a class="markdownIt-Anchor" href="#4-æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡"></a> 4ã€æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--User getUserById();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.User&quot;</span>&gt;</span></span><br><span class="line">select * from t_user where id = 2</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5-æŸ¥è¯¢é›†åˆ"><a class="markdownIt-Anchor" href="#5-æŸ¥è¯¢é›†åˆ"></a> 5ã€æŸ¥è¯¢é›†åˆ</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--List&lt;User&gt; getUserList();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.User&quot;</span>&gt;</span></span><br><span class="line">select * from t_user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š</p><p>1ã€æŸ¥è¯¢çš„æ ‡ç­¾ select å¿…é¡»è®¾ç½®å±æ€§ resultType æˆ– resultMapï¼Œç”¨äºè®¾ç½®å®ä½“ç±»å’Œæ•°æ®åº“è¡¨çš„æ˜ å°„å…³ç³»</p><blockquote><p>resultTypeï¼šè‡ªåŠ¨æ˜ å°„ï¼Œç”¨äºå±æ€§åå’Œè¡¨ä¸­å­—æ®µåä¸€è‡´çš„æƒ…å†µ</p></blockquote><blockquote><p>resultMapï¼šè‡ªå®šä¹‰æ˜ å°„ï¼Œç”¨äºä¸€å¯¹å¤šæˆ–å¤šå¯¹ä¸€æˆ–å­—æ®µåå’Œå±æ€§åä¸ä¸€è‡´çš„æƒ…å†µ</p></blockquote><p>2ã€å½“æŸ¥è¯¢çš„æ•°æ®ä¸ºå¤šæ¡æ—¶ï¼Œä¸èƒ½ä½¿ç”¨å®ä½“ç±»ä½œä¸ºè¿”å›å€¼ï¼Œåªèƒ½ä½¿ç”¨é›†åˆï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ TooManyResultsExceptionï¼›ä½†æ˜¯è‹¥æŸ¥è¯¢çš„æ•°æ®åªæœ‰ä¸€æ¡ï¼Œå¯ä»¥ä½¿ç”¨å®ä½“ç±»æˆ–é›†åˆä½œä¸ºè¿”å›å€¼</p></blockquote><hr /><h2 id="äº”-mybatis-è·å–å‚æ•°å€¼çš„ä¸¤ç§æ–¹å¼é‡ç‚¹"><a class="markdownIt-Anchor" href="#äº”-mybatis-è·å–å‚æ•°å€¼çš„ä¸¤ç§æ–¹å¼é‡ç‚¹"></a> äº”ã€MyBatis è·å–å‚æ•°å€¼çš„ä¸¤ç§æ–¹å¼ï¼ˆé‡ç‚¹ï¼‰</h2><blockquote><p>MyBatis è·å–å‚æ•°å€¼çš„ä¸¤ç§æ–¹å¼ï¼š${}å’Œ#{}</p><p>${}çš„æœ¬è´¨å°±æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œ#{}çš„æœ¬è´¨å°±æ˜¯å ä½ç¬¦èµ‹å€¼</p><p>${}ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼æ‹¼æ¥ sqlï¼Œè‹¥ä¸ºå­—ç¬¦ä¸²ç±»å‹æˆ–æ—¥æœŸç±»å‹çš„å­—æ®µè¿›è¡Œèµ‹å€¼æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨åŠ å•å¼• å·ï¼›ä½†æ˜¯#{}ä½¿ç”¨å ä½ç¬¦èµ‹å€¼çš„æ–¹å¼æ‹¼æ¥ sqlï¼Œæ­¤æ—¶ä¸ºå­—ç¬¦ä¸²ç±»å‹æˆ–æ—¥æœŸç±»å‹çš„å­—æ®µè¿›è¡Œèµ‹å€¼æ—¶ï¼Œå¯ä»¥è‡ª åŠ¨æ·»åŠ å•å¼•å·</p></blockquote><h3 id="1-å•ä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°"><a class="markdownIt-Anchor" href="#1-å•ä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°"></a> 1ã€å•ä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°</h3><blockquote><p>è‹¥ mapper æ¥å£ä¸­çš„æ–¹æ³•å‚æ•°ä¸ºå•ä¸ªçš„å­—é¢é‡ç±»å‹ æ­¤æ—¶å¯ä»¥ä½¿ç”¨<span class='katex-error' title='ParseError: KaTeX parse error: Expected &#039;EOF&#039;, got &#039;#&#039; at position 4: {}å’Œ#Ì²{}ä»¥ä»»æ„çš„åç§°è·å–å‚æ•°çš„å€¼ï¼Œâ€¦'>{}å’Œ#{}ä»¥ä»»æ„çš„åç§°è·å–å‚æ•°çš„å€¼ï¼Œæ³¨æ„</span>{}éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·</p></blockquote><h3 id="2-å¤šä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°"><a class="markdownIt-Anchor" href="#2-å¤šä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°"></a> 2ã€å¤šä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°</h3><blockquote><p>è‹¥ mapper æ¥å£ä¸­çš„æ–¹æ³•å‚æ•°ä¸ºå¤šä¸ªæ—¶ æ­¤æ—¶ MyBatis ä¼šè‡ªåŠ¨å°†è¿™äº›å‚æ•°æ”¾åœ¨ä¸€ä¸ª map é›†åˆä¸­ï¼Œä»¥ arg0,arg1â€¦ä¸ºé”®ï¼Œä»¥å‚æ•°ä¸ºå€¼ï¼›ä»¥ param1,param2â€¦ä¸ºé”®ï¼Œä»¥å‚æ•°ä¸ºå€¼ï¼›å› æ­¤åªéœ€è¦é€šè¿‡<span class='katex-error' title='ParseError: KaTeX parse error: Expected &#039;EOF&#039;, got &#039;#&#039; at position 4: {}å’Œ#Ì²{}è®¿é—®mapé›†åˆçš„é”®å°±å¯ä»¥è·â€¦'>{}å’Œ#{}è®¿é—®mapé›†åˆçš„é”®å°±å¯ä»¥è·å–ç›¸å¯¹åº”çš„ å€¼ï¼Œæ³¨æ„</span>{}éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·</p></blockquote><h3 id="3-map-é›†åˆç±»å‹çš„å‚æ•°"><a class="markdownIt-Anchor" href="#3-map-é›†åˆç±»å‹çš„å‚æ•°"></a> 3ã€map é›†åˆç±»å‹çš„å‚æ•°</h3><blockquote><p>è‹¥ mapper æ¥å£ä¸­çš„æ–¹æ³•éœ€è¦çš„å‚æ•°ä¸ºå¤šä¸ªæ—¶ï¼Œæ­¤æ—¶å¯ä»¥æ‰‹åŠ¨åˆ›å»º map é›†åˆï¼Œå°†è¿™äº›æ•°æ®æ”¾åœ¨ map ä¸­ åªéœ€è¦é€šè¿‡<span class='katex-error' title='ParseError: KaTeX parse error: Expected &#039;EOF&#039;, got &#039;#&#039; at position 4: {}å’Œ#Ì²{}è®¿é—®mapé›†åˆçš„é”®å°±å¯ä»¥è·â€¦'>{}å’Œ#{}è®¿é—®mapé›†åˆçš„é”®å°±å¯ä»¥è·å–ç›¸å¯¹åº”çš„å€¼ï¼Œæ³¨æ„</span>{}éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·</p></blockquote><h3 id="4-å®ä½“ç±»ç±»å‹çš„å‚æ•°"><a class="markdownIt-Anchor" href="#4-å®ä½“ç±»ç±»å‹çš„å‚æ•°"></a> 4ã€å®ä½“ç±»ç±»å‹çš„å‚æ•°</h3><blockquote><p>è‹¥ mapper æ¥å£ä¸­çš„æ–¹æ³•å‚æ•°ä¸ºå®ä½“ç±»å¯¹è±¡æ—¶ æ­¤æ—¶å¯ä»¥ä½¿ç”¨<span class='katex-error' title='ParseError: KaTeX parse error: Expected &#039;EOF&#039;, got &#039;#&#039; at position 4: {}å’Œ#Ì²{}ï¼Œé€šè¿‡è®¿é—®å®ä½“ç±»å¯¹è±¡ä¸­çš„å±â€¦'>{}å’Œ#{}ï¼Œé€šè¿‡è®¿é—®å®ä½“ç±»å¯¹è±¡ä¸­çš„å±æ€§åè·å–å±æ€§å€¼ï¼Œæ³¨æ„</span>{}éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·</p></blockquote><h3 id="5-ä½¿ç”¨param-æ ‡è¯†å‚æ•°"><a class="markdownIt-Anchor" href="#5-ä½¿ç”¨param-æ ‡è¯†å‚æ•°"></a> 5ã€ä½¿ç”¨@Param æ ‡è¯†å‚æ•°</h3><blockquote><p>å¯ä»¥é€šè¿‡@Param æ³¨è§£æ ‡è¯† mapper æ¥å£ä¸­çš„æ–¹æ³•å‚æ•°</p><p>æ­¤æ—¶ï¼Œä¼šå°†è¿™äº›å‚æ•°æ”¾åœ¨ map é›†åˆä¸­ï¼Œä»¥@Param æ³¨è§£çš„ value å±æ€§å€¼ä¸ºé”®ï¼Œä»¥å‚æ•°ä¸ºå€¼ï¼›ä»¥ param1,param2â€¦ä¸ºé”®ï¼Œä»¥å‚æ•°ä¸ºå€¼ï¼›åªéœ€è¦é€šè¿‡<span class='katex-error' title='ParseError: KaTeX parse error: Expected &#039;EOF&#039;, got &#039;#&#039; at position 4: {}å’Œ#Ì²{}è®¿é—®mapé›†åˆçš„é”®å°±å¯ä»¥è·â€¦'>{}å’Œ#{}è®¿é—®mapé›†åˆçš„é”®å°±å¯ä»¥è·å–ç›¸å¯¹åº”çš„å€¼ï¼Œ æ³¨æ„</span>{}éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·</p></blockquote><h2 id="å…­-mybatis-çš„å„ç§æŸ¥è¯¢åŠŸèƒ½"><a class="markdownIt-Anchor" href="#å…­-mybatis-çš„å„ç§æŸ¥è¯¢åŠŸèƒ½"></a> å…­ã€MyBatis çš„å„ç§æŸ¥è¯¢åŠŸèƒ½</h2><h3 id="1-æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡"><a class="markdownIt-Anchor" href="#1-æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡"></a> 1ã€æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">User <span class="title function_">getUserById</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> <span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--User getUserById(@Param(&quot;id&quot;) int id);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">select * from t_user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-æŸ¥è¯¢ä¸€ä¸ª-list-é›†åˆ"><a class="markdownIt-Anchor" href="#2-æŸ¥è¯¢ä¸€ä¸ª-list-é›†åˆ"></a> 2ã€æŸ¥è¯¢ä¸€ä¸ª list é›†åˆ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--List&lt;User&gt; getUserList();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">select * from t_user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-æŸ¥è¯¢å•ä¸ªæ•°æ®"><a class="markdownIt-Anchor" href="#3-æŸ¥è¯¢å•ä¸ªæ•°æ®"></a> 3ã€æŸ¥è¯¢å•ä¸ªæ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æŸ¥è¯¢ç”¨æˆ·çš„æ€»è®°å½•æ•°</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">* åœ¨MyBatisä¸­ï¼Œå¯¹äºJavaä¸­å¸¸ç”¨çš„ç±»å‹éƒ½è®¾ç½®äº†ç±»å‹åˆ«å</span></span><br><span class="line"><span class="comment">* ä¾‹å¦‚ï¼šjava.lang.Integer--&gt;int|integer</span></span><br><span class="line"><span class="comment">* ä¾‹å¦‚ï¼šint--&gt;_int|_integer</span></span><br><span class="line"><span class="comment">* ä¾‹å¦‚ï¼šMap--&gt;map,List--&gt;list</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--int getCount();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getCount&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;_integer&quot;</span>&gt;</span></span><br><span class="line">select count(id) from t_user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-æŸ¥è¯¢ä¸€æ¡æ•°æ®ä¸º-map-é›†åˆ"><a class="markdownIt-Anchor" href="#4-æŸ¥è¯¢ä¸€æ¡æ•°æ®ä¸º-map-é›†åˆ"></a> 4ã€æŸ¥è¯¢ä¸€æ¡æ•°æ®ä¸º map é›†åˆ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ä¸ºmapé›†åˆ</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Map&lt;String, Object&gt; <span class="title function_">getUserToMap</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> <span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Map&lt;String, Object&gt; getUserToMap(@Param(&quot;id&quot;) int id);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserToMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">select * from t_user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--ç»“æœï¼š&#123;password=123456, sex=ç”·, id=1, age=23, username=admin&#125;--&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="5-æŸ¥è¯¢å¤šæ¡æ•°æ®ä¸º-map-é›†åˆ"><a class="markdownIt-Anchor" href="#5-æŸ¥è¯¢å¤šæ¡æ•°æ®ä¸º-map-é›†åˆ"></a> 5ã€æŸ¥è¯¢å¤šæ¡æ•°æ®ä¸º map é›†åˆ</h3><h4 id="æ–¹å¼ä¸€"><a class="markdownIt-Anchor" href="#æ–¹å¼ä¸€"></a> æ–¹å¼ä¸€ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ä¸ºmapé›†åˆ</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">* å°†è¡¨ä¸­çš„æ•°æ®ä»¥mapé›†åˆçš„æ–¹å¼æŸ¥è¯¢ï¼Œä¸€æ¡æ•°æ®å¯¹åº”ä¸€ä¸ªmapï¼›è‹¥æœ‰å¤šæ¡æ•°æ®ï¼Œå°±ä¼šäº§ç”Ÿå¤šä¸ªmapé›†åˆï¼Œæ­¤</span></span><br><span class="line"><span class="comment">æ—¶å¯ä»¥å°†è¿™äº›mapæ”¾åœ¨ä¸€ä¸ªlisté›†åˆä¸­è·å–</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">getAllUserToMap</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ä¸ºmapé›†åˆ</span><br><span class="line">* @return</span><br><span class="line">* å°†è¡¨ä¸­çš„æ•°æ®ä»¥mapé›†åˆçš„æ–¹å¼æŸ¥è¯¢ï¼Œä¸€æ¡æ•°æ®å¯¹åº”ä¸€ä¸ªmapï¼›è‹¥æœ‰å¤šæ¡æ•°æ®ï¼Œå°±ä¼šäº§ç”Ÿå¤šä¸ªmapé›†åˆï¼Œæ­¤</span><br><span class="line">æ—¶å¯ä»¥å°†è¿™äº›mapæ”¾åœ¨ä¸€ä¸ªlisté›†åˆä¸­è·å–</span><br><span class="line">*/</span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; getAllUserToMap();</span><br></pre></td></tr></table></figure><h4 id="æ–¹å¼äºŒ"><a class="markdownIt-Anchor" href="#æ–¹å¼äºŒ"></a> æ–¹å¼äºŒï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ä¸ºmapé›†åˆ</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">* å°†è¡¨ä¸­çš„æ•°æ®ä»¥mapé›†åˆçš„æ–¹å¼æŸ¥è¯¢ï¼Œä¸€æ¡æ•°æ®å¯¹åº”ä¸€ä¸ªmapï¼›è‹¥æœ‰å¤šæ¡æ•°æ®ï¼Œå°±ä¼šäº§ç”Ÿå¤šä¸ªmapé›†åˆï¼Œå¹¶</span></span><br><span class="line"><span class="comment">ä¸”æœ€ç»ˆè¦ä»¥ä¸€ä¸ªmapçš„æ–¹å¼è¿”å›æ•°æ®ï¼Œæ­¤æ—¶éœ€è¦é€šè¿‡<span class="doctag">@MapKey</span>æ³¨è§£è®¾ç½®mapé›†åˆçš„é”®ï¼Œå€¼æ˜¯æ¯æ¡æ•°æ®æ‰€å¯¹åº”çš„</span></span><br><span class="line"><span class="comment">mapé›†åˆ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@MapKey(&quot;id&quot;)</span></span><br><span class="line">Map&lt;String, Object&gt; <span class="title function_">getAllUserToMap</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Map&lt;String, Object&gt; getAllUserToMap();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAllUserToMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">select * from t_user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">ç»“æœï¼š</span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">1=&#123;password=123456, sex=ç”·, id=1, age=23, username=admin&#125;,</span></span><br><span class="line"><span class="comment">2=&#123;password=123456, sex=ç”·, id=2, age=23, username=å¼ ä¸‰&#125;,</span></span><br><span class="line"><span class="comment">3=&#123;password=123456, sex=ç”·, id=3, age=23, username=å¼ ä¸‰&#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ä¸ƒ-ç‰¹æ®Š-sql-çš„æ‰§è¡Œ"><a class="markdownIt-Anchor" href="#ä¸ƒ-ç‰¹æ®Š-sql-çš„æ‰§è¡Œ"></a> ä¸ƒã€ç‰¹æ®Š SQL çš„æ‰§è¡Œ</h2><h3 id="1-æ¨¡ç³ŠæŸ¥è¯¢"><a class="markdownIt-Anchor" href="#1-æ¨¡ç³ŠæŸ¥è¯¢"></a> 1ã€æ¨¡ç³ŠæŸ¥è¯¢</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æµ‹è¯•æ¨¡ç³ŠæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> mohu</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">testMohu</span><span class="params">(<span class="meta">@Param(&quot;mohu&quot;)</span> String mohu)</span>;</span><br><span class="line">&lt;!--List&lt;User&gt; <span class="title function_">testMohu</span><span class="params">(<span class="meta">@Param(&quot;mohu&quot;)</span> String mohu)</span>;--&gt;</span><br><span class="line">&lt;select id=<span class="string">&quot;testMohu&quot;</span> resultType=<span class="string">&quot;User&quot;</span>&gt;</span><br><span class="line">&lt;!--select * from t_user where username like <span class="string">&#x27;%$&#123;mohu&#125;%&#x27;</span>--&gt;</span><br><span class="line">&lt;!--select * from t_user where username like <span class="title function_">concat</span><span class="params">(<span class="string">&#x27;%&#x27;</span>,#&#123;mohu&#125;,<span class="string">&#x27;%&#x27;</span>)</span>--&gt;</span><br><span class="line">select * from t_user where username like <span class="string">&quot;%&quot;</span>#&#123;mohu&#125;<span class="string">&quot;%&quot;</span></span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-æ‰¹é‡åˆ é™¤"><a class="markdownIt-Anchor" href="#2-æ‰¹é‡åˆ é™¤"></a> 2ã€æ‰¹é‡åˆ é™¤</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* æ‰¹é‡åˆ é™¤</span><br><span class="line">* @param ids</span><br><span class="line">* @return</span><br><span class="line">*/</span><br><span class="line">int deleteMore(@Param(&quot;ids&quot;) String ids);</span><br><span class="line"><span class="comment">&lt;!--int deleteMore(@Param(&quot;ids&quot;) String ids);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteMore&quot;</span>&gt;</span></span><br><span class="line">delete from t_user where id in ($&#123;ids&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-åŠ¨æ€è®¾ç½®è¡¨å"><a class="markdownIt-Anchor" href="#3-åŠ¨æ€è®¾ç½®è¡¨å"></a> 3ã€åŠ¨æ€è®¾ç½®è¡¨å</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åŠ¨æ€è®¾ç½®è¡¨åï¼ŒæŸ¥è¯¢æ‰€æœ‰çš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> tableName</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">getAllUser</span><span class="params">(<span class="meta">@Param(&quot;tableName&quot;)</span> String tableName)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--List&lt;User&gt; getAllUser(@Param(&quot;tableName&quot;) String tableName);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAllUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">select * from $&#123;tableName&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-æ·»åŠ åŠŸèƒ½è·å–è‡ªå¢çš„ä¸»é”®"><a class="markdownIt-Anchor" href="#4-æ·»åŠ åŠŸèƒ½è·å–è‡ªå¢çš„ä¸»é”®"></a> 4ã€æ·»åŠ åŠŸèƒ½è·å–è‡ªå¢çš„ä¸»é”®</h3><blockquote><p>t_clazz(clazz_id,clazz_name)</p><p>t_student(student_id,student_name,clazz_id)</p><p>1ã€æ·»åŠ ç­çº§ä¿¡æ¯</p><p>2ã€è·å–æ–°æ·»åŠ çš„ç­çº§çš„ id</p><p>3ã€ä¸ºç­çº§åˆ†é…å­¦ç”Ÿï¼Œå³å°†æŸå­¦çš„ç­çº§ id ä¿®æ”¹ä¸ºæ–°æ·»åŠ çš„ç­çº§çš„ id</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ·»åŠ ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">* useGeneratedKeysï¼šè®¾ç½®ä½¿ç”¨è‡ªå¢çš„ä¸»é”®</span></span><br><span class="line"><span class="comment">* keyPropertyï¼šå› ä¸ºå¢åˆ æ”¹æœ‰ç»Ÿä¸€çš„è¿”å›å€¼æ˜¯å—å½±å“çš„è¡Œæ•°ï¼Œå› æ­¤åªèƒ½å°†è·å–çš„è‡ªå¢çš„ä¸»é”®æ”¾åœ¨ä¼ è¾“çš„å‚</span></span><br><span class="line"><span class="comment">æ•°userå¯¹è±¡çš„æŸä¸ªå±æ€§ä¸­</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">insertUser</span><span class="params">(User user)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--int insertUser(User user);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUser&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">insert into t_user values(null,#&#123;username&#125;,#&#123;password&#125;,#&#123;age&#125;,#&#123;sex&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å…«-è‡ªå®šä¹‰æ˜ å°„-resultmap"><a class="markdownIt-Anchor" href="#å…«-è‡ªå®šä¹‰æ˜ å°„-resultmap"></a> å…«ã€è‡ªå®šä¹‰æ˜ å°„ resultMap</h2><h3 id="1-resultmap-å¤„ç†å­—æ®µå’Œå±æ€§çš„æ˜ å°„å…³ç³»"><a class="markdownIt-Anchor" href="#1-resultmap-å¤„ç†å­—æ®µå’Œå±æ€§çš„æ˜ å°„å…³ç³»"></a> 1ã€resultMap å¤„ç†å­—æ®µå’Œå±æ€§çš„æ˜ å°„å…³ç³»</h3><blockquote><p>è‹¥å­—æ®µåå’Œå®ä½“ç±»ä¸­çš„å±æ€§åä¸ä¸€è‡´ï¼Œåˆ™å¯ä»¥é€šè¿‡ resultMap è®¾ç½®è‡ªå®šä¹‰æ˜ å°„</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">resultMapï¼šè®¾ç½®è‡ªå®šä¹‰æ˜ å°„</span></span><br><span class="line"><span class="comment">å±æ€§ï¼š</span></span><br><span class="line"><span class="comment">idï¼šè¡¨ç¤ºè‡ªå®šä¹‰æ˜ å°„çš„å”¯ä¸€æ ‡è¯†</span></span><br><span class="line"><span class="comment">typeï¼šæŸ¥è¯¢çš„æ•°æ®è¦æ˜ å°„çš„å®ä½“ç±»çš„ç±»å‹</span></span><br><span class="line"><span class="comment">å­æ ‡ç­¾ï¼š</span></span><br><span class="line"><span class="comment">idï¼šè®¾ç½®ä¸»é”®çš„æ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="comment">resultï¼šè®¾ç½®æ™®é€šå­—æ®µçš„æ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="comment">associationï¼šè®¾ç½®å¤šå¯¹ä¸€çš„æ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="comment">collectionï¼šè®¾ç½®ä¸€å¯¹å¤šçš„æ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="comment">å±æ€§ï¼š</span></span><br><span class="line"><span class="comment">propertyï¼šè®¾ç½®æ˜ å°„å…³ç³»ä¸­å®ä½“ç±»ä¸­çš„å±æ€§å</span></span><br><span class="line"><span class="comment">columnï¼šè®¾ç½®æ˜ å°„å…³ç³»ä¸­è¡¨ä¸­çš„å­—æ®µå</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;userName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;user_name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> <span class="attr">column</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--List&lt;User&gt; testMohu(@Param(&quot;mohu&quot;) String mohu);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;testMohu&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userMap&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--select * from t_user where username like &#x27;%$&#123;mohu&#125;%&#x27;--&gt;</span></span><br><span class="line">select id,user_name,password,age,sex from t_user where user_name like</span><br><span class="line">concat(&#x27;%&#x27;,#&#123;mohu&#125;,&#x27;%&#x27;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>è‹¥å­—æ®µåå’Œå®ä½“ç±»ä¸­çš„å±æ€§åä¸ä¸€è‡´ï¼Œä½†æ˜¯å­—æ®µåç¬¦åˆæ•°æ®åº“çš„è§„åˆ™ï¼ˆä½¿ç”¨*ï¼‰ï¼Œå®ä½“ç±»ä¸­çš„å±æ€§ åç¬¦åˆ Java çš„è§„åˆ™ï¼ˆä½¿ç”¨é©¼å³°ï¼‰ *</p><p>æ­¤æ—¶ä¹Ÿå¯é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼å¤„ç†å­—æ®µåå’Œå®ä½“ç±»ä¸­çš„å±æ€§çš„æ˜ å°„å…³ç³»</p><p>a&gt;å¯ä»¥é€šè¿‡ä¸ºå­—æ®µèµ·åˆ«åçš„æ–¹å¼ï¼Œä¿è¯å’Œå®ä½“ç±»ä¸­çš„å±æ€§åä¿æŒä¸€è‡´</p><p>b&gt;å¯ä»¥åœ¨ MyBatis çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä¸€ä¸ªå…¨å±€é…ç½®ä¿¡æ¯ mapUnderscoreToCamelCaseï¼Œå¯ ä»¥åœ¨æŸ¥è¯¢è¡¨ä¸­æ•°æ®æ—¶ï¼Œè‡ªåŠ¨å°†_ç±»å‹çš„å­—æ®µåè½¬æ¢ä¸ºé©¼å³°</p><p>ä¾‹å¦‚ï¼šå­—æ®µå user_nameï¼Œè®¾ç½®äº† mapUnderscoreToCamelCaseï¼Œæ­¤æ—¶å­—æ®µåå°±ä¼šè½¬æ¢ä¸º userName</p></blockquote><h3 id="2-å¤šå¯¹ä¸€æ˜ å°„å¤„ç†"><a class="markdownIt-Anchor" href="#2-å¤šå¯¹ä¸€æ˜ å°„å¤„ç†"></a> 2ã€å¤šå¯¹ä¸€æ˜ å°„å¤„ç†</h3><blockquote><p>æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯ä»¥åŠå‘˜å·¥æ‰€å¯¹åº”çš„éƒ¨é—¨ä¿¡æ¯</p></blockquote><h4 id="açº§è”æ–¹å¼å¤„ç†æ˜ å°„å…³ç³»"><a class="markdownIt-Anchor" href="#açº§è”æ–¹å¼å¤„ç†æ˜ å°„å…³ç³»"></a> a&gt;çº§è”æ–¹å¼å¤„ç†æ˜ å°„å…³ç³»</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;empDeptMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;eid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;eid&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">property</span>=<span class="string">&quot;ename&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;did&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dept.did&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dept.dname&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Emp getEmpAndDeptByEid(@Param(&quot;eid&quot;) int eid);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpAndDeptByEid&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;empDeptMap&quot;</span>&gt;</span></span><br><span class="line">select emp.*,dept.* from t_emp emp left join t_dept dept on emp.did =</span><br><span class="line">dept.did where emp.eid = #&#123;eid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="bä½¿ç”¨-association-å¤„ç†æ˜ å°„å…³ç³»"><a class="markdownIt-Anchor" href="#bä½¿ç”¨-association-å¤„ç†æ˜ å°„å…³ç³»"></a> b&gt;ä½¿ç”¨ association å¤„ç†æ˜ å°„å…³ç³»</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;empDeptMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;eid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;eid&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">property</span>=<span class="string">&quot;ename&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Dept&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;did&quot;</span> <span class="attr">property</span>=<span class="string">&quot;did&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dname&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Emp getEmpAndDeptByEid(@Param(&quot;eid&quot;) int eid);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpAndDeptByEid&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;empDeptMap&quot;</span>&gt;</span></span><br><span class="line">select emp.*,dept.* from t_emp emp left join t_dept dept on emp.did =</span><br><span class="line">dept.did where emp.eid = #&#123;eid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="cåˆ†æ­¥æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#cåˆ†æ­¥æŸ¥è¯¢"></a> c&gt;åˆ†æ­¥æŸ¥è¯¢</h4><h5 id="1æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯"><a class="markdownIt-Anchor" href="#1æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯"></a> 1ï¼‰æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* é€šè¿‡åˆ†æ­¥æŸ¥è¯¢æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> eid</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Emp <span class="title function_">getEmpByStep</span><span class="params">(<span class="meta">@Param(&quot;eid&quot;)</span> <span class="type">int</span> eid)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;empDeptStepMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;eid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;eid&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">property</span>=<span class="string">&quot;ename&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">selectï¼šè®¾ç½®åˆ†æ­¥æŸ¥è¯¢ï¼ŒæŸ¥è¯¢æŸä¸ªå±æ€§çš„å€¼çš„sqlçš„æ ‡è¯†ï¼ˆnamespace.sqlIdï¼‰</span></span><br><span class="line"><span class="comment">columnï¼šå°†sqlä»¥åŠæŸ¥è¯¢ç»“æœä¸­çš„æŸä¸ªå­—æ®µè®¾ç½®ä¸ºåˆ†æ­¥æŸ¥è¯¢çš„æ¡ä»¶</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;dept&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">select</span>=<span class="string">&quot;com.atguigu.MyBatis.mapper.DeptMapper.getEmpDeptByStep&quot;</span> <span class="attr">column</span>=<span class="string">&quot;did&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Emp getEmpByStep(@Param(&quot;eid&quot;) int eid);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByStep&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;empDeptStepMap&quot;</span>&gt;</span></span><br><span class="line">select * from t_emp where eid = #&#123;eid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2æ ¹æ®å‘˜å·¥æ‰€å¯¹åº”çš„éƒ¨é—¨-id-æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯"><a class="markdownIt-Anchor" href="#2æ ¹æ®å‘˜å·¥æ‰€å¯¹åº”çš„éƒ¨é—¨-id-æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯"></a> 2ï¼‰æ ¹æ®å‘˜å·¥æ‰€å¯¹åº”çš„éƒ¨é—¨ id æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ†æ­¥æŸ¥è¯¢çš„ç¬¬äºŒæ­¥ï¼šæ ¹æ®å‘˜å·¥æ‰€å¯¹åº”çš„didæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> did</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Dept <span class="title function_">getEmpDeptByStep</span><span class="params">(<span class="meta">@Param(&quot;did&quot;)</span> <span class="type">int</span> did)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Dept getEmpDeptByStep(@Param(&quot;did&quot;) int did);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpDeptByStep&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Dept&quot;</span>&gt;</span></span><br><span class="line">select * from t_dept where did = #&#123;did&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-ä¸€å¯¹å¤šæ˜ å°„å¤„ç†"><a class="markdownIt-Anchor" href="#3-ä¸€å¯¹å¤šæ˜ å°„å¤„ç†"></a> 3ã€ä¸€å¯¹å¤šæ˜ å°„å¤„ç†</h3><h4 id="acollection"><a class="markdownIt-Anchor" href="#acollection"></a> a&gt;collection</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* æ ¹æ®éƒ¨é—¨idæŸ¥æ–°éƒ¨é—¨ä»¥åŠéƒ¨é—¨ä¸­çš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line">* @param did</span><br><span class="line">* @return</span><br><span class="line">*/</span><br><span class="line">Dept getDeptEmpByDid(@Param(&quot;did&quot;) int did);</span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;deptEmpMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Dept&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;did&quot;</span> <span class="attr">column</span>=<span class="string">&quot;did&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;dname&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">ofTypeï¼šè®¾ç½®collectionæ ‡ç­¾æ‰€å¤„ç†çš„é›†åˆå±æ€§ä¸­å­˜å‚¨æ•°æ®çš„ç±»å‹</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;emps&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;eid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;eid&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">column</span>=<span class="string">&quot;ename&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Dept getDeptEmpByDid(@Param(&quot;did&quot;) int did);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getDeptEmpByDid&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;deptEmpMap&quot;</span>&gt;</span></span><br><span class="line">select dept.*,emp.* from t_dept dept left join t_emp emp on dept.did =</span><br><span class="line">emp.did where dept.did = #&#123;did&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="båˆ†æ­¥æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#båˆ†æ­¥æŸ¥è¯¢"></a> b&gt;åˆ†æ­¥æŸ¥è¯¢</h4><h5 id="1æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯"><a class="markdownIt-Anchor" href="#1æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯"></a> 1ï¼‰æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* åˆ†æ­¥æŸ¥è¯¢éƒ¨é—¨å’Œéƒ¨é—¨ä¸­çš„å‘˜å·¥</span><br><span class="line">* @param did</span><br><span class="line">* @return</span><br><span class="line">*/</span><br><span class="line">Dept getDeptByStep(@Param(&quot;did&quot;) int did);</span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;deptEmpStep&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Dept&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;did&quot;</span> <span class="attr">column</span>=<span class="string">&quot;did&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;dname&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;emps&quot;</span> <span class="attr">fetchType</span>=<span class="string">&quot;eager&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">select</span>=<span class="string">&quot;com.atguigu.MyBatis.mapper.EmpMapper.getEmpListByDid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;did&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Dept getDeptByStep(@Param(&quot;did&quot;) int did);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getDeptByStep&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;deptEmpStep&quot;</span>&gt;</span></span><br><span class="line">select * from t_dept where did = #&#123;did&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2æ ¹æ®éƒ¨é—¨-id-æŸ¥è¯¢éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥"><a class="markdownIt-Anchor" href="#2æ ¹æ®éƒ¨é—¨-id-æŸ¥è¯¢éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥"></a> 2ï¼‰æ ¹æ®éƒ¨é—¨ id æŸ¥è¯¢éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ ¹æ®éƒ¨é—¨idæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> did</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;Emp&gt; <span class="title function_">getEmpListByDid</span><span class="params">(<span class="meta">@Param(&quot;did&quot;)</span> <span class="type">int</span> did)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--List&lt;Emp&gt; getEmpListByDid(@Param(&quot;did&quot;) int did);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpListByDid&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">select * from t_emp where did = #&#123;did&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>åˆ†æ­¥æŸ¥è¯¢çš„ä¼˜ç‚¹ï¼šå¯ä»¥å®ç°å»¶è¿ŸåŠ è½½ï¼Œä½†æ˜¯å¿…é¡»åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­è®¾ç½®å…¨å±€é…ç½®ä¿¡æ¯ï¼š</p><p>lazyLoadingEnabledï¼šå»¶è¿ŸåŠ è½½çš„å…¨å±€å¼€å…³ã€‚å½“å¼€å¯æ—¶ï¼Œæ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå»¶è¿ŸåŠ è½½</p><p>aggressiveLazyLoadingï¼šå½“å¼€å¯æ—¶ï¼Œä»»ä½•æ–¹æ³•çš„è°ƒç”¨éƒ½ä¼šåŠ è½½è¯¥å¯¹è±¡çš„æ‰€æœ‰å±æ€§ã€‚ å¦åˆ™ï¼Œæ¯ä¸ª å±æ€§ä¼šæŒ‰éœ€åŠ è½½ æ­¤æ—¶å°±å¯ä»¥å®ç°æŒ‰éœ€åŠ è½½ï¼Œè·å–çš„æ•°æ®æ˜¯ä»€ä¹ˆï¼Œå°±åªä¼šæ‰§è¡Œç›¸åº”çš„ sqlã€‚æ­¤æ—¶å¯é€šè¿‡ association å’Œ collection ä¸­çš„ fetchType å±æ€§è®¾ç½®å½“å‰çš„åˆ†æ­¥æŸ¥è¯¢æ˜¯å¦ä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼ŒfetchType=â€œlazy(å»¶è¿ŸåŠ  è½½)|eager(ç«‹å³åŠ è½½)â€</p></blockquote><h2 id="ä¹-åŠ¨æ€-sql"><a class="markdownIt-Anchor" href="#ä¹-åŠ¨æ€-sql"></a> ä¹ã€åŠ¨æ€ SQL</h2><blockquote><p>Mybatis æ¡†æ¶çš„åŠ¨æ€ SQL æŠ€æœ¯æ˜¯ä¸€ç§æ ¹æ®ç‰¹å®šæ¡ä»¶åŠ¨æ€æ‹¼è£… SQL è¯­å¥çš„åŠŸèƒ½ï¼Œå®ƒå­˜åœ¨çš„æ„ä¹‰æ˜¯ä¸ºäº†è§£å†³ æ‹¼æ¥ SQL è¯­å¥å­—ç¬¦ä¸²æ—¶çš„ç—›ç‚¹é—®é¢˜ã€‚</p></blockquote><h3 id="1-if"><a class="markdownIt-Anchor" href="#1-if"></a> 1ã€if</h3><blockquote><p>if æ ‡ç­¾å¯é€šè¿‡ test å±æ€§çš„è¡¨è¾¾å¼è¿›è¡Œåˆ¤æ–­ï¼Œè‹¥è¡¨è¾¾å¼çš„ç»“æœä¸º trueï¼Œåˆ™æ ‡ç­¾ä¸­çš„å†…å®¹ä¼šæ‰§è¡Œï¼›åä¹‹æ ‡ç­¾ä¸­ çš„å†…å®¹ä¸ä¼šæ‰§è¡Œ</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--List&lt;Emp&gt; getEmpListByMoreTJ(Emp emp);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpListByMoreTJ&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">select * from t_emp where 1=1</span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;ename != &#x27;&#x27; and ename != null&quot;</span>&gt;</span></span><br><span class="line">and ename = #&#123;ename&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age != &#x27;&#x27; and age != null&quot;</span>&gt;</span></span><br><span class="line">and age = #&#123;age&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != &#x27;&#x27; and sex != null&quot;</span>&gt;</span></span><br><span class="line">and sex = #&#123;sex&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-where"><a class="markdownIt-Anchor" href="#2-where"></a> 2ã€where</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpListByMoreTJ2&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">select * from t_emp</span><br><span class="line"><span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;ename != &#x27;&#x27; and ename != null&quot;</span>&gt;</span></span><br><span class="line">ename = #&#123;ename&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age != &#x27;&#x27; and age != null&quot;</span>&gt;</span></span><br><span class="line">and age = #&#123;age&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != &#x27;&#x27; and sex != null&quot;</span>&gt;</span></span><br><span class="line">and sex = #&#123;sex&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>where å’Œ if ä¸€èˆ¬ç»“åˆä½¿ç”¨ï¼š</p><p>a&gt;è‹¥ where æ ‡ç­¾ä¸­çš„ if æ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œåˆ™ where æ ‡ç­¾æ²¡æœ‰ä»»ä½•åŠŸèƒ½ï¼Œå³ä¸ä¼šæ·»åŠ  where å…³é”®å­—</p><p>b&gt;è‹¥ where æ ‡ç­¾ä¸­çš„ if æ¡ä»¶æ»¡è¶³ï¼Œåˆ™ where æ ‡ç­¾ä¼šè‡ªåŠ¨æ·»åŠ  where å…³é”®å­—ï¼Œå¹¶å°†æ¡ä»¶æœ€å‰æ–¹å¤šä½™çš„ and å»æ‰</p><p>æ³¨æ„ï¼šwhere æ ‡ç­¾ä¸èƒ½å»æ‰æ¡ä»¶æœ€åå¤šä½™çš„ and</p></blockquote><h3 id="3-trim"><a class="markdownIt-Anchor" href="#3-trim"></a> 3ã€trim</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpListByMoreTJ&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">select * from t_emp</span><br><span class="line"><span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;where&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;and&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;ename != &#x27;&#x27; and ename != null&quot;</span>&gt;</span></span><br><span class="line">ename = #&#123;ename&#125; and</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age != &#x27;&#x27; and age != null&quot;</span>&gt;</span></span><br><span class="line">age = #&#123;age&#125; and</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != &#x27;&#x27; and sex != null&quot;</span>&gt;</span></span><br><span class="line">    sex = #&#123;sex&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>trim ç”¨äºå»æ‰æˆ–æ·»åŠ æ ‡ç­¾ä¸­çš„å†…å®¹</p><p>å¸¸ç”¨å±æ€§ï¼š</p><p>prefixï¼šåœ¨ trim æ ‡ç­¾ä¸­çš„å†…å®¹çš„å‰é¢æ·»åŠ æŸäº›å†…å®¹</p><p>prefixOverridesï¼šåœ¨ trim æ ‡ç­¾ä¸­çš„å†…å®¹çš„å‰é¢å»æ‰æŸäº›å†…å®¹ suffixï¼šåœ¨ trim æ ‡ç­¾ä¸­çš„å†…å®¹çš„åé¢æ·»åŠ æŸäº›å†…å®¹</p><p>suffixOverridesï¼šåœ¨ trim æ ‡ç­¾ä¸­çš„å†…å®¹çš„åé¢å»æ‰æŸäº›å†…å®¹</p></blockquote><h3 id="4-choose-when-otherwise"><a class="markdownIt-Anchor" href="#4-choose-when-otherwise"></a> 4ã€chooseã€whenã€otherwise</h3><p>chooseã€whenã€otherwise ç›¸å½“äº ifâ€¦else ifâ€¦else</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--List&lt;Emp&gt; getEmpListByChoose(Emp emp);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpListByChoose&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">select <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;empColumns&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span> from t_emp</span><br><span class="line"><span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;ename != &#x27;&#x27; and ename != null&quot;</span>&gt;</span></span><br><span class="line">ename = #&#123;ename&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;age != &#x27;&#x27; and age != null&quot;</span>&gt;</span></span><br><span class="line">age = #&#123;age&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;sex != &#x27;&#x27; and sex != null&quot;</span>&gt;</span></span><br><span class="line">sex = #&#123;sex&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;email != &#x27;&#x27; and email != null&quot;</span>&gt;</span></span><br><span class="line">email = #&#123;email&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5-foreach"><a class="markdownIt-Anchor" href="#5-foreach"></a> 5ã€foreach</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--int insertMoreEmp(List&lt;Emp&gt; emps);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertMoreEmp&quot;</span>&gt;</span></span><br><span class="line">insert into t_emp values</span><br><span class="line"><span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;emps&quot;</span> <span class="attr">item</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">(null,#&#123;emp.ename&#125;,#&#123;emp.age&#125;,#&#123;emp.sex&#125;,#&#123;emp.email&#125;,null)</span><br><span class="line"><span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--int deleteMoreByArray(int[] eids);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteMoreByArray&quot;</span>&gt;</span></span><br><span class="line">delete from t_emp where</span><br><span class="line"><span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;eids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;eid&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;or&quot;</span>&gt;</span></span><br><span class="line">eid = #&#123;eid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--int deleteMoreByArray(int[] eids);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteMoreByArray&quot;</span>&gt;</span></span><br><span class="line">delete from t_emp where eid in</span><br><span class="line"><span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;eids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;eid&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">#&#123;eid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>å±æ€§ï¼š</p><p>collectionï¼šè®¾ç½®è¦å¾ªç¯çš„æ•°ç»„æˆ–é›†åˆ</p><p>itemï¼šè¡¨ç¤ºé›†åˆæˆ–æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªæ•°æ®</p><p>separatorï¼šè®¾ç½®å¾ªç¯ä½“ä¹‹é—´çš„åˆ†éš”ç¬¦</p><p>openï¼šè®¾ç½® foreach æ ‡ç­¾ä¸­çš„å†…å®¹çš„å¼€å§‹ç¬¦</p><p>closeï¼šè®¾ç½® foreach æ ‡ç­¾ä¸­çš„å†…å®¹çš„ç»“æŸç¬¦</p></blockquote><h3 id="6-sql-ç‰‡æ®µ"><a class="markdownIt-Anchor" href="#6-sql-ç‰‡æ®µ"></a> 6ã€SQL ç‰‡æ®µ</h3><p>sql ç‰‡æ®µï¼Œå¯ä»¥è®°å½•ä¸€æ®µå…¬å…± sql ç‰‡æ®µï¼Œåœ¨ä½¿ç”¨çš„åœ°æ–¹é€šè¿‡ include æ ‡ç­¾è¿›è¡Œå¼•å…¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;empColumns&quot;</span>&gt;</span></span><br><span class="line">eid,ename,age,sex,did</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">select <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;empColumns&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span> from t_emp</span><br></pre></td></tr></table></figure><h2 id="å-mybatis-çš„ç¼“å­˜"><a class="markdownIt-Anchor" href="#å-mybatis-çš„ç¼“å­˜"></a> åã€MyBatis çš„ç¼“å­˜</h2><h3 id="mybatis-çš„ä¸€çº§ç¼“å­˜"><a class="markdownIt-Anchor" href="#mybatis-çš„ä¸€çº§ç¼“å­˜"></a> MyBatis çš„ä¸€çº§ç¼“å­˜</h3><blockquote><p>ä¸€çº§ç¼“å­˜æ˜¯ SqlSession çº§åˆ«çš„ï¼Œé€šè¿‡åŒä¸€ä¸ª SqlSession æŸ¥è¯¢çš„æ•°æ®ä¼šè¢«ç¼“å­˜ï¼Œä¸‹æ¬¡æŸ¥è¯¢ç›¸åŒçš„æ•°æ®ï¼Œå°± ä¼šä»ç¼“å­˜ä¸­ç›´æ¥è·å–ï¼Œä¸ä¼šä»æ•°æ®åº“é‡æ–°è®¿é—®</p><p>ä½¿ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µï¼š</p><ol><li>ä¸åŒçš„ SqlSession å¯¹åº”ä¸åŒçš„ä¸€çº§ç¼“å­˜</li><li>åŒä¸€ä¸ª SqlSession ä½†æ˜¯æŸ¥è¯¢æ¡ä»¶ä¸åŒ</li><li>åŒä¸€ä¸ª SqlSession ä¸¤æ¬¡æŸ¥è¯¢æœŸé—´æ‰§è¡Œäº†ä»»ä½•ä¸€æ¬¡å¢åˆ æ”¹æ“ä½œ</li><li>åŒä¸€ä¸ª SqlSession ä¸¤æ¬¡æŸ¥è¯¢æœŸé—´æ‰‹åŠ¨æ¸…ç©ºäº†ç¼“å­˜</li></ol></blockquote><h3 id="mybatis-çš„äºŒçº§ç¼“å­˜"><a class="markdownIt-Anchor" href="#mybatis-çš„äºŒçº§ç¼“å­˜"></a> MyBatis çš„äºŒçº§ç¼“å­˜</h3><blockquote><p>äºŒçº§ç¼“å­˜æ˜¯ SqlSessionFactory çº§åˆ«ï¼Œé€šè¿‡åŒä¸€ä¸ª SqlSessionFactory åˆ›å»ºçš„ SqlSession æŸ¥è¯¢çš„ç»“æœä¼šè¢«ç¼“å­˜ï¼›æ­¤åè‹¥å†æ¬¡æ‰§è¡Œç›¸åŒçš„æŸ¥è¯¢è¯­å¥ï¼Œç»“æœå°±ä¼šä»ç¼“å­˜ä¸­è·å–</p><p>äºŒçº§ç¼“å­˜å¼€å¯çš„æ¡ä»¶ï¼š</p><p>a&gt;åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ï¼Œè®¾ç½®å…¨å±€é…ç½®å±æ€§ cacheEnabled=â€œtrueâ€ï¼Œé»˜è®¤ä¸º trueï¼Œä¸éœ€è¦è®¾ç½®</p><p>b&gt;åœ¨æ˜ å°„æ–‡ä»¶ä¸­è®¾ç½®æ ‡ç­¾</p><p>c&gt;äºŒçº§ç¼“å­˜å¿…é¡»åœ¨ SqlSession å…³é—­æˆ–æäº¤ä¹‹åæœ‰æ•ˆ</p><p>d&gt;æŸ¥è¯¢çš„æ•°æ®æ‰€è½¬æ¢çš„å®ä½“ç±»ç±»å‹å¿…é¡»å®ç°åºåˆ—åŒ–çš„æ¥å£</p><p>ä½¿äºŒçº§ç¼“å­˜å¤±æ•ˆçš„æƒ…å†µï¼š ä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´æ‰§è¡Œäº†ä»»æ„çš„å¢åˆ æ”¹ï¼Œä¼šä½¿ä¸€çº§å’ŒäºŒçº§ç¼“å­˜åŒæ—¶å¤±æ•ˆ</p></blockquote><h3 id="äºŒçº§ç¼“å­˜çš„ç›¸å…³é…ç½®"><a class="markdownIt-Anchor" href="#äºŒçº§ç¼“å­˜çš„ç›¸å…³é…ç½®"></a> äºŒçº§ç¼“å­˜çš„ç›¸å…³é…ç½®</h3><blockquote><p>åœ¨ mapper é…ç½®æ–‡ä»¶ä¸­æ·»åŠ çš„ cache æ ‡ç­¾å¯ä»¥è®¾ç½®ä¸€äº›å±æ€§ï¼š</p><ol><li>eviction å±æ€§ï¼šç¼“å­˜å›æ”¶ç­–ç•¥ LRUï¼ˆLeast Recently Usedï¼‰ â€“ æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ï¼šç§»é™¤æœ€é•¿æ—¶é—´ä¸è¢«ä½¿ç”¨çš„å¯¹è±¡ã€‚ FIFOï¼ˆFirst in First outï¼‰ â€“ å…ˆè¿›å…ˆå‡ºï¼šæŒ‰å¯¹è±¡è¿›å…¥ç¼“å­˜çš„é¡ºåºæ¥ç§»é™¤å®ƒä»¬ã€‚ SOFT â€“ è½¯å¼•ç”¨ï¼šç§»é™¤åŸºäºåƒåœ¾å›æ”¶å™¨çŠ¶æ€å’Œè½¯å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚ WEAK â€“ å¼±å¼•ç”¨ï¼šæ›´ç§¯æåœ°ç§»é™¤åŸºäºåƒåœ¾æ”¶é›†å™¨çŠ¶æ€å’Œå¼±å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚ é»˜è®¤çš„æ˜¯ LRUã€‚</li><li>flushInterval å±æ€§ï¼šåˆ·æ–°é—´éš”ï¼Œå•ä½æ¯«ç§’ é»˜è®¤æƒ…å†µæ˜¯ä¸è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åˆ·æ–°é—´éš”ï¼Œç¼“å­˜ä»…ä»…è°ƒç”¨è¯­å¥æ—¶åˆ·æ–°</li><li>size å±æ€§ï¼šå¼•ç”¨æ•°ç›®ï¼Œæ­£æ•´æ•° ä»£è¡¨ç¼“å­˜æœ€å¤šå¯ä»¥å­˜å‚¨å¤šå°‘ä¸ªå¯¹è±¡ï¼Œå¤ªå¤§å®¹æ˜“å¯¼è‡´å†…å­˜æº¢å‡º</li><li>readOnly å±æ€§ï¼šåªè¯»ï¼Œtrue/false</li><li>trueï¼šåªè¯»ç¼“å­˜ï¼›ä¼šç»™æ‰€æœ‰è°ƒç”¨è€…è¿”å›ç¼“å­˜å¯¹è±¡çš„ç›¸åŒå®ä¾‹ã€‚å› æ­¤è¿™äº›å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ã€‚è¿™æä¾›äº† å¾ˆé‡è¦çš„æ€§èƒ½ä¼˜åŠ¿ã€‚</li><li>falseï¼šè¯»å†™ç¼“å­˜ï¼›ä¼šè¿”å›ç¼“å­˜å¯¹è±¡çš„æ‹·è´ï¼ˆé€šè¿‡åºåˆ—åŒ–ï¼‰ã€‚è¿™ä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯å®‰å…¨ï¼Œå› æ­¤é»˜è®¤æ˜¯ falseã€‚</li></ol></blockquote><h3 id="mybatis-ç¼“å­˜æŸ¥è¯¢çš„é¡ºåº"><a class="markdownIt-Anchor" href="#mybatis-ç¼“å­˜æŸ¥è¯¢çš„é¡ºåº"></a> MyBatis ç¼“å­˜æŸ¥è¯¢çš„é¡ºåº</h3><ol><li>å…ˆæŸ¥è¯¢äºŒçº§ç¼“å­˜ï¼Œå› ä¸ºäºŒçº§ç¼“å­˜ä¸­å¯èƒ½ä¼šæœ‰å…¶ä»–ç¨‹åºå·²ç»æŸ¥å‡ºæ¥çš„æ•°æ®ï¼Œå¯ä»¥æ‹¿æ¥ç›´æ¥ä½¿ç”¨ã€‚</li><li>å¦‚æœäºŒçº§ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œå†æŸ¥è¯¢ä¸€çº§ç¼“å­˜</li><li>å¦‚æœä¸€çº§ç¼“å­˜ä¹Ÿæ²¡æœ‰å‘½ä¸­ï¼Œåˆ™æŸ¥è¯¢æ•°æ®åº“</li><li>SqlSession å…³é—­ä¹‹åï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®ä¼šå†™å…¥äºŒçº§ç¼“å­˜</li></ol><h3 id="æ•´åˆç¬¬ä¸‰æ–¹ç¼“å­˜-ehcache"><a class="markdownIt-Anchor" href="#æ•´åˆç¬¬ä¸‰æ–¹ç¼“å­˜-ehcache"></a> æ•´åˆç¬¬ä¸‰æ–¹ç¼“å­˜ EHCache</h3><ul><li>æ·»åŠ ä¾èµ–</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Mybatis EHCacheæ•´åˆåŒ… --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.caches<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- slf4jæ—¥å¿—é—¨é¢çš„ä¸€ä¸ªå…·ä½“å®ç° --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>å„ jar åŒ…åŠŸèƒ½</li></ul><table><thead><tr><th>jar åŒ…åç§°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>mybatis-ehcache</td><td>Mybatis å’Œ EHCache çš„æ•´åˆåŒ…</td></tr><tr><td>ehcache</td><td>EHCache æ ¸å¿ƒåŒ…</td></tr><tr><td>slf4j-api</td><td>SLF4J æ—¥å¿—é—¨é¢åŒ…</td></tr><tr><td>logback-classic</td><td>æ”¯æŒ SLF4J é—¨é¢æ¥å£çš„ä¸€ä¸ªå…·ä½“å®ç°</td></tr></tbody></table><ul><li>åˆ›å»º EHCache çš„é…ç½®æ–‡ä»¶ ehcache.xml</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span><br><span class="line">&lt;ehcache xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">xsi:noNamespaceSchemaLocation=&quot;../config/ehcache.xsd&quot;&gt;</span><br><span class="line">&lt;!-- ç£ç›˜ä¿å­˜è·¯å¾„ --&gt;</span><br><span class="line">&lt;diskStore path=&quot;D:\atguigu\ehcache&quot;/&gt;</span><br><span class="line">&lt;defaultCache</span><br><span class="line">maxElementsInMemory=&quot;1000&quot;</span><br><span class="line">maxElementsOnDisk=&quot;10000000&quot;</span><br><span class="line">eternal=&quot;false&quot;</span><br><span class="line">overflowToDisk=&quot;true&quot;</span><br><span class="line">timeToIdleSeconds=&quot;120&quot;</span><br><span class="line">timeToLiveSeconds=&quot;120&quot;</span><br><span class="line">diskExpiryThreadIntervalSeconds=&quot;120&quot;</span><br><span class="line">memoryStoreEvictionPolicy=&quot;LRU&quot;&gt;</span><br><span class="line">&lt;/defaultCache&gt;</span><br><span class="line">&lt;/ehcache&gt;</span><br></pre></td></tr></table></figure><ul><li>è®¾ç½®äºŒçº§ç¼“å­˜çš„ç±»å‹</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span>=<span class="string">&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><ul><li>åŠ å…¥ logback æ—¥å¿—</li></ul><p>å­˜åœ¨ SLF4J æ—¶ï¼Œä½œä¸ºç®€æ˜“æ—¥å¿—çš„ log4j å°†å¤±æ•ˆï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦å€ŸåŠ© SLF4J çš„å…·ä½“å®ç° logback æ¥æ‰“å°æ—¥å¿—ã€‚ åˆ›å»º logback çš„é…ç½®æ–‡ä»¶ logback.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">debug</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æŒ‡å®šæ—¥å¿—è¾“å‡ºçš„ä½ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ—¥å¿—è¾“å‡ºçš„æ ¼å¼ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æŒ‰ç…§é¡ºåºåˆ†åˆ«æ˜¯ï¼šæ—¶é—´ã€æ—¥å¿—çº§åˆ«ã€çº¿ç¨‹åç§°ã€æ‰“å°æ—¥å¿—çš„ç±»ã€æ—¥å¿—ä¸»ä½“å†…å®¹ã€æ¢è¡Œ -</span></span><br><span class="line"><span class="comment">-&gt;</span></span><br><span class="line"><span class="comment">&lt;pattern&gt;[%d&#123;HH:mm:ss.SSS&#125;] [%-5level] [%thread] [%logger]</span></span><br><span class="line"><span class="comment">[%msg]%n&lt;/pattern&gt;</span></span><br><span class="line"><span class="comment">&lt;/encoder&gt;</span></span><br><span class="line"><span class="comment">&lt;/appender&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è®¾ç½®å…¨å±€æ—¥å¿—çº§åˆ«ã€‚æ—¥å¿—çº§åˆ«æŒ‰é¡ºåºåˆ†åˆ«æ˜¯ï¼šDEBUGã€INFOã€WARNã€ERROR --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æŒ‡å®šä»»ä½•ä¸€ä¸ªæ—¥å¿—çº§åˆ«éƒ½åªæ‰“å°å½“å‰çº§åˆ«å’Œåé¢çº§åˆ«çš„æ—¥å¿—ã€‚ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æŒ‡å®šæ‰“å°æ—¥å¿—çš„appenderï¼Œè¿™é‡Œé€šè¿‡â€œSTDOUTâ€å¼•ç”¨äº†å‰é¢é…ç½®çš„appender --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ ¹æ®ç‰¹æ®Šéœ€æ±‚æŒ‡å®šå±€éƒ¨æ—¥å¿—çº§åˆ« --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.atguigu.crowd.mapper&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line">&lt;/configuration</span><br></pre></td></tr></table></figure><ul><li>EHCache é…ç½®æ–‡ä»¶è¯´æ˜</li></ul><table><thead><tr><th>å±æ€§å</th><th>æ˜¯ å¦ å¿… é¡»</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>maxElementsInMemory</td><td>æ˜¯</td><td>åœ¨å†…å­˜ä¸­ç¼“å­˜çš„ element çš„æœ€å¤§æ•°ç›®</td></tr><tr><td>maxElementsOnDisk</td><td>æ˜¯</td><td>åœ¨ç£ç›˜ä¸Šç¼“å­˜çš„ element çš„æœ€å¤§æ•°ç›®ï¼Œè‹¥æ˜¯ 0 è¡¨ç¤ºæ—  ç©·å¤§</td></tr><tr><td>eternal</td><td>æ˜¯</td><td>è®¾å®šç¼“å­˜çš„ elements æ˜¯å¦æ°¸è¿œä¸è¿‡æœŸã€‚ å¦‚æœä¸º trueï¼Œåˆ™ç¼“å­˜çš„æ•°æ®å§‹ç»ˆæœ‰æ•ˆï¼Œ å¦‚æœä¸º false é‚£ä¹ˆè¿˜ è¦æ ¹æ® timeToIdleSecondsã€timeToLiveSeconds åˆ¤æ–­</td></tr><tr><td>overflowToDisk</td><td>æ˜¯</td><td>è®¾å®šå½“å†…å­˜ç¼“å­˜æº¢å‡ºçš„æ—¶å€™æ˜¯å¦å°†è¿‡æœŸçš„ element ç¼“å­˜åˆ°ç£ç›˜ä¸Š</td></tr><tr><td>timeToIdleSeconds</td><td>å¦</td><td>å½“ç¼“å­˜åœ¨ EhCache ä¸­çš„æ•°æ®å‰åä¸¤æ¬¡è®¿é—®çš„æ—¶é—´è¶… è¿‡ timeToIdleSeconds çš„å±æ€§å–å€¼æ—¶ï¼Œ è¿™äº›æ•°æ®ä¾¿ ä¼šåˆ é™¤ï¼Œé»˜è®¤å€¼æ˜¯ 0,ä¹Ÿå°±æ˜¯å¯é—²ç½®æ—¶é—´æ— ç©·å¤§</td></tr><tr><td>diskSpoolBufferSizeMB</td><td>å¦</td><td>DiskStore(ç£ç›˜ç¼“å­˜)çš„ç¼“å­˜åŒºå¤§å°ã€‚é»˜è®¤æ˜¯ 30MBã€‚æ¯ä¸ª Cache éƒ½åº”è¯¥æœ‰è‡ªå·±çš„ä¸€ä¸ªç¼“å†²åŒº</td></tr><tr><td>diskPersistent</td><td>å¦</td><td>åœ¨ VM é‡å¯çš„æ—¶å€™æ˜¯å¦å¯ç”¨ç£ç›˜ä¿å­˜ EhCache ä¸­çš„æ•° æ®ï¼Œé»˜è®¤æ˜¯ falseã€‚</td></tr><tr><td>diskExpiryThreadIntervalSeconds</td><td>å¦</td><td>ç£ç›˜ç¼“å­˜çš„æ¸…ç†çº¿ç¨‹è¿è¡Œé—´éš”ï¼Œé»˜è®¤æ˜¯ 120 ç§’ã€‚æ¯ ä¸ª 120sï¼Œ ç›¸åº”çš„çº¿ç¨‹ä¼šè¿›è¡Œä¸€æ¬¡ EhCache ä¸­æ•°æ®çš„ æ¸…ç†å·¥ä½œ</td></tr><tr><td>memoryStoreEvictionPolicy</td><td>å¦</td><td>å½“å†…å­˜ç¼“å­˜è¾¾åˆ°æœ€å¤§ï¼Œæœ‰æ–°çš„ element åŠ å…¥çš„æ—¶ å€™ï¼Œ ç§»é™¤ç¼“å­˜ä¸­ element çš„ç­–ç•¥ã€‚ é»˜è®¤æ˜¯ LRUï¼ˆæœ€ è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ï¼Œå¯é€‰çš„æœ‰ LFUï¼ˆæœ€ä¸å¸¸ä½¿ç”¨ï¼‰å’Œ FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰</td></tr></tbody></table><h2 id="åä¸€-mybatis-çš„é€†å‘å·¥ç¨‹"><a class="markdownIt-Anchor" href="#åä¸€-mybatis-çš„é€†å‘å·¥ç¨‹"></a> åä¸€ã€MyBatis çš„é€†å‘å·¥ç¨‹</h2><ul><li><p>æ­£å‘å·¥ç¨‹ï¼šå…ˆåˆ›å»º Java å®ä½“ç±»ï¼Œç”±æ¡†æ¶è´Ÿè´£æ ¹æ®å®ä½“ç±»ç”Ÿæˆæ•°æ®åº“è¡¨ã€‚Hibernate æ˜¯æ”¯æŒæ­£å‘å·¥ç¨‹ çš„ã€‚</p></li><li><p>é€†å‘å·¥ç¨‹ï¼šå…ˆåˆ›å»ºæ•°æ®åº“è¡¨ï¼Œç”±æ¡†æ¶è´Ÿè´£æ ¹æ®æ•°æ®åº“è¡¨ï¼Œåå‘ç”Ÿæˆå¦‚ä¸‹èµ„æºï¼š</p><ul><li>Java å®ä½“ç±»</li><li>Mapper æ¥å£</li><li>Mapper æ˜ å°„æ–‡ä»¶</li></ul></li></ul><h3 id="åˆ›å»ºé€†å‘å·¥ç¨‹çš„æ­¥éª¤"><a class="markdownIt-Anchor" href="#åˆ›å»ºé€†å‘å·¥ç¨‹çš„æ­¥éª¤"></a> åˆ›å»ºé€†å‘å·¥ç¨‹çš„æ­¥éª¤</h3><h4 id="æ·»åŠ ä¾èµ–å’Œæ’ä»¶"><a class="markdownIt-Anchor" href="#æ·»åŠ ä¾èµ–å’Œæ’ä»¶"></a> æ·»åŠ ä¾èµ–å’Œæ’ä»¶</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä¾èµ–MyBatisæ ¸å¿ƒåŒ… --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ§åˆ¶Mavenåœ¨æ„å»ºè¿‡ç¨‹ä¸­ç›¸å…³é…ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ„å»ºè¿‡ç¨‹ä¸­ç”¨åˆ°çš„æ’ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å…·ä½“æ’ä»¶ï¼Œé€†å‘å·¥ç¨‹çš„æ“ä½œæ˜¯ä»¥æ„å»ºè¿‡ç¨‹ä¸­æ’ä»¶å½¢å¼å‡ºç°çš„ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ’ä»¶çš„ä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é€†å‘å·¥ç¨‹çš„æ ¸å¿ƒä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- MySQLé©±åŠ¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="åˆ›å»º-mybatis-çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#åˆ›å»º-mybatis-çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a> åˆ›å»º MyBatis çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶</h4><h4 id="åˆ›å»ºé€†å‘å·¥ç¨‹çš„é…ç½®æ–‡ä»¶"><a class="markdownIt-Anchor" href="#åˆ›å»ºé€†å‘å·¥ç¨‹çš„é…ç½®æ–‡ä»¶"></a> åˆ›å»ºé€†å‘å·¥ç¨‹çš„é…ç½®æ–‡ä»¶</h4><blockquote><p>æ–‡ä»¶åå¿…é¡»æ˜¯ï¼šgeneratorConfig.xml</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">generatorConfiguration</span></span></span><br><span class="line"><span class="meta"><span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">targetRuntime: æ‰§è¡Œç”Ÿæˆçš„é€†å‘å·¥ç¨‹çš„ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment">MyBatis3Simple: ç”ŸæˆåŸºæœ¬çš„CRUDï¼ˆæ¸…æ–°ç®€æ´ç‰ˆï¼‰</span></span><br><span class="line"><span class="comment">MyBatis3: ç”Ÿæˆå¸¦æ¡ä»¶çš„CRUDï¼ˆå¥¢åå°Šäº«ç‰ˆï¼‰</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">&quot;DB2Tables&quot;</span> <span class="attr">targetRuntime</span>=<span class="string">&quot;MyBatis3Simple&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">connectionURL</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">userId</span>=<span class="string">&quot;root&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">password</span>=<span class="string">&quot;123456&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- javaBeançš„ç”Ÿæˆç­–ç•¥--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.atguigu.mybatis.bean&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">targetProject</span>=<span class="string">&quot;.\src\main\java&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;trimStrings&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- SQLæ˜ å°„æ–‡ä»¶çš„ç”Ÿæˆç­–ç•¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.atguigu.mybatis.mapper&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">targetProject</span>=<span class="string">&quot;.\src\main\resources&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Mapperæ¥å£çš„ç”Ÿæˆç­–ç•¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">&quot;XMLMAPPER&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">targetPackage</span>=<span class="string">&quot;com.atguigu.mybatis.mapper&quot;</span> <span class="attr">targetProject</span>=<span class="string">&quot;.\src\main\java&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é€†å‘åˆ†æçš„è¡¨ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- tableNameè®¾ç½®ä¸º*å·ï¼Œå¯ä»¥å¯¹åº”æ‰€æœ‰è¡¨ï¼Œæ­¤æ—¶ä¸å†™domainObjectName --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- domainObjectNameå±æ€§æŒ‡å®šç”Ÿæˆå‡ºæ¥çš„å®ä½“ç±»çš„ç±»å --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;t_emp&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Emp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;t_dept&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Dept&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ‰§è¡Œ-mbg-æ’ä»¶çš„-generate-ç›®æ ‡"><a class="markdownIt-Anchor" href="#æ‰§è¡Œ-mbg-æ’ä»¶çš„-generate-ç›®æ ‡"></a> æ‰§è¡Œ MBG æ’ä»¶çš„ generate ç›®æ ‡</h4><p><img src="https://lc-gluttony.s3.amazonaws.com/aLy6jTEsBgHJ/nvgz4dicqzr3J37ESAxnSLhKfv2NHMFt/QQ%E6%88%AA%E5%9B%BE20220309154235.png" alt="Mybatis" /></p><h3 id="qbc-æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#qbc-æŸ¥è¯¢"></a> QBC æŸ¥è¯¢</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testMBG</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"><span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="keyword">new</span></span><br><span class="line"><span class="title class_">SqlSessionFactoryBuilder</span>().build(is).openSession(<span class="literal">true</span>);</span><br><span class="line"><span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line"><span class="type">EmpExample</span> <span class="variable">empExample</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EmpExample</span>();</span><br><span class="line"><span class="comment">//åˆ›å»ºæ¡ä»¶å¯¹è±¡ï¼Œé€šè¿‡andXXXæ–¹æ³•ä¸ºSQLæ·»åŠ æŸ¥è¯¢æ·»åŠ ï¼Œæ¯ä¸ªæ¡ä»¶ä¹‹é—´æ˜¯andå…³ç³»</span></span><br><span class="line">empExample.createCriteria().andEnameLike(<span class="string">&quot;a&quot;</span>).andAgeGreaterThan(<span class="number">20</span>).andDidIsNot</span><br><span class="line"><span class="title function_">Null</span><span class="params">()</span>;</span><br><span class="line"><span class="comment">//å°†ä¹‹å‰æ·»åŠ çš„æ¡ä»¶é€šè¿‡oræ‹¼æ¥å…¶ä»–æ¡ä»¶</span></span><br><span class="line">empExample.or().andSexEqualTo(<span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">List&lt;Emp&gt; list = mapper.selectByExample(empExample);</span><br><span class="line"><span class="keyword">for</span> (Emp emp : list) &#123;</span><br><span class="line">System.out.println(emp);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ç¬”è®° </category>
          
          <category> Java </category>
          
          <category> Mybatis </category>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bufferflyä¸»é¢˜--æ–‡æ¡£ä¿®æ”¹</title>
      <link href="/posts/d811784c/"/>
      <url>/posts/d811784c/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <script id="hbeData" type="hbeData" data-hmacdigest="b56e8cd02a62b9ed88167d2f9bbf05b7c0882f9304c3229ecc4bc865159e83bc">c2a6eab85bdb988c04f79315e004caa4134f78b2cd2f052f0250e74a2e700c7560539bb842bed69a43d6a64afb18f78977a8c52be5305c6f3f0b14e2996481626fd77cf4d1a232827117b7fd8e2696d9ad1a56dcaafce18bb246a824cdcc25ef1978bc09b5930bff8c6fe27ec9d9ebfa08692f528858a9e3c7a5c24c20bd64e0a26fe8bc44deb5075b9d63e3081d6a40b87da50a5090a812a7a9d27b12c851d163e5acebd86b0e3e7119fc3265d1cc55197bd261d1d4cdcb72db25e7b6d6f3a88e80542462680c6f43a8631ed35f582634b89ed6b174dc63ba925a9e846949b44746a074842ceaac30b61c62de3cffbaeed2196c7987963d62635a6dfeab81cbfe917845ef4c42eefa8cafb09e95593c41200386bcb9151e949bd4fd02fb191d9333055fb9b67c66ed20bf79c5649914db3dc7e913d29d0f1aef05a20cc188b0229841afe135e3a37929881e0100f0de9f38e89af0614a896c24512f367b15ccc359c2f618fb6cf8e62ccb9b9c5f523d371af40ffa7be9edf9452284ccb4aa69fbfe0eaf7a694cf606025e142c0be29dab39e663558c714ca239f2d195a1e15a5df3d1803645f6722fe940fedb4f3ddb29d0def94ba79533f216101e665ec520d6635565a4a7f5461c24402fbc08901916c824838054df963fff802a58cfb7bead857a1bd8fdfda8eae509fe7736c2f77e5564377a76566304fc1e8ddffc05ce83df0f1034926edf31e916375c27ddb7a8f75280547049da8b6cab7f2f8f6aaa8dedc78143ca14ed8211bec292028ca79914feea7f5bb4a3ed502f39a235027da65cf3a7ae66c8bcc3bd64db02ec66e8627243430e33e6013bf8bb78a7c850941de0664b48801c4ef45fa3044326bb9059479c052516973f5552a1d1b1628eb8b31c87b9bc8b0a498099cd66c0a47c9f9cf37b310afbc1942d795050f85016f5c11589b78ca6aa0a681178ee0e2dbc31143fcf3ba517ac4efeed2bc4c1308641ef23fe49013bab0d46babee03eb5ab4690fc7b8493472a7b3002fb10a2cc4e084a8a62cdbe5439048a9d837df86f96463122612c6c35fd10c25c37b95a745041a4303f76b07af085a47bb775ceba484e1b1413a64f6b5b3b1e708892fe52d48b653e88b0d19c526f65dc04b8f835e1a3f305b27b9f62639bf17c5d4a4d545c98b910d9e6cd625d6332c6f3542e16bff386720faf976fffac58f132514b64f935f96ec9f40c92872660b35510cd68f3455f01c98ca67bf64a55de89b2f2dde981c3678390e1a20789ca12354a8868a933dea54a811ab84dbc9f0bd773c139076026a3d69198b58129ec9e37e949382ed4b4798a0ce5d37c74876e7ecb85fda8f3c3df5639dae5e7b6d32045a1b08ad3c9c8b57ef9adf9df2e4a4b2a55f1bf713613589166d1ea2de60901181938ef214f97002ce2de81766b8b11feb822687c12578e9613f3d88a27414da28774c8e32a23f8c1c86504d16f00f36c16daf3c95f2cfb451eaa53d9410a9a60f96edc43c9e4ca31cf16352ff0de2ab0b63c8c72786bd433215ba000a6cb81edf245d58a4686d7132972b32350b5f7edc37e993e9a597801c6572c88d7e9884512b4ef5229e653813626f8624f733496173a54bd109ef0fc9f20bce16e8711398743ef679a876012820feb72d1e168c1be520736aad6a7ebc4101a3d62e1e27120c08082302c89ed0af0bf256be715ecad1b6c9a2a45c7549520f6f991c999911993262e04529bb49f6f757b756ffb9ddec88e347d1acefdbca069d286882edbe7e3607c7476faea86130db1ee1b56b51816263accc5f6907fb0cffc1568dbd7c4327c6288ce453a1dabf633e380fb22b736f3310336ac9296a64e1da34e816cd3e991e3b57e0df8d7257d498974c432a660f69ec98cc97a07bca7ff170b6053acd322153dfbb3f8a6aa6761fc2e266b8f0885a0afb61970e47e6a0890e8d04174051ea42c637860bbc9b50ba07c26f49658ab81c412e3086351164b20d380371e76daed9497e934ca38d9596fa5c0d03c530b180cad3419068904e80ca1c6f7089ac6ae04c4bd1ebcbd5bbb9055bca9fc138718ebabbc4d713487a7e568bc6a31b22b39ece01412a618236ded35aaf7788bffd11f4bc3cee8519dacd7e1afb6f2703c5278d10b1d747f47bff7b1ed4b113fa28343b2a19a0a6a15e1696c709155f5f691679ab0a4efee19678e169d147b16904fb337f6bbcb88e76402ea9b76fd2434a47e2e64c62340637b9ef049fbeb236cceebd896f6ef69aaebf5c26c5b068404b7c06832ab1b75d979aca7cb1ad43babce0b8be723e071b763d949a4e74315dba982ab9c35ef174b62a720a969709cc172d18bad5a72dcaa29777fdb44e89f9a933828cc0c817fdf7ce6d81b0ab55a1f75a5af19737a093cf54b581212d46f7a3ca8c21dc4185bbb9156950ffdfc63e2d7c36170e91c40f9ebee74eb0f8924d80305d5e94081147d3b86ed8c4168e64d6a197d11cf1c6349a6082ee57b23186108c9ff4be9ed0c8694909970f567749f3419d90f61f460c428ae8fe206c942e62e0bf292b0b5005a605a15e1a0129be79215c069b6475806224110867491f23ff5a5c189f7ccae953e0c7739c90db2f2e01c3d43a5913148008449d34492d0791c7375080450ce2b6d8f0f4d9ee4ac5e19a1db74da5a907b41eccbd247c9698f304fcf85025de882d8750e216c58fbc567ec35e9655bc091447c8957179e5bef3c422dec07278c955ce83b6ec69c6ab7cf71e8ac809b20eb84d927c04caafb29744b71f5b6f46ad9db1ad8b5df9eba3a9dcdba6169833263ef609dd252ca4a7c6a0d7c52236e9dea552741cb9ecf0a8d9c955b897a412c7d284783c7b59b4d8b9dd8d959304e3f9a231ab57ecbab393c382889a0ae01fc2e0c5387baae2ea7aa4db97b4de42762a275ccaaee0c52ecdab390d8c6da5bc62c35dc659318475e4082148e5881d981604fa6e64c354c84d7c795f3f6f05c6289f279bdf67e15218d280f8b72327fb37a78eb7d5b9d8c8d834aa914787338f40941686d7386f5a3cb96bca100c9385e5de1e3b4602947c4c9aa8077e2ff1de0dbde36170207f4b86ae6feea50055c146acaae305490a27f46ac404d5daeba9344ab9c7848b7ae05601cb9953964eeeeaf9bb7958663ce8d5d5991b120e781b211e01226f1c73556787952f9af186387ef2b426f176855b0a97004a131a0a5b1c7102e9beed8ce8b0f194c89e9b1d39a8f8ee6d64520afc58f35b1760c6c13595e81119c76379085e59a6a3d38dea715bfb0ee9ef2c0ae1f207862e829c6873367b8020d9293f105369376d78004b2e2750a1f977d243bcb534a46fbe04ac4970e934d472c65544dbbcbf266dfd2a461a3c168a8e9cc2dfc46d4ab8e4ce0d4513d131dafbbf31292694de800744322757a7e051436b379ddcbd006eb0759a81f13803adf4881c149a04cabb62a0b1b83f9a8c284d980d40d4c6c7a6997ef23bec9f25fc1d33b4d05aac4c074338077ce0a8355e773fb39628e135660262a1d4aaa67c933d6424b09e921bbe519407f091e7ac9289b32d34f878cc1712ecdac25a8cef03ab2095067cd5dc6c5ceec04cfa403a90914010c6f56e034a01e7378b2556d367850d3a7740c71dd98a7deec4a9bc4b3c0e0df17f6e8a9134e583025fddb9dc4e93757518129107216922af075fcafe4de286476f1340c5a1307b948a66afe04722db7b5ac832ee9933626ad744c8fdcaa1acfd685d620534a780bc5569e8ac08ed9c60ba01a726f2dd8fac2b015640102c809286ec96e0c3c5ddb1bd22a37317525fc3e6d5eb2b0ada55066afe45709cda9490cf55a3fa0efc4ff4bc9bf5ecc6cced9ba204118deadb4388f0f5dd2730d02e4678abd9603ecfd23938b3110021ca1d8bef85429facae041be10babc955b6b9b38a5845919affba7cfaf60250610fd1f5861f8bf8fd927a0a1b45b77efc6834baacfad2a7c0c299ca7331a70be88e71fcf7ded224375e9b0d2e6b86831e3b26b2f58d85baa07ec6690c974533ad2f66ef95ab6efd225eb6cd627d13d8cb4d90478adae8a8a6a6a751437220db8e1ae51b8e986e006be4c05882110ae89c1b699995803b27297bcbb3c999e14d97262ddb5cb5c29abae30a4bb3b16d30099fb29571d8f8399761ef42cc13c71f8b632fef0e3fe3c47b295fa87599810e783812e23b37751acb030fd42e0f7a9d9cac876ea1b038aa843de7d55bcbadca1922a78fe960308a5d1098197edd3f1853536d90958cf612e36275a8612eb4a54d32ff7a48d1aa02713f65f5dc378842ff9209e78768e0dc694cedc967e4d22430fb63e209ca772bfd273b00ca4eee88790be37533df6f976ee801a4e84eda03413b858fce259737fa60f5af5d3b5183db0c6e19f586786d007dfaca8dc8466432c8ac371707e6033d61a64b22c61a830b41c6306c0d84fa401c2eebd48d463387f84b85f18dda1c864922b251bec0f4b9edf879b985c01968e7c993a0ec3a07e7ca772eea013646b2b352b2b8734cdd42f4bf2b3140ddcde49bfe37ecba7ae6acbe89c34683fb3f114fa518819b04e0cc752b26404032566e97db9d2a7529e9b5095591b67b4f9ef132686565d2aca433ea2b21f82fb63ef1da7fbe521a028f783e0071c24ad35ae4335de5f7c4b050cd692dab84e3f81ef9b0e0f2c555020680efe2cb847a6667c12b973b2ab3205117a4d1c62e2099eb2313af250add21a78eb8aa33d1f1969a37f978c6f1bf7f16293fa86c0c3e8ef569d38be1690fbf9c4aadd8529e9eb9022a554584c0e4e05356a5dbc6a7ee58242bdc3fd8e4d4451e2bff89e921404362e75481b257653072a4d44e2cc8ce364ae762489d149e18336df534b1539baee1ce65b470cc9b52a21aa67d7ab155736c3b957ca3b4563532371428ba4f10c26e162bb95e9c185446cd80042a52a0a37aa4468881d3660ec965e0abd0ab29bbd4f5f66cad2f986139fa82d1391bdebe2cba8cd72ba8675107ea5d1fe4e028452f90a5b6b88be8e11574e29bd00da1682cf5d14ddae9f3485415f25299caea4c220ccc9edee4252e5f0bd68a06a072928ec3b112073df598f17317bbb789dd4fce409326371f156a737fa3e0a527308ebf97e999da7988239f7c5d5931d9a97f7d89196e206de10fede143ae70c2fd3acdb1d5b2554e5d95b7fcb4d138911bbbaaabe9f8284a028a7e4a8c1f42bc0506863d96d978fdc7dd9cc289efcfd9f78d042e4f54c53ed6ebd7c2f392b9107d67156447667f38e94acc8c088b2d65660f197a8d0e6c64dd9a69b7558e80cf57bd6a9379d19a8d1ff0c0c947ffe86585a8bd57691324f2ab52ba853f18006c469d00e0c24c72b779a90ec5dd43ed1cd126af7f1b35090398d50da7321830325146113920f053371c941019ea1d538a09415554c3b0afc3c5668532b8b6c4a66950a1c0f6a59abc99f758b8ea95e7a510c57daa37102c63237db975a195a401f6a8498b257db53c03967b127a8429c81c325718c3fbf1c8570078ebcabe5f4fa9d545f248c5734774e35ea43dc32ccda3d27547b9f71b7d11e5054f33e33ccf2716f30138a2003443640954755978ff4b7907d4d4bd800a0b294c8e4788bac1dd2d9c9ef2bfba5b601b5847dd5f65a70effc5a5b05aef510e7e12991f5f157513aef004ccd272d8949b606e210afe8a1df2c5f1d175bc69f17015014bf31c3b9d11463c1d7aad85a62577e2c7ba6cdb9526d4f5b87b7f5a5223368526c051d222673d2451d280503a205cde74a00239bf229ec5ae2586f45871edab8fe9ba1eb724841a007e568714265e4e11f27375be5daf41c07764efde5a3ccf0c2b1c19d244f6fa690ba317531a45f905ca7860196c25ba24c6d9e2e99cb7249291fc106f8457be7cfc28c151c3a541275b61a5caf268b53b932a758ac48ff21efc1a987a3b729612477060ba6b93677c00214c44b53c7d0cc343e7c443f14ae1b34fb9c6a6f2cbeec1e61a99b66f75b98f7b96d2344672a7f9776edc85a16a0e22349bb551f163bbff8a33fa2e99ad5ad79d1e85c83ac47e78b5d4de3123c9446c3d61cc59343abd97d1671454079961f594f8a9a0a597242551ceb9880435824612ef9ca56d709471eeb55043395936372aa96ecf5c50333d2edf44662dfed35a36ba08b4bfc296831f582c56aa305d7602e0a8c306acb7b14991a056239ce31663c11da0977b9a6036a7f62d3265f186ced46b76228a8b0f78d21b48260aad9126fe39ba2593144d7ea48ac0844604e751ab0b7153f2bc59923b5778471d87f73eef4733ef50049dce292adc82cc5955e2bd9a890184649a1eca1474355642d9cc1a18a9c206be2e0c39564e5cba1ec9aec08f32a1b47ac4c731b2cd8bf7b7270143d66ee90e08cbc799e28e1d8f3316f785605250e3de80d2b6a10820628e69970063cad4898af0aea07884fe348632a0c3e4399cf0ff79215ec4d68a40ccf24ef615ca1c5e268f04d4754e8e04332f2f58566e799380715468c562309fb8f8cabb2434b14e5a4473c747e9fc3cc30abf367b011359cde611d1ba6206e91a01386f4d7fd9257f8c602c0bedaa89cc1488af2f715f1ba62fd90c3c1e6a3b0e168f3396c893ef0b20182b4e93f0aaa67e3e867333098f5831c4bc02d492b9741bed3fdc2c5017bbe066b920599426222f44879d8cddaf230fbb042879e0e3e6597b4724a9847bebfd1af7bf0fc9c1e87f5e35bd50d9accf80306c226e548f04267fbda99107ea6494fbdcf0b52f125b6784f151f72f2810fe6adebe0cf822cbb1dd8540c28967840ff202760c8f4a0b1fd1605d4d312b121562a0dce0f65b6dbf381cd7fc7ee2515dd6a127785535363ef5225064ee6624f0f0d8a2cfa4a4f93cc157bd810b5781aa060251a2f53a4a3da5b4fb64834644002deb99c2a0a4399846118f02e48903b5ac20b3fafcafcead5d0ff19bbc2d1fbb6c5968af5b03c3449f9d60af4400c3c01d41c686634b7011c409e6954adea2f452e420e0104508ceb1a2f6efdc3b1981981c40ed6504051ff47e94b3b06b6b066d5bd09df938ea7b652904c5d176bc240e307fb98f27dc11e41339dc25242fd502d3e86d7e405f68b4c9f8373c4f292173c6c1b3ec80e99f59b86ebfdda45381021109702b14123a8003d7b5fef6b9079cdb3829ff83c066bfba58e24a91739383cad0ef9e1231c7e9fb52753164ec416adb185e886f7e2d115ea89d20f5941dd3b59cb5f91353b56cf13e8af9946ce04c658eada2b4454e704c7b63ea80f82a26b30d3d23307ab2f19ff931a77f650c783afa95aa2ffe82eb1df30a58f8a461afcf678822c052a37ac65e5e61266e4caaf7ae85eb0fcb205a3156a7bd0b88468a004139572754e1607e23ddb37cc4e6ea8a8be0fc184ae922f53771e5e178549e4bacfd2fdbe83f4c6e6544566c7f03ff5e0a38799f0e6bf3e7b452a725d7fa823910644a240873f4f9297e1768c96a1093ee9d58550242bf3e40eaa07bf06618fbaea6d2b349d73af0644b5e43565513ef2b9c5e0b3d87e4209a8f9e7b2cfb873240a127851213bdcb82bc56dc8109c0ec88ed9fdd456f26de5e53b86dbac7af4319db0e3007d9ccc483da285217deae43dc1ef4e198c0bff33438b5666a10f8e2940e59cc7edc1affdcd76778a48cf48f1099325e30a8a4fae5f905f9213ab8b0d9b1fbeee75fdf366419e4201baa1c335673f74fa339fc2b8d144d86effd42ac2bb0f8ad320b8fe328014d1bfcef47afaa7508f940ce5b8534439cba176e452cf3581426c2eb6616e25e51f810998e8a23e618c270a9d583f57f40203e06cd339ca2d33c99538d46ffb5d06f93169d8d5c50a1d41d9f364e5f8437776b416f0283c0fba8def376c2e564b01dda8cf87aae251ba0f45488d7e1a2ab214115e880227c6070062e02c43cdc76d5f7d30f2cfad3191a9eae502a2c52aea16183f0683249db9cc6d2c5278099c27f635fd4cc4864f97d3525c4199fac9bb1bb41711459dc0de7dbff0adb1c52261766c7509221a694d1810fd0f68c589b58700a65722458442f61ae415752663863e680573b7dc6223e69f6eb158ae65a9f25fc7fdb8f289199bd6e6410214162bf393d0e5e11b4ef1f6777083ac02f65fb52b1c1cca2548c4df955b2f7baa0487a6a57e7c977eaa90363153cf9b23edff62f2bee35236f021e353d858e492c14ac42ffae8a278185640515a67fad084e26ad89895910e1a3ca3585d5f89d99826a89208b0a7f47098ff05a0b28b2d362e17376bd0ff4c80f72e9dcba5f6a25e1cde38e0e8b1600669006020f870c3b8ecd28b4d9b52f44e263cc70b443a32ee8ccf9f71e52a838f43592d990e12ca16e7bc50d838418660fb204553902d31bdb5ccab2809fcfa8c8309be162aad3ed442fc43002227a1da15029be18dd07e1ac71d69c5e3b4081f2d3e52c119ac76ba593c294e788e97ef09d673173d1efd0b3f7c5bb119b56d63f540e0a998313f97816078ea9e58156172a83149ae3dde26e2e2c42a50f36d85183e540dea3e16c44860cab62ab0dccbadf8ae46eed7048d733cb8de2bb4eda800dac55ac5f902636d4a140ac52c548b1f98166e491c9802baca91fd3d49d85a065ff9a4aa2b23b73ae5ea17aac967445940c4103b5497f983c8cab2f9512490dc89acdf3a2c0731153b67f63223b6e02f6f0d97a2d1f911df7a75dcfadc7db2bbe26cdb885ec366b6f7824fc7093c4c2f54e3d754346a75320f84eb0f5849903728b3e3c1cb20090899c40bccfdcc8fe6b6ad595f0feeb5d3abf7f5aca18cc4c5d84fdeedd9638ca785344b59c690ba597940221197afef6603c66071fd13fa5e39be6dc0623550691e94fab0c130c5cab91324dfca4b008673e1b0ae93c7f24a4a54c11b5cb99ff5916689bde15fcca893726e29a51ee4d2a7811de389e7173382e768a2890982d0b13d2a082861b5b0fa9562561e127c3e41152ca63b8c1eb1e5843270c286d8b46923e2c140e30f227ccb16bff30942a5f06ec440dfe71f77f94b94625c0fd540b35891f48c34ab05a3cc7ebf48c46f64d13dd4cba8cd9919a8b696e7b59d70b3296dc1dbb8d708c7b5156d19e2533eccc06d6fbcc534d2483705bc1e516c437c880e3a8f7c318f3e3e3192fd3154d3f9355e84d70edc7b2de567f63fa1af9f45c6e441f4a92f6ed895001ab6def1b792eba536a12d5baa3ca7d6abdf3bd52125874929d6b8d1c54848ce1a3196e77763a3c308e6941b2fa8158ba0da6d3a55acebe83fd9b4f74b3202de2f4aba0f27128b35165ea7c9bc98802d4a6865071500d09b1f6829535ac8002c3312d07a941770424a8dd52b93415b9bf6d8550a23a7893d249f892285a5c352cab4a1d49c3bd176ea7b29e7d834e043b5168e956bbfa53caf5e9d6ca9e2df694c70cc23a0d8aa0ae38be562b910c96de1fc1728945549c431f7b865d44d06d8a950ce240c90e51f910815853f79ef6d324af83ca001fc7cd66d03bbc6a7148dc3925f70e328832b772b4dfee679e68580b0d1869f2786b0d5aa4f1318905b168929678ab1d331d055f926959257f2a27ff3275428168faf6783bcd5e27451deba0cfe2e07b1104fa5a8e446848f81f5cac7207734b86242ec284aecd7538425bb695dd81a75d26df287a7b7f048124fded2e554c84a503ed2e0493d3dcac991c429b5b57fa72d90e50e719a2b7e73040c80936582b04d209b8cdfe1397f7a54638468e8f0fa87eeb956a3b49fa0cb1600379780ea8113e2ed623d6290051dcc8d7744d6347c5d33c7b9f7620cf728a20889ec43cf4c07e330da8cce164ed2f14385e3bffe432e2a395cc3693b22fd1a7b52796c0c2f66c1ab5f5b0932333c42338daec950ba5d119b60e340ebdc403896b8a024e72a26f6296f5a2d65096cf2126b3fb5b9b17f37107cf2cb54c6ffc6b06e427bcfae8762e7b10b8954bdf56cd8c1765fa965a73c4dfd3596f1146539823194628204d2f6ef8250869edc1206a0ec2f416a01c53c5d6b58088d370f7e5b956f78e0ee7fa21eadb71a796748e62787a7bac5cd04cdfdb8ca7c2395a4f3d22a4398e88aeaa969f6b7ae179340eb1fd5133a4a7c0ace784c6e0cde88c86623fd1b477274199fab83072418a90b3d4b2729027e703b947ee6d0faa5dc1971acc55e65d1d9db8d0fa323f6df071556d1d39aed152256fef712745ccebeac8819bb00ec3adcd8cdc8fc2d8a30289391fdbbbd6cea45627ecdb3bd2345f563a9a8b0fad0f602d821962abb01ceb68b7fa0cf1eebdd8102093bd00297a8b5f64a1b8f8f9008f5ec35672bf2cf544cb511d5bfd8b66463b6d291cb50984270506935871ce132dc4fea25cb6f8c0340e5b5a21c3d38ab9fd064bdecdd07239b1cae9e774db42f6a3a737b6bdf9ea47c776850e5f99860f37039ff514ff107ea661183281134b0332baa3ec9d98b2a434bb41d96879bfbe2790255ce7d74cc45591a4c2b7a83f70e0dc185048d1a0ec0b0f44d8534f8d6110ce8e120209ffe0aa646630c559915179d64e59bdc263bd25d9a99fc40fcd6d0780de507f75ea2242ab008f5b24faec33e0af529cb8265ac0478d5860444f8e6540d45de42b5a265a0705ef7223f00e79d09141962583f4e77e4ef44398561009652977fa294e33a05089d38648c602c048af07c95242e1f439b3db839f35e3a47091dae4dc318dc2d05a28ce7ae4ced24de4c39aa6e26d23a8552f57b14fb7e6d7342cabefb98ba6acc5f31d654fe2e3e8717e442708863c3202bda67727a378cfe6889efd6525b1f195f6fc9696bb75ddff4f5d2d7b07d595a0f0dd6657d10430309994912e5fcc94bb6348b604e7e7074ad1e5743d33e0d247ae236620aac95f44c379997985dabc8a1d6523b9bb5b11a6fa5bfcccc730a3252e8ce36768b6bba94bd78d8de71900529186e2853b941f79bab89693efa3e7c0c43b6379ac25278f1dd0a6e6accc4912772130bc01a4ebad77333a26304516227f7adc7b9e7ee8e1a94582bbc15cc9f33b880fd35345e621bd6e834bb5bcab0385ef54eae18320f3a4876c1fc6240dbc2776594acb3b3ab91fea528520e03b19d1682020ee30129074e33c2d77969dd551804982085c7f7a9794f3c4b03957a64e0372b43a93e918dd275b3b66af460699460e1b0d5593c5692d915d781081b32480a7d6bc3aa950465807c77a601055094c97a2b43fdaa35832e857795fa9820d016e2ce887aff8cf30326416309fe894b26c19ff7c052a9f33d25a0b6525858d05bba490c52f6b99a3dadd1ed96dbfd7f1ba1fded3391e851b0dab3f93f74354b88c4fc20604be6539347b1ce231c62d85f7349f34933c9aecc7af997aad5c868e4b43b73b97de58240cba95daa6b1523a78057709e69dd3a1706757aaa8f4f11ddc1f9e24c2fd3b2c8cc2feaec28fc9a8c859aade02987bf47ae9e4addd13ff30f247e36cfe79ca72ed36d24b0f39324a9d12dc312d5f7d518f5dad8ee5444a49bddc6c18e9c629a56dc3b2655ea2b1e290a115469dd2cdf55c8a1489aa2744fcad6005494db86ed4d62f46725a40c737aabc4d7a9f03f9088e396a934fa6593bcb2d44658c9b89b1f1f0360f6caff2b0a0453c0c288b8ee4f32e965aebf1bb9527414cce35274be87a7094dd0e8bd3533d33efb64043393b765f40234bc80d24329c3883a70e7aa0e6c9b3bc5b428767a6e4c8d36774304a4dcd1630278e7bfc259ca2594204c50f40eb8ad77e04fc2787b815f234d1b5c044d43155783968e9cfd012e5a8ef62506afdb931628cdb5f7daac6e98fa74cb210aa3b81936f36183f7fc2009c06b1da3c05fa0b7c8ac76a7df75b88a666f0ceaca376a68f434417b6989b251cb4e32e39d87236e5a068617b519a347858a629b9868503c5193483a866fb6cc18569d5476a22794bc7568d5353ffab31a3560b853857fe8de9650a9944f1722c1204c68f6c0548643d1cedfdb06748ecadc9f4f7f5a6db7bdf1ebec5db2d97214ddc87a5f891ef7206402ec1a175f4a97fa3d3bb9f6c0bd10d66d00f6b790df7e6f3de3138e2415e5f44dde2ce6936336862c35686e470a6393684ccec2c8e24a68dd1daa7f896bfee220bfb17396f11f3a319f67f0b6095a30ed35a8302afa5c73cbeefb226fce57637f8b380f553a482ee862362617d5e2ce4386cec2a0223c28a29c20aafeb1892eed6bb227b39db2687f93422fd1942393cbc95b96156f7feaf7920aca1d85ed5c11ccaeaae2279f32f84c36401098b8c30697e2d909217fd102aba14dc10f6834b6096ec8a416535286ac2016c6f68cda98c000370f0ecb0cecf13652d5b2195433432aef80d080f2fd6fb99338aca5a316fb850fdd9873cbb7a7c6d9e1db436ad9634b2f0dbb69ee9b8a5314d9616e1e1bda0003fce5fa625a44e129d90904ba7c9ba474fbdb43192ff2f2ee4ae1c0ca984c74c48214742773c620d3efa543f8ef8940215ba37012e6eae431a920e5eed0dd0c4f1c07d4ed01fce26ca034a8f56148bcbadb09e0044b0b9a952623304dfb9151cf1a5c4880da1790c951f4a5b03a15012df4276e0cb84b48546a5429defda081e03008c8d58530eee408dc7cc3f0eca04036ba56dec8263593a376f46b80849f3e21753c0646612b31f37caae377b7b732b6342fa8310beb286c7c412bcb5b461809a7289acfcb6c2bfbea11978971d465b871e1ade300c9e58f873f739d90d4ecb5232c6b33601d0aa0d863f138b3eea8179a0390061aced47d5c36dd1434f998259c4ec1723b1b68ed427d466f46815f553beb370dbac92f1a90406e0860aae204d79f7425496a052a994ca70347f034331f5b6537026145c79303d9ed9d433ccae35dd6c5d4ab1ac64d7af2a49b2ac6b8b2ae22831357b606af3e87265cd90aa0fe9bef6ca44fd8c0d8c3cabe0916fc7e44c11b244dabecd1744f918fb5649a598d6f95c2152711e0cd27cb3a965794b2a850989eaee942fd659164633bb5288313346fda92e5268529c942f53be304c281cc7c4b1b78381cf11783f9e89d6f8339fea3ae9419a8a7cbf154b1d8bed4269b575b2e70dc41ff4c6327d06cbfdc09b9c4873145807f4b65cc5f05424676d990c50b5a801f08b700e7fa54a5fcaf8abca7eebb598f03bf733a15f4239250122e3eb97710c15676adf56787b5595a59fc54195930bc88ea28819ed5401955c97932e11395a678f85f87ff9cb5eac6be4d9a7363fa98cecf148cc009c4c7356609b9c302bfdaf60cf727824781df32464a79614b9702e9a85fea436c8e05f3395d260b4f5050e86ded20bae5784bb69b9b597a211fa22335c885e18892e1397930962c1e2a276cdcbb15db3d7548d5f60be252495e2f71e8c234ad898beb2f50afe50a880a7fbedab4f197450433e9328fb7ed9fb75ceb5060e69abc51dfb23cf97888323a17338d7c2912acd7eddb2c0288eca68ada8e1a90d47f191ed81f7b9e770e0ebd773894b92eedddba3cb2d9a351a712d2b51b5a925d9f45a11539cb1579770fedf41566f53a5ba598f200c5b6be9913ee44f7fb62e75cac5f7273a6c6679d920f3a8d60ca7227d8926cd267157ee9a8ae3694f5df736d66c10c8422615f662beaf0f56c402187febf7cf46cec5e6959d2184f06b0bd4b8a9f309c739b71126d674d49cccac75e91b826c89f017f4b055ef1c3877a0ca7bb958a0b530f5862ffa473f7cbfdcbf48b9488abf93ab20355827350c8c0f94ae7424c3d1b787a3bc3bc5c6db6e8b904ddf91a7ecf55cea863a24ab9f16237fb9f7df614229e0001ea5b255bef429915c3c6d3f9846fab6938e923cdab381f423d0636ef871479eca25ea77367aab928a666f1032a3d3bec6ab99179ff32323abc10e3d0d3a9ccc4a6c26c53def41f773c858a87b0b25e829f4e5ea8b078a41e1bce17a5eaf3c473e73a5f74ce2341f535e1f2a391071fc7bd1a308b6d910b2a217a1c1f264500c678b659d1f31933afc25ac322bb8bb4bf14a982720c53cb230991b0a34a7f1cdbc9d6ee0975cff83d1f4a22f2d9272e8dcdcd3f09029f9d604c8513ab73f02c1ad2162ddffa6ecb3b4242bad668d4241b48789bf337aced835dabae0ea25153ae04a41a68de7d93c86d4bc52a2fc4a9c639e797eb975cc9dd8ef7cf2bc70e5a57a88df41027d0efe672966cbdd13a68ab88cedf9814c4fee161b7bb5c0ffb12a8f20127458bacae0be9b1f035c40ff7ee6aed68e15697bd4385118c3aadfc8e2304dd2245a97b81c219ba828e9a7da722dbcfa33c6e738a0dcb035cb016cc32c72813a72784e32309220eb0ef1f0b9a27cb3006f1dd1718b0d775c4a87dac90e591e1640df7498e0029a2d453b4a1c9a48f9ec13af787790886a01099888b7bbe59305ba81c12b3c3357f724ec10989f2e2f47ea3cd784ddfdf358ea2caeeac4f5d2cae8a26b3d2450bc4c1c42da993d5f645c3707de41302531f9e768ad4dca17bf1af96eb341d8768fa8f17ac8777d82899bec8ce94ca2446376ec936a21a6df2e488089e15babaed43dfcbbaec189a1f7aedd484426377271d0898b545c1ca6917b032fa9caf4b020c2476d1fb40e4e395044fca7bb26a650789851f3a08e0fed3d71ce02b0fe5631847fe763e6a93861178e7252583950c0e8dec8fa99aa72ddf90d492861d3c4e5647ef294eff19cef405d3d183b837723b0966cc7d044df870a0f1811ba83185b68ad625b8e32563ea121bb7e9cad2a52ce11e751e12a7cd44745730e17f7cf359f4bda9a4abaf7e9d830754817a80b68718e888a8576d1c8478e5ce2856a7cc451f2e66d0723a93c6c029c3340b4ba1cf5841d5f6ff04a32d7c201bbf978002a91569d96e84d51f7eb86da4b53fd83a11c39911c991824786c8101045254e42d183af373aeb921b5849763be0e5f7c8833b931426cbdba0a6c892bf8a61774c668376f5a040cf7d2278d0699b9e6444065052d7667c787e8ab9318f2c1e439db6253e160540c1f3f9d09c6e58fb300aa65ad21ababfe971583ac0b8aeeb112273e710efc5ce2012a6f28e084c9f4c709c5fe5f668fd84366d0e4f560ee558fc2a3b91e1d777686eb6486918a81dda2f0f8506584232e9667b32cf8a9a288492cea357562803d2337868cfc33908384cc0e1ef5f8c3143acb1fb6189784429479f4e420aa8c6b8fc9be4ca9ed21aa8c6f53a83c0bf998e29fb4024c5bc1ab9425fe77784f50f9e7bb2f8537fa29f4af49c5116a68b588bfb4e4d1437cb66455cc90f028282d4b4ab85ea43695d909cbb1028defd85478b17da63fa3e11c5d9a25cdc36186752a2376be328efc96a82f131f902c90b8ef80bdcd0b95b439810222ac2465e6ac24c73e36408e69d5147c9daf829a1d05fb30107220928fe7375e9fcc0c5abe23c08beb057aea1e835dd1684aa948445114e4ed2eff42065ff49b230f7ce1edf3c4fdf1e45153d776c4eb2e6912e39e322a985f370ebf894d1cf7ea4a954eeb186c9869d19616fcbeadd94f6e0ccbf0d78f6cc527874366f2d0b913589f9c31226d754b7ed51acce1f9f77db7f8717407bec6046973d7c1d11a61cb2a006fabacb6aa6383400a0d75e27f86da22408e1b12744cd5f6343dd100d1448d447da477e037cfe67a3c85d0cede216cb2f6bd7787ed65f6539a91dd6a14b2cc00e15b1fc503bd1e60f59872fab5e7d1f048148d1cf65e71641c613508c885164b38a26e8660cd54460558bc1623709a226a909c9568c32a68671d4b60e1da696922f259865db8a2a2aba816ec228ecae592ea21f75f073328e5c8e0c88e97df82697f70ca5a0639c9ab057cf357a4b9857910b8126f746668a697bde3944abf0ff9b6b0a45527e4eb777d0bfce5d3a18757cfc5ab5dc474c81195b7a0c4f83250226b104347cd0c01fe7019bf279b085b20cf8bf64ecc820c7292a4a8b24b837a010efede890dc97e5850fd5b8881adb14644bb1cabcfd8102ef8b947359c15dfe55c5335e55d784bbea5b889bf0c34f20795b629648200fd467d919ed6877c3d98ee2b6879bb7319fdb548f03985e0afb0f1fba38e360d1f36c2d9acea0812e13f71e65a3d8586286a98e5b401c27f761901026eaf46278321e19370a0693daafa36e6305eb0510fba1272f077fa4623d74018623e49a84268978734e456309353a303774973e83ed45f17fc1603856c360736dca6956090afe3c32aa343103f5bdf95b1175770800bf4afca991c28f68dae0d42518d2807bb550b2fd2f1985e446af532efb0fa5ccb7130e26982780addd4a585bf3fce0c57e571a96412543178f2e2642c7d466a08e27cc50a2f6b06c0678435ba2662b9906f97a970d14f7a3323944ed89d5877bfcdbceca75febd9671863f261d7d3057be3b8c5ab434975988a852f85d56ea84908bb727f5856ac51e9f2b6dd61871706dd36fa2fe6f8b23f9ef5a683e9582bf4226e0c13d25fd33f602ba423413c61a4f8c89540567e170d2222f8782799830acd753f0f1ebc646fdcd075134f14e80d753eb21e31f35e2e05f83e0ba5b13b996021a25d24c02fcb763a64404b853e30053e7c7d82f4f7a2c71dff4ad3647e3200036e033073cd6219f2f9f945c5a467da4291507a4ce8e35956d0463ebf7a8fd32488a8798999c4338e3f1d1050b95c333eee1aeac58800cb303183d0ae7419d3b9bb8d4e9bf9bba50271b049973e23a5ffc967af9d74c4b6edc5f28ab445ae8141468daebd91c8c48960dd3e24a3e53c3a11eef66d64bc6c92ef2067f8ee43359544731e72a9551b67edd58dcfb70b0eab2b2c5d33399d3dfd260b2f3eecc7b2e14b74bccc6f6160e2a3e0007b36ed93ffde5f0e05ad0b9c4f9c0ca93ae008dc044b55857ba00daa8e083e3c7bb34ac6fed511f58a411268a851d9c9228205d4756d0fe423222a1db50e5a97b2ca23b06fd3a60970548c76e919bdce2b4cc0c66b098279e074de2753c9bba84617b405ba380ef91cdbd43ba939f942c733fc813a8b9fc88c1e2dc7ab7c29e70a581253176b6b199a174c28b742caee5294b468e38b1634b1efc5d4b1486e5c670937aa0e2b36b6ad90e8c9a14ae9e77db34f6e8477f590357208f1c7a66226481d7ab32885303266723cf4c7dca4eda3f36c188b2df4af4ea6b943aaab00e44e91130de0160ee0706a21f07acdec3f10d5014333564188753998b3855eec820ca149ed7c88432a104b75cb113bcd8d809500d98b1f7002e46482aa06564ca27000e67d31c2a6d0aa45eff554452909db314344700e0a6a713ab86b7d41b2268f243b8f2dbd83cc4627f1260de641bdada5f760a8e3a7a436e596876b6ef317e6ab348914f773becd5dec85ffe34c2ddca71bd734b9ea29a9817ae8d45c8eb0a19bfa66ef1541cc90cb0dd32d1873d4c3bd7ee81d073416e95abac6e42f2713d89e62f73e3fbd9c83c6520b63303960b2f794ecc29f22821f9b7bb8ccb69b0b0887b607d7246c94b46ba3286f3cc7a37dcb9368c5f1b9fd2da0ca146cc6d4c9b58b4ce22143785448dc0e5b4d75c7be56a87f7c89e05c8e32553f83763a231b8eaa32edab1f41ec076098041271e2b6e8c89b4b25827451e35edda7cf39909462a0905ad4ca4f5f2f4383f76bae3d186ef3c1b60585f410ddb0c571a476f1b3b80204e6bb30482bfcfcb83076d01d6bd6bf4346443dae73d6d2be88a36b27a175ca82b96656d0c190c20f6c18d32ee5bb0f05f272d84ffbddd9e0fdef544175b443fc32e79b3b37d3e1d8b8d2db77acb849b36bdb80b651f4ce288571dda11e5be5668c45faf320f16503bb08534c5f908222547952ba966f5e7d920e1e862c8b03b3f9d2621b337f8b413b4d714ecc7b4b806df19367c8c64cc0fb7f61b489e68e2ff41ce0932bd3dc059d8e6b9da382dc3006952770dda86b1b0703b3e1a2680d46ad9828fd26299b983a6dd5e5c73bccb94e5760ce67fe8097a0cdbc7942690ff3fd269747be5a62ba8dfbb71dab142f1fa31626778227005dc3502b830b3fdaf9fec75f5850756bd81c419d6e3b6205e4e2b274230e057953a66b021cfaee2530006a732e6899bfa2abd81834e4129e9ae3deedfb123027b0f65a1a2d11230ea80474b7bc054844c95c992fb3a9e0481b8a5d9598500f28f9044cdec4e52a6847ed2b6a2e95645b984dd2c74640fc9dbe7246b258dd96588b2d0e2ffbe9cac851992cde51d1769f3c679dac83aa196d2827fb1b22aa47e31841e80edff5a0b464122e17bfbc5ddcb0c8b8b936331964c5397c089dca5ea32e1556d62bb0f8be9801b98218d0beda7f15c97884c99fc5782112093f587420dc5334625c7bcaf0fb8d5caeedf7e0500d4568e2d1ad13b280f30621a569f3221eb49ec8790a89871e21e6bb3ba29d9a4a4fed30654f39e3fe19aa7889a6a147d8b64b7f09406f389a752b581ea926a3b235660a2c2975e0dfc4ac7b0446cb8694126940b94061009f05c13f9f1efca154f1a74ca42c134354d3523f73a480c0528bdb79acf1b1c4178310881fdf4a3645b820df3273b83d960f5825f631a26d46393742e154acfc4c45eb6900269355f9c1c63d90d2d371aee3ed202adb543bdb6260b87b858551a45e432b604bf9206d1731d4332b232c9350f022f550f520e07988ba177c2de22b006b4ee50fc8dca5af00943fdab51c7559289d13cd2338276ab120755026eb5025317c8ca7dfaa59759043f099c52a0c8c1cb2a98dcd68bdf3c2c5c1f8ad40dcef61693b86adfb0879d7e50bcce3bb19d6cc25d0696474790d9ca3a021d9498073b506b76168f2163a4e7b83052a4866a737cb208844d9f11ddd49482245d942a7bb20b0daba44b5eaec837a4baaba1ade92d528b6dd5d611d7f5048bfda6ae694a0074a090c105842d88515ae63535e1671d5213f1e5b9be9e1134a14d228aa34c6192fcf427d3fe0ad169ea72789aed6ef1a74a0dddc94c0312aae0311c573c5785343460d0cde33edd67b8f970f8aac176db8597ee99e5d909e70d113980d78d7bde1c03d64ff5145a8ffb60fdff638374364860b333a419b06a2b6a4d2d7651c4b04351a3d6316a5f5022a7a3546d198490e7c109efb5bd006870d4df38be421e91ae6888d3ecacda4f768eb578492129fd0fb3f5a143d9e5e97e31c540bfd2b35df294c665557cacee29a70b306e35c97246ee5673b125490dba0181174e772f0f00b44d644935bea6e08f16e8f732d4d2ff380888da43acc6e621da6404bf4458b233ab6b13e1dd71fc3bc705535c130c2e87830df5f9e0f4c28173b441c2a5e11fec78f6dffadd7fd9a476a7913f80a2ecd54efc2064b2d4f8ab83a992d73f648aa270341c5146a7b1fc8e7cd73077873df7c4e8196356cf2e3c7b3e2591c4e35ab970336759871c93aae43de78302f2adad9d5e1b5d2afcec98d2d1cbaa79d72dc94f80ba0035bcb2e45f34391fd1ea2749c16e1e0f33ae838df67e3f4c82b8ec1bac14379f7e2603bc633db9364343dd26dd3bcaa7fb733c211a925975cae2e7b0007b541b4edddaf046aacbfce1839ae2edc08aff9562e6cb69e72d68fa66e53dba8ef1e187428ed8f70dc8193b584665ab77f54a76b7e7b910e96742d4cad08e4fa8ea3bd480914b7a0f9dd52b86ca35f6cce0444ec6ee5af62aa95e865cdad9106a9454804f8e64bcf0f788a0675956d185daf5b17411a09151707385798f2213cca34dc566c1d3ff0f70ec52df12bf3d7048c85210d4eecbd22fa847babe55a219767ba15ca0fac4bd2b8db499c31dfea5d92fe5ea5f11d3a031aa2fe4856923a02c01bbfc2ec5256c6a91f34f2da1f3dc3ced9eb73d590b7ed7626d5a4831aaf5f1ec93f5a15a2335b2c066409d488e151d509ac8df79af68ae3587146ef22a2049808e800de8431e7fce89d0d9a365cade3e5c2d7ee8009513ea366aeed8df3d6c83b848454eef38f5796a9d1314f2d0ab7d39fd7609c87f8cdf5f2105ec41d2ca7a2446e93a41e4fc252956469169f7ce4b92961a226edd11414fc18dc6a6db020d91f4d9395abb3147ea4ebff9d2311e07128cf5cd6d24150d6f547a7dd7153b4b6959cb59ff4dcd75010d728443da883d28b4a3f6577f75e96e4be72ba726ab4f93492cdeae98dd5a3bf93e29b11b1f492ff78e145c9a1a6efcc19e9d2a80fcf2c4ca41b0af7d25d028308a820d8d21c6fc2d97c2bd4a1ded9597177fa7788c6de371e84daf071a9fbeec69f0dea006d4bd629915ea36fe83a3995b9e50602f4502f35d79b9c6bb45572a2d15cad756239425703d69557129c15815ee1c72f410ec80c0af1417d8e68052871175ac1c29caa27a835cc9c3b8df15baac055e58f808f17e967af8b9b8d1915502271c9599d1e8f2bcd336b1f9479279352722246e4d6b84807e48873e63032df27393e7ff482f764d053dd99f43689daf1756bf5fc3d3b074ddcd653c7f89003901e2b2a2edfec84cc73d6eadfca4e0515b65ea9de12c6c5be39bb3eef0c4c939ad863b70cd3aaf1924ebb7ae37fa762deabd70e2d1e150b4c1a7c7e3e8c25ec85cd1930bfce18cdf20ef5f9524cff33d22f1ee12630e28847b8d2bb546cc921d57dee3a2464370c6697e7f63efccc961bd401fb29642cab44a81bbfcfe12b31b3d6df1890138a6db4af055a2275eea4669f9896845400373477a41a2026ce42fad866d65412637052b6607a82fc58c45a84a3da3eab96bdb6e90695dfd5423dcf75c3363935cf89d206fd836ca901908aac021a022adb479ab9ece02caaa7d7584acbf149dbca4e1a5292f850ccc26809d37c61a27faa7aaff0cbe7e47083825778135ca273d2f163a3bd0787d5a4dbc8671c15305bef354f5bf8bf1f0fa0fe6db5e1e15ac3691c9aa81cfa9e7d4cd8acf577798b41be231b69f7d43def58a16757eb17e8111c26cd4395f3ac27b8b097a69dc4a45a5f0730298fa966c24e2e1bf52de631fb5ba08a1d2d659a3cf6b683c803d4643c8aee324f719be0d57c889f8d2040b0eb958b914dc3abb63d43c9d6da69c5086c1188a13800781b91950346ab533cde06a47bd0a3c743075005453436dbf597cbc2542b8a766e78a493283f68804972ca7a1706e0dbb17e081e9e6e3393f1afa25a380c0b37e2a2e34bdef2024ec0d0c88e14f139d2bd912e20d1bf77f89e73ae2c6f9072572683695ca259e5b580db9c19224d321640630e024660efce30fb67334b4ce92eabc5a79efcdc3eaf85cb60f04f1765473b4f9f42c3b7a277479447d3ca5304fd238385ff4053d52932b29fb51075ec8e4193be0e5188bf6c785cd72806ed880f59245e0907f5281ef40796dc34e4305e244a33fbcd5b78d2737786bc75590942f1e36547804b642c33c52baf9a81942eecdb0bfd5e6b7c80b3bb2587b9600f7a4c242c13c511e70132685efa8e727cd3ff0be4bd2ded3bc1ad6f1c4bf6e346bd14ab4ec61cc5df8ea91f30ece90907c31fa2b1c4f4f156a60105624771ba05cfd4ba5589ee10af1581b1cdb29feea71cac3c9c99e3d1deae0ef7fff13db86111b30bb7a492a15049c740cb2384f89e458ac31a92356f44886cdcf4bb40ca99acd7f2737a9746e85511d0e482862fb1874b6f20dfa8591183d44a2efb9df5aac15fe094816553734ef15b016d546c55233b1fb8645b58af06197fc2aabfc2ca81340b0c504ee5f00d0ffe54a27e115fd212b605b71274a20fb7fc3df2b63a77a6e73c4285038a7ec5cf814d461ee4e324681400cb82fe71f86e75826a51e1fe4e265137bfaa80074d918a12bb2c64ea80a5cdf98d560bb84a26ada9c17b365c4a45356ba499eeb2e45c88e9a0c79e87e1a153149123ec0a267c15bb4644725cff390535ff1ee921dace5b1224da9d37214352bf8a0440336eff837dbfd65c3c04780aa9f56bdeb766c97342d1dfead5135c8891384f49111a89e2109c596e9344307eb1b7c57fb809b2855a8d5c1ef55f73318ea51095331afee9c5c1dfcebc985c2d2400e93519662d92a94ffb63764b3e57d8065008240b6810f66ae0525b512d36e94db02d286110a61a73a2bd21de2e11afbf101976e03619c6b77aba2573d15ae5168d374fabb3e9a5b31041fad8ff3fb5d88783988f84008c31e449ff118dfb0710cd8d1db7c689f5d86edfe05634216e7c92a0f467dc9a6063dccc78ceb35895c9a9395e5d23d0a9d5c9697e6067778aeaef2bffd7d463226afb5f57cc8ce7135f137d969df826e251d1459431daf9d201c0d7c6ab8a47b0f67fa900059a63a4d7df38d75a130fa082f5885460ba99eff82c77eb660e16f41bb62758ebdbf68346af3aeb0459e45d0e3f03b478abbb7f472eba9962fe2b29569d5a2669a9a491eb0a9c3d3b287e22bbe2f81588aaf761cb3e3b283f6533c8a83fa5e179135592e9dedf731fe8bf8e4b15c1b0dee625b844ed8f955c6a1a140455da0ce1a156c079c1d1d6a225bb439355f63555d777fc0b9a9207ac24ca7a3b76f393f616a86063c6bdfbd4fe2234ed7370c7d7322135867fbe49dbfbcb441be0ca2f95dcbe3f2662673c9d06792d341698a211833c118779be53ce019aa92aeba9acf86fa5374d0acf679abf0720f815d357c86741758a400e5662e871b31c1fb786e8fa3cfe66b33ab8d5f4692119b23795e41d0900131b1c98d79bcefcfc3074e5ad7efedef15580a1a68de2700eabab8a190fc2b7cc9dc59e1153bb9d2cbbb0d88b7709243c8410575f2741d98e4b50048e9157314746059bc61853e546c17a314b10a7f2b5b2948b6cc3df87759045b904ac0f0b80bcf983d270eab84df7e3765f028c9edd5281c9ef9e0269d45d11c0a92795c53bd52646925eec7947cc968c283cf20fd1f0279289e41fdfecfbeb552648a1d14c06fddee92378ea5a8efd5d7f3030841b8880c77db2012a6d7082a7d092a808f157834ef1718e251123dd4faae2894dec436b37e3cadc8eca931ec5a946c2bdec63c8ddd8ac4f7051203eeb7e82197fbee24f40cb9ed0b44959f337192f7ef24bf8d25c9dbadc16bd2db63fa8b909ebf40700cfccb27720ef627f88549ab3e1ae8ea0274bb71648c4ce1b6a23e40e6c61c363ff28cb7a3b0f2902f1c8f214310fc6fa59468bad53a10530350d88e54cd4c6bd76b83f494255f481474d1aaa51e9c125b2153873ed84b3ab7b598ea37caf8ab73cce111a827ff38c3e1ba958bab3e87b0480f29a9040caf5b17cb0840a230f93157529c8eb4ae96336703d58a615ce763dcd8c56df4edcb81d0a422ce51d8a2eb341cbb56dd62784396cac2325e79d1141e981b67ee4bbcc56bccf36410e64f9985b894bf004ac33c4a092d9bcce420c7414e3f4c3b14060956168a12f69a3a01c97b5141547f6b62f83e1821d86d0f97cb8d1a32dace842e7aa4f4b834bcb3d737c36b8f12d8b5172dbadaf1e9d02a6f3bc151e9606bd86d8415272b08f564aff67549d3cfc6e5db2a2d413cc7de79d628fc0a2cc46c0c184d2e272be8bf531fc6bfb0c787ae98466175fa81597505346b50f7302f84784589fa5827d41ca2dfbc671404bfc5e5641c16c0852722995ce0e94e39be50d201071687b463208d51653176406f63e06aa9417643a89ab662781b236df58b6a9cdfbf54caf80e0fcd3f0d257972f1c61d08e9768555e5081dadb63c7e37425540a93473d07d54c52c0880469b20b69bd22430f9d32bdbf299df3c9ce81f2c47fc58a6f82cb96ff9d9273339c31298cda39baaf595a7931df7615149ab05f0bf8a27480c859f8daa4a21658c2ce6502f8e243a7e33ede8c19bb95f0bfa7e3ea59c8b39aa03f6edea6b56d72c5d5bd28bb32186705ed868960350d4ad49f7dd29ead38aa340b52d41970e4dc4f178597baf572e59b643f3e7ea951bbb526f4c4f55e607a1c4c4e1537d5990017558f3863613eb636c56a505e492dfb7892a18bc44599017d879416ab67b98ec4d1b67ba3eadc7d4e10f785e64bdf872dc31fae0ad5f2906713b1868b9ae9264bee73313d872a39cc955394dc967230c138bd062b8df84b36cdaa69c534431224d321a67c3b711c5a0833cbcd94bd1fbd75d3b592ae832aae7a1d921aba0b1df2fcb2eb70d9a3b9e75d8fd53ecab153fedb490a74b8e13f2567991121954c3d85afca7f99fd404ac9683b91e4bbd096745e68a07c732ee026c8ca98f98ec4643ff879b49aedf46eb66bb798adadcf0a02ebf656225f91df0f62cccbc1313b5cceadab6ee3bc8a42a9201e8a6313a51f50a9f0926eb68a6c7b8911c10c2e25f528a1440dd4ce1800aa32003008dd3e64c7cccb19ae7d318d5ef84324dfd6b22ea39473fafc4a90808fef41dee8465f93cb1fa6b0842b5b2b726cde9d73e6b1a1db4924a4e207cf86355fd4e7e02059fc2a009389608dc9c81f0d307e6113abebec1145bd2e3cd47b03c16e7985e8d8c8bf3ce51d6edf8f7da33feff92c3a4fa72c909dadbb633374fbf51386cac7553a457c7807d2336c5b490e3310cacc858d5bfbc513406ac5ef557258afcea4c3f8fb558d3dc004ca7ee11467b67afb28d7e173421a2800dd58beb66a21bbb517b4826bc9c75ef1442abc5dd75fc2fe680390e45acd058392cc317c050f4780c521d9a992fba2f413ac7557bdd437ca11226fd5a3d91416266c05e60fd8b6b7553214e55c2cf8824c7107fd2561f068ef78571f61c872d69ab5ccd0e86745bf609bbe34664c2a38d74facafc49da1958f26c269261ec7c9cd61f634913b5e043c7c753226fe8fd38df64fd42a12217e8b46789f9da789a469322911fa68c9e877fb813940ab89b9cf52af66f2f3312400a87143fe727f7b8f9618320bf2cd54c7b956a4d79ea1cd622242c37a6c89b4642cf837a0168d46ace58d06d331f4c6702403bb128267a5e5de1f156e3420a977829b4981d2c5c35ecaeb0d369f92b4715112ec769bf26fb1d232fb97ec84a347a6d4fa71b080d137425f2a97c24d07e4187db8bcdf98e9c95c08cc621402123d5a5c2c8e45d7b88d581d19d3c52613dd854cbe4b1c316cf5b69074a7f618349fec541a5a08b52615e8fd3b878b91ce4db69c651aeba2bc02814b7ce3cdc3f323e4d706d2d954ffaab91c6bf45d12aaabde05050df572e9bc797614bc2c4cec4178f5edc79d7d4f44d2dd21c993a1cb4a386d519c99a089bce4d0a9815cf30bc541225c8b8a5fa158cb420ed7afdb8a229140d3ce8b229976da16e10aab1e6f1a6309fd63df7750fd84f5e603af75d362c7ff6c85d6587b9d418b17dc54eed88d820ab0902aacc6d1cb19cbc60e7e6266d8afbf6c6af0a8c23848814b4ecff93d5dac43f5b7fa8c9e878011e63d02b49060aa9ddcee515cf430f6fc100cf09f3775baa75a4d0fc03272b4c16e06020fe456027d92d089d62f56dea934eccc644865d59e35e2be41b25241d86d8f1a18c5936f94bddd213a296e70bac6225921899a28565869e0d0f1a498e96c06331b8789dee4e7c5c88c3e9f44751da992d5e1364c41847fedd776fd31c1f9fa061dbb21ab805b64e8df2abb2570ab9d45071437a75693e3526ac6adaa156f18ca043bd07f7b3517855c875840ddb08a56198b3ac94e49910ad1b67f675c4fa63f6612b0863f94e267445d62bf4deacec53a888afe101ecffc5f172bcb639584d050458010531ec6dacdee27b1a69c91b75f6ec491c9357d1f0658ad095704ddf20ecca12ccc769d59dcbe47b998ef3a316885b2b7ab4ead20f57fefd94b0774710111cf8774d70d179e6fe82da7133eff9d69756d99a6a709113788c30106f7646e393dcd34e57f9d46fa54da5c1a0ece1e6da2ecaffde5a267ebf0d482eaffa22088473473d32097c9f61189d54f24e148b5b7e005ad3be3ce4a4e20a3acca9fc41cc9347c64f82177eb2d0d4b5653b6ed7398002cdab1bc8ad9227923f3340adc62b3896553dc946fb2a808678ada92323c201a2a0e6052b22619ee64acca86e5ff9b07f8672827da3f2199a1264a7d0728bc4e887509e715b2e28f4f5ac6e49b68d0bd849427dec3546720ef97949fe3c58ef200613998de18debc55fe0c362d3dfe26ba463c3ed7239cb32318b4c9c8dcb1f35fe5fa61179d129107a892dbdba2d5485b9a0a930ec59c18533e265b4672c9b276cb102d45b9327367c3fcb4a7f31ea1157dbfd485718c86abe0c9becfaef1d97a5746faf57c80e0bcc668acfc459d3a8c5d7375d8f7979908fe14462b51930a76b027e814e830bdf5eb0f4e864514879e3d8b7c77a1e98bf3f10287bf1c345e20faa2dfdcafcf84d72fe101a7a10f9f4ee80463164e1e955868ce57c293ed6d8a25535a91f0556fbc11a765a38bd3373dd4d8f7fe137edc564b28732728b0b6f8c7e43a4c9980ec4befb1e0a3b585c97d67e73a3369e6971a338780b5a51a5fe9857800d26d160c06c063dbe822eb134c13b7c7e4ae7ff791173703755892db79a3529fc2ef96b2c47d0373800f36246ad0bff7bb5230b7b1028dfd9d098e8f7cabe4f04027d080d5e7e792a6ea632f8ec375d0fdd9995d0536510f453c1aa4d28426033901460cc0f0611269874d3658e942323114798d2740d08945c8a4c7bdd2aa1db948c7db223b6b9ac71ad8dc2d029c440bb4776bc5c3b0162427c025f9ae9a3d9053184b6e6591d8554f86a33dc3e16768c333db0a737092a0440f800e1c88449cbc3767925d74da4a4645935e0efa167e54f5268d6add58f2772110802a052c4a3bdf17928e1b0f84a512fc0dc1342cea934ac7ddc74c71587c4f5af5ec14e9d26016239054552ee23ecc9d38c6c1d9213fb4d69aadbe0e2b9d74aee74a663d7daddeed3ace332b981c66ccb338f4bf3ab9626bb096b83d4aabc06764c7999ccfb13a25ba015ade582dde377194e66b83a3ffb596c0bee53f42dd83f647f41dc5a773c2bcbfc60374ef32c6347e7eb7691ed9a6810a37c30512b1922c9a77284b914a3111c1383853582279e0265976ff1add5bc5dacb94ec87caf0f261e85a4bb69da0d3b72b3e92063e597e4eb465fc4667f5fb8121b4bf415986f635271ee733dab21e05449fd55f35e5a61a662558e48ac1d38739c0c95283420e645a053c6f0fd335b5b63d4cc3a20b02d94a1e33af108cb7cd51b0146c4a2203d139db92be463036fa48866578cfc7059fc00dd65a78a2bf2f5031ecb78bc4ecb623be44b99bcde1497299a96a391e831f0556ba22ea348a0f252ef65fd30c2cc1ca4dca724d9d63487ed8c38625a36216da0e1f31694a9c2da615f1e1a9e6226fbf2d8e18ab971c91ea18db7783da1f19484f4c4726b3354444ca20a2aebd5db251e87e637db39f7d5609eacb75bcf7023dd35f327d516626bf9ba742efd45b36eb170c3eda5d9256b5c14c4e97977e03fe322d89f59d87aeba2690ede01c74842e410cf07144ac5058a2be68ed5ba6ead1866a870ff262aebf5f94dc28b6fb23abe70078e780478ee9f5a30233c63cbeeef2be0114eb7bf47e43f2210a032a97faba001e58086a615a7f8579e0046dc08e723b5e0e5358116fce0f6636498bfff01885cb61911d5796564aea85ffd3414f97326b8dbed4c6ed34fd4c2cf29d23a55bf15b2290e1ce001ec0d2cd5a3cca073ee178902ac119490cbb78fe767437efac127621404cdc686ee0d716e2777c579a38481769dc56d048bc424bc67abeea1233d56017ede9304b973e5f94b5a271a3c9a216e10190e40f303ce4124596e32ffc46547a5f5436fdeb13722e568b59f85ba64745e9e73a0ccbb7b254ff20eac67573e20a9af93673daec3d421bfe8df5ba5ce4bedc51b941dc318dce278086d4cb9cad582952edbebc9b8ec6a3867096e5ae70d4d02305853f0e894e1f05dc9f2fe1edd71efb51e6aefe4a6cda62039b5034aa858780ed2e5dfaec07fcfc1efa1c7d1b94c8d3defdc60a7bcfc8e7a86ea958778c2cfaf1bb86f7ac5f402b0c9448808c8607dc042cda206e6d845bb4620bfc90aff4ff37b47f1417b1f36871c45eba91f5bbcbccb8cbb06a0cf82071d1bf6e62690582cd1746a55972d7a036edaa7210a7791267b13aa0321ab423014bfdfce2d744169e35d0c5402463ec514c9a99730661146d0685eee7d9e62adda6e4edf371d30438dfd591b0a3312b6681cfb23c4e7e1caee90a759c62c8770f634a8f6c89645c2e9d05898986d2ee1897169fee4833b93974f1c57d36879f1bdcad25a78855ca33fc9c5be4b202486fda7754c31c856434c447db54a86366b762f2213a49284a42c24adc35aa2127701209fc4158c854a002fe248fcb2388093ed12f9046c9f327cad858b42f1469ea8a8196f928b2dbe9dc497b0296415d8669a3f238989f494f29b8c689b26798ad3575ba83e0fe5c7145415b57726556dc49cfa60c42881ddf31d3dce31a95335e34a9d77bd2c5adeda9ea59bfa0e71b55e53fbe3c0cf3b40796afe9a8e4b2b01e14c1d7f4db6d8ff7bec90766be53da53b10ea13d54fba6af6a54652ff95a357048184bcef0657624ab4bff65e90d8e2bcee951441ea59ed8c9f8e084f18a31be26a387676e12b70cc63b33e808bda18debe03b08afeb92cffadf8a9ebcf1dfed6810dc59e7ded511baf01c939a9e8e32f4ba63e13b3c5407d2236d926e95466cdf4b980a60d7ee5ca6c96cb87cdd814e8bf1ba0d0d89662496bbd2856928b5e36ad00b601874fdd0acbd628cfa352c61e5a39343905c286f44d308be9adcc57ee6d5be2fbfdd9f0fff999736ead406139b96dd138926ab767f6d708abe2e62274ac46214ce35b515daac871130b00487911267e687fe4f711e205b0a29efe4c975ef823d28f809859a4f8f82eb138ee73ecd48940db417a20dd469224e433ba6a2a1c7c5c07a4c96a1daad47f200ddde19c71786b629a87155856f248954a644a2de3131dfad69607ed3904ab0a195b2352c4459ee894eccd6aa3d58a69cee07b04e941c38d42a621ba66bd6a6f0786803204ebdd9958d7b4cdf1d7a2db7a4ec3233fa37cba1c81f4e3140bde6b69a788c056ca638fa36be2540a1121879b8ded16fec5858330f921f3f0030b6c1ac19f3489027d42b6fa2e2fd2012eb7353815d17169c032a85cc7317d8569a46395727bb5e7ebe0ca07ce0e62a47b134f661998bc60554bb605c1ed5975b8b6c63b15dcd9100e90e9bc0073903923fae28e3f78ec3b80f038254513f85440d3918de3d5ff8d45cf71b8ed6ba932358f76a27fac74eb612751f10f80cf8ef2350a519e8b63856123f24fd08a7f9acfe87d9a9df7f7e39f09f97112f78e6f9506f8803ac4755caf6c47bf11fe7e18ebca4f05e4261c6b859aea234a9a22be414ca0c5895e51180495195168d0e229455884f7080301e865f2ec30e61c3295214a59c8aa657b39a65b2ac26148db88c4405d65c93dc87452f554bea2a280271154b4a7b5bb58e1ae739423368779ff69d4ec4e83f1f9df6eb75c68dc6138f5ee4c8988fa00f2d91407fbceb868d227debe891b9442837aa9d6f1b093cae01438c8efddcd8de6187fee2350262d09dce0853b46758ba55f2c6b904dce99df54725ffbf41a6c7bf56249b7489a400e1bb12540be8591fb9921606003093008063ee8f9533b0b4fb9f4088b1e3685261d6e417a194cfb493eaa53b81e3ddb21c8a914114bc3b3c12e71e06eae803c6da881f200c68d683b5e875f26936acd5b45955237052bd0247295f46f2461ab97cdda6ae03618efc3dea94d5aa1e17a643a14b2e5be310118c9e621a575d7dd6291629241ceaef54d127da8c74f3f2448511f370f25ca42671943fdadd9094f66e6274c3888d156e9865871edf943c5a1313e81c78624494b0de242c79a9d4fb3562d99b122a857862bd7e0986f65ec96447464b9d860daacddd7d244453b5313022ccb0f56a94f1c3e7a024473a4c5c75591e6eb09a2b8d9424e4044e6a00b8fa6047cee257c8fbfed7b727ed88ad7fc24384099a51bf27ec84d9f808beeccaa48cdc6c97c8776b5b300e998a814ec527a1d7bf71b5207d1dc2cf3e7196585eb1a363519c0604899f37ebc59b071a678439c211a943b70e33a38b2b0ba22bf48530db8a39929e98452b4f8479a4fa56fdd45f67e8ea534d82b8a9aedc95beac240678d08826ce9dade4e89abcb5a13da1ea5b03c9789c8a054d072ad92fa0783f53d0617b625d7027dd4cc820c294c0abd68ec43b87dd4b00d979e27a3bc2848b22be7fc9925ee6f5309f23da73df9497626105a9d30351bc8a7bc574e4ac15f0024bb2589dda4527b6d94ed4ec5033386a7750954a4807e43a53943c6e983af9294536a491eb9d63278cf0f15574147804c8005b0591d0fcf7c6d03e07a8f99e01ffb46da10dc1502f1bdf4ac8b501af59c03e584bbc6b4b2eb7bf94b0b24027c540997542c9138a5a842fd0f42fdbf1495e334e8a1531135725df7eb72aac91bd08daec3bc37836ff5953371036439b42d1f4a3924e5bdb7e7046b04008741da999c60e89d76cbef5cd1bac49d0e36cb128786520d7e39d9f21f13f4b8f1ff9e73a5867cb52b7b4af32400414bb2cb009a239c82a6889c4c7d519b6ed36d04a7000dba2020b52873810aba812cadf6d72be6099658dc691e043400e0b3ba8ce1711e0fc8b79f6ed7c0ba7a692306dff26bb85b601d13bcabced52e56529672d8e44d770276f101c1f6febd65b65ad097db94cfc75a4ad9472521d3c4cdfd93ff692baaed20ac141645d600a8f55bd0ed2e763d877a690f20df2e2fb97fbc5f1ea35e92605918bf3873958455cf586acdbdaffd7a6f2c109e5d6dd33df9d7e293767fccff97b1dc13975207331cf82ed3ae8ac741833b82c4bf68683a3bdb2ab79a1ac184cd90cc916802bd16294ee031e7759890a6ab0d054b0471352fb23ccd7abd02d545c4740524808e99e8e30789e6b5f427d8cf79cb0b1e0178d6e6b25f2d90a71509ee9568e471d7164d460ef616eb802f77ec822e7c7cee02aecaae85968e621f4a816cb04bfc492a527c55289e6165fe14bc972206159c4c7b025681da204d35cac8aed15b9ebb7ef1eec83b433c6499d7bb484099d06d38e24a02c6e2ecb73055cd7f812788214ad28529a2db72716b016eafc94a707ecf8723300ffd58823aa267ab6f10913169582f64f2d422d3316e0e0e2d30b42954d52abbe94aa6d0828b151009a13e52f5dc31f1d834864ce4db32ed16667bd94a29a782e5b1b1365524da5bd7e3eda1a1299c65ca847c349b1d748a1d01cd2e4059bb35fe936e0e6ae51c0a7b51ae75bdba8bab15672594119d64901cba1bfd2891e13570b123149d715747cf00c0c90344efd9637d649182957c4db317dbd8e78491d24ae51ca36c5fb7fb9f14d59e71e9a1f6b1ecf59431153a61d8d9801e5422e4c7b486cc7e2ffdc3edefbffaa83691418f42082c76bfbb832eb2cf25b76046665b3c2836ffa409a8a2990d6bac1d475efe15767e50aa9fe0ae02797fd004d9248791913d49bb6fcc7f61d41fe9b2dd273dd41ce8732111425c7403cc89b7a9ecdaa835b3b1543da033761c2992cf452cc7a39a015f4b1d033e0257ad9e0d3f6cf22751d680e778bb7ba81d17d56b23c88d6131da60a664bc008013e8ee5c50bf76eb3292729bdd32470150dc417ca240bbc03ad7e7d6c50349a9bf95cf7c1f95c14d9ce54cba7f0caa94e6aa8344cf41c24d045fac40de5a4cd571220b9596be5a4ebac9664760a64397ef393e3cf2ea3007a376a2cd56e6be5bfb0e2354cba0c24e0bbbdb6d39849805bf7b8e58f64a54c627c3ad92cc1b2cac6c49723070c19b94e6ea2f0a5a7a60216814fec15318df1a</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-surge">      <input class="hbe hbe-input-field hbe-input-field-surge" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-surge" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-surge" data-content="æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .">æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-surge" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M1200,9c0,0-305.005,0-401.001,0C733,9,675.327,4.969,598,4.969C514.994,4.969,449.336,9,400.333,9C299.666,9,0,9,0,9v43c0,0,299.666,0,400.333,0c49.002,0,114.66,3.484,197.667,3.484c77.327,0,135-3.484,200.999-3.484C894.995,52,1200,52,1200,52V9z"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> bufferflyä¿®æ”¹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bufferfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springå­¦ä¹ ç¬”è®°</title>
      <link href="/posts/b3b6ba72/"/>
      <url>/posts/b3b6ba72/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a class="markdownIt-Anchor" href="#ç®€ä»‹"></a> ç®€ä»‹</h2><ul><li>Spring:æ˜¥å¤©â€”&gt;ç»™è½¯ä»¶è¡Œä¸šå¸¦æ¥äº†æ˜¥å¤©!</li><li>2002,é¦–æ¬¡æ¨å‡ºäº† Spring æ¡†æ¶çš„é›„æ€§:interface21 æ¡†æ¶!</li><li>Spring æ¡†æ¶å³ä»¥ interface21 æ¡†æ¶ä¸ºåŸºç¡€ï¼Œç»è¿‡é‡æ–°è®¾è®¡ï¼Œå¹¶ä¸æ–­ä¸°å¯Œå…¶å†…æ¶µï¼Œäº 2004 å¹´ 3 æœˆ 24 æ—¥å‘å¸ƒäº† 1.0 æ­£å¼ç‰ˆ</li><li>Rod Johnson Spring Framework åˆ›å§‹äººï¼Œè‘—åä½œè€…ï¼Œå¾ˆéš¾æƒ³è±¡ Rod Johnson çš„å­¦å†ï¼ŒçœŸçš„è®©å¥½å¤šäººå¤§åƒä¸€æƒŠï¼Œä»–æ˜¯æ‚‰å°¼å¤§å­¦çš„åšå£«ï¼Œç„¶è€Œä»–çš„ä¸“ä¸šä¸æ˜¯è®¡ç®—æœºï¼Œè€Œæ˜¯éŸ³ä¹å­¦</li><li>Spring ç†å¿µï¼šä½¿ç°æœ‰çš„æŠ€æœ¯æ›´åŠ å®¹æ˜“ä½¿ç”¨ï¼Œæœ¬äº‹æ˜¯ä¸€ä¸ªå¤§æ‚çƒ©ï¼Œæ•´åˆäº†ç°æœ‰çš„æŠ€æœ¯æ¡†æ¶</li><li>SSHï¼šStruct2 + Spring + Hibernate</li><li>SSMï¼šSpringMVC + Spring + Mybatis</li></ul><blockquote><p>å®˜ç½‘ï¼š<a href="https://spring.io/">https://spring.io/</a></p><p>Spring Framework 5.3.12 APIï¼š<a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/">https://docs.spring.io/spring-framework/docs/current/javadoc-api/</a></p><p>Version 5.3.12ï¼š<a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#spring-core">https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#spring-core</a></p><p>å®˜æ–¹ä¸‹è½½åœ°å€ï¼š<a href="https://repo.spring.io/ui/native/release/org/springframework/spring/">https://repo.spring.io/ui/native/release/org/springframework/spring/</a></p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbk<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¼˜ç‚¹"><a class="markdownIt-Anchor" href="#ä¼˜ç‚¹"></a> ä¼˜ç‚¹</h3><ul><li>Spring æ˜¯ä¸€ä¸ªå¼€æºçš„å…è´¹çš„æ¡†æ¶ï¼ˆå®¹å™¨ï¼‰ï¼</li><li>Spring æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€éå…¥ä¾µå¼çš„æ¡†æ¶ï¼</li><li>æ§åˆ¶åè½¬ï¼ˆIOCï¼‰ï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰</li><li>æ”¯æŒäº‹åŠ¡çš„å¤„ç†ï¼Œå¯¹æ¡†æ¶çš„æ•´åˆçš„æ”¯æŒ r</li></ul><blockquote><p>æ€»ç»“ï¼šå¼€æºå…è´¹å®¹å™¨ï¼Œè½»é‡çº§éä¾µå…¥å¼ï¼Œæ§åˆ¶åè½¬ï¼Œé¢å‘åˆ‡é¢ï¼Œæ”¯æŒäº‹åŠ¡ï¼Œæ”¯æŒæ¡†æ¶æ•´åˆ</p><p>Spring å°±æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬ï¼ˆIOCï¼‰å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰çš„æ¡†æ¶ï¼</p></blockquote><h3 id="ç»„æˆ"><a class="markdownIt-Anchor" href="#ç»„æˆ"></a> ç»„æˆ</h3><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimage1.bubuko.com%2Finfo%2F202007%2F20200710143347205636.png&refer=http%3A%2F%2Fimage1.bubuko.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638027623&t=c284620445aa14250fc677ec14eebed7" alt="img" style="zoom: 80%;" /><h3 id="æ‹“å±•"><a class="markdownIt-Anchor" href="#æ‹“å±•"></a> æ‹“å±•</h3><p>åœ¨ Spring çš„å®˜ç½‘æœ‰è¿™ä¸ªä»‹ç»ï¼šç°ä»£åŒ–çš„ Java å¼€å‘ï¼ä¹Ÿå°±æ˜¯åŸºäº Spring çš„å¼€å‘</p><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimage1.bubuko.com%2Finfo%2F202004%2F20200402092531603379.png&refer=http%3A%2F%2Fimage1.bubuko.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1638027821&t=a4d423dd8e882c9fe6336a6ee832b6ab" alt="img" style="zoom:150%;" /><ul><li>Spring Boot<ul><li>ä¸€ä¸ªå¿«é€Ÿå¼€å‘çš„è„šæ‰‹æ¶</li><li>åŸºäº SpringBoot å¯ä»¥å¿«é€Ÿçš„å¼€å‘å•ä¸ªå¾®æœåŠ¡</li><li>çº¦å®šå¤§äºé…ç½®</li></ul></li><li>Spring Cloud<ul><li>SpringCloud æ˜¯åŸºäº SpringBoot å®ç°çš„</li></ul></li></ul><p>å› ä¸ºç°åœ¨å¤§å¤šæ•°å…¬å¸éƒ½åœ¨ä½¿ç”¨ SpringBoot è¿›è¡Œå¿«é€Ÿå¼€å‘ï¼Œå­¦ä¹  SpringBoot çš„å‰æï¼Œéœ€è¦å®Œå…¨æŒæ¡ Spring åŠ SpringMVCï¼æ‰¿ä¸Šå¯ä¸‹çš„ä½œç”¨!</p><p>å¼Šç«¯ï¼šå‘å±•äº†å¤ªä¹…ä¹‹åï¼Œè¿èƒŒäº†åŸæ¥çš„ç†å¿µï¼Œé…ç½®ååˆ†ç¹çï¼Œäººç§°ï¼šâ€œé…ç½®åœ°ç‹±â€</p><h2 id="ioc-ç†è®ºæ¨å¯¼"><a class="markdownIt-Anchor" href="#ioc-ç†è®ºæ¨å¯¼"></a> IOC ç†è®ºæ¨å¯¼</h2><p>ä¼ ç»Ÿçš„è°ƒç”¨</p><ol><li><h3 id="userdao-æ¥å£"><a class="markdownIt-Anchor" href="#userdao-æ¥å£"></a> UserDao æ¥å£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h3 id="userdaoimpl-å®ç°ç±»"><a class="markdownIt-Anchor" href="#userdaoimpl-å®ç°ç±»"></a> UserDaoImpl å®ç°ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;é»˜è®¤è·å–ç”¨æˆ·æ•°æ®&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h3 id="userservice-ä¸šåŠ¡æ¥å£"><a class="markdownIt-Anchor" href="#userservice-ä¸šåŠ¡æ¥å£"></a> UserService ä¸šåŠ¡æ¥å£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Service;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><h3 id="userserviceimpl-ä¸šåŠ¡å®ç°ç±»"><a class="markdownIt-Anchor" href="#userserviceimpl-ä¸šåŠ¡å®ç°ç±»"></a> UserServiceImpl ä¸šåŠ¡å®ç°ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Service;</span><br><span class="line"><span class="keyword">import</span> dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> dao.UserDaoImpl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line">    <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span>&#123;</span><br><span class="line">        userDao.getUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h3 id="æµ‹è¯•"><a class="markdownIt-Anchor" href="#æµ‹è¯•"></a> æµ‹è¯•</h3></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> holle0;</span><br><span class="line"><span class="keyword">import</span> Service.UserService;</span><br><span class="line"><span class="keyword">import</span> Service.UserServiceImpl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest0</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// ç”¨æˆ·å®é™…è°ƒç”¨çš„æ˜¯ä¸šåŠ¡å±‚ï¼Œdaoå±‚ä»–ä»¬ä¸éœ€è¦æ¥è§¦</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>();</span><br><span class="line">        userService.getUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æˆ‘ä»¬ä¹‹å‰çš„ä¸šåŠ¡ä¸­ï¼Œç”¨æˆ·çš„éœ€æ±‚å¯èƒ½ä¼šå½±å“æˆ‘ä»¬åŸæ¥çš„ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚å»ä¿®æ”¹åŸä»£ç ï¼å¦‚æœç¨‹åºä»£ç é‡ååˆ†å¤§ï¼Œä¿®æ”¹ä¸€æ¬¡çš„æˆæœ¬ä»£ä»·ååˆ†æ˜‚è´µï¼</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDExMjI3NDI1ODEucG5n?x-oss-process=image/format,png" alt="image-20200801122742581" /></p><p>æ”¹è‰¯ï¼šæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª Set æ¥å£å®ç°ã€‚å·²ç»å‘ç”Ÿäº†é©å‘½æ€§çš„å˜åŒ–ï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨Serviceå±‚çš„å®ç°ç±»(UserServiceImpl)å¢åŠ ä¸€ä¸ªSet()æ–¹æ³•</span></span><br><span class="line"><span class="comment">//åˆ©ç”¨setåŠ¨æ€å®ç°å€¼çš„æ³¨å…¥ï¼</span></span><br><span class="line"><span class="keyword">private</span> UserDao userDao;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>set() æ–¹æ³•å®é™…ä¸Šæ˜¯åŠ¨æ€æ”¹å˜äº† UserDao userDao çš„ åˆå§‹åŒ–éƒ¨åˆ†ï¼ˆ<strong>new UserDaoImpl()</strong>ï¼‰</p><p>æµ‹è¯•ä¸­åŠ ä¸Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">((UserServiceImpl)userService).setUserDao(<span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>());</span><br></pre></td></tr></table></figure><ul><li>ä¹‹å‰ï¼Œç¨‹åºæ˜¯ä¸»åŠ¨åˆ›å»ºå¯¹è±¡ï¼æ§åˆ¶æƒåœ¨ç¨‹åºçŒ¿æ‰‹ä¸Šï¼</li><li>ä½¿ç”¨äº† Set æ³¨å…¥åï¼Œç¨‹åºä¸å†å…·æœ‰ä¸»åŠ¨æ€§ï¼Œè€Œæ˜¯å˜æˆäº†è¢«åŠ¨çš„æ¥å—å¯¹è±¡ï¼</li></ul><p>æœ¬è´¨ä¸Šè§£å†³äº†é—®é¢˜ï¼Œç¨‹åºå‘˜ä¸ç”¨å†å»ç®¡ç†å¯¹è±¡çš„åˆ›å»º</p><p>ç³»ç»Ÿçš„è€¦åˆæ€§å¤§å¤§é™ä½ï¼Œå¯ä»¥æ›´ä¸“æ³¨åœ¨ä¸šåŠ¡çš„å®ç°ä¸Š</p><p>è¿™æ˜¯ IOCï¼ˆæ§åˆ¶åè½¬ï¼‰çš„åŸå‹ï¼Œåè½¬(ç†è§£)ï¼šä¸»åŠ¨æƒäº¤ç»™äº†ç”¨æˆ·</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDExMjI4MDU3NjkucG5n?x-oss-process=image/format,png" alt="image-20200801122805769" /></p><h3 id="ioc-æœ¬è´¨"><a class="markdownIt-Anchor" href="#ioc-æœ¬è´¨"></a> IOC æœ¬è´¨</h3><p><strong>æ§åˆ¶åè½¬ IOC(Inversion of Control),æ˜¯ä¸€ç§è®¾è®¡æ€æƒ³,ID(ä¾èµ–æ³¨å…¥)æ˜¯å®ç° IOC çš„ä¸€ç§æ–¹æ³•</strong></p><p><strong>æ§åˆ¶åè½¬æ˜¯ä¸€ç§é€šè¿‡æè¿°(XML æˆ–æ³¨è§£)å¹¶é€šè¿‡ç¬¬ä¸‰æ–¹å»ç”Ÿäº§è·å–ç‰¹å®šå¯¹è±¡çš„æ–¹å¼,åœ¨ Spring ä¸­å®ç°æ§åˆ¶åè½¬çš„æ˜¯ IOC å®¹å™¨,å…¶å®æ–¹æ³•æ˜¯ä¾èµ–æ³¨å…¥</strong></p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDExMjM1MTg5NzQucG5n?x-oss-process=image/format,png" alt="image-20200801123518974" /></p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvMjAyMDA4MDExMjMyMzUucG5n?x-oss-process=image/format,png" alt="img" /></p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDExMjMzNDgyMDcucG5n?x-oss-process=image/format,png" alt="image-20200801123348207" /></p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDExMjM0NTA4OTcucG5n?x-oss-process=image/format,png" alt="image-20200801123450897" /></p><h3 id="hellospring"><a class="markdownIt-Anchor" href="#hellospring"></a> HelloSpring</h3><p>åœ¨çˆ¶æ¨¡å—ä¸­å¯¼å…¥ jar åŒ…</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>pojo çš„ Hello.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String str;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getStr</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStr</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.str = str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Holle [str=&quot;</span> + str + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ resource é‡Œé¢çš„ xml é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">                           https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--åœ¨Springä¸­åˆ›å»ºå¯¹è±¡ï¼Œåœ¨Springè¿™äº›éƒ½ç§°ä¸ºbean</span></span><br><span class="line"><span class="comment">     ç±»å‹ å˜é‡å = new ç±»å‹();</span></span><br><span class="line"><span class="comment">     Holle holle = new Holle();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">     bean = å¯¹è±¡(holle)</span></span><br><span class="line"><span class="comment">     id = å˜é‡å(holle)</span></span><br><span class="line"><span class="comment">     class = newçš„å¯¹è±¡(new Holle();)</span></span><br><span class="line"><span class="comment">     property ç›¸å½“äºç»™å¯¹è±¡ä¸­çš„å±æ€§è®¾å€¼,è®©str=&quot;Spring&quot;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.Hello&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;str&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Spring&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±» MyTest</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> holle1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pojo.Hello;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//è·å–Springçš„ä¸Šä¸‹æ–‡å¯¹è±¡</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//æˆ‘ä»¬çš„å¯¹è±¡ä¸‹èƒ½åœ¨éƒ½åœ¨springÂ·ä¸­ç®¡ç†äº†ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ï¼Œç›´æ¥å–å‡ºæ¥å°±å¯ä»¥äº†</span></span><br><span class="line">        <span class="type">Hello</span> <span class="variable">holle</span> <span class="operator">=</span> (Hello) context.getBean(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        System.out.println(holle.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ ¸å¿ƒç”¨ set æ³¨å…¥ï¼Œæ‰€ä»¥å¿…é¡»è¦æœ‰ä¸‹é¢çš„ se()æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Helloç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStr</span><span class="params">(String str)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.str = str;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€è€ƒï¼š</strong></p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDExNjUxNTYyNTkucG5n?x-oss-process=image/format,png" alt="image-20200801165156259" /></p><p>IOCï¼šå¯¹è±¡ç”± Spring æ¥åˆ›å»ºï¼Œç®¡ç†ï¼Œè£…é…ï¼</p><blockquote><p>ç°å®ä¸­çš„ç†è§£:<br />åŸæ¥è¿™å¥—ç¨‹åºæ˜¯ï¼šä½ å†™å¥½èœå•ä¹°å¥½èœï¼Œå®¢äººæ¥äº†è‡ªå·±æŠŠèœç‚’å¥½æ‹›å¾…ï¼Œå°±ç›¸å½“äºä½ è¯·äººåƒé¥­<br />ç°åœ¨è¿™å¥—ç¨‹åºæ˜¯ï¼šä½ å‘Šè¯‰æ¥¼ä¸‹é¤å…ï¼Œä½ è¦å“ªäº›èœï¼Œå®¢äººæ¥çš„æ—¶å€™ï¼Œé¤å…æŠŠåšå¥½çš„ä½ éœ€è¦çš„èœé€ä¸Šæ¥<br />IoCï¼šç‚’èœè¿™ä»¶äº‹ï¼Œä¸å†ç”±ä½ è‡ªå·±æ¥åšï¼Œè€Œæ˜¯å§”æ‰˜ç»™äº†ç¬¬ä¸‰æ–¹__é¤å…æ¥åš</p><p>æ­¤æ—¶çš„åŒºåˆ«å°±æ˜¯ï¼Œå¦‚æœæˆ‘è¿˜éœ€è¦åšå…¶ä»–çš„èœï¼Œæˆ‘ä¸éœ€è¦è‡ªå·±æèœè°±ä¹°ææ–™å†åšå¥½ï¼Œè€Œæ˜¯å‘Šè¯‰é¤å…ï¼Œæˆ‘è¦ä»€ä¹ˆèœï¼Œä»€ä¹ˆæ—¶å€™è¦ï¼Œä½ åšå¥½é€æ¥</p></blockquote><p>åœ¨å‰é¢ç¬¬ä¸€ä¸ª module è¯•è¯•å¼•å…¥ Spring</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">                           https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDaomSql&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dao.UserDaoMysqlImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userServiceImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;service.UserServiceImp&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--refå¼•ç”¨springä¸­å·²ç»åˆ›å»ºå¾ˆå¥½çš„å¯¹è±¡--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--valueæ˜¯ä¸€ä¸ªå…·ä½“çš„å€¼,åŸºæœ¬æ•°æ®ç±»å‹--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDaomSql&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ª module æ”¹è‰¯åæµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> holle0;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"><span class="keyword">import</span> service.UserServiceImpl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest0</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">        <span class="type">UserServiceImpl</span> <span class="variable">userServiceImpl</span> <span class="operator">=</span> (UserServiceImpl) context.getBean(<span class="string">&quot;userServiceImpl&quot;</span>);</span><br><span class="line">        userServiceImpl.getUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ï¼š</strong></p><p>æ‰€æœ‰çš„ç±»éƒ½è¦è£…é…çš„ beans.xml é‡Œé¢ï¼›</p><p>æ‰€æœ‰çš„ bean éƒ½è¦é€šè¿‡å®¹å™¨å»å–ï¼›</p><p>å®¹å™¨é‡Œé¢å–å¾—çš„ beanï¼Œæ‹¿å‡ºæ¥å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨å¯¹è±¡è°ƒç”¨æ–¹æ³•å³å¯ï¼›</p><p>æ§åˆ¶:ä¼ ç»Ÿåº”ç”¨ç¨‹åºçš„å¯¹è±¡æ˜¯æœ‰ç¨‹åºæœ¬èº«æ§åˆ¶åˆ›å»ºçš„,ä½¿ç”¨ Spring å,å¯¹è±¡æ˜¯ç”± Spring æ¥åˆ›å»ºçš„</p><p>åè½¬:ç¨‹åºæœ¬èº«ä¸åˆ›å»ºå¯¹è±¡,è€Œå˜æˆè¢«åŠ¨çš„æ¥å—å¯¹æ‰‹</p><p>ä¾èµ–æ³¨å…¥:å°±æ˜¯åˆ© Set æ–¹æ³•æ¥å®ç°æ³¨å…¥çš„</p><p>IOC æ˜¯ä¸€ä¸­ç¼–ç¨‹æ€æƒ³,ç”±ä¸»åŠ¨çš„ç¼–ç¨‹å˜æˆè¢«åŠ¨çš„æ¥å—</p><h3 id="ioc-åˆ›å»ºå¯¹è±¡çš„æ–¹å¼"><a class="markdownIt-Anchor" href="#ioc-åˆ›å»ºå¯¹è±¡çš„æ–¹å¼"></a> IOC åˆ›å»ºå¯¹è±¡çš„æ–¹å¼</h3><ol><li><h5 id="ä¸‹æ ‡èµ‹å€¼"><a class="markdownIt-Anchor" href="#ä¸‹æ ‡èµ‹å€¼"></a> ä¸‹æ ‡èµ‹å€¼</h5><p>index æŒ‡çš„æ˜¯æœ‰å‚æ„é€ ä¸­å‚æ•°çš„ä¸‹æ ‡ï¼Œä¸‹æ ‡ä» 0 å¼€å§‹;</p></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">                           https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.User&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">value</span>=<span class="string">&quot;chen&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li><h5 id="ç±»å‹èµ‹å€¼-ä¸å»ºè®®ä½¿ç”¨"><a class="markdownIt-Anchor" href="#ç±»å‹èµ‹å€¼-ä¸å»ºè®®ä½¿ç”¨"></a> ç±»å‹èµ‹å€¼ ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰</h5></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!--    æœ‰å‚æ„é€  2.é€šè¿‡ç±»å‹åˆ›å»º,ä¸å»ºè®®ä½¿ç”¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hgm.pojo.User&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span><span class="attr">value</span>=<span class="string">&quot;é»„å¸…å“¥&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li><h5 id="ç›´æ¥é€šè¿‡å‚æ•°åæŒæ¡"><a class="markdownIt-Anchor" href="#ç›´æ¥é€šè¿‡å‚æ•°åæŒæ¡"></a> ç›´æ¥é€šè¿‡å‚æ•°åï¼ˆæŒæ¡ï¼‰</h5></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!--   3.ç›´æ¥é€šè¿‡å‚æ•°åæ¥è®¾ç½®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hgm.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é»„å¸…å“¥&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ¯”å¦‚å‚æ•°åæ˜¯nameï¼Œåˆ™æœ‰name=&quot;å…·ä½“å€¼&quot; --&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨å†Œ bean ä¹‹åå°±å¯¹è±¡çš„åˆå§‹åŒ–äº†ï¼ˆ<strong>ç±»ä¼¼ new ç±»å()</strong>ï¼‰</p><p>name æ–¹å¼è¿˜éœ€è¦æ— å‚æ„é€ å’Œ set æ–¹æ³•,index å’Œ type åªéœ€è¦æœ‰å‚æ„é€ </p><p>å°±ç®—æ˜¯ new ä¸¤ä¸ªå¯¹è±¡ï¼Œä¹Ÿæ˜¯åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼ˆ<strong>å•ä¾‹æ¨¡å¼ï¼šå…¨å±€å”¯ä¸€</strong>ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) context.getBean(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"><span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> (User) context.getBean(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">system.out.println(user == user2)<span class="comment">//ç»“æœä¸ºtrue</span></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šåœ¨é…ç½®æ–‡ä»¶åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œå®¹å™¨(&lt; bean&gt;)ä¸­ç®¡ç†çš„å¯¹è±¡å°±å·²ç»åˆå§‹åŒ–äº†</p><h2 id="spring-é…ç½®"><a class="markdownIt-Anchor" href="#spring-é…ç½®"></a> Spring é…ç½®</h2><h3 id="åˆ«å"><a class="markdownIt-Anchor" href="#åˆ«å"></a> åˆ«å</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;chen&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;userLove&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨æ—¶</span></span><br><span class="line"><span class="comment">User user2 = (User) context.getBean(&quot;userLove&quot;);</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="bean-é…ç½®"><a class="markdownIt-Anchor" href="#bean-é…ç½®"></a> Bean é…ç½®</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--idï¼šbeançš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºæˆ‘ä»¬å­¦çš„å¯¹è±¡å</span></span><br><span class="line"><span class="comment">classï¼šbeanå¯¹è±¡æ‰€å¯¹åº”çš„ä¼šé™å®šåï¼šåŒ…å+ç±»å‹</span></span><br><span class="line"><span class="comment">nameï¼šä¹Ÿæ˜¯åˆ«åï¼Œè€Œä¸”nameå¯ä»¥åŒæ—¶å–å¤šä¸ªåˆ«å --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.User&quot;</span> <span class="attr">name</span>=<span class="string">&quot;u1 u2,u3;u4&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;chen&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨æ—¶</span></span><br><span class="line"><span class="comment">User user2 = (User) context.getBean(&quot;u1&quot;);</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="import"><a class="markdownIt-Anchor" href="#import"></a> import</h3><p>è¿™ä¸ª importï¼Œä¸€èˆ¬ç”¨äºå›¢é˜Ÿå¼€å‘ä½¿ç”¨ï¼Œä»–å¯ä»¥å°†å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œå¯¼å…¥åˆå¹¶ä¸ºä¸€ä¸ª</p><p>å‡è®¾ï¼Œç°åœ¨é¡¹ç›®ä¸­æœ‰å¤šä¸ªäººå¼€å‘ï¼Œè¿™ä¸‰ä¸ªäººå¤åˆ¶ä¸åŒçš„ç±»å¼€å‘ï¼Œä¸åŒçš„ç±»éœ€è¦æ³¨å†Œåœ¨ä¸åŒçš„ bean ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©<br />ç”¨ import å°†æ‰€æœ‰äººçš„ beans.xml åˆå¹¶ä¸ºä¸€ä¸ªæ€»çš„ï¼</p><ul><li>å¼ ä¸‰(beans.xm1)</li><li>æå››(beans2.xm1)</li><li>ç‹äº”(beans3.xm1)</li><li>applicationContext.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;beans.xm1&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;beans2.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;beans3.xm1&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥ä½¿ç”¨æ€»çš„é…ç½®å°±å¯ä»¥äº†</strong></p><p>å¼¹å¹•è¯„è®ºï¼š</p><p>æŒ‰ç…§åœ¨æ€»çš„ xml ä¸­çš„å¯¼å…¥é¡ºåºæ¥è¿›è¡Œåˆ›å»ºï¼Œåå¯¼å…¥çš„ä¼šé‡å†™å…ˆå¯¼å…¥çš„ï¼Œæœ€ç»ˆå®ä¾‹åŒ–çš„å¯¹è±¡ä¼šæ˜¯åå¯¼å…¥ xml ä¸­çš„é‚£ä¸ª</p><h2 id="ä¾èµ–æ³¨å…¥"><a class="markdownIt-Anchor" href="#ä¾èµ–æ³¨å…¥"></a> ä¾èµ–æ³¨å…¥</h2><h3 id="æ„é€ å™¨æ³¨å…¥"><a class="markdownIt-Anchor" href="#æ„é€ å™¨æ³¨å…¥"></a> æ„é€ å™¨æ³¨å…¥</h3><p>ç¬¬å››ç‚¹æœ‰æåˆ°</p><h3 id="set-æ–¹å¼æ³¨å…¥é‡ç‚¹"><a class="markdownIt-Anchor" href="#set-æ–¹å¼æ³¨å…¥é‡ç‚¹"></a> set æ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘</h3><p>ä¾èµ–æ³¨å…¥ï¼šset æ³¨å…¥ï¼</p><ul><li>ä¾èµ–ï¼šbean å¯¹è±¡çš„åˆ›å»ºä¾èµ–äºå®¹å™¨</li><li>æ³¨å…¥ï¼šbean å¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§ï¼Œç”±å®¹å™¨æ¥æ³¨å…¥</li></ul><p>ã€ç¯å¢ƒæ­å»ºã€‘</p><ol><li><p>å¤æ‚ç±»å‹</p><p>Address ç±»</p></li><li><p>çœŸå®æµ‹è¯•å¯¹è±¡</p><p>Student ç±»</p></li><li><p>beans.xml</p></li><li><p>æµ‹è¯•</p><p>MyTest3</p></li></ol><p>Student ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="meta">@Get</span></span><br><span class="line"><span class="meta">@Set</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ«å¿˜äº†å†™getå’Œsetæ–¹æ³•ï¼ˆç”¨lombokæ³¨è§£ä¹Ÿè¡Œï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String[] books;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; hobbies;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, String&gt; card;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; game;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Properties infor;</span><br><span class="line">    <span class="keyword">private</span> String wife;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +<span class="string">&quot;\n&quot;</span>+</span><br><span class="line">            <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +<span class="string">&quot;\n&quot;</span>+</span><br><span class="line">            <span class="string">&quot;, address=&quot;</span> + address.toString() +<span class="string">&quot;\n&quot;</span>+</span><br><span class="line">            <span class="string">&quot;, books=&quot;</span> + Arrays.toString(books) +<span class="string">&quot;\n&quot;</span>+</span><br><span class="line">            <span class="string">&quot;, hobbies=&quot;</span> + hobbies +<span class="string">&quot;\n&quot;</span>+</span><br><span class="line">            <span class="string">&quot;, card=&quot;</span> + card +<span class="string">&quot;\n&quot;</span>+</span><br><span class="line">            <span class="string">&quot;, game=&quot;</span> + game +<span class="string">&quot;\n&quot;</span>+</span><br><span class="line">            <span class="string">&quot;, infor=&quot;</span> + infor +<span class="string">&quot;\n&quot;</span>+</span><br><span class="line">            <span class="string">&quot;, wife=&#x27;&quot;</span> + wife + <span class="string">&#x27;\&#x27;&#x27;</span> +<span class="string">&quot;\n&quot;</span>+</span><br><span class="line">            <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Address ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Address&#123;&quot;</span> +</span><br><span class="line">            <span class="string">&quot;address=&#x27;&quot;</span> + address + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>beans.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">                           https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;address&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.Address&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">value</span>=<span class="string">&quot;addressä½ å¥½&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ç¬¬ä¸€ç§ï¼Œæ™®é€šå€¼æ³¨å…¥ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;nameä½ å¥½&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ç¬¬äºŒç§ï¼Œrefæ³¨å…¥ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;address&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--æ•°ç»„æ³¨å…¥ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;books&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>ä¸‰å›½<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>è¥¿æ¸¸<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>æ°´æµ’<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--liståˆ—è¡¨æ³¨å…¥ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;hobbies&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>å”±<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>è·³<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>rap<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>ç¯®çƒ<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--mapé”®å€¼å¯¹æ³¨å…¥ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--set(å¯å»é‡)æ³¨å…¥ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;game&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>wangzhe<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>lol<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>galname<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--ç©ºæŒ‡é’ˆnullæ³¨å…¥ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;wife&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">null</span>&gt;</span><span class="tag">&lt;/<span class="name">null</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--propertieså¸¸é‡æ³¨å…¥ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;infor&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;id&quot;</span>&gt;</span>20200802<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;name&quot;</span>&gt;</span>cbh<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>MyTest3</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"><span class="keyword">import</span> pojo.Student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">stu</span> <span class="operator">=</span> (Student) context.getBean(<span class="string">&quot;student&quot;</span>);</span><br><span class="line">        System.out.println(stu.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ‹“å±•æ³¨å…¥"><a class="markdownIt-Anchor" href="#æ‹“å±•æ³¨å…¥"></a> æ‹“å±•æ³¨å…¥</h3><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDIxNDI3MTcyMTYucG5n?x-oss-process=image/format,png" alt="image-20200802142717216" /></p><p>pojo å¢åŠ  User ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String name, <span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User [name=&quot;</span> + name + <span class="string">&quot;, id=&quot;</span> + id + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š beans é‡Œé¢åŠ ä¸Šè¿™ä¸‹é¢ä¸¤è¡Œ</p><p>ä½¿ç”¨ p å’Œ c å‘½åç©ºé—´éœ€è¦å¯¼å…¥ xml çº¦æŸ</p><p>xmlns:p=â€œ<a href="http://www.springframework.org/schema/p%E2%80%9D">http://www.springframework.org/schema/pâ€</a><br />xmlns:c=â€œ<a href="http://www.springframework.org/schema/c%E2%80%9D">http://www.springframework.org/schema/câ€</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:c</span>=<span class="string">&quot;http://www.springframework.org/schema/c&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">                           https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--på‘½åç©ºé—´æ³¨å…¥/setæ³¨å…¥ï¼Œå¯ä»¥ç›´æ¥æ³¨å…¥å±æ€§çš„å€¼-ã€‹property--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.User&quot;</span> <span class="attr">p:name</span>=<span class="string">&quot;cxk&quot;</span> <span class="attr">p:id</span>=<span class="string">&quot;20&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--cå‘½åç©ºé—´ï¼Œé€šè¿‡æ„é€ å™¨æ³¨å…¥ï¼Œéœ€è¦å†™å…¥æœ‰å‚å’Œæ— å‚æ„é€ æ–¹æ³•-ã€‹construct-args--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.User&quot;</span> <span class="attr">c:name</span>=<span class="string">&quot;cbh&quot;</span> <span class="attr">c:id</span>=<span class="string">&quot;22&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;user&quot;</span>,User.class);<span class="comment">//ç¡®å®šclasså¯¹è±¡ï¼Œå°±ä¸ç”¨å†å¼ºè½¬äº†</span></span><br><span class="line">System.out.println(user.toString());</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="bean-ä½œç”¨åŸŸ"><a class="markdownIt-Anchor" href="#bean-ä½œç”¨åŸŸ"></a> Bean ä½œç”¨åŸŸ</h3><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDIxNDM0MDExNjUucG5n?x-oss-process=image/format,png" alt="image-20200802143401165" /></p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDIxNDMzNDI1ODYucG5n?x-oss-process=image/format,png" alt="image-20200802143342586" /></p><ol><li>å•ä¾‹æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.User&quot;</span> <span class="attr">c:name</span>=<span class="string">&quot;cxk&quot;</span> <span class="attr">c:age</span>=<span class="string">&quot;19&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;singleton&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDIxNDM4MDIwMDUucG5n?x-oss-process=image/format,png" alt="" /></p><p>å¼¹å¹•è¯„è®ºï¼šå•ä¾‹æ¨¡å¼æ˜¯æŠŠå¯¹è±¡æ”¾åœ¨ pool ä¸­ï¼Œéœ€è¦å†å–å‡ºæ¥ï¼Œä½¿ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡å®ä¾‹</p><ol start="2"><li>åŸå‹æ¨¡å¼: æ¯æ¬¡ä»å®¹å™¨ä¸­ get çš„æ—¶å€™ï¼Œéƒ½äº§ç”Ÿä¸€ä¸ªæ–°å¯¹è±¡ï¼</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.User&quot;</span> <span class="attr">c:name</span>=<span class="string">&quot;cxk&quot;</span> <span class="attr">c:age</span>=<span class="string">&quot;19&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>å…¶ä½™çš„ requestã€sessionã€application è¿™äº›åªèƒ½åœ¨ web å¼€æ”¾ä¸­ä½¿ç”¨!</li></ol><h2 id="bean-çš„è‡ªåŠ¨è£…é…"><a class="markdownIt-Anchor" href="#bean-çš„è‡ªåŠ¨è£…é…"></a> Bean çš„è‡ªåŠ¨è£…é…</h2><ul><li>è‡ªåŠ¨è£…é…æ˜¯ Spring æ»¡è¶³ bean ä¾èµ–çš„ä¸€ç§æ–¹å¼</li><li>Spring ä¼šåœ¨ä¸Šä¸‹æ–‡è‡ªåŠ¨å¯»æ‰¾ï¼Œå¹¶è‡ªåŠ¨ç»™ bean è£…é…å±æ€§</li></ul><p>åœ¨ Spring ä¸­æœ‰ä¸‰ç§è£…é…çš„æ–¹å¼</p><ol><li><p>åœ¨ xml ä¸­æ˜¾ç¤ºé…ç½®</p></li><li><p>åœ¨ java ä¸­æ˜¾ç¤ºé…ç½®</p></li><li><p>éšå¼çš„è‡ªåŠ¨è£…é… bean ã€é‡è¦ã€‘</p></li><li><p>ç¯å¢ƒæ­å»ºï¼šä¸€ä¸ªäººæœ‰ä¸¤ä¸ªå® ç‰©</p></li><li><p>byType è‡ªåŠ¨è£…é…ï¼šbyType ä¼šè‡ªåŠ¨æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡ set æ–¹æ³•å‚æ•°çš„ç±»å‹ç›¸åŒçš„ bean</p><p>ä¿è¯æ‰€æœ‰çš„ class å”¯ä¸€(ç±»ä¸ºå…¨å±€å”¯ä¸€)</p></li><li><p>byName è‡ªåŠ¨è£…é…ï¼šbyName ä¼šè‡ªåŠ¨æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡ set å¯¹åº”çš„å€¼å¯¹åº”çš„ id</p><p>ä¿è¯æ‰€æœ‰ id å”¯ä¸€ï¼Œå¹¶ä¸”å’Œ set æ³¨å…¥çš„å€¼ä¸€è‡´</p></li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ‰¾ä¸åˆ°idå’Œå¤šä¸ªç›¸åŒclass --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hgm.pojo.Cat&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hgm.pojo.Dog&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">Beanè‡ªåŠ¨è£…é…</span></span><br><span class="line"><span class="comment">byName:ä¼šè‡ªåŠ¨åœ¨å®¹å™¨ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾,å’Œè‡ªå·±å¯¹è±¡setæ–¹æ³•åé¢çš„å€¼å¯¹åº”çš„bean id,</span></span><br><span class="line"><span class="comment">éœ€è¦ä¿è¯æ‰€æœ‰beançš„idå”¯ä¸€,å¹¶ä¸”è¿™ä¸ªbeanéœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„setæ–¹æ³•çš„å€¼ä¸€è‡´</span></span><br><span class="line"><span class="comment">byType:ä¼šè‡ªåŠ¨åœ¨å®¹å™¨ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾,å’Œè‡ªå·±å¯¹è±¡å±æ€§ç›¸åŒçš„bean,</span></span><br><span class="line"><span class="comment">éœ€è¦ä¿è¯æ‰€æœ‰beançš„classå”¯ä¸€,å¹¶ä¸”è¿™ä¸ªbeanéœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„ç±»å‹å€¼ä¸€è‡´</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.hgm.pojo.People&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é»„å¸…å“¥&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•è‡ªåŠ¨è£…é…"><a class="markdownIt-Anchor" href="#æµ‹è¯•è‡ªåŠ¨è£…é…"></a> æµ‹è¯•ï¼šè‡ªåŠ¨è£…é…</h3><p>pojo çš„ Cat ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shut</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;miao&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>pojo çš„ Dog ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shut</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;wow&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>pojo çš„ People ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pojo;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Cat <span class="title function_">getCat</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cat;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCat</span><span class="params">(Cat cat)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.cat = cat;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Dog <span class="title function_">getDog</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDog</span><span class="params">(Dog dog)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dog = dog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;People&#123;&quot;</span> +</span><br><span class="line">            <span class="string">&quot;cat=&quot;</span> + cat +</span><br><span class="line">            <span class="string">&quot;, dog=&quot;</span> + dog +</span><br><span class="line">            <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">            <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>xml é…ç½® -&gt; byType è‡ªåŠ¨è£…é…</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">                           https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.Cat&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.Dog&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--byTypeä¼šåœ¨å®¹å™¨è‡ªåŠ¨æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡å±æ€§ç›¸åŒçš„bean</span></span><br><span class="line"><span class="comment">  ä¾‹å¦‚ï¼ŒDog dog; é‚£ä¹ˆå°±ä¼šæŸ¥æ‰¾pojoçš„Dogç±»ï¼Œå†è¿›è¡Œè‡ªåŠ¨è£…é…</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.People&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;cbh&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>xml é…ç½® -&gt; byName è‡ªåŠ¨è£…é…</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.Cat&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.Dog&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--bynameä¼šåœ¨å®¹å™¨è‡ªåŠ¨æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡setæ–¹æ³•çš„setåé¢çš„å€¼å¯¹åº”çš„id</span></span><br><span class="line"><span class="comment">  ä¾‹å¦‚:setDog()ï¼Œå–setåé¢çš„å­—ç¬¦ä½œä¸ºidï¼Œåˆ™è¦id = dog æ‰å¯ä»¥è¿›è¡Œè‡ªåŠ¨è£…é…</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;people&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pojo.People&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;cbh&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¼¹å¹•è¯„è®ºï¼šbyName åªèƒ½å–åˆ°å°å†™ï¼Œå¤§å†™å–ä¸åˆ°</p><p>â€‹ å°ç»“:</p><ul><li><h6 id="byname-çš„æ—¶å€™éœ€è¦ä¿è¯æ‰€æœ‰-bean-çš„-id-å”¯ä¸€å¹¶ä¸”è¿™ä¸ª-bean-éœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„-set-æ–¹æ³•çš„å€¼ä¸€è‡´"><a class="markdownIt-Anchor" href="#byname-çš„æ—¶å€™éœ€è¦ä¿è¯æ‰€æœ‰-bean-çš„-id-å”¯ä¸€å¹¶ä¸”è¿™ä¸ª-bean-éœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„-set-æ–¹æ³•çš„å€¼ä¸€è‡´"></a> byname çš„æ—¶å€™,éœ€è¦ä¿è¯æ‰€æœ‰ bean çš„ id å”¯ä¸€,å¹¶ä¸”è¿™ä¸ª bean éœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„ set æ–¹æ³•çš„å€¼ä¸€è‡´</h6></li><li><h6 id="bytype-çš„æ—¶å€™éœ€è¦ä¿è¯æ‰€æœ‰-bean-çš„-class-å”¯ä¸€å¹¶ä¸”è¿™ä¸ª-bean-éœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„ç±»å‹å€¼ä¸€è‡´"><a class="markdownIt-Anchor" href="#bytype-çš„æ—¶å€™éœ€è¦ä¿è¯æ‰€æœ‰-bean-çš„-class-å”¯ä¸€å¹¶ä¸”è¿™ä¸ª-bean-éœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„ç±»å‹å€¼ä¸€è‡´"></a> ByType çš„æ—¶å€™,éœ€è¦ä¿è¯æ‰€æœ‰ bean çš„ class å”¯ä¸€,å¹¶ä¸”è¿™ä¸ª bean éœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„ç±»å‹å€¼ä¸€è‡´</h6></li></ul><h3 id="ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…"></a> ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…</h3><p>jdk1.5 æ”¯æŒçš„æ³¨è§£,Spring2.5 å°±æ”¯æŒæ³¨è§£äº†!</p><p>The introduction of annotation-based configuration raised the question of whether this approach is â€œbetterâ€ than XML.ï¼ˆç¿»è¯‘ï¼šåŸºäºæ³¨é‡Šçš„é…ç½®çš„å¼•å…¥æå‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼Œå³è¿™ç§æ–¹æ³•æ˜¯å¦æ¯” XMLâ€œæ›´å¥½â€ï¼‰</p><ol><li>å¯¼å…¥ context çº¦æŸ</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1. xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br></pre></td></tr></table></figure><ol start="2"><li>é…ç½®æ³¨è§£çš„æ”¯æŒï¼š&lt; context:annotation-config/&gt;</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="auotwired"><a class="markdownIt-Anchor" href="#auotwired"></a> @<strong>Auotwired</strong></h4><p><strong>é»˜è®¤æ˜¯ byType æ–¹å¼ï¼Œå¦‚æœåŒ¹é…ä¸ä¸Šï¼Œå°±ä¼š byName</strong></p><p>ç›´æ¥åœ¨å±æ€§ä¸Šä½¿ç”¨å³å¯! ä¹Ÿå¯ä»¥åœ¨ set æ–¹å¼ä¸Šä½¿ç”¨</p><p>ä½¿ç”¨ Auotwired æˆ‘ä»¬å¯ä»¥ä¸ç”¨ç¼–å†™ Set æ–¹æ³•äº†,å‰ææ˜¯ä½ è¿™ä¸ªè‡ªåŠ¨å¯¼å…¥è£…é…çš„å±æ€§åœ¨ IOC (Spring) å®¹å™¨ä¸­å­˜åœ¨,ä¸”ç¬¦åˆåå­— Byname</p><p><strong>ç§‘æ™®: @Nullable å­—æ®µæ ‡è®°äº†è¿™ä¸ªæ³¨è§£,è¯´æ˜è¿™ä¸ªå­—æ®µå¯ä»¥ä¸º null</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>@Nullable å­—æ®µæ ‡è®°äº†è¿™ä¸ªæ³¨è§£ï¼Œè¯´æ˜è¯¥å­—æ®µå¯ä»¥ä¸ºç©º</p><p>public name(@Nullable String name){</p><p>}</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æºç </span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Autowired &#123;</span><br><span class="line"><span class="type">boolean</span> <span class="title function_">required</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœå®šä¹‰äº† Autowire çš„ require å±æ€§ä¸º falseï¼Œè¯´æ˜è¿™ä¸ªå¯¹è±¡å¯ä»¥ä¸º nullï¼Œå¦åˆ™ä¸å…è®¸ä¸ºç©ºï¼ˆfalse è¡¨ç¤ºæ‰¾ä¸åˆ°è£…é…ï¼Œä¸æŠ›å‡ºå¼‚å¸¸ï¼‰</p><h4 id="autowiredqualifier"><a class="markdownIt-Anchor" href="#autowiredqualifier"></a> @Autowired+@Qualifier</h4><p><strong>@Autowired ä¸èƒ½å”¯ä¸€è£…é…æ—¶ï¼Œéœ€è¦@Autowired+@Qualifier</strong></p><p>å¦‚æœ@Autowired è‡ªåŠ¨è£…é…çš„ç¯å¢ƒæ¯”è¾ƒå¤æ‚,è‡ªåŠ¨è£…é…æ— æ³•é€šè¿‡ä¸€ä¸ªæ³¨è§£[@Autowired]å®Œæˆçš„æ—¶å€™,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨@Qualifier(value = â€œxxâ€)å»é…ç½®@Autowired çš„ä½¿ç”¨,æŒ‡å®šä¸€ä¸ªå”¯ä¸€çš„ bean å¯¹è±¡æ³¨å…¥!</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(value = &quot;dog&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¼¹å¹•è¯„è®ºï¼š</p><p>å¦‚æœ xml æ–‡ä»¶ä¸­åŒä¸€ä¸ªå¯¹è±¡è¢«å¤šä¸ª bean ä½¿ç”¨ï¼ŒAutowired æ— æ³•æŒ‰ç±»å‹æ‰¾åˆ°ï¼Œå¯ä»¥ç”¨@Qualifier æŒ‡å®š id æŸ¥æ‰¾</p><h4 id="resource"><a class="markdownIt-Anchor" href="#resource"></a> @<strong>Resource</strong></h4><p><strong>é»˜è®¤æ˜¯ byName æ–¹å¼ï¼Œå¦‚æœåŒ¹é…ä¸ä¸Šï¼Œå°±ä¼š byType</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line">    Resource(name=<span class="string">&quot;cat&quot;</span>)</span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    Resource(name=<span class="string">&quot;dog&quot;</span>)</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¼¹å¹•è¯„è®ºï¼š</p><p>Autowired æ˜¯ byTypeï¼Œ@Autowired+@Qualifier = byType || byName</p><p>Autowired æ˜¯å…ˆ byteType,å¦‚æœå”¯ä¸€å‰‡æ³¨å…¥ï¼Œå¦åˆ™ byName æŸ¥æ‰¾ã€‚resource æ˜¯å…ˆ byname,ä¸ç¬¦åˆå†ç»§ç»­ byType</p><h4 id="resource-å’Œauotwired-çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#resource-å’Œauotwired-çš„åŒºåˆ«"></a> @Resource å’Œ@Auotwired çš„åŒºåˆ«:</h4><ul><li>éƒ½æ˜¯ç”¨æ¥è‡ªåŠ¨è£…é…çš„,éƒ½å¯ä»¥æ”¾åœ¨å±æ€§å­—æ®µä¸Š</li><li>@Auotwired æ˜¯é€šè¿‡ Byname çš„æ–¹å¼å®ç°,è€Œä¸”å¿…é¡»è¦æ±‚è¿™ä¸ªå¯¹è±¡å­˜åœ¨**[å¸¸ç”¨]**</li><li>@Resource é»˜è®¤æ˜¯é€šè¿‡ byname çš„æ–¹å¼å®ç°,å¦‚æœæ‰¾ä¸åˆ°åå­—,åˆ™é€šè¿‡ byType å®ç°,å¦‚æœä¸¤ä¸ªéƒ½æ‰¾ä¸åˆ°çš„æƒ…å†µä¸‹å°±æŠ¥é”™!</li><li>æ‰§è¡Œé¡ºåºä¸åŒ:@Auotwired é€šè¿‡ byType çš„æ–¹å¼å®ç°.@Resource é»˜è®¤æ˜¯é€šè¿‡ byname çš„æ–¹å¼å®ç°,</li></ul><h2 id="ä½¿ç”¨æ³¨è§£å¼€å‘"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ³¨è§£å¼€å‘"></a> ä½¿ç”¨æ³¨è§£å¼€å‘</h2><p><strong>åœ¨ spring4 ä¹‹å,è¦ä½¿ç”¨æ³¨è§£å¼€å‘,å¿…é¡»ä¿è¯ aop çš„åŒ…å¯¼å…¥äº†</strong></p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDIyMDE5MjQ0OTAucG5n?x-oss-process=image/format,png" alt="image-20200802201924490" /></p><p><strong>ä½¿ç”¨æ³¨è§£éœ€è¦å¯¼å…¥ context çº¦æŸ,å¢åŠ æ³¨è§£çš„æ”¯æŒ</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="bean"><a class="markdownIt-Anchor" href="#bean"></a> bean</h3><p>å¼¹å¹•è¯„è®ºï¼š<br />æœ‰äº†&lt; context:component-scan&gt;ï¼Œå¦ä¸€ä¸ª&lt; context:annotation-config/&gt;æ ‡ç­¾å¯ä»¥ç§»é™¤æ‰ï¼Œå› ä¸ºå·²ç»è¢«åŒ…å«è¿›å»äº†ã€‚</p><p>æ‰€ä»¥:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æŒ‡å®šæ‰«æåŒ…ä¸‹çš„æ³¨è§£--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.ms&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &amp;lt;!&amp;ndash;å¼€å¯æ³¨è§£æ”¯æŒ&amp;ndash;&amp;gt;--&gt;</span>    è¿™é‡Œå°±å¯ä»¥æ³¨é‡Šæ‰äº†</span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å±æ€§å¦‚ä½•æ³¨å…¥-value"><a class="markdownIt-Anchor" href="#å±æ€§å¦‚ä½•æ³¨å…¥-value"></a> å±æ€§å¦‚ä½•æ³¨å…¥ @Value</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç­‰ä»·äº    &lt;bean id=&quot;user&quot; class=&quot;com.hgm.pojo.User&quot;/&gt;      Component:ç»„ä»¶</span></span><br><span class="line"><span class="meta">@Component</span>  <span class="comment">//æ³¨å†Œbeanç”¨Componentä»£æ›¿äº†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String name;    <span class="comment">//ç›¸å½“äº        &lt;property name=&quot;name&quot; value=&quot;SerMs&quot;/&gt;</span></span><br><span class="line">    <span class="meta">@Value(&quot;SerMs&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¡ç”Ÿçš„æ³¨è§£"><a class="markdownIt-Anchor" href="#è¡ç”Ÿçš„æ³¨è§£"></a> è¡ç”Ÿçš„æ³¨è§£</h3><p>åœ¨ç±»é‡Œé¢ä½¿ç”¨äº†æ³¨è§£å°±è¯´æ˜è¿™ä¸ªç±»è¢« Spring æ‰˜ç®¡äº†ï¼Œä¹Ÿå°±æ˜¯æˆä¸º Spring çš„ç»„ä»¶äº†</p><p>@Component æœ‰å‡ ä¸ªè¡ç”Ÿæ³¨è§£ï¼Œä¼šæŒ‰ç…§ web å¼€å‘ä¸­ï¼Œmvc æ¶æ„ä¸­åˆ†å±‚ã€‚</p><ol><li>@Component æœ‰å‡ ä¸ªè¡ç”Ÿæ³¨è§£ï¼Œæˆ‘ä»¬åœ¨ web å¼€å‘ä¸­ï¼Œä¼šæŒ‰ç…§ MVC ä¸‰å±‚æ¶æ„åˆ†å±‚ï¼</li><li>dao å±‚ã€@Repositoryã€‘ ï¼ˆdao å±‚æˆ‘ä»¬éƒ½ä¼šç”¨ Repository æ¥æ³¨è§£ï¼‰</li><li>service å±‚ã€@Serviceã€‘ï¼ˆservice å±‚æˆ‘ä»¬éƒ½ä¼šç”¨ Serivce æ¥æ³¨è§£ï¼‰</li><li>Controller å±‚ã€@Controllerã€‘</li></ol><p>è¿™å››ä¸ªåŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä»£è¡¨å°†æŸä¸ªç±»æ³¨å†Œåˆ° Spring ä¸­ï¼Œè£…é… Bean</p><h3 id="è‡ªåŠ¨è£…é…"><a class="markdownIt-Anchor" href="#è‡ªåŠ¨è£…é…"></a> è‡ªåŠ¨è£…é…</h3><ul><li><p>@Auotwierdï¼šè‡ªåŠ¨è£…é…é€šè¿‡ç±»å‹ã€åå­—</p></li><li><p>å¦‚æœ Auotwierd ä¸èƒ½å”¯ä¸€è‡ªåŠ¨è£…é…ä¸Šå±æ€§ï¼Œåˆ™éœ€è¦é€šè¿‡@Qualifier(value=â€œxxxâ€)</p></li></ul><ul><li>@Nullableï¼šå­—æ®µæ ‡è®°äº†è¿™ä¸ªæ³¨è§£ï¼Œè¯´æ˜è¿™ä¸ªå­—æ®µå¯ä»¥ä¸º null</li><li>@Resourceï¼šè‡ªåŠ¨è£…é…é€šè¿‡åå­—ï¼Œç±»å‹</li></ul><h3 id="ä½œç”¨åŸŸscope"><a class="markdownIt-Anchor" href="#ä½œç”¨åŸŸscope"></a> ä½œç”¨åŸŸ@scope</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŸå‹æ¨¡å¼prototypeï¼Œå•ä¾‹æ¨¡å¼singleton</span></span><br><span class="line"><span class="comment">//scope(&quot;prototype&quot;)ç›¸å½“äº&lt;bean scope=&quot;prototype&quot;&gt;&lt;/bean&gt;</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@scope(&quot;prototype&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç›¸å½“äº&lt;property name=&quot;name&quot; value=&quot;kuangshen&quot;/&gt;</span></span><br><span class="line">    <span class="meta">@value(&quot;kuangshen&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¹Ÿå¯ä»¥æ”¾åœ¨setæ–¹æ³•ä¸Šé¢</span></span><br><span class="line">    <span class="meta">@value(&quot;kuangshen&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å°ç»“"><a class="markdownIt-Anchor" href="#å°ç»“"></a> å°ç»“</h3><p><strong>xml ä¸æ³¨è§£ï¼š</strong></p><ul><li>xml æ›´åŠ ä¸‡èƒ½ï¼Œä½¿ç”¨å®‡ä»»ä½•åœºåˆï¼Œç»´æŠ¤æ›´åŠ æ–¹ä¾¿</li><li>æ³¨è§£ ä¸æ˜¯è‡ªå·±ç±»ä½¿ç”¨ä¸äº†ï¼Œç»´æŠ¤ç›¸å¯¹å¤æ‚ï¼</li></ul><p><strong>xml ä¸æ³¨è§£æœ€ä½³å®è·µï¼š</strong></p><ul><li><p>xml ç”¨æ¥ç®¡ç† bean</p></li><li><p>æ³¨è§£åªè´Ÿè´£å±æ€§çš„æ³¨å…¥</p></li><li><p>æˆ‘ä»¬åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œåªéœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œå¿…é¡»è®©æ³¨è§£ç”Ÿæ•ˆï¼Œå°±éœ€è¦å¼€å¯æ³¨è§£çš„æ”¯æŒ</p></li><li><pre class="highlight"><code class="xml"><span class="hljs-comment">&lt;!--æŒ‡å®šè¦æ‰«æçš„åŒ…,è¿™ä¸ªåŒ…ä¸‹çš„æ³¨è§£æ‰ä¼šç”Ÿæ•ˆ--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">"com.hgm"</span>/&gt;</span><span class="hljs-comment">&lt;!--æ³¨è§£é©±åŠ¨--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span><span class="hljs-comment"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### æ³¨è§£è¯´æ˜</span><br><span class="line"></span><br><span class="line">- @Auotwierdï¼šè‡ªåŠ¨è£…é…é€šè¿‡ç±»å‹ã€åå­—</span><br><span class="line"></span><br><span class="line">  - å¦‚æœ Auotwierd ä¸èƒ½å”¯ä¸€è‡ªåŠ¨è£…é…ä¸Šå±æ€§ï¼Œåˆ™éœ€è¦é€šè¿‡@Qualifier(value=&quot;xxx&quot;)</span><br><span class="line"></span><br><span class="line">- @Nullableï¼šå­—æ®µæ ‡è®°äº†è¿™ä¸ªæ³¨è§£ï¼Œè¯´æ˜è¿™ä¸ªå­—æ®µå¯ä»¥ä¸º null</span><br><span class="line"></span><br><span class="line">- @Resourceï¼šè‡ªåŠ¨è£…é…é€šè¿‡åå­—ï¼Œç±»å‹</span><br><span class="line"></span><br><span class="line">- @Componentï¼šç»„ä»¶ï¼Œæ”¾åœ¨ç±»ä¸Šï¼Œè¯´æ˜è¿™ä¸ªç±»è¢« Spring ç®¡ç†äº†ï¼Œå°±æ˜¯ bean</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">## ä½¿ç”¨ Java çš„æ–¹å¼é…ç½® Spring</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬ç°åœ¨è¦å®Œå…¨ä¸ä½¿ç”¨ Spring çš„ xml é…ç½®äº†ï¼Œå…¨æƒäº¤ç»™ Java æ¥åš~</span><br><span class="line"></span><br><span class="line">JavaConfig æ˜¯ Spring çš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œåœ¨ Spring4 ä¹‹åä»–æˆä¸ºäº†ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½</span><br><span class="line"></span><br><span class="line">![](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDIyMTU3NTI4NjgucG5n?x-oss-process=image/format,png)</span><br><span class="line"></span><br><span class="line">**å®ä½“ç±»ï¼špojo çš„ User.java**</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">//è¿™é‡Œè¿™ä¸ªæ³¨è§£çš„æ„æ€,å°±æ˜¯è¯´æ˜è¿™ä¸ªç±»è¢«Springæ¥ç®¡äº†,æ³¨å†Œåˆ°äº†å®¹å™¨ä¸­</span><br><span class="line">@component</span><br><span class="line">public class User &#123;</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">    return name;</span><br><span class="line">    &#125;</span><br><span class="line">    //å±æ€§æ³¨å…¥å€¼</span><br><span class="line">    @value(&quot;QINJIANG&#x27;)</span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">    this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;user&#123;&quot; +</span><br><span class="line">        &quot;name=&#x27;&quot; + name + &#x27;\&#x27;&#x27;+</span><br><span class="line">        &#x27;&#125;&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></span></code></pre></li></ul><p>å¼¹å¹•è¯„è®ºï¼šè¦ä¹ˆä½¿ç”¨@Beanï¼Œè¦ä¹ˆä½¿ç”¨@Component å’Œ ComponentScanï¼Œä¸¤ç§æ•ˆæœä¸€æ ·</p><p><strong>é…ç½®æ–‡ä»¶</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kuang.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.kuang.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @Configurationæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªControllerï¼Œä¹Ÿä¼šè¢«springæ‰˜ç®¡ï¼Œæ³¨å†Œåˆ°å®¹å™¨ä¸­</span></span><br><span class="line"><span class="comment">// @Configurationè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå’Œä¹‹å‰çš„beans.xmlçš„åŠŸèƒ½ä¸€æ ·çš„</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.kuang.pojo&quot;)</span>        <span class="comment">// @ComponentScanè¡¨ç¤ºç»„ä»¶çš„æ‰«æ</span></span><br><span class="line"><span class="meta">@Import(MyConfig1.class)</span>                 <span class="comment">// é€šè¿‡importå¯¼å…¥å…¶ä»–çš„é…ç½®ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig</span> &#123;</span><br><span class="line">    <span class="comment">// @Bean è¡¨ç¤ºæ³¨å†Œä¸€ä¸ªbean</span></span><br><span class="line">    <span class="comment">// æ–¹æ³•çš„åå­—å³æ˜¯beanä¸­çš„id</span></span><br><span class="line">    <span class="comment">// æ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯beanä¸­çš„class</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();      <span class="comment">// returnå°±æ˜¯è¿”å›è¦æ³¨å…¥åˆ°beanä¸­çš„å¯¹è±¡</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¼¹å¹•è¯„è®ºï¼šComponentScanã€@Component(&quot;pojoâ€) è¿™ä¸¤ä¸ªæ³¨è§£é…åˆä½¿ç”¨</p><p><strong>æµ‹è¯•ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.kuang.config.MyConfig;</span><br><span class="line"><span class="keyword">import</span> com.kuang.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœä½¿ç”¨äº†javaé…ç½®ç±»çš„æ–¹å¼æ¥æ³¨å†Œbeanï¼Œ</span></span><br><span class="line">        <span class="comment">// åªèƒ½é€šè¿‡AnnotationConfigä¸Šä¸‹æ–‡æ¥è·å–å®¹å™¨ï¼Œé€šè¿‡é…ç½®ç±»çš„classå¯¹è±¡åŠ è½½ï¼</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(MyConfig.class);</span><br><span class="line">        <span class="comment">// è·å–é€šè¿‡é…ç½®ç±»ä¸­çš„æ–¹æ³•getUseræ–¹æ³•æ¥è·å¾—çš„Userå¯¹è±¡</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) context.getBean(<span class="string">&quot;getUser&quot;</span>);</span><br><span class="line">        System.out.println(user.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™ç§çº¯ Java çš„é…ç½®æ–¹å¼ï¼Œåœ¨ SpringBoot ä¸­éšå¤„å¯è§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œè¿™ä¸ªæ³¨è§£çš„æ„æ€å°±æ˜¯è¯´æ˜è¿™ä¸ªç±»è¢« Spring æ¥ç®¡äº†ï¼Œæ³¨å†Œåˆ°äº†å®¹å™¨ä¸­</p><p>@Configuration æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ä¸ª@Componentï¼Œä»£è¡¨è¿™ä¸ªä¸€ä¸ªé…ç½®ç±»å’Œ bean.xml ä¸€æ ·</p><p>@ComponentScan(â€œcom.kuang.pojoâ€) // @ComponentScan è¡¨ç¤ºç»„ä»¶çš„æ‰«æ @Import(MyConfig1.class) // é€šè¿‡ import å¯¼å…¥å…¶ä»–çš„é…ç½®ç±»</p><p><strong>ä¼šåˆ›å»ºä¸¤ä¸ªç›¸åŒå¯¹è±¡é—®é¢˜çš„è¯´æ˜ï¼š</strong></p><p><strong>å¼¹å¹•æ€»ç»“ - -&gt; @Bean æ˜¯ç›¸å½“äº&lt; bean&gt;æ ‡ç­¾åˆ›å»ºçš„å¯¹è±¡ï¼Œè€Œæˆ‘ä»¬ä¹‹å‰å­¦çš„@Component æ˜¯é€šè¿‡ spring è‡ªåŠ¨åˆ›å»ºçš„è¿™ä¸ªè¢«æ³¨è§£å£°æ˜çš„å¯¹è±¡ï¼Œæ‰€ä»¥è¿™é‡Œç›¸å½“äºæœ‰ä¸¤ä¸ª User å¯¹è±¡è¢«åˆ›å»ºäº†ã€‚ä¸€ä¸ªæ˜¯ bean æ ‡ç­¾åˆ›å»ºçš„ï¼ˆ@Beanï¼‰ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡æ‰«æç„¶åä½¿ç”¨@Componentï¼Œspring è‡ªåŠ¨åˆ›å»ºçš„ User å¯¹è±¡ï¼Œæ‰€ä»¥è¿™é‡Œå»æ‰@Bean è¿™äº›ä¸œè¥¿ï¼Œç„¶åå¼€å¯æ‰«æã€‚ä¹‹ååœ¨ User å¤´ä¸Šç”¨@Component å³å¯è¾¾åˆ° spring è‡ªåŠ¨åˆ›å»º User å¯¹è±¡äº†</strong></p><hr /><h2 id="ä»£ç†æ¨¡å¼aop"><a class="markdownIt-Anchor" href="#ä»£ç†æ¨¡å¼aop"></a> ä»£ç†æ¨¡å¼ï¼ˆAOPï¼‰</h2><p>ä¸ºä»€ä¹ˆè¦å­¦ä»£ç†æ¨¡å¼ï¼Ÿ</p><p>å› ä¸ºè¿™ä¸ªå°±æ˜¯ SpringAOP çš„åº•å±‚ï¼ã€SpringAOP å’Œ SpringMVCã€‘</p><p>ä»£ç†æ¨¡å¼çš„åˆ†ç±»ï¼š</p><ul><li>é™æ€ä»£ç†</li><li>åŠ¨æ€ä»£ç†</li></ul><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDMxMDE0Mjc4NDYucG5n?x-oss-process=image/format,png" alt="image-20200803101427846" /></p><h3 id="é™æ€ä»£ç†"><a class="markdownIt-Anchor" href="#é™æ€ä»£ç†"></a> é™æ€ä»£ç†</h3><p><strong>è§’è‰²åˆ†æ</strong>ï¼š</p><ul><li>æŠ½è±¡è§’è‰²ï¼šä¸€èˆ¬ä¼šä½¿ç”¨æ¥å£æˆ–è€…æŠ½è±¡ç±»æ¥è§£å†³</li><li>çœŸå®è§’è‰²ï¼šè¢«ä»£ç†è§’è‰²</li><li>ä»£ç†è§’è‰²ï¼šä»£ç†çœŸå®è§’è‰²ï¼Œä»£ç†çœŸå®è§’è‰²åï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šåšä¸€äº›é™„å±æ“ä½œ</li><li>å®¢æˆ·ï¼šä½¿ç”¨ä»£ç†è§’è‰²æ¥è¿›è¡Œä¸€äº›æ“ä½œ .</li></ul><p>ä»£ç æ­¥éª¤ï¼š</p><ol><li><p>rent æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kuang.Daili;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Rent</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>çœŸå®è§’è‰²(Client ç§Ÿæˆ·)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kuang.Daili;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Host host=<span class="keyword">new</span> <span class="title class_">Host</span>();</span><br><span class="line">        <span class="comment">//host.rent();</span></span><br><span class="line">        Proxy proxy=<span class="keyword">new</span> <span class="title class_">Proxy</span>(host);</span><br><span class="line"></span><br><span class="line">        proxy.rent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>proxy ä»£ç†è§’è‰²</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kuang.Daili;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Proxy</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Host host;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Proxy</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Proxy</span><span class="params">(Host host)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.host=host;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span>&#123;</span><br><span class="line">        seeHouse();</span><br><span class="line"></span><br><span class="line">        host.rent();</span><br><span class="line">        hetong();</span><br><span class="line">        fare();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">seeHouse</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸­ä»‹å¸¦ä½ çœ‹æˆ¿&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fare</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ”¶ä¸­ä»‹è´¹!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hetong</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç­¾ç§Ÿé¢†åˆåŒ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å®¢æˆ·ç«¯è®¿é—®ä»£ç†è§’è‰²</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;        <span class="comment">//æˆ¿ä¸œè¦ç§Ÿæˆ¿å­</span></span><br><span class="line">        <span class="type">Host</span> <span class="variable">host</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Host</span>();        <span class="comment">//ä»£ç†,ä¸­ä»‹å¸®æˆ¿ä¸œç§Ÿæˆ¿å­,ä½†æ˜¯ä»£ç†è§’è‰²ä¼šåŠ ä¸€äº›é™„å±æ“ä½œ</span></span><br><span class="line">        <span class="type">Proxy</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Proxy</span>(host);        <span class="comment">//ä½ ä¸ç”¨é¢å¯¹æˆ¿ä¸œ,ç›´æ¥æ‰¾ä¸­ä»‹ç§Ÿæˆ¿å³å¯</span></span><br><span class="line">        proxy.rent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>åˆ†æï¼šåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ ç›´æ¥æ¥è§¦çš„å°±æ˜¯ä¸­ä»‹ï¼Œå°±å¦‚åŒç°å®ç”Ÿæ´»ä¸­çš„æ ·å­ï¼Œä½ çœ‹ä¸åˆ°æˆ¿ä¸œï¼Œä½†æ˜¯ä½ ä¾æ—§ç§Ÿåˆ°äº†æˆ¿ä¸œçš„æˆ¿å­é€šè¿‡ä»£ç†ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ä»£ç†æ¨¡å¼ï¼Œç¨‹åºæºè‡ªäºç”Ÿæ´»ï¼Œæ‰€ä»¥å­¦ç¼–ç¨‹çš„äººï¼Œä¸€èˆ¬èƒ½å¤Ÿæ›´åŠ æŠ½è±¡çš„çœ‹å¾…ç”Ÿæ´»ä¸­å‘ç”Ÿçš„äº‹æƒ…ã€‚</p><h5 id="ä»£ç†æ¨¡å¼çš„å¥½å¤„"><a class="markdownIt-Anchor" href="#ä»£ç†æ¨¡å¼çš„å¥½å¤„"></a> ä»£ç†æ¨¡å¼çš„å¥½å¤„ï¼š</h5><ul><li>å¯ä»¥ä½¿çœŸå®è§’è‰²çš„æ“ä½œæ›´åŠ çº¯ç²¹ï¼Œä¸ç”¨å»å…³æ³¨ä¸€äº›å…¬å…±ä¸šåŠ¡</li><li>å…¬å…±ä¸šåŠ¡å°±äº¤ç»™äº†ä»£ç†è§’è‰²ï¼Œå®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥</li><li>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•çš„æ—¶å€™ï¼Œæ–¹ä¾¿é›†ä¸­ç®¡ç†</li></ul><h5 id="ç¼ºç‚¹"><a class="markdownIt-Anchor" href="#ç¼ºç‚¹"></a> ç¼ºç‚¹ï¼š</h5><ul><li>ä¸€ä¸ªçœŸå®è§’è‰²å°±ä¼šäº§ç”Ÿä¸€ä¸ªä»£ç†è§’è‰²ï¼Œä»£ç é‡ä¼šç¿»å€ï¼Œå¼€å‘æ•ˆç‡ä¼šå˜ä½</li><li>ç±»å¤šäº† , å¤šäº†ä»£ç†ç±» , å·¥ä½œé‡å˜å¤§äº† . å¼€å‘æ•ˆç‡é™ä½ .</li></ul><h3 id="é™æ€ä»£ç†çš„å†ç†è§£"><a class="markdownIt-Anchor" href="#é™æ€ä»£ç†çš„å†ç†è§£"></a> **é™æ€ä»£ç†çš„å†ç†è§£ **</h3><ol><li><p>åˆ›å»ºä¸€ä¸ªæŠ½è±¡è§’è‰²ï¼Œæ¯”å¦‚å’‹ä»¬å¹³æ—¶åšçš„ç”¨æˆ·ä¸šåŠ¡ï¼ŒæŠ½è±¡èµ·æ¥å°±æ˜¯å¢åˆ æ”¹æŸ¥ï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŠ½è±¡è§’è‰²ï¼šå¢åˆ æ”¹æŸ¥ä¸šåŠ¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">query</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªçœŸå®å¯¹è±¡æ¥å®Œæˆè¿™äº›å¢åˆ æ”¹æŸ¥æ“ä½œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//çœŸå®å¯¹è±¡ï¼Œå®Œæˆå¢åˆ æ”¹æŸ¥æ“ä½œçš„äºº</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¢åŠ äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ›´æ–°äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">query</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æŸ¥è¯¢äº†ä¸€ä¸ªç”¨æˆ·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>éœ€æ±‚æ¥äº†ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦å¢åŠ ä¸€ä¸ªæ—¥å¿—åŠŸèƒ½ï¼Œæ€ä¹ˆå®ç°ï¼</p><ul><li><p>æ€è·¯ 1 ï¼šåœ¨å®ç°ç±»ä¸Šå¢åŠ ä»£ç  ã€éº»çƒ¦ï¼ã€‘</p></li><li><p>æ€è·¯ 2ï¼šä½¿ç”¨ä»£ç†æ¥åšï¼Œèƒ½å¤Ÿä¸æ”¹å˜åŸæ¥çš„ä¸šåŠ¡æƒ…å†µä¸‹ï¼Œå®ç°æ­¤åŠŸèƒ½å°±æ˜¯æœ€å¥½çš„äº†ï¼</p></li></ul></li><li><p>è®¾ç½®ä¸€ä¸ªä»£ç†ç±»æ¥å¤„ç†æ—¥å¿—ï¼ä»£ç†è§’è‰²</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»£ç†è§’è‰²ï¼Œåœ¨è¿™é‡Œé¢å¢åŠ æ—¥å¿—çš„å®ç°</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceProxy</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> UserServiceImpl userService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserService</span><span class="params">(UserServiceImpl userService)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userService = userService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        log(<span class="string">&quot;add&quot;</span>);</span><br><span class="line">        userService.add();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">        log(<span class="string">&quot;delete&quot;</span>);</span><br><span class="line">        userService.delete();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        log(<span class="string">&quot;update&quot;</span>);</span><br><span class="line">        userService.update();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">query</span><span class="params">()</span> &#123;</span><br><span class="line">        log(<span class="string">&quot;query&quot;</span>);</span><br><span class="line">        userService.query();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†&quot;</span>+msg+<span class="string">&quot;æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>OKï¼Œåˆ°äº†ç°åœ¨ä»£ç†æ¨¡å¼å¤§å®¶åº”è¯¥éƒ½æ²¡æœ‰ä»€ä¹ˆé—®é¢˜äº†ï¼Œé‡ç‚¹å¤§å®¶éœ€è¦ç†è§£å…¶ä¸­çš„æ€æƒ³ï¼›æˆ‘ä»¬åœ¨ä¸æ”¹å˜åŸæ¥çš„ä»£ç çš„æƒ…å†µä¸‹ï¼Œå®ç°äº†å¯¹åŸæœ‰åŠŸèƒ½çš„å¢å¼ºï¼Œè¿™æ˜¯ AOP ä¸­æœ€æ ¸å¿ƒçš„æ€æƒ³</p></li></ol><p><strong>AOP æ¨ªå‘å¼€å‘</strong></p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDMxMTE1Mzk2MjEucG5n?x-oss-process=image/format,png" alt="image-20200803111539621" /></p><p><strong>æˆ‘ä»¬æƒ³è¦é™æ€ä»£ç†çš„å¥½å¤„ï¼Œåˆä¸æƒ³è¦é™æ€ä»£ç†çš„ç¼ºç‚¹ï¼Œæ‰€ä»¥ , å°±æœ‰äº†åŠ¨æ€ä»£ç†</strong></p><h3 id="åŠ¨æ€ä»£ç†"><a class="markdownIt-Anchor" href="#åŠ¨æ€ä»£ç†"></a> åŠ¨æ€ä»£ç†</h3><ul><li>åŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†è§’è‰²ä¸€æ ·</li><li>åŠ¨æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯åŠ¨æ€ç”Ÿæˆçš„,ä¸æ˜¯æˆ‘ä»¬ç›´æ¥å†™å¥½çš„</li><li>åŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤å¤§ç±»:åŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†,åŸºäºç±»çš„åŠ¨æ€ä»£ç†<ul><li>åŸºäºæ¥å£â€”JDK åŠ¨æ€ä»£ç†</li><li>åŸºäºç±»:cglib</li><li>java å­—èŠ‚ç å®ç° ï¼š Javassist</li></ul></li></ul><p>éœ€è¦äº†è§£ä¸¤ä¸ªç±»ï¼šProxyï¼ŒInvocationHandler</p><p>ã€InvocationHandlerï¼šè°ƒç”¨å¤„ç†ç¨‹åºã€‘</p><p><img src="https://img-blog.csdnimg.cn/20210201202822371.png" alt="img" /></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Object <span class="title function_">invoke</span><span class="params">(Object proxy, æ–¹æ³• method, Object[] args)</span>ï¼›</span><br><span class="line"><span class="comment">//å‚æ•°</span></span><br><span class="line"><span class="comment">//proxy - è°ƒç”¨è¯¥æ–¹æ³•çš„ä»£ç†å®ä¾‹</span></span><br><span class="line"><span class="comment">//method -æ‰€è¿°æ–¹æ³•å¯¹åº”äºè°ƒç”¨ä»£ç†å®ä¾‹ä¸Šçš„æ¥å£æ–¹æ³•çš„å®ä¾‹ã€‚æ–¹æ³•å¯¹è±¡çš„å£°æ˜ç±»å°†æ˜¯è¯¥æ–¹æ³•å£°æ˜çš„æ¥å£ï¼Œå®ƒå¯ä»¥æ˜¯ä»£ç†ç±»ç»§æ‰¿è¯¥æ–¹æ³•çš„ä»£ç†æ¥å£çš„è¶…çº§æ¥å£ã€‚</span></span><br><span class="line"><span class="comment">//args -åŒ…å«çš„æ–¹æ³•è°ƒç”¨ä¼ é€’ä»£ç†å®ä¾‹çš„å‚æ•°å€¼çš„å¯¹è±¡çš„é˜µåˆ—ï¼Œæˆ–nullå¦‚æœæ¥å£æ–¹æ³•æ²¡æœ‰å‚æ•°ã€‚åŸå§‹ç±»å‹çš„å‚æ•°åŒ…å«åœ¨é€‚å½“çš„åŸå§‹åŒ…è£…å™¨ç±»çš„å®ä¾‹ä¸­ï¼Œä¾‹å¦‚java.lang.Integeræˆ–java.lang.Boolean ã€‚.</span></span><br></pre></td></tr></table></figure><p>å®ä¾‹ï¼š</p><p>æ¥å£ Host.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¥å£</span></span><br><span class="line"><span class="keyword">package</span> pojo2;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Host</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥å£ Host å®ç°ç±» HostMaster.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¥å£å®ç°ç±»</span></span><br><span class="line"><span class="keyword">package</span> pojo2;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HostMaster</span> <span class="keyword">implements</span> <span class="title class_">Host</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ¿ä¸œè¦ç§Ÿæˆ¿å­&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»£ç†è§’è‰²çš„å¤„ç†ç¨‹åºç±» ProxyInvocationHandler.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> pojo2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">///ç”¨è¿™ä¸ªç±»ï¼Œè‡ªåŠ¨ç”Ÿæˆä»£ç†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyInvocationHandler</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Foo f =(Foo) Proxy.NewProxyInstance(Foo. Class.GetClassLoader(),</span></span><br><span class="line">    <span class="comment">// new Class&lt;?&gt;[] &#123; Foo.Class &#125;,</span></span><br><span class="line">    <span class="comment">// handler);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¢«ä»£ç†çš„æ¥å£</span></span><br><span class="line">    <span class="keyword">public</span> HostMaster hostMaster ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHostMaster</span><span class="params">(HostMaster hostMaster)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.hostMaster = hostMaster;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¾—åˆ°ç”Ÿæˆçš„ä»£ç†ç±»</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getProxy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// newProxyInstance() -&gt; ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œå°±ä¸ç”¨å†å†™å…·ä½“çš„ä»£ç†ç±»äº†</span></span><br><span class="line">        <span class="comment">// this.getClass().getClassLoader() -&gt; æ‰¾åˆ°åŠ è½½ç±»çš„ä½ç½®</span></span><br><span class="line">        <span class="comment">// hostMaster.getClass().getInterfaces() -&gt; ä»£ç†çš„å…·ä½“æ¥å£</span></span><br><span class="line">        <span class="comment">// this -&gt; ä»£è¡¨äº†æ¥å£InvocationHandlerçš„å®ç°ç±»ProxyInvocationHandler</span></span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(<span class="built_in">this</span>.getClass().getClassLoader(), hostMaster.getClass().getInterfaces(), <span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¤„ç†ä»£ç†å®ä¾‹å¹¶è¿”å›ç»“æœ</span></span><br><span class="line">        <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">            seeHouse();</span><br><span class="line">            <span class="comment">// åŠ¨æ€ä»£ç†çš„æœ¬è´¨ï¼Œå°±æ˜¯ä½¿ç”¨åå°„æœºåˆ¶å®ç°çš„</span></span><br><span class="line">            <span class="comment">// invoke()æ‰§è¡Œå®ƒçœŸæ­£è¦æ‰§è¡Œçš„æ–¹æ³•</span></span><br><span class="line">            <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(hostMaster, args);</span><br><span class="line">            fee();</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">seeHouse</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;çœ‹æˆ¿å­&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fee</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ”¶ä¸­ä»‹è´¹&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ç”¨æˆ·ç±» My2.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> holle4_proxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pojo2.Host;</span><br><span class="line"><span class="keyword">import</span> pojo2.Host2;</span><br><span class="line"><span class="keyword">import</span> pojo2.HostMaster;</span><br><span class="line"><span class="keyword">import</span> pojo2.ProxyInvocationHandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">My2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//çœŸå®è§’è‰²</span></span><br><span class="line">        <span class="type">HostMaster</span> <span class="variable">hostMaster</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HostMaster</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä»£ç†è§’è‰²ï¼Œç°åœ¨æ²¡æœ‰ï¼›ç”¨ä»£ç†è§’è‰²çš„å¤„ç†ç¨‹åºæ¥å®ç°Hostæ¥å£çš„è°ƒç”¨</span></span><br><span class="line">        <span class="type">ProxyInvocationHandler</span> <span class="variable">pih</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProxyInvocationHandler</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//pih -&gt; HostMasteræ¥å£ç±» -&gt; Hostæ¥å£</span></span><br><span class="line">        pih.setHostMaster(hostMaster);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–newProxyInstanceåŠ¨æ€ç”Ÿæˆä»£ç†ç±»</span></span><br><span class="line">        <span class="type">Host</span> <span class="variable">proxy</span> <span class="operator">=</span> (Host) pih.getProxy();</span><br><span class="line"></span><br><span class="line">        proxy.rent();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¼¹å¹•è¯„è®ºï¼š<br />ä»€ä¹ˆæ—¶å€™è°ƒç”¨ invoke æ–¹æ³•çš„?<br />ä»£ç†å®ä¾‹è°ƒç”¨æ–¹æ³•æ—¶ invoke æ–¹æ³•å°±ä¼šè¢«è°ƒç”¨ï¼Œå¯ä»¥ debug è¯•è¯•</p><p>æ”¹ä¸º<strong>ä¸‡èƒ½ä»£ç†ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">///ç”¨è¿™ä¸ªç±»ï¼Œè‡ªåŠ¨ç”Ÿä»£ç†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyInvocationHandler</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Foo f =(Foo) Proxy.NewProxyInstance(Foo. Class.GetClassLoader(),</span></span><br><span class="line">    <span class="comment">// new Class&lt;?&gt;[] &#123; Foo.Class &#125;,</span></span><br><span class="line">    <span class="comment">// handler);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¢«ä»£ç†çš„æ¥å£</span></span><br><span class="line">    <span class="keyword">public</span> Object target;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTarget</span><span class="params">(Object target)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¾—åˆ°ç”Ÿæˆçš„ä»£ç†ç±» -&gt; å›ºå®šçš„ä»£ç </span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getProxy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// newProxyInstance() -&gt; ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œå°±ä¸ç”¨å†å†™å…·ä½“çš„ä»£ç†ç±»äº†</span></span><br><span class="line">        <span class="comment">// this.getClass().getClassLoader() -&gt; æ‰¾åˆ°åŠ è½½ç±»çš„ä½ç½®</span></span><br><span class="line">        <span class="comment">// hostMaster.getClass().getInterfaces() -&gt; ä»£ç†çš„å…·ä½“æ¥å£</span></span><br><span class="line">        <span class="comment">// this -&gt; ä»£è¡¨äº†æ¥å£InvocationHandlerçš„å®ç°ç±»ProxyInvocationHandler</span></span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(<span class="built_in">this</span>.getClass().getClassLoader(),</span><br><span class="line">                                      target.getClass().getInterfaces(), <span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç†ä»£ç†å®ä¾‹å¹¶è¿”å›ç»“æœ</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line">        pre();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ‰“å°æ—¥å¿—,é€šè¿‡åå°„çš„æ–¹å¼</span></span><br><span class="line">        log(method.getName());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åŠ¨æ€ä»£ç†çš„æœ¬è´¨ï¼Œå°±æ˜¯ä½¿ç”¨åå°„æœºåˆ¶å®ç°çš„</span></span><br><span class="line">        <span class="comment">// invoke()æ‰§è¡Œå®ƒçœŸæ­£è¦æ‰§è¡Œçš„æ–¹æ³•</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(target, args);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åç½®é€šçŸ¥</span></span><br><span class="line">        post();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pre</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[å‰ç½®é€šçŸ¥]&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">post</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[åç½®é€šçŸ¥]&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ—¥å¿—æ‰“å°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[Debug]æ‰§è¡Œäº†&quot;</span> + msg + <span class="string">&quot;æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//çœŸå®è§’è‰²</span></span><br><span class="line">        <span class="type">UserServiceImpl</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä»£ç†è§’è‰²,ä¸å­˜åœ¨</span></span><br><span class="line">        <span class="type">ProxyInvocationHandler</span> <span class="variable">proxyInvocationHandler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProxyInvocationHandler</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¾ç½®è¦ä»£ç†çš„å¯¹è±¡</span></span><br><span class="line">        proxyInvocationHandler.setTarget(userService);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åŠ¨æ€ç”Ÿäº§ä»£ç†ç±»</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">proxy</span> <span class="operator">=</span> (UserService) proxyInvocationHandler.getProxy();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ‰§è¡Œä¸šåŠ¡æ“ä½œ</span></span><br><span class="line">        proxy.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŠ¨æ€ä»£ç†çš„å¥½å¤„:</p><ul><li>å¯ä»¥ä½¿çœŸå®è§’è‰²çš„æ“ä½œæ›´åŠ çº¯ç²¹ï¼Œä¸ç”¨å»å…³æ³¨ä¸€äº›å…¬å…±çš„ä¸šåŠ¡</li><li>å…¬å…±ä¹Ÿå°±äº¤ç»™ä»£ç†è§’è‰²ï¼å®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥</li><li>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•çš„æ—¶å€™ï¼Œæ–¹ä¾¿é›†ä¸­ç®¡ç†</li><li>ä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»ä»£ç†çš„æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸€èˆ¬å°±æ˜¯å¯¹åº”çš„ä¸€ç±»ä¸šåŠ¡</li><li>ä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»å¯ä»¥ä»£ç†å¤šä¸ªç±»ï¼Œåªè¦æ˜¯å®ç°äº†åŒä¸€ä¸ªæ¥å£å³å¯</li></ul><h2 id="aop"><a class="markdownIt-Anchor" href="#aop"></a> AOP</h2><hr /><h3 id="ä»€ä¹ˆæ˜¯-aop"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯-aop"></a> ä»€ä¹ˆæ˜¯ AOP</h3><p>AOP æ„ä¸º:é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œé€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ï¼ŒAOP æ˜¯ OOP çš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯ String æ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ç§è¡ç”ŸèŒƒå‹ï¼Œåˆ©ç”¨ AOP å¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘æ•ˆç‡ã€‚</p><p><img src="https://s1.ax1x.com/2020/08/28/dIUZkV.png" alt="dIUZkV.png" /></p><h3 id="æœ¯è¯­"><a class="markdownIt-Anchor" href="#æœ¯è¯­"></a> æœ¯è¯­:</h3><ol><li>Aspect:åˆ‡é¢,è¡¨ç¤ºå¢å¼ºçš„åŠŸèƒ½,å°±æ˜¯ä¸€æ¨ä»£ç ,å®ŒæˆæŸä¸€ä¸ªåŠŸèƒ½,éä¸šåŠ¡åŠŸèƒ½,å¸¸è§çš„åˆ‡é¢åŠŸèƒ½æœ‰æ—¥å¿—,äº‹åŠ¡,ç»Ÿè®¡ä¿¡æ¯,å‚æ•°æ£€æŸ¥,æƒé™éªŒè¯</li><li>JoinPoint:é“¾æ¥ç‚¹,è¿æ¥ä¸šåŠ¡æ–¹æ³•å’Œåˆ‡é¢çš„ä½ç½®,å°±æŸç±»ä¸­çš„ä¸šåŠ¡çš„æ–¹æ³•</li><li>ç›®æ ‡å¯¹è±¡:ç»™å“ªä¸ªç±»çš„æ–¹æ³•å¢åŠ åŠŸèƒ½,è¿™ä¸ªç±»å°±æ˜¯ç›®æ ‡å¯¹è±¡</li></ol><h3 id="åˆ‡é¢æœ‰å…³çš„ä¸‰è¦ç´ "><a class="markdownIt-Anchor" href="#åˆ‡é¢æœ‰å…³çš„ä¸‰è¦ç´ "></a> åˆ‡é¢æœ‰å…³çš„ä¸‰è¦ç´ :</h3><ol><li>åˆ‡é¢çš„åŠŸèƒ½ä»£ç ,åˆ‡é¢å¹²ä»€ä¹ˆ</li><li>åˆ‡é¢çš„æ‰§è¡Œä½ç½®,ä½¿ç”¨ Pointcut è¡¨ç¤ºåˆ‡é¢æ‰§è¡Œçš„ä½ç½®</li><li>åˆ‡é¢çš„æ‰§è¡Œæ—¶é—´,ä½¿ç”¨ Advice è¡¨ç¤ºæ—¶é—´,åœ¨ç›®æ ‡æ–¹æ³•ä¹‹å‰,è¿˜æ˜¯ç›®æ ‡æ–¹æ³•ä¹‹å</li></ol><h3 id="aop-åœ¨-spring-ä¸­çš„ä½¿ç”¨"><a class="markdownIt-Anchor" href="#aop-åœ¨-spring-ä¸­çš„ä½¿ç”¨"></a> AOP åœ¨ Spring ä¸­çš„ä½¿ç”¨</h3><p>æä¾›å£°æ˜å¼äº‹åŠ¡ï¼Œå…è®¸ç”¨æˆ·è‡ªå®šä¹‰åˆ‡é¢</p><ul><li>æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼šè·¨è¶Šåº”ç”¨ç¨‹åºå¤šä¸ªæ¨¡å—çš„æ–¹æ³•æˆ–åŠŸèƒ½ã€‚å³æ˜¯ï¼Œä¸æˆ‘ä»¬ä¸šåŠ¡é€»è¾‘æ— å…³çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„éƒ¨åˆ†ï¼Œå°±æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚å¦‚æ—¥å¿—ï¼Œå®‰å…¨ï¼Œç¼“å­˜ï¼Œäº‹åŠ¡ç­‰ç­‰â€¦</li><li>åˆ‡é¢(Aspect)ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹ è¢«æ¨¡å—åŒ–çš„ç‰¹æ®Šå¯¹è±¡ã€‚å³ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»ã€‚ï¼ˆLog ç±»ï¼‰</li><li>é€šçŸ¥(Advice)ï¼šåˆ‡é¢å¿…é¡»è¦å®Œæˆçš„å·¥ä½œã€‚å³ï¼Œå®ƒæ˜¯ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚ï¼ˆLog ç±»ä¸­çš„æ–¹æ³•ï¼‰</li><li>ç›®æ ‡(Target)ï¼šè¢«é€šçŸ¥å¯¹è±¡ã€‚ï¼ˆç”Ÿæˆçš„ä»£ç†ç±»)</li><li>ä»£ç†(Proxy)ï¼šå‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„å¯¹è±¡ã€‚ï¼ˆç”Ÿæˆçš„ä»£ç†ç±»ï¼‰</li><li>åˆ‡å…¥ç‚¹(PointCut)ï¼šåˆ‡é¢é€šçŸ¥æ‰§è¡Œçš„â€åœ°ç‚¹â€çš„å®šä¹‰ã€‚ï¼ˆæœ€åä¸¤ç‚¹ï¼šåœ¨å“ªä¸ªåœ°æ–¹æ‰§è¡Œï¼Œæ¯”å¦‚ï¼šmethod.invoke()ï¼‰</li><li>è¿æ¥ç‚¹(JointPoint)ï¼šä¸åˆ‡å…¥ç‚¹åŒ¹é…çš„æ‰§è¡Œç‚¹ã€‚</li></ul><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDMxNTQwNDM5MDkucG5n?x-oss-process=image/format,png" alt="image-20200803154043909" /></p><p>SpringAOP ä¸­ï¼Œé€šè¿‡ Advice å®šä¹‰æ¨ªåˆ‡é€»è¾‘ï¼ŒSpring ä¸­æ”¯æŒ 5 ç§ç±»å‹çš„ Advice:</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDMxMzU5Mzc0MzUucG5n?x-oss-process=image/format,png" alt="image-20200803135937435" /></p><p><strong>å³ AOP åœ¨ä¸æ”¹å˜åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œå»å¢åŠ æ–°çš„åŠŸèƒ½ã€‚</strong>ï¼ˆä»£ç†ï¼‰</p><h3 id="ä½¿ç”¨-spring-å®ç°-aopé‡ç‚¹"><a class="markdownIt-Anchor" href="#ä½¿ç”¨-spring-å®ç°-aopé‡ç‚¹"></a> ä½¿ç”¨ Spring å®ç° AOPã€é‡ç‚¹ã€‘</h3><ul><li>ä½¿ç”¨ AOP ç»‡å…¥ï¼Œéœ€è¦å¯¼å…¥ä¸€ä¸ªä¾èµ–åŒ…ï¼</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ–¹æ³•ä¸€ä½¿ç”¨åŸç”Ÿ-spring-æ¥å£"><a class="markdownIt-Anchor" href="#æ–¹æ³•ä¸€ä½¿ç”¨åŸç”Ÿ-spring-æ¥å£"></a> æ–¹æ³•ä¸€ï¼šä½¿ç”¨åŸç”Ÿ spring æ¥å£</h4><p>springAPI æ¥å£å®ç°</p><p>éœ€è¦å…ˆå¯¼å…¥ aop çº¦æŸ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åˆ›å»º applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">                           https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">                           https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ³¨å†Œbean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userservice&quot;</span> <span class="attr">class</span>=<span class="string">&quot;service.UserServiceImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;log&quot;</span> <span class="attr">class</span>=<span class="string">&quot;log.Log&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;afterLog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;log.AfterLog&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ–¹å¼ä¸€ï¼Œä½¿ç”¨åŸç”ŸSpring APIæ¥å£--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®aop,è¿˜éœ€è¦å¯¼å…¥aopçº¦æŸ--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åˆ‡å…¥ç‚¹ï¼šexpression:è¡¨è¾¾å¼ï¼Œexecutionï¼ˆè¦æ‰§è¡Œçš„ä½ç½®ï¼‰--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* service.UserServiceImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--UserServiceImpl.*(..) -ã€‹ UserServiceImplç±»ä¸‹çš„æ‰€ä»¥æ–¹æ³•(å‚æ•°)--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ‰§è¡Œç¯ç»•å¢åŠ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;log&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;afterLog&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointcut&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç¯ç»•,åœ¨id=&quot;pointcut&quot;çš„å‰ååˆ‡å…¥ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>execution(è¿”å›ç±»å‹ï¼Œç±»åï¼Œæ–¹æ³•å(å‚æ•°))<code>-&gt;</code>execution(_ com.service._,*(â€¦))</p><p>UserService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> ;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> ;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">query</span><span class="params">()</span> ;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>UserService çš„å®ç°ç±» UserServiceImp.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;addå¢&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;deleteåˆ &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;updateæ”¹&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">query</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;queryæŸ¥&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å‰ç½® Log.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> log;</span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.MethodBeforeAdvice;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Log</span> <span class="keyword">implements</span> <span class="title class_">MethodBeforeAdvice</span> &#123;</span><br><span class="line">    <span class="comment">//methodï¼šè¦æ‰§è¡Œçš„ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line">    <span class="comment">//argsï¼šå‚æ•°</span></span><br><span class="line">    <span class="comment">//targetï¼šç›®æ ‡å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(Method method, Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(target.getClass().getName()+<span class="string">&quot;çš„&quot;</span>+method.getName()+<span class="string">&quot;è¢«æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åç½® AfterLog.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> log;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.AfterReturningAdvice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AfterLog</span> <span class="keyword">implements</span> <span class="title class_">AfterReturningAdvice</span> &#123;</span><br><span class="line">    <span class="comment">//returnVaule: è¿”å›å€¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">(Object returnValue, Method method, Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†&quot;</span>+method.getName()+<span class="string">&quot;æ–¹æ³•ï¼Œè¿”å›å€¼æ˜¯&quot;</span>+returnValue);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç±» MyTest5</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"><span class="keyword">import</span> service.UserService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest5</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//æ³¨æ„:åŠ¨æ€ä»£ç†ä»£ç†çš„æ˜¯æ¥å£</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> (UserService) context.getBean(<span class="string">&quot;userservice&quot;</span>);</span><br><span class="line">        userService.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ–¹æ³•äºŒè‡ªå®šä¹‰ç±»å®ç°-aop"><a class="markdownIt-Anchor" href="#æ–¹æ³•äºŒè‡ªå®šä¹‰ç±»å®ç°-aop"></a> æ–¹æ³•äºŒï¼šè‡ªå®šä¹‰ç±»å®ç° AOP</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">                           https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                           http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">                           https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ³¨å†Œbean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userservice&quot;</span> <span class="attr">class</span>=<span class="string">&quot;service.UserServiceImpl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;log&quot;</span> <span class="attr">class</span>=<span class="string">&quot;log.Log&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;afterLog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;log.AfterLog&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ–¹å¼äºŒï¼Œè‡ªå®šä¹‰ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;diy&quot;</span> <span class="attr">class</span>=<span class="string">&quot;diy.DiyPointcut&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--è‡ªå®šä¹‰åˆ‡é¢--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;diy&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--åˆ‡å…¥ç‚¹--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;point&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* service.UserServiceImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;point&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;after&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;point&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> diy;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DiyPointcut</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ’å…¥åˆ°å‰é¢&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ’å…¥åˆ°åé¢&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest5</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//æ³¨æ„:åŠ¨æ€ä»£ç†ä»£ç†çš„æ˜¯æ¥å£</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> (UserService) context.getBean(<span class="string">&quot;userservice&quot;</span>);</span><br><span class="line">        userService.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ–¹æ³•ä¸‰ä½¿ç”¨æ³¨è§£å®ç°"><a class="markdownIt-Anchor" href="#æ–¹æ³•ä¸‰ä½¿ç”¨æ³¨è§£å®ç°"></a> æ–¹æ³•ä¸‰ï¼šä½¿ç”¨æ³¨è§£å®ç°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kuang.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.After;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Around;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationPointcut</span> &#123;</span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.kuang.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;---------æ–¹æ³•æ‰§è¡Œå‰---------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After(&quot;execution(* com.kuang.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;---------æ–¹æ³•æ‰§è¡Œå---------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;execution(* com.kuang.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">around</span><span class="params">(ProceedingJoinPoint jp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•å‰&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç­¾å:&quot;</span>+jp.getSignature());</span><br><span class="line">        <span class="comment">//æ‰§è¡Œç›®æ ‡æ–¹æ³•proceed</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">proceed</span> <span class="operator">=</span> jp.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•å&quot;</span>);</span><br><span class="line">        System.out.println(proceed);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒæ­¥ï¼šåœ¨ Spring é…ç½®æ–‡ä»¶ä¸­ï¼Œæ³¨å†Œ beanï¼Œå¹¶å¢åŠ æ”¯æŒæ³¨è§£çš„é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç¬¬ä¸‰ç§æ–¹å¼:æ³¨è§£å®ç°--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;annotationPointcut&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.config.AnnotationPointcut&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest5</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//æ³¨æ„:åŠ¨æ€ä»£ç†ä»£ç†çš„æ˜¯æ¥å£</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> (UserService) context.getBean(<span class="string">&quot;userservice&quot;</span>);</span><br><span class="line">        userService.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š<br /><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vd29fYmVsbC9QaWN0dXJlQmVkL3Jhdy9tYXN0ZXIvaW1hZ2UvaW1hZ2UtMjAyMDA4MDMxNzU2NDIwNjQucG5n?x-oss-process=image/format,png" alt="image-20200803175642064" /></p><p>aop:aspectj-autoproxyï¼šè¯´æ˜</p><p>é€šè¿‡ aop å‘½åç©ºé—´çš„&lt;aop:aspectj-autoproxy /&gt;å£°æ˜è‡ªåŠ¨ä¸º spring å®¹å™¨ä¸­é‚£äº›é…ç½®@aspectJ åˆ‡é¢çš„ bean åˆ›å»ºä»£ç†ï¼Œç»‡å…¥åˆ‡é¢ã€‚å½“ç„¶ï¼Œspring åœ¨å†…éƒ¨ä¾æ—§é‡‡ç”¨ AnnotationAwareAspectJAutoProxyCreator è¿›è¡Œè‡ªåŠ¨ä»£ç†çš„åˆ›å»ºå·¥ä½œï¼Œä½†å…·ä½“å®ç°çš„ç»†èŠ‚å·²ç»è¢«&lt;aop:aspectj-autoproxy /&gt;éšè—èµ·æ¥äº†</p><p>&lt;aop:aspectj-autoproxy /&gt;æœ‰ä¸€ä¸ª proxy-target-class å±æ€§ï¼Œé»˜è®¤ä¸º falseï¼Œè¡¨ç¤ºä½¿ç”¨ jdk åŠ¨æ€ä»£ç†ç»‡å…¥å¢å¼ºï¼Œå½“é…ä¸º&lt;aop:aspectj-autoproxy poxy-target-class=â€œtrueâ€/&gt;æ—¶ï¼Œè¡¨ç¤ºä½¿ç”¨ CGLib åŠ¨æ€ä»£ç†æŠ€æœ¯ç»‡å…¥å¢å¼ºã€‚ä¸è¿‡å³ä½¿ proxy-target-class è®¾ç½®ä¸º falseï¼Œå¦‚æœç›®æ ‡ç±»æ²¡æœ‰å£°æ˜æ¥å£ï¼Œåˆ™ spring å°†è‡ªåŠ¨ä½¿ç”¨ CGLib åŠ¨æ€ä»£ç†ã€‚</p><h3 id="aop-çš„æŠ€æœ¯å®ç°æ¡†æ¶"><a class="markdownIt-Anchor" href="#aop-çš„æŠ€æœ¯å®ç°æ¡†æ¶"></a> aop çš„æŠ€æœ¯å®ç°æ¡†æ¶:</h3><ol><li>spring:Spring åœ¨å†…éƒ¨å®ç°äº† aop çš„è§„èŒƒ,èƒ½åšäº† aop çš„å·¥ä½œ<ol><li>æˆ‘ä»¬é¡¹ç›®å¼€å‘ä¸­å¾ˆå°‘ä½¿ç”¨ Spring çš„ aop å®ç°,å› ä¸º spring çš„ aop æ¯”è¾ƒç¬¨é‡</li></ol></li><li>AspectJ:ä¸€ä¸ªå¼€æºçš„ä¸“é—¨å¤„ç† Aop çš„æ¡†æ¶,Spring æ¡†æ¶ä¸­é›†æˆäº† aspectj æ¡†æ¶,é€šè¿‡ spring å°±èƒ½ä½¿ç”¨ aspectj çš„åŠŸèƒ½<ol><li>ä½¿ç”¨ xml çš„é…ç½®æ–‡ä»¶:é…ç½®å…¨å±€äº‹åŠ¡</li><li>ä½¿ç”¨æ³¨è§£,æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­è¦åš aop åŠŸèƒ½,ä¸€èˆ¬éƒ½ç”¨æ³¨è§£,aspectj æœ‰äº”ä¸ªæ³¨è§£</li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
          <category> ç¼–ç¨‹ç¬”è®° </category>
          
          <category> Java </category>
          
          <category> Spring5ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
